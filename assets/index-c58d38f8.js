import*as En from"firebase/compat/app";import"firebase/compat/auth";import"firebase/compat/firestore";import Cl from"exceljs";import Nu from"jspdf";import Xc from"jszip";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function Qc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bu={exports:{}},Nl={},ku={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mo=Symbol.for("react.element"),Yc=Symbol.for("react.portal"),qc=Symbol.for("react.fragment"),Kc=Symbol.for("react.strict_mode"),Zc=Symbol.for("react.profiler"),Jc=Symbol.for("react.provider"),ef=Symbol.for("react.context"),tf=Symbol.for("react.forward_ref"),nf=Symbol.for("react.suspense"),rf=Symbol.for("react.memo"),of=Symbol.for("react.lazy"),sa=Symbol.iterator;function lf(e){return e===null||typeof e!="object"?null:(e=sa&&e[sa]||e["@@iterator"],typeof e=="function"?e:null)}var Eu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Tu=Object.assign,Iu={};function xr(e,t,n){this.props=e,this.context=t,this.refs=Iu,this.updater=n||Eu}xr.prototype.isReactComponent={};xr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Du(){}Du.prototype=xr.prototype;function us(e,t,n){this.props=e,this.context=t,this.refs=Iu,this.updater=n||Eu}var ds=us.prototype=new Du;ds.constructor=us;Tu(ds,xr.prototype);ds.isPureReactComponent=!0;var aa=Array.isArray,_u=Object.prototype.hasOwnProperty,cs={current:null},Mu={key:!0,ref:!0,__self:!0,__source:!0};function Pu(e,t,n){var r,o={},l=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)_u.call(t,r)&&!Mu.hasOwnProperty(r)&&(o[r]=t[r]);var a=arguments.length-2;if(a===1)o.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:mo,type:e,key:l,ref:i,props:o,_owner:cs.current}}function sf(e,t){return{$$typeof:mo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function fs(e){return typeof e=="object"&&e!==null&&e.$$typeof===mo}function af(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ua=/\/+/g;function Bl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?af(""+e.key):t.toString(36)}function $o(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case mo:case Yc:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Bl(i,0):r,aa(o)?(n="",e!=null&&(n=e.replace(ua,"$&/")+"/"),$o(o,t,n,"",function(c){return c})):o!=null&&(fs(o)&&(o=sf(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(ua,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",aa(e))for(var a=0;a<e.length;a++){l=e[a];var u=r+Bl(l,a);i+=$o(l,t,n,u,o)}else if(u=lf(e),typeof u=="function")for(e=u.call(e),a=0;!(l=e.next()).done;)l=l.value,u=r+Bl(l,a++),i+=$o(l,t,n,u,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function xo(e,t,n){if(e==null)return e;var r=[],o=0;return $o(e,r,"","",function(l){return t.call(n,l,o++)}),r}function uf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ve={current:null},jo={transition:null},df={ReactCurrentDispatcher:Ve,ReactCurrentBatchConfig:jo,ReactCurrentOwner:cs};function Au(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:xo,forEach:function(e,t,n){xo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xo(e,function(){t++}),t},toArray:function(e){return xo(e,function(t){return t})||[]},only:function(e){if(!fs(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=xr;ne.Fragment=qc;ne.Profiler=Zc;ne.PureComponent=us;ne.StrictMode=Kc;ne.Suspense=nf;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=df;ne.act=Au;ne.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Tu({},e.props),o=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=cs.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)_u.call(t,u)&&!Mu.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:mo,type:e.type,key:o,ref:l,props:r,_owner:i}};ne.createContext=function(e){return e={$$typeof:ef,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Jc,_context:e},e.Consumer=e};ne.createElement=Pu;ne.createFactory=function(e){var t=Pu.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:tf,render:e}};ne.isValidElement=fs;ne.lazy=function(e){return{$$typeof:of,_payload:{_status:-1,_result:e},_init:uf}};ne.memo=function(e,t){return{$$typeof:rf,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=jo.transition;jo.transition={};try{e()}finally{jo.transition=t}};ne.unstable_act=Au;ne.useCallback=function(e,t){return Ve.current.useCallback(e,t)};ne.useContext=function(e){return Ve.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return Ve.current.useDeferredValue(e)};ne.useEffect=function(e,t){return Ve.current.useEffect(e,t)};ne.useId=function(){return Ve.current.useId()};ne.useImperativeHandle=function(e,t,n){return Ve.current.useImperativeHandle(e,t,n)};ne.useInsertionEffect=function(e,t){return Ve.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return Ve.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return Ve.current.useMemo(e,t)};ne.useReducer=function(e,t,n){return Ve.current.useReducer(e,t,n)};ne.useRef=function(e){return Ve.current.useRef(e)};ne.useState=function(e){return Ve.current.useState(e)};ne.useSyncExternalStore=function(e,t,n){return Ve.current.useSyncExternalStore(e,t,n)};ne.useTransition=function(){return Ve.current.useTransition()};ne.version="18.3.1";ku.exports=ne;var _=ku.exports;const Ln=Qc(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cf=_,ff=Symbol.for("react.element"),pf=Symbol.for("react.fragment"),mf=Object.prototype.hasOwnProperty,hf=cf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gf={key:!0,ref:!0,__self:!0,__source:!0};function Lu(e,t,n){var r,o={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)mf.call(t,r)&&!gf.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:ff,type:e,key:l,ref:i,props:o,_owner:hf.current}}Nl.Fragment=pf;Nl.jsx=Lu;Nl.jsxs=Lu;bu.exports=Nl;var ps=bu.exports;const On=ps.Fragment,s=ps.jsx,w=ps.jsxs;var hi={},Ou={exports:{}},lt={},zu={exports:{}},Fu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,j){var H=M.length;M.push(j);e:for(;0<H;){var G=H-1>>>1,K=M[G];if(0<o(K,j))M[G]=j,M[H]=K,H=G;else break e}}function n(M){return M.length===0?null:M[0]}function r(M){if(M.length===0)return null;var j=M[0],H=M.pop();if(H!==j){M[0]=H;e:for(var G=0,K=M.length,yt=K>>>1;G<yt;){var ye=2*(G+1)-1,xe=M[ye],Xe=ye+1,vt=M[Xe];if(0>o(xe,H))Xe<K&&0>o(vt,xe)?(M[G]=vt,M[Xe]=H,G=Xe):(M[G]=xe,M[ye]=H,G=ye);else if(Xe<K&&0>o(vt,H))M[G]=vt,M[Xe]=H,G=Xe;else break e}}return j}function o(M,j){var H=M.sortIndex-j.sortIndex;return H!==0?H:M.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,a=i.now();e.unstable_now=function(){return i.now()-a}}var u=[],c=[],p=1,h=null,m=3,v=!1,y=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,f=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function d(M){for(var j=n(c);j!==null;){if(j.callback===null)r(c);else if(j.startTime<=M)r(c),j.sortIndex=j.expirationTime,t(u,j);else break;j=n(c)}}function x(M){if(N=!1,d(M),!y)if(n(u)!==null)y=!0,O(b);else{var j=n(c);j!==null&&B(x,j.startTime-M)}}function b(M,j){y=!1,N&&(N=!1,g(E),E=-1),v=!0;var H=m;try{for(d(j),h=n(u);h!==null&&(!(h.expirationTime>j)||M&&!I());){var G=h.callback;if(typeof G=="function"){h.callback=null,m=h.priorityLevel;var K=G(h.expirationTime<=j);j=e.unstable_now(),typeof K=="function"?h.callback=K:h===n(u)&&r(u),d(j)}else r(u);h=n(u)}if(h!==null)var yt=!0;else{var ye=n(c);ye!==null&&B(x,ye.startTime-j),yt=!1}return yt}finally{h=null,m=H,v=!1}}var C=!1,S=null,E=-1,k=5,T=-1;function I(){return!(e.unstable_now()-T<k)}function F(){if(S!==null){var M=e.unstable_now();T=M;var j=!0;try{j=S(!0,M)}finally{j?z():(C=!1,S=null)}}else C=!1}var z;if(typeof f=="function")z=function(){f(F)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,q=W.port2;W.port1.onmessage=F,z=function(){q.postMessage(null)}}else z=function(){D(F,0)};function O(M){S=M,C||(C=!0,z())}function B(M,j){E=D(function(){M(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,O(b))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(M){switch(m){case 1:case 2:case 3:var j=3;break;default:j=m}var H=m;m=j;try{return M()}finally{m=H}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,j){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var H=m;m=M;try{return j()}finally{m=H}},e.unstable_scheduleCallback=function(M,j,H){var G=e.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?G+H:G):H=G,M){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=H+K,M={id:p++,callback:j,priorityLevel:M,startTime:H,expirationTime:K,sortIndex:-1},H>G?(M.sortIndex=H,t(c,M),n(u)===null&&M===n(c)&&(N?(g(E),E=-1):N=!0,B(x,H-G))):(M.sortIndex=K,t(u,M),y||v||(y=!0,O(b))),M},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(M){var j=m;return function(){var H=m;m=j;try{return M.apply(this,arguments)}finally{m=H}}}})(Fu);zu.exports=Fu;var yf=zu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=_,ot=yf;function L(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ru=new Set,qr={};function Bn(e,t){fr(e,t),fr(e+"Capture",t)}function fr(e,t){for(qr[e]=t,e=0;e<t.length;e++)Ru.add(t[e])}var Vt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gi=Object.prototype.hasOwnProperty,xf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,da={},ca={};function wf(e){return gi.call(ca,e)?!0:gi.call(da,e)?!1:xf.test(e)?ca[e]=!0:(da[e]=!0,!1)}function Sf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Cf(e,t,n,r){if(t===null||typeof t>"u"||Sf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ge(e,t,n,r,o,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var Fe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fe[e]=new Ge(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fe[t]=new Ge(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fe[e]=new Ge(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fe[e]=new Ge(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fe[e]=new Ge(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fe[e]=new Ge(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fe[e]=new Ge(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fe[e]=new Ge(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fe[e]=new Ge(e,5,!1,e.toLowerCase(),null,!1,!1)});var ms=/[\-:]([a-z])/g;function hs(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ms,hs);Fe[t]=new Ge(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ms,hs);Fe[t]=new Ge(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ms,hs);Fe[t]=new Ge(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fe[e]=new Ge(e,1,!1,e.toLowerCase(),null,!1,!1)});Fe.xlinkHref=new Ge("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fe[e]=new Ge(e,1,!1,e.toLowerCase(),null,!0,!0)});function gs(e,t,n,r){var o=Fe.hasOwnProperty(t)?Fe[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Cf(t,n,o,r)&&(n=null),r||o===null?wf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Yt=vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wo=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),ys=Symbol.for("react.strict_mode"),yi=Symbol.for("react.profiler"),$u=Symbol.for("react.provider"),ju=Symbol.for("react.context"),vs=Symbol.for("react.forward_ref"),vi=Symbol.for("react.suspense"),xi=Symbol.for("react.suspense_list"),xs=Symbol.for("react.memo"),nn=Symbol.for("react.lazy"),Hu=Symbol.for("react.offscreen"),fa=Symbol.iterator;function Tr(e){return e===null||typeof e!="object"?null:(e=fa&&e[fa]||e["@@iterator"],typeof e=="function"?e:null)}var ge=Object.assign,Ul;function Fr(e){if(Ul===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Ul=t&&t[1]||""}return`
`+Ul+e}var Wl=!1;function Vl(e,t){if(!e||Wl)return"";Wl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),l=r.stack.split(`
`),i=o.length-1,a=l.length-1;1<=i&&0<=a&&o[i]!==l[a];)a--;for(;1<=i&&0<=a;i--,a--)if(o[i]!==l[a]){if(i!==1||a!==1)do if(i--,a--,0>a||o[i]!==l[a]){var u=`
`+o[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=a);break}}}finally{Wl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fr(e):""}function Nf(e){switch(e.tag){case 5:return Fr(e.type);case 16:return Fr("Lazy");case 13:return Fr("Suspense");case 19:return Fr("SuspenseList");case 0:case 2:case 15:return e=Vl(e.type,!1),e;case 11:return e=Vl(e.type.render,!1),e;case 1:return e=Vl(e.type,!0),e;default:return""}}function wi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Yn:return"Fragment";case Qn:return"Portal";case yi:return"Profiler";case ys:return"StrictMode";case vi:return"Suspense";case xi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ju:return(e.displayName||"Context")+".Consumer";case $u:return(e._context.displayName||"Context")+".Provider";case vs:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xs:return t=e.displayName||null,t!==null?t:wi(e.type)||"Memo";case nn:t=e._payload,e=e._init;try{return wi(e(t))}catch{}}return null}function bf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wi(t);case 8:return t===ys?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function yn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Bu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function kf(e){var t=Bu(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function So(e){e._valueTracker||(e._valueTracker=kf(e))}function Uu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Bu(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ko(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Si(e,t){var n=t.checked;return ge({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function pa(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=yn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Wu(e,t){t=t.checked,t!=null&&gs(e,"checked",t,!1)}function Ci(e,t){Wu(e,t);var n=yn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ni(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ni(e,t.type,yn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ma(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ni(e,t,n){(t!=="number"||Ko(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Rr=Array.isArray;function ir(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+yn(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function bi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(L(91));return ge({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ha(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(L(92));if(Rr(n)){if(1<n.length)throw Error(L(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:yn(n)}}function Vu(e,t){var n=yn(t.value),r=yn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function ga(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Gu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ki(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Gu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Co,Xu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Co=Co||document.createElement("div"),Co.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Co.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Kr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Hr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ef=["Webkit","ms","Moz","O"];Object.keys(Hr).forEach(function(e){Ef.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Hr[t]=Hr[e]})});function Qu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Hr.hasOwnProperty(e)&&Hr[e]?(""+t).trim():t+"px"}function Yu(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Qu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var Tf=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ei(e,t){if(t){if(Tf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(L(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(L(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(L(61))}if(t.style!=null&&typeof t.style!="object")throw Error(L(62))}}function Ti(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ii=null;function ws(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Di=null,sr=null,ar=null;function ya(e){if(e=yo(e)){if(typeof Di!="function")throw Error(L(280));var t=e.stateNode;t&&(t=Il(t),Di(e.stateNode,e.type,t))}}function qu(e){sr?ar?ar.push(e):ar=[e]:sr=e}function Ku(){if(sr){var e=sr,t=ar;if(ar=sr=null,ya(e),t)for(e=0;e<t.length;e++)ya(t[e])}}function Zu(e,t){return e(t)}function Ju(){}var Gl=!1;function ed(e,t,n){if(Gl)return e(t,n);Gl=!0;try{return Zu(e,t,n)}finally{Gl=!1,(sr!==null||ar!==null)&&(Ju(),Ku())}}function Zr(e,t){var n=e.stateNode;if(n===null)return null;var r=Il(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(L(231,t,typeof n));return n}var _i=!1;if(Vt)try{var Ir={};Object.defineProperty(Ir,"passive",{get:function(){_i=!0}}),window.addEventListener("test",Ir,Ir),window.removeEventListener("test",Ir,Ir)}catch{_i=!1}function If(e,t,n,r,o,l,i,a,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(p){this.onError(p)}}var Br=!1,Zo=null,Jo=!1,Mi=null,Df={onError:function(e){Br=!0,Zo=e}};function _f(e,t,n,r,o,l,i,a,u){Br=!1,Zo=null,If.apply(Df,arguments)}function Mf(e,t,n,r,o,l,i,a,u){if(_f.apply(this,arguments),Br){if(Br){var c=Zo;Br=!1,Zo=null}else throw Error(L(198));Jo||(Jo=!0,Mi=c)}}function Un(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function td(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function va(e){if(Un(e)!==e)throw Error(L(188))}function Pf(e){var t=e.alternate;if(!t){if(t=Un(e),t===null)throw Error(L(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return va(o),e;if(l===r)return va(o),t;l=l.sibling}throw Error(L(188))}if(n.return!==r.return)n=o,r=l;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=l;break}if(a===r){i=!0,r=o,n=l;break}a=a.sibling}if(!i){for(a=l.child;a;){if(a===n){i=!0,n=l,r=o;break}if(a===r){i=!0,r=l,n=o;break}a=a.sibling}if(!i)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?e:t}function nd(e){return e=Pf(e),e!==null?rd(e):null}function rd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=rd(e);if(t!==null)return t;e=e.sibling}return null}var od=ot.unstable_scheduleCallback,xa=ot.unstable_cancelCallback,Af=ot.unstable_shouldYield,Lf=ot.unstable_requestPaint,Ce=ot.unstable_now,Of=ot.unstable_getCurrentPriorityLevel,Ss=ot.unstable_ImmediatePriority,ld=ot.unstable_UserBlockingPriority,el=ot.unstable_NormalPriority,zf=ot.unstable_LowPriority,id=ot.unstable_IdlePriority,bl=null,Ft=null;function Ff(e){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(bl,e,void 0,(e.current.flags&128)===128)}catch{}}var Tt=Math.clz32?Math.clz32:jf,Rf=Math.log,$f=Math.LN2;function jf(e){return e>>>=0,e===0?32:31-(Rf(e)/$f|0)|0}var No=64,bo=4194304;function $r(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tl(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var a=i&~o;a!==0?r=$r(a):(l&=i,l!==0&&(r=$r(l)))}else i=n&~o,i!==0?r=$r(i):l!==0&&(r=$r(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tt(t),o=1<<n,r|=e[n],t&=~o;return r}function Hf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bf(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Tt(l),a=1<<i,u=o[i];u===-1?(!(a&n)||a&r)&&(o[i]=Hf(a,t)):u<=t&&(e.expiredLanes|=a),l&=~a}}function Pi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function sd(){var e=No;return No<<=1,!(No&4194240)&&(No=64),e}function Xl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ho(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tt(t),e[t]=n}function Uf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-Tt(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Cs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var ae=0;function ad(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ud,Ns,dd,cd,fd,Ai=!1,ko=[],un=null,dn=null,cn=null,Jr=new Map,eo=new Map,on=[],Wf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wa(e,t){switch(e){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":dn=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":Jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":eo.delete(t.pointerId)}}function Dr(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=yo(t),t!==null&&Ns(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Vf(e,t,n,r,o){switch(t){case"focusin":return un=Dr(un,e,t,n,r,o),!0;case"dragenter":return dn=Dr(dn,e,t,n,r,o),!0;case"mouseover":return cn=Dr(cn,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return Jr.set(l,Dr(Jr.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,eo.set(l,Dr(eo.get(l)||null,e,t,n,r,o)),!0}return!1}function pd(e){var t=Tn(e.target);if(t!==null){var n=Un(t);if(n!==null){if(t=n.tag,t===13){if(t=td(n),t!==null){e.blockedOn=t,fd(e.priority,function(){dd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ho(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Li(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ii=r,n.target.dispatchEvent(r),Ii=null}else return t=yo(n),t!==null&&Ns(t),e.blockedOn=n,!1;t.shift()}return!0}function Sa(e,t,n){Ho(e)&&n.delete(t)}function Gf(){Ai=!1,un!==null&&Ho(un)&&(un=null),dn!==null&&Ho(dn)&&(dn=null),cn!==null&&Ho(cn)&&(cn=null),Jr.forEach(Sa),eo.forEach(Sa)}function _r(e,t){e.blockedOn===t&&(e.blockedOn=null,Ai||(Ai=!0,ot.unstable_scheduleCallback(ot.unstable_NormalPriority,Gf)))}function to(e){function t(o){return _r(o,e)}if(0<ko.length){_r(ko[0],e);for(var n=1;n<ko.length;n++){var r=ko[n];r.blockedOn===e&&(r.blockedOn=null)}}for(un!==null&&_r(un,e),dn!==null&&_r(dn,e),cn!==null&&_r(cn,e),Jr.forEach(t),eo.forEach(t),n=0;n<on.length;n++)r=on[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<on.length&&(n=on[0],n.blockedOn===null);)pd(n),n.blockedOn===null&&on.shift()}var ur=Yt.ReactCurrentBatchConfig,nl=!0;function Xf(e,t,n,r){var o=ae,l=ur.transition;ur.transition=null;try{ae=1,bs(e,t,n,r)}finally{ae=o,ur.transition=l}}function Qf(e,t,n,r){var o=ae,l=ur.transition;ur.transition=null;try{ae=4,bs(e,t,n,r)}finally{ae=o,ur.transition=l}}function bs(e,t,n,r){if(nl){var o=Li(e,t,n,r);if(o===null)ri(e,t,r,rl,n),wa(e,r);else if(Vf(o,e,t,n,r))r.stopPropagation();else if(wa(e,r),t&4&&-1<Wf.indexOf(e)){for(;o!==null;){var l=yo(o);if(l!==null&&ud(l),l=Li(e,t,n,r),l===null&&ri(e,t,r,rl,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else ri(e,t,r,null,n)}}var rl=null;function Li(e,t,n,r){if(rl=null,e=ws(r),e=Tn(e),e!==null)if(t=Un(e),t===null)e=null;else if(n=t.tag,n===13){if(e=td(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rl=e,null}function md(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Of()){case Ss:return 1;case ld:return 4;case el:case zf:return 16;case id:return 536870912;default:return 16}default:return 16}}var sn=null,ks=null,Bo=null;function hd(){if(Bo)return Bo;var e,t=ks,n=t.length,r,o="value"in sn?sn.value:sn.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[l-r];r++);return Bo=o.slice(e,1<r?1-r:void 0)}function Uo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Eo(){return!0}function Ca(){return!1}function it(e){function t(n,r,o,l,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Eo:Ca,this.isPropagationStopped=Ca,this}return ge(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),t}var wr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Es=it(wr),go=ge({},wr,{view:0,detail:0}),Yf=it(go),Ql,Yl,Mr,kl=ge({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ts,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mr&&(Mr&&e.type==="mousemove"?(Ql=e.screenX-Mr.screenX,Yl=e.screenY-Mr.screenY):Yl=Ql=0,Mr=e),Ql)},movementY:function(e){return"movementY"in e?e.movementY:Yl}}),Na=it(kl),qf=ge({},kl,{dataTransfer:0}),Kf=it(qf),Zf=ge({},go,{relatedTarget:0}),ql=it(Zf),Jf=ge({},wr,{animationName:0,elapsedTime:0,pseudoElement:0}),ep=it(Jf),tp=ge({},wr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),np=it(tp),rp=ge({},wr,{data:0}),ba=it(rp),op={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ip[e])?!!t[e]:!1}function Ts(){return sp}var ap=ge({},go,{key:function(e){if(e.key){var t=op[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Uo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?lp[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ts,charCode:function(e){return e.type==="keypress"?Uo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Uo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),up=it(ap),dp=ge({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ka=it(dp),cp=ge({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ts}),fp=it(cp),pp=ge({},wr,{propertyName:0,elapsedTime:0,pseudoElement:0}),mp=it(pp),hp=ge({},kl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),gp=it(hp),yp=[9,13,27,32],Is=Vt&&"CompositionEvent"in window,Ur=null;Vt&&"documentMode"in document&&(Ur=document.documentMode);var vp=Vt&&"TextEvent"in window&&!Ur,gd=Vt&&(!Is||Ur&&8<Ur&&11>=Ur),Ea=String.fromCharCode(32),Ta=!1;function yd(e,t){switch(e){case"keyup":return yp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qn=!1;function xp(e,t){switch(e){case"compositionend":return vd(t);case"keypress":return t.which!==32?null:(Ta=!0,Ea);case"textInput":return e=t.data,e===Ea&&Ta?null:e;default:return null}}function wp(e,t){if(qn)return e==="compositionend"||!Is&&yd(e,t)?(e=hd(),Bo=ks=sn=null,qn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gd&&t.locale!=="ko"?null:t.data;default:return null}}var Sp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ia(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Sp[e.type]:t==="textarea"}function xd(e,t,n,r){qu(r),t=ol(t,"onChange"),0<t.length&&(n=new Es("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wr=null,no=null;function Cp(e){_d(e,0)}function El(e){var t=Jn(e);if(Uu(t))return e}function Np(e,t){if(e==="change")return t}var wd=!1;if(Vt){var Kl;if(Vt){var Zl="oninput"in document;if(!Zl){var Da=document.createElement("div");Da.setAttribute("oninput","return;"),Zl=typeof Da.oninput=="function"}Kl=Zl}else Kl=!1;wd=Kl&&(!document.documentMode||9<document.documentMode)}function _a(){Wr&&(Wr.detachEvent("onpropertychange",Sd),no=Wr=null)}function Sd(e){if(e.propertyName==="value"&&El(no)){var t=[];xd(t,no,e,ws(e)),ed(Cp,t)}}function bp(e,t,n){e==="focusin"?(_a(),Wr=t,no=n,Wr.attachEvent("onpropertychange",Sd)):e==="focusout"&&_a()}function kp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return El(no)}function Ep(e,t){if(e==="click")return El(t)}function Tp(e,t){if(e==="input"||e==="change")return El(t)}function Ip(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dt=typeof Object.is=="function"?Object.is:Ip;function ro(e,t){if(Dt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!gi.call(t,o)||!Dt(e[o],t[o]))return!1}return!0}function Ma(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Pa(e,t){var n=Ma(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ma(n)}}function Cd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Cd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nd(){for(var e=window,t=Ko();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ko(e.document)}return t}function Ds(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Dp(e){var t=Nd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Cd(n.ownerDocument.documentElement,n)){if(r!==null&&Ds(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=Pa(n,l);var i=Pa(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _p=Vt&&"documentMode"in document&&11>=document.documentMode,Kn=null,Oi=null,Vr=null,zi=!1;function Aa(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;zi||Kn==null||Kn!==Ko(r)||(r=Kn,"selectionStart"in r&&Ds(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vr&&ro(Vr,r)||(Vr=r,r=ol(Oi,"onSelect"),0<r.length&&(t=new Es("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kn)))}function To(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Zn={animationend:To("Animation","AnimationEnd"),animationiteration:To("Animation","AnimationIteration"),animationstart:To("Animation","AnimationStart"),transitionend:To("Transition","TransitionEnd")},Jl={},bd={};Vt&&(bd=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function Tl(e){if(Jl[e])return Jl[e];if(!Zn[e])return e;var t=Zn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in bd)return Jl[e]=t[n];return e}var kd=Tl("animationend"),Ed=Tl("animationiteration"),Td=Tl("animationstart"),Id=Tl("transitionend"),Dd=new Map,La="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){Dd.set(e,t),Bn(t,[e])}for(var ei=0;ei<La.length;ei++){var ti=La[ei],Mp=ti.toLowerCase(),Pp=ti[0].toUpperCase()+ti.slice(1);xn(Mp,"on"+Pp)}xn(kd,"onAnimationEnd");xn(Ed,"onAnimationIteration");xn(Td,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(Id,"onTransitionEnd");fr("onMouseEnter",["mouseout","mouseover"]);fr("onMouseLeave",["mouseout","mouseover"]);fr("onPointerEnter",["pointerout","pointerover"]);fr("onPointerLeave",["pointerout","pointerover"]);Bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ap=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Oa(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Mf(r,t,void 0,e),e.currentTarget=null}function _d(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var i=r.length-1;0<=i;i--){var a=r[i],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==l&&o.isPropagationStopped())break e;Oa(o,a,c),l=u}else for(i=0;i<r.length;i++){if(a=r[i],u=a.instance,c=a.currentTarget,a=a.listener,u!==l&&o.isPropagationStopped())break e;Oa(o,a,c),l=u}}}if(Jo)throw e=Mi,Jo=!1,Mi=null,e}function de(e,t){var n=t[Hi];n===void 0&&(n=t[Hi]=new Set);var r=e+"__bubble";n.has(r)||(Md(t,e,2,!1),n.add(r))}function ni(e,t,n){var r=0;t&&(r|=4),Md(n,e,r,t)}var Io="_reactListening"+Math.random().toString(36).slice(2);function oo(e){if(!e[Io]){e[Io]=!0,Ru.forEach(function(n){n!=="selectionchange"&&(Ap.has(n)||ni(n,!1,e),ni(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Io]||(t[Io]=!0,ni("selectionchange",!1,t))}}function Md(e,t,n,r){switch(md(t)){case 1:var o=Xf;break;case 4:o=Qf;break;default:o=bs}n=o.bind(null,t,n,e),o=void 0,!_i||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ri(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var u=i.tag;if((u===3||u===4)&&(u=i.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;i=i.return}for(;a!==null;){if(i=Tn(a),i===null)return;if(u=i.tag,u===5||u===6){r=l=i;continue e}a=a.parentNode}}r=r.return}ed(function(){var c=l,p=ws(n),h=[];e:{var m=Dd.get(e);if(m!==void 0){var v=Es,y=e;switch(e){case"keypress":if(Uo(n)===0)break e;case"keydown":case"keyup":v=up;break;case"focusin":y="focus",v=ql;break;case"focusout":y="blur",v=ql;break;case"beforeblur":case"afterblur":v=ql;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Kf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=fp;break;case kd:case Ed:case Td:v=ep;break;case Id:v=mp;break;case"scroll":v=Yf;break;case"wheel":v=gp;break;case"copy":case"cut":case"paste":v=np;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=ka}var N=(t&4)!==0,D=!N&&e==="scroll",g=N?m!==null?m+"Capture":null:m;N=[];for(var f=c,d;f!==null;){d=f;var x=d.stateNode;if(d.tag===5&&x!==null&&(d=x,g!==null&&(x=Zr(f,g),x!=null&&N.push(lo(f,x,d)))),D)break;f=f.return}0<N.length&&(m=new v(m,y,null,n,p),h.push({event:m,listeners:N}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==Ii&&(y=n.relatedTarget||n.fromElement)&&(Tn(y)||y[Gt]))break e;if((v||m)&&(m=p.window===p?p:(m=p.ownerDocument)?m.defaultView||m.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=c,y=y?Tn(y):null,y!==null&&(D=Un(y),y!==D||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=c),v!==y)){if(N=Na,x="onMouseLeave",g="onMouseEnter",f="mouse",(e==="pointerout"||e==="pointerover")&&(N=ka,x="onPointerLeave",g="onPointerEnter",f="pointer"),D=v==null?m:Jn(v),d=y==null?m:Jn(y),m=new N(x,f+"leave",v,n,p),m.target=D,m.relatedTarget=d,x=null,Tn(p)===c&&(N=new N(g,f+"enter",y,n,p),N.target=d,N.relatedTarget=D,x=N),D=x,v&&y)t:{for(N=v,g=y,f=0,d=N;d;d=Gn(d))f++;for(d=0,x=g;x;x=Gn(x))d++;for(;0<f-d;)N=Gn(N),f--;for(;0<d-f;)g=Gn(g),d--;for(;f--;){if(N===g||g!==null&&N===g.alternate)break t;N=Gn(N),g=Gn(g)}N=null}else N=null;v!==null&&za(h,m,v,N,!1),y!==null&&D!==null&&za(h,D,y,N,!0)}}e:{if(m=c?Jn(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var b=Np;else if(Ia(m))if(wd)b=Tp;else{b=kp;var C=bp}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(b=Ep);if(b&&(b=b(e,c))){xd(h,b,n,p);break e}C&&C(e,m,c),e==="focusout"&&(C=m._wrapperState)&&C.controlled&&m.type==="number"&&Ni(m,"number",m.value)}switch(C=c?Jn(c):window,e){case"focusin":(Ia(C)||C.contentEditable==="true")&&(Kn=C,Oi=c,Vr=null);break;case"focusout":Vr=Oi=Kn=null;break;case"mousedown":zi=!0;break;case"contextmenu":case"mouseup":case"dragend":zi=!1,Aa(h,n,p);break;case"selectionchange":if(_p)break;case"keydown":case"keyup":Aa(h,n,p)}var S;if(Is)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else qn?yd(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(gd&&n.locale!=="ko"&&(qn||E!=="onCompositionStart"?E==="onCompositionEnd"&&qn&&(S=hd()):(sn=p,ks="value"in sn?sn.value:sn.textContent,qn=!0)),C=ol(c,E),0<C.length&&(E=new ba(E,e,null,n,p),h.push({event:E,listeners:C}),S?E.data=S:(S=vd(n),S!==null&&(E.data=S)))),(S=vp?xp(e,n):wp(e,n))&&(c=ol(c,"onBeforeInput"),0<c.length&&(p=new ba("onBeforeInput","beforeinput",null,n,p),h.push({event:p,listeners:c}),p.data=S))}_d(h,t)})}function lo(e,t,n){return{instance:e,listener:t,currentTarget:n}}function ol(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Zr(e,n),l!=null&&r.unshift(lo(e,l,o)),l=Zr(e,t),l!=null&&r.push(lo(e,l,o))),e=e.return}return r}function Gn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function za(e,t,n,r,o){for(var l=t._reactName,i=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,o?(u=Zr(n,l),u!=null&&i.unshift(lo(n,u,a))):o||(u=Zr(n,l),u!=null&&i.push(lo(n,u,a)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var Lp=/\r\n?/g,Op=/\u0000|\uFFFD/g;function Fa(e){return(typeof e=="string"?e:""+e).replace(Lp,`
`).replace(Op,"")}function Do(e,t,n){if(t=Fa(t),Fa(e)!==t&&n)throw Error(L(425))}function ll(){}var Fi=null,Ri=null;function $i(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ji=typeof setTimeout=="function"?setTimeout:void 0,zp=typeof clearTimeout=="function"?clearTimeout:void 0,Ra=typeof Promise=="function"?Promise:void 0,Fp=typeof queueMicrotask=="function"?queueMicrotask:typeof Ra<"u"?function(e){return Ra.resolve(null).then(e).catch(Rp)}:ji;function Rp(e){setTimeout(function(){throw e})}function oi(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),to(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);to(t)}function fn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $a(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sr=Math.random().toString(36).slice(2),zt="__reactFiber$"+Sr,io="__reactProps$"+Sr,Gt="__reactContainer$"+Sr,Hi="__reactEvents$"+Sr,$p="__reactListeners$"+Sr,jp="__reactHandles$"+Sr;function Tn(e){var t=e[zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Gt]||n[zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$a(e);e!==null;){if(n=e[zt])return n;e=$a(e)}return t}e=n,n=e.parentNode}return null}function yo(e){return e=e[zt]||e[Gt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(L(33))}function Il(e){return e[io]||null}var Bi=[],er=-1;function wn(e){return{current:e}}function ce(e){0>er||(e.current=Bi[er],Bi[er]=null,er--)}function ue(e,t){er++,Bi[er]=e.current,e.current=t}var vn={},He=wn(vn),Ze=wn(!1),zn=vn;function pr(e,t){var n=e.type.contextTypes;if(!n)return vn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Je(e){return e=e.childContextTypes,e!=null}function il(){ce(Ze),ce(He)}function ja(e,t,n){if(He.current!==vn)throw Error(L(168));ue(He,t),ue(Ze,n)}function Pd(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(L(108,bf(e)||"Unknown",o));return ge({},n,r)}function sl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vn,zn=He.current,ue(He,e),ue(Ze,Ze.current),!0}function Ha(e,t,n){var r=e.stateNode;if(!r)throw Error(L(169));n?(e=Pd(e,t,zn),r.__reactInternalMemoizedMergedChildContext=e,ce(Ze),ce(He),ue(He,e)):ce(Ze),ue(Ze,n)}var Ht=null,Dl=!1,li=!1;function Ad(e){Ht===null?Ht=[e]:Ht.push(e)}function Hp(e){Dl=!0,Ad(e)}function Sn(){if(!li&&Ht!==null){li=!0;var e=0,t=ae;try{var n=Ht;for(ae=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ht=null,Dl=!1}catch(o){throw Ht!==null&&(Ht=Ht.slice(e+1)),od(Ss,Sn),o}finally{ae=t,li=!1}}return null}var tr=[],nr=0,al=null,ul=0,ct=[],ft=0,Fn=null,Bt=1,Ut="";function bn(e,t){tr[nr++]=ul,tr[nr++]=al,al=e,ul=t}function Ld(e,t,n){ct[ft++]=Bt,ct[ft++]=Ut,ct[ft++]=Fn,Fn=e;var r=Bt;e=Ut;var o=32-Tt(r)-1;r&=~(1<<o),n+=1;var l=32-Tt(t)+o;if(30<l){var i=o-o%5;l=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Bt=1<<32-Tt(t)+o|n<<o|r,Ut=l+e}else Bt=1<<l|n<<o|r,Ut=e}function _s(e){e.return!==null&&(bn(e,1),Ld(e,1,0))}function Ms(e){for(;e===al;)al=tr[--nr],tr[nr]=null,ul=tr[--nr],tr[nr]=null;for(;e===Fn;)Fn=ct[--ft],ct[ft]=null,Ut=ct[--ft],ct[ft]=null,Bt=ct[--ft],ct[ft]=null}var rt=null,nt=null,fe=!1,kt=null;function Od(e,t){var n=pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ba(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,rt=e,nt=fn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,rt=e,nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Fn!==null?{id:Bt,overflow:Ut}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,rt=e,nt=null,!0):!1;default:return!1}}function Ui(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Wi(e){if(fe){var t=nt;if(t){var n=t;if(!Ba(e,t)){if(Ui(e))throw Error(L(418));t=fn(n.nextSibling);var r=rt;t&&Ba(e,t)?Od(r,n):(e.flags=e.flags&-4097|2,fe=!1,rt=e)}}else{if(Ui(e))throw Error(L(418));e.flags=e.flags&-4097|2,fe=!1,rt=e}}}function Ua(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;rt=e}function _o(e){if(e!==rt)return!1;if(!fe)return Ua(e),fe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!$i(e.type,e.memoizedProps)),t&&(t=nt)){if(Ui(e))throw zd(),Error(L(418));for(;t;)Od(e,t),t=fn(t.nextSibling)}if(Ua(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(L(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){nt=fn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}nt=null}}else nt=rt?fn(e.stateNode.nextSibling):null;return!0}function zd(){for(var e=nt;e;)e=fn(e.nextSibling)}function mr(){nt=rt=null,fe=!1}function Ps(e){kt===null?kt=[e]:kt.push(e)}var Bp=Yt.ReactCurrentBatchConfig;function Pr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var a=o.refs;i===null?delete a[l]:a[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,e))}return e}function Mo(e,t){throw e=Object.prototype.toString.call(t),Error(L(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){var t=e._init;return t(e._payload)}function Fd(e){function t(g,f){if(e){var d=g.deletions;d===null?(g.deletions=[f],g.flags|=16):d.push(f)}}function n(g,f){if(!e)return null;for(;f!==null;)t(g,f),f=f.sibling;return null}function r(g,f){for(g=new Map;f!==null;)f.key!==null?g.set(f.key,f):g.set(f.index,f),f=f.sibling;return g}function o(g,f){return g=gn(g,f),g.index=0,g.sibling=null,g}function l(g,f,d){return g.index=d,e?(d=g.alternate,d!==null?(d=d.index,d<f?(g.flags|=2,f):d):(g.flags|=2,f)):(g.flags|=1048576,f)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,f,d,x){return f===null||f.tag!==6?(f=fi(d,g.mode,x),f.return=g,f):(f=o(f,d),f.return=g,f)}function u(g,f,d,x){var b=d.type;return b===Yn?p(g,f,d.props.children,x,d.key):f!==null&&(f.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===nn&&Wa(b)===f.type)?(x=o(f,d.props),x.ref=Pr(g,f,d),x.return=g,x):(x=qo(d.type,d.key,d.props,null,g.mode,x),x.ref=Pr(g,f,d),x.return=g,x)}function c(g,f,d,x){return f===null||f.tag!==4||f.stateNode.containerInfo!==d.containerInfo||f.stateNode.implementation!==d.implementation?(f=pi(d,g.mode,x),f.return=g,f):(f=o(f,d.children||[]),f.return=g,f)}function p(g,f,d,x,b){return f===null||f.tag!==7?(f=Mn(d,g.mode,x,b),f.return=g,f):(f=o(f,d),f.return=g,f)}function h(g,f,d){if(typeof f=="string"&&f!==""||typeof f=="number")return f=fi(""+f,g.mode,d),f.return=g,f;if(typeof f=="object"&&f!==null){switch(f.$$typeof){case wo:return d=qo(f.type,f.key,f.props,null,g.mode,d),d.ref=Pr(g,null,f),d.return=g,d;case Qn:return f=pi(f,g.mode,d),f.return=g,f;case nn:var x=f._init;return h(g,x(f._payload),d)}if(Rr(f)||Tr(f))return f=Mn(f,g.mode,d,null),f.return=g,f;Mo(g,f)}return null}function m(g,f,d,x){var b=f!==null?f.key:null;if(typeof d=="string"&&d!==""||typeof d=="number")return b!==null?null:a(g,f,""+d,x);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case wo:return d.key===b?u(g,f,d,x):null;case Qn:return d.key===b?c(g,f,d,x):null;case nn:return b=d._init,m(g,f,b(d._payload),x)}if(Rr(d)||Tr(d))return b!==null?null:p(g,f,d,x,null);Mo(g,d)}return null}function v(g,f,d,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(d)||null,a(f,g,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case wo:return g=g.get(x.key===null?d:x.key)||null,u(f,g,x,b);case Qn:return g=g.get(x.key===null?d:x.key)||null,c(f,g,x,b);case nn:var C=x._init;return v(g,f,d,C(x._payload),b)}if(Rr(x)||Tr(x))return g=g.get(d)||null,p(f,g,x,b,null);Mo(f,x)}return null}function y(g,f,d,x){for(var b=null,C=null,S=f,E=f=0,k=null;S!==null&&E<d.length;E++){S.index>E?(k=S,S=null):k=S.sibling;var T=m(g,S,d[E],x);if(T===null){S===null&&(S=k);break}e&&S&&T.alternate===null&&t(g,S),f=l(T,f,E),C===null?b=T:C.sibling=T,C=T,S=k}if(E===d.length)return n(g,S),fe&&bn(g,E),b;if(S===null){for(;E<d.length;E++)S=h(g,d[E],x),S!==null&&(f=l(S,f,E),C===null?b=S:C.sibling=S,C=S);return fe&&bn(g,E),b}for(S=r(g,S);E<d.length;E++)k=v(S,g,E,d[E],x),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?E:k.key),f=l(k,f,E),C===null?b=k:C.sibling=k,C=k);return e&&S.forEach(function(I){return t(g,I)}),fe&&bn(g,E),b}function N(g,f,d,x){var b=Tr(d);if(typeof b!="function")throw Error(L(150));if(d=b.call(d),d==null)throw Error(L(151));for(var C=b=null,S=f,E=f=0,k=null,T=d.next();S!==null&&!T.done;E++,T=d.next()){S.index>E?(k=S,S=null):k=S.sibling;var I=m(g,S,T.value,x);if(I===null){S===null&&(S=k);break}e&&S&&I.alternate===null&&t(g,S),f=l(I,f,E),C===null?b=I:C.sibling=I,C=I,S=k}if(T.done)return n(g,S),fe&&bn(g,E),b;if(S===null){for(;!T.done;E++,T=d.next())T=h(g,T.value,x),T!==null&&(f=l(T,f,E),C===null?b=T:C.sibling=T,C=T);return fe&&bn(g,E),b}for(S=r(g,S);!T.done;E++,T=d.next())T=v(S,g,E,T.value,x),T!==null&&(e&&T.alternate!==null&&S.delete(T.key===null?E:T.key),f=l(T,f,E),C===null?b=T:C.sibling=T,C=T);return e&&S.forEach(function(F){return t(g,F)}),fe&&bn(g,E),b}function D(g,f,d,x){if(typeof d=="object"&&d!==null&&d.type===Yn&&d.key===null&&(d=d.props.children),typeof d=="object"&&d!==null){switch(d.$$typeof){case wo:e:{for(var b=d.key,C=f;C!==null;){if(C.key===b){if(b=d.type,b===Yn){if(C.tag===7){n(g,C.sibling),f=o(C,d.props.children),f.return=g,g=f;break e}}else if(C.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===nn&&Wa(b)===C.type){n(g,C.sibling),f=o(C,d.props),f.ref=Pr(g,C,d),f.return=g,g=f;break e}n(g,C);break}else t(g,C);C=C.sibling}d.type===Yn?(f=Mn(d.props.children,g.mode,x,d.key),f.return=g,g=f):(x=qo(d.type,d.key,d.props,null,g.mode,x),x.ref=Pr(g,f,d),x.return=g,g=x)}return i(g);case Qn:e:{for(C=d.key;f!==null;){if(f.key===C)if(f.tag===4&&f.stateNode.containerInfo===d.containerInfo&&f.stateNode.implementation===d.implementation){n(g,f.sibling),f=o(f,d.children||[]),f.return=g,g=f;break e}else{n(g,f);break}else t(g,f);f=f.sibling}f=pi(d,g.mode,x),f.return=g,g=f}return i(g);case nn:return C=d._init,D(g,f,C(d._payload),x)}if(Rr(d))return y(g,f,d,x);if(Tr(d))return N(g,f,d,x);Mo(g,d)}return typeof d=="string"&&d!==""||typeof d=="number"?(d=""+d,f!==null&&f.tag===6?(n(g,f.sibling),f=o(f,d),f.return=g,g=f):(n(g,f),f=fi(d,g.mode,x),f.return=g,g=f),i(g)):n(g,f)}return D}var hr=Fd(!0),Rd=Fd(!1),dl=wn(null),cl=null,rr=null,As=null;function Ls(){As=rr=cl=null}function Os(e){var t=dl.current;ce(dl),e._currentValue=t}function Vi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function dr(e,t){cl=e,As=rr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ke=!0),e.firstContext=null)}function ht(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},rr===null){if(cl===null)throw Error(L(308));rr=e,cl.dependencies={lanes:0,firstContext:e}}else rr=rr.next=e;return t}var In=null;function zs(e){In===null?In=[e]:In.push(e)}function $d(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,zs(t)):(n.next=o.next,o.next=n),t.interleaved=n,Xt(e,r)}function Xt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var rn=!1;function Fs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Xt(e,n)}return o=r.interleaved,o===null?(t.next=t,zs(r)):(t.next=o.next,o.next=t),r.interleaved=t,Xt(e,n)}function Wo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cs(e,n)}}function Va(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fl(e,t,n,r){var o=e.updateQueue;rn=!1;var l=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var u=a,c=u.next;u.next=null,i===null?l=c:i.next=c,i=u;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==i&&(a===null?p.firstBaseUpdate=c:a.next=c,p.lastBaseUpdate=u))}if(l!==null){var h=o.baseState;i=0,p=c=u=null,a=l;do{var m=a.lane,v=a.eventTime;if((r&m)===m){p!==null&&(p=p.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,N=a;switch(m=t,v=n,N.tag){case 1:if(y=N.payload,typeof y=="function"){h=y.call(v,h,m);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=N.payload,m=typeof y=="function"?y.call(v,h,m):y,m==null)break e;h=ge({},h,m);break e;case 2:rn=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(c=p=v,u=h):p=p.next=v,i|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;m=a,a=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(1);if(p===null&&(u=h),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=p,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);$n|=i,e.lanes=i,e.memoizedState=h}}function Ga(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(L(191,o));o.call(r)}}}var vo={},Rt=wn(vo),so=wn(vo),ao=wn(vo);function Dn(e){if(e===vo)throw Error(L(174));return e}function Rs(e,t){switch(ue(ao,t),ue(so,e),ue(Rt,vo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ki(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ki(t,e)}ce(Rt),ue(Rt,t)}function gr(){ce(Rt),ce(so),ce(ao)}function Hd(e){Dn(ao.current);var t=Dn(Rt.current),n=ki(t,e.type);t!==n&&(ue(so,e),ue(Rt,n))}function $s(e){so.current===e&&(ce(Rt),ce(so))}var me=wn(0);function pl(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ii=[];function js(){for(var e=0;e<ii.length;e++)ii[e]._workInProgressVersionPrimary=null;ii.length=0}var Vo=Yt.ReactCurrentDispatcher,si=Yt.ReactCurrentBatchConfig,Rn=0,he=null,Ie=null,Pe=null,ml=!1,Gr=!1,uo=0,Up=0;function Re(){throw Error(L(321))}function Hs(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Dt(e[n],t[n]))return!1;return!0}function Bs(e,t,n,r,o,l){if(Rn=l,he=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Vo.current=e===null||e.memoizedState===null?Xp:Qp,e=n(r,o),Gr){l=0;do{if(Gr=!1,uo=0,25<=l)throw Error(L(301));l+=1,Pe=Ie=null,t.updateQueue=null,Vo.current=Yp,e=n(r,o)}while(Gr)}if(Vo.current=hl,t=Ie!==null&&Ie.next!==null,Rn=0,Pe=Ie=he=null,ml=!1,t)throw Error(L(300));return e}function Us(){var e=uo!==0;return uo=0,e}function Ot(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?he.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function gt(){if(Ie===null){var e=he.alternate;e=e!==null?e.memoizedState:null}else e=Ie.next;var t=Pe===null?he.memoizedState:Pe.next;if(t!==null)Pe=t,Ie=e;else{if(e===null)throw Error(L(310));Ie=e,e={memoizedState:Ie.memoizedState,baseState:Ie.baseState,baseQueue:Ie.baseQueue,queue:Ie.queue,next:null},Pe===null?he.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function co(e,t){return typeof t=="function"?t(e):t}function ai(e){var t=gt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=Ie,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var i=o.next;o.next=l.next,l.next=i}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var a=i=null,u=null,c=l;do{var p=c.lane;if((Rn&p)===p)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var h={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=h,i=r):u=u.next=h,he.lanes|=p,$n|=p}c=c.next}while(c!==null&&c!==l);u===null?i=r:u.next=a,Dt(r,t.memoizedState)||(Ke=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,he.lanes|=l,$n|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ui(e){var t=gt(),n=t.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do l=e(l,i.action),i=i.next;while(i!==o);Dt(l,t.memoizedState)||(Ke=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Bd(){}function Ud(e,t){var n=he,r=gt(),o=t(),l=!Dt(r.memoizedState,o);if(l&&(r.memoizedState=o,Ke=!0),r=r.queue,Ws(Gd.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||Pe!==null&&Pe.memoizedState.tag&1){if(n.flags|=2048,fo(9,Vd.bind(null,n,r,o,t),void 0,null),Ae===null)throw Error(L(349));Rn&30||Wd(n,t,o)}return o}function Wd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Vd(e,t,n,r){t.value=n,t.getSnapshot=r,Xd(t)&&Qd(e)}function Gd(e,t,n){return n(function(){Xd(t)&&Qd(e)})}function Xd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Dt(e,n)}catch{return!0}}function Qd(e){var t=Xt(e,1);t!==null&&It(t,e,1,-1)}function Xa(e){var t=Ot();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:co,lastRenderedState:e},t.queue=e,e=e.dispatch=Gp.bind(null,he,e),[t.memoizedState,e]}function fo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=he.updateQueue,t===null?(t={lastEffect:null,stores:null},he.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Yd(){return gt().memoizedState}function Go(e,t,n,r){var o=Ot();he.flags|=e,o.memoizedState=fo(1|t,n,void 0,r===void 0?null:r)}function _l(e,t,n,r){var o=gt();r=r===void 0?null:r;var l=void 0;if(Ie!==null){var i=Ie.memoizedState;if(l=i.destroy,r!==null&&Hs(r,i.deps)){o.memoizedState=fo(t,n,l,r);return}}he.flags|=e,o.memoizedState=fo(1|t,n,l,r)}function Qa(e,t){return Go(8390656,8,e,t)}function Ws(e,t){return _l(2048,8,e,t)}function qd(e,t){return _l(4,2,e,t)}function Kd(e,t){return _l(4,4,e,t)}function Zd(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Jd(e,t,n){return n=n!=null?n.concat([e]):null,_l(4,4,Zd.bind(null,t,e),n)}function Vs(){}function ec(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hs(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function tc(e,t){var n=gt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Hs(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function nc(e,t,n){return Rn&21?(Dt(n,t)||(n=sd(),he.lanes|=n,$n|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ke=!0),e.memoizedState=n)}function Wp(e,t){var n=ae;ae=n!==0&&4>n?n:4,e(!0);var r=si.transition;si.transition={};try{e(!1),t()}finally{ae=n,si.transition=r}}function rc(){return gt().memoizedState}function Vp(e,t,n){var r=hn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},oc(e))lc(t,n);else if(n=$d(e,t,n,r),n!==null){var o=We();It(n,e,r,o),ic(n,t,r)}}function Gp(e,t,n){var r=hn(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(oc(e))lc(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,a=l(i,n);if(o.hasEagerState=!0,o.eagerState=a,Dt(a,i)){var u=t.interleaved;u===null?(o.next=o,zs(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=$d(e,t,o,r),n!==null&&(o=We(),It(n,e,r,o),ic(n,t,r))}}function oc(e){var t=e.alternate;return e===he||t!==null&&t===he}function lc(e,t){Gr=ml=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ic(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Cs(e,n)}}var hl={readContext:ht,useCallback:Re,useContext:Re,useEffect:Re,useImperativeHandle:Re,useInsertionEffect:Re,useLayoutEffect:Re,useMemo:Re,useReducer:Re,useRef:Re,useState:Re,useDebugValue:Re,useDeferredValue:Re,useTransition:Re,useMutableSource:Re,useSyncExternalStore:Re,useId:Re,unstable_isNewReconciler:!1},Xp={readContext:ht,useCallback:function(e,t){return Ot().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:Qa,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Go(4194308,4,Zd.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Go(4194308,4,e,t)},useInsertionEffect:function(e,t){return Go(4,2,e,t)},useMemo:function(e,t){var n=Ot();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ot();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Vp.bind(null,he,e),[r.memoizedState,e]},useRef:function(e){var t=Ot();return e={current:e},t.memoizedState=e},useState:Xa,useDebugValue:Vs,useDeferredValue:function(e){return Ot().memoizedState=e},useTransition:function(){var e=Xa(!1),t=e[0];return e=Wp.bind(null,e[1]),Ot().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=he,o=Ot();if(fe){if(n===void 0)throw Error(L(407));n=n()}else{if(n=t(),Ae===null)throw Error(L(349));Rn&30||Wd(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,Qa(Gd.bind(null,r,l,e),[e]),r.flags|=2048,fo(9,Vd.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Ot(),t=Ae.identifierPrefix;if(fe){var n=Ut,r=Bt;n=(r&~(1<<32-Tt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=uo++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Up++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qp={readContext:ht,useCallback:ec,useContext:ht,useEffect:Ws,useImperativeHandle:Jd,useInsertionEffect:qd,useLayoutEffect:Kd,useMemo:tc,useReducer:ai,useRef:Yd,useState:function(){return ai(co)},useDebugValue:Vs,useDeferredValue:function(e){var t=gt();return nc(t,Ie.memoizedState,e)},useTransition:function(){var e=ai(co)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Bd,useSyncExternalStore:Ud,useId:rc,unstable_isNewReconciler:!1},Yp={readContext:ht,useCallback:ec,useContext:ht,useEffect:Ws,useImperativeHandle:Jd,useInsertionEffect:qd,useLayoutEffect:Kd,useMemo:tc,useReducer:ui,useRef:Yd,useState:function(){return ui(co)},useDebugValue:Vs,useDeferredValue:function(e){var t=gt();return Ie===null?t.memoizedState=e:nc(t,Ie.memoizedState,e)},useTransition:function(){var e=ui(co)[0],t=gt().memoizedState;return[e,t]},useMutableSource:Bd,useSyncExternalStore:Ud,useId:rc,unstable_isNewReconciler:!1};function Nt(e,t){if(e&&e.defaultProps){t=ge({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Gi(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ge({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ml={isMounted:function(e){return(e=e._reactInternals)?Un(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=We(),o=hn(e),l=Wt(r,o);l.payload=t,n!=null&&(l.callback=n),t=pn(e,l,o),t!==null&&(It(t,e,o,r),Wo(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=We(),o=hn(e),l=Wt(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=pn(e,l,o),t!==null&&(It(t,e,o,r),Wo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=We(),r=hn(e),o=Wt(n,r);o.tag=2,t!=null&&(o.callback=t),t=pn(e,o,r),t!==null&&(It(t,e,r,n),Wo(t,e,r))}};function Ya(e,t,n,r,o,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,i):t.prototype&&t.prototype.isPureReactComponent?!ro(n,r)||!ro(o,l):!0}function sc(e,t,n){var r=!1,o=vn,l=t.contextType;return typeof l=="object"&&l!==null?l=ht(l):(o=Je(t)?zn:He.current,r=t.contextTypes,l=(r=r!=null)?pr(e,o):vn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ml,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function qa(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ml.enqueueReplaceState(t,t.state,null)}function Xi(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Fs(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=ht(l):(l=Je(t)?zn:He.current,o.context=pr(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Gi(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Ml.enqueueReplaceState(o,o.state,null),fl(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function yr(e,t){try{var n="",r=t;do n+=Nf(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function di(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var qp=typeof WeakMap=="function"?WeakMap:Map;function ac(e,t,n){n=Wt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){yl||(yl=!0,os=r),Qi(e,t)},n}function uc(e,t,n){n=Wt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Qi(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Qi(e,t),typeof r!="function"&&(mn===null?mn=new Set([this]):mn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Ka(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new qp;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=dm.bind(null,e,t,n),t.then(e,e))}function Za(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Ja(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Wt(-1,1),t.tag=2,pn(n,t,1))),n.lanes|=1),e)}var Kp=Yt.ReactCurrentOwner,Ke=!1;function Ue(e,t,n,r){t.child=e===null?Rd(t,null,n,r):hr(t,e.child,n,r)}function eu(e,t,n,r,o){n=n.render;var l=t.ref;return dr(t,o),r=Bs(e,t,n,r,l,o),n=Us(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Qt(e,t,o)):(fe&&n&&_s(t),t.flags|=1,Ue(e,t,r,o),t.child)}function tu(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Js(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,dc(e,t,l,r,o)):(e=qo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:ro,n(i,r)&&e.ref===t.ref)return Qt(e,t,o)}return t.flags|=1,e=gn(l,r),e.ref=t.ref,e.return=t,t.child=e}function dc(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(ro(l,r)&&e.ref===t.ref)if(Ke=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(Ke=!0);else return t.lanes=e.lanes,Qt(e,t,o)}return Yi(e,t,n,r,o)}function cc(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(lr,tt),tt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ue(lr,tt),tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ue(lr,tt),tt|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ue(lr,tt),tt|=r;return Ue(e,t,o,n),t.child}function fc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Yi(e,t,n,r,o){var l=Je(n)?zn:He.current;return l=pr(t,l),dr(t,o),n=Bs(e,t,n,r,l,o),r=Us(),e!==null&&!Ke?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Qt(e,t,o)):(fe&&r&&_s(t),t.flags|=1,Ue(e,t,n,o),t.child)}function nu(e,t,n,r,o){if(Je(n)){var l=!0;sl(t)}else l=!1;if(dr(t,o),t.stateNode===null)Xo(e,t),sc(t,n,r),Xi(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,a=t.memoizedProps;i.props=a;var u=i.context,c=n.contextType;typeof c=="object"&&c!==null?c=ht(c):(c=Je(n)?zn:He.current,c=pr(t,c));var p=n.getDerivedStateFromProps,h=typeof p=="function"||typeof i.getSnapshotBeforeUpdate=="function";h||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==r||u!==c)&&qa(t,i,r,c),rn=!1;var m=t.memoizedState;i.state=m,fl(t,r,i,o),u=t.memoizedState,a!==r||m!==u||Ze.current||rn?(typeof p=="function"&&(Gi(t,n,p,r),u=t.memoizedState),(a=rn||Ya(t,n,a,r,m,u,c))?(h||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),i.props=r,i.state=u,i.context=c,r=a):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,jd(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:Nt(t.type,a),i.props=c,h=t.pendingProps,m=i.context,u=n.contextType,typeof u=="object"&&u!==null?u=ht(u):(u=Je(n)?zn:He.current,u=pr(t,u));var v=n.getDerivedStateFromProps;(p=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(a!==h||m!==u)&&qa(t,i,r,u),rn=!1,m=t.memoizedState,i.state=m,fl(t,r,i,o);var y=t.memoizedState;a!==h||m!==y||Ze.current||rn?(typeof v=="function"&&(Gi(t,n,v,r),y=t.memoizedState),(c=rn||Ya(t,n,c,r,m,y,u)||!1)?(p||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,u),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,u)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=u,r=c):(typeof i.componentDidUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return qi(e,t,n,r,l,o)}function qi(e,t,n,r,o,l){fc(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Ha(t,n,!1),Qt(e,t,l);r=t.stateNode,Kp.current=t;var a=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=hr(t,e.child,null,l),t.child=hr(t,null,a,l)):Ue(e,t,a,l),t.memoizedState=r.state,o&&Ha(t,n,!0),t.child}function pc(e){var t=e.stateNode;t.pendingContext?ja(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ja(e,t.context,!1),Rs(e,t.containerInfo)}function ru(e,t,n,r,o){return mr(),Ps(o),t.flags|=256,Ue(e,t,n,r),t.child}var Ki={dehydrated:null,treeContext:null,retryLane:0};function Zi(e){return{baseLanes:e,cachePool:null,transitions:null}}function mc(e,t,n){var r=t.pendingProps,o=me.current,l=!1,i=(t.flags&128)!==0,a;if((a=i)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ue(me,o&1),e===null)return Wi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,l?(r=t.mode,l=t.child,i={mode:"hidden",children:i},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=Ll(i,r,0,null),e=Mn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Zi(n),t.memoizedState=Ki,e):Gs(t,i));if(o=e.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Zp(e,t,i,r,a,o,n);if(l){l=r.fallback,i=t.mode,o=e.child,a=o.sibling;var u={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=gn(o,u),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?l=gn(a,l):(l=Mn(l,i,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,i=e.child.memoizedState,i=i===null?Zi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=Ki,r}return l=e.child,e=l.sibling,r=gn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Gs(e,t){return t=Ll({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Po(e,t,n,r){return r!==null&&Ps(r),hr(t,e.child,null,n),e=Gs(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Zp(e,t,n,r,o,l,i){if(n)return t.flags&256?(t.flags&=-257,r=di(Error(L(422))),Po(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=Ll({mode:"visible",children:r.children},o,0,null),l=Mn(l,o,i,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&hr(t,e.child,null,i),t.child.memoizedState=Zi(i),t.memoizedState=Ki,l);if(!(t.mode&1))return Po(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,l=Error(L(419)),r=di(l,r,void 0),Po(e,t,i,r)}if(a=(i&e.childLanes)!==0,Ke||a){if(r=Ae,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Xt(e,o),It(r,e,o,-1))}return Zs(),r=di(Error(L(421))),Po(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=cm.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,nt=fn(o.nextSibling),rt=t,fe=!0,kt=null,e!==null&&(ct[ft++]=Bt,ct[ft++]=Ut,ct[ft++]=Fn,Bt=e.id,Ut=e.overflow,Fn=t),t=Gs(t,r.children),t.flags|=4096,t)}function ou(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Vi(e.return,t,n)}function ci(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function hc(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Ue(e,t,r.children,n),r=me.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ou(e,n,t);else if(e.tag===19)ou(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ue(me,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&pl(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),ci(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&pl(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}ci(t,!0,n,null,l);break;case"together":ci(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),$n|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(L(153));if(t.child!==null){for(e=t.child,n=gn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=gn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Jp(e,t,n){switch(t.tag){case 3:pc(t),mr();break;case 5:Hd(t);break;case 1:Je(t.type)&&sl(t);break;case 4:Rs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ue(dl,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ue(me,me.current&1),t.flags|=128,null):n&t.child.childLanes?mc(e,t,n):(ue(me,me.current&1),e=Qt(e,t,n),e!==null?e.sibling:null);ue(me,me.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return hc(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ue(me,me.current),r)break;return null;case 22:case 23:return t.lanes=0,cc(e,t,n)}return Qt(e,t,n)}var gc,Ji,yc,vc;gc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ji=function(){};yc=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Dn(Rt.current);var l=null;switch(n){case"input":o=Si(e,o),r=Si(e,r),l=[];break;case"select":o=ge({},o,{value:void 0}),r=ge({},r,{value:void 0}),l=[];break;case"textarea":o=bi(e,o),r=bi(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=ll)}Ei(n,r);var i;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(i in a)a.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(qr.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var u=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(i in a)!a.hasOwnProperty(i)||u&&u.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in u)u.hasOwnProperty(i)&&a[i]!==u[i]&&(n||(n={}),n[i]=u[i])}else n||(l||(l=[]),l.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(l=l||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(qr.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&de("scroll",e),l||a===u||(l=[])):(l=l||[]).push(c,u))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};vc=function(e,t,n,r){n!==r&&(t.flags|=4)};function Ar(e,t){if(!fe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $e(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function em(e,t,n){var r=t.pendingProps;switch(Ms(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $e(t),null;case 1:return Je(t.type)&&il(),$e(t),null;case 3:return r=t.stateNode,gr(),ce(Ze),ce(He),js(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(_o(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kt!==null&&(ss(kt),kt=null))),Ji(e,t),$e(t),null;case 5:$s(t);var o=Dn(ao.current);if(n=t.type,e!==null&&t.stateNode!=null)yc(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(L(166));return $e(t),null}if(e=Dn(Rt.current),_o(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[zt]=t,r[io]=l,e=(t.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(o=0;o<jr.length;o++)de(jr[o],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":pa(r,l),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},de("invalid",r);break;case"textarea":ha(r,l),de("invalid",r)}Ei(n,l),o=null;for(var i in l)if(l.hasOwnProperty(i)){var a=l[i];i==="children"?typeof a=="string"?r.textContent!==a&&(l.suppressHydrationWarning!==!0&&Do(r.textContent,a,e),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Do(r.textContent,a,e),o=["children",""+a]):qr.hasOwnProperty(i)&&a!=null&&i==="onScroll"&&de("scroll",r)}switch(n){case"input":So(r),ma(r,l,!0);break;case"textarea":So(r),ga(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=ll)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Gu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[zt]=t,e[io]=r,gc(e,t,!1,!1),t.stateNode=e;e:{switch(i=Ti(n,r),n){case"dialog":de("cancel",e),de("close",e),o=r;break;case"iframe":case"object":case"embed":de("load",e),o=r;break;case"video":case"audio":for(o=0;o<jr.length;o++)de(jr[o],e);o=r;break;case"source":de("error",e),o=r;break;case"img":case"image":case"link":de("error",e),de("load",e),o=r;break;case"details":de("toggle",e),o=r;break;case"input":pa(e,r),o=Si(e,r),de("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=ge({},r,{value:void 0}),de("invalid",e);break;case"textarea":ha(e,r),o=bi(e,r),de("invalid",e);break;default:o=r}Ei(n,o),a=o;for(l in a)if(a.hasOwnProperty(l)){var u=a[l];l==="style"?Yu(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Xu(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Kr(e,u):typeof u=="number"&&Kr(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(qr.hasOwnProperty(l)?u!=null&&l==="onScroll"&&de("scroll",e):u!=null&&gs(e,l,u,i))}switch(n){case"input":So(e),ma(e,r,!1);break;case"textarea":So(e),ga(e);break;case"option":r.value!=null&&e.setAttribute("value",""+yn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?ir(e,!!r.multiple,l,!1):r.defaultValue!=null&&ir(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=ll)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return $e(t),null;case 6:if(e&&t.stateNode!=null)vc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(L(166));if(n=Dn(ao.current),Dn(Rt.current),_o(t)){if(r=t.stateNode,n=t.memoizedProps,r[zt]=t,(l=r.nodeValue!==n)&&(e=rt,e!==null))switch(e.tag){case 3:Do(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Do(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zt]=t,t.stateNode=r}return $e(t),null;case 13:if(ce(me),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(fe&&nt!==null&&t.mode&1&&!(t.flags&128))zd(),mr(),t.flags|=98560,l=!1;else if(l=_o(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(L(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(L(317));l[zt]=t}else mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;$e(t),l=!1}else kt!==null&&(ss(kt),kt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||me.current&1?De===0&&(De=3):Zs())),t.updateQueue!==null&&(t.flags|=4),$e(t),null);case 4:return gr(),Ji(e,t),e===null&&oo(t.stateNode.containerInfo),$e(t),null;case 10:return Os(t.type._context),$e(t),null;case 17:return Je(t.type)&&il(),$e(t),null;case 19:if(ce(me),l=t.memoizedState,l===null)return $e(t),null;if(r=(t.flags&128)!==0,i=l.rendering,i===null)if(r)Ar(l,!1);else{if(De!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=pl(e),i!==null){for(t.flags|=128,Ar(l,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ue(me,me.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ce()>vr&&(t.flags|=128,r=!0,Ar(l,!1),t.lanes=4194304)}else{if(!r)if(e=pl(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Ar(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!fe)return $e(t),null}else 2*Ce()-l.renderingStartTime>vr&&n!==1073741824&&(t.flags|=128,r=!0,Ar(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ce(),t.sibling=null,n=me.current,ue(me,r?n&1|2:n&1),t):($e(t),null);case 22:case 23:return Ks(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?tt&1073741824&&($e(t),t.subtreeFlags&6&&(t.flags|=8192)):$e(t),null;case 24:return null;case 25:return null}throw Error(L(156,t.tag))}function tm(e,t){switch(Ms(t),t.tag){case 1:return Je(t.type)&&il(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return gr(),ce(Ze),ce(He),js(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return $s(t),null;case 13:if(ce(me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(L(340));mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ce(me),null;case 4:return gr(),null;case 10:return Os(t.type._context),null;case 22:case 23:return Ks(),null;case 24:return null;default:return null}}var Ao=!1,je=!1,nm=typeof WeakSet=="function"?WeakSet:Set,R=null;function or(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ve(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){ve(e,t,r)}}var lu=!1;function rm(e,t){if(Fi=nl,e=Nd(),Ds(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,a=-1,u=-1,c=0,p=0,h=e,m=null;t:for(;;){for(var v;h!==n||o!==0&&h.nodeType!==3||(a=i+o),h!==l||r!==0&&h.nodeType!==3||(u=i+r),h.nodeType===3&&(i+=h.nodeValue.length),(v=h.firstChild)!==null;)m=h,h=v;for(;;){if(h===e)break t;if(m===n&&++c===o&&(a=i),m===l&&++p===r&&(u=i),(v=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ri={focusedElem:e,selectionRange:n},nl=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var N=y.memoizedProps,D=y.memoizedState,g=t.stateNode,f=g.getSnapshotBeforeUpdate(t.elementType===t.type?N:Nt(t.type,N),D);g.__reactInternalSnapshotBeforeUpdate=f}break;case 3:var d=t.stateNode.containerInfo;d.nodeType===1?d.textContent="":d.nodeType===9&&d.documentElement&&d.removeChild(d.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(x){ve(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return y=lu,lu=!1,y}function Xr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&es(t,n,l)}o=o.next}while(o!==r)}}function Pl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xc(e){var t=e.alternate;t!==null&&(e.alternate=null,xc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zt],delete t[io],delete t[Hi],delete t[$p],delete t[jp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function wc(e){return e.tag===5||e.tag===3||e.tag===4}function iu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||wc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ns(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ll));else if(r!==4&&(e=e.child,e!==null))for(ns(e,t,n),e=e.sibling;e!==null;)ns(e,t,n),e=e.sibling}function rs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(rs(e,t,n),e=e.sibling;e!==null;)rs(e,t,n),e=e.sibling}var Oe=null,bt=!1;function tn(e,t,n){for(n=n.child;n!==null;)Sc(e,t,n),n=n.sibling}function Sc(e,t,n){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(bl,n)}catch{}switch(n.tag){case 5:je||or(n,t);case 6:var r=Oe,o=bt;Oe=null,tn(e,t,n),Oe=r,bt=o,Oe!==null&&(bt?(e=Oe,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Oe.removeChild(n.stateNode));break;case 18:Oe!==null&&(bt?(e=Oe,n=n.stateNode,e.nodeType===8?oi(e.parentNode,n):e.nodeType===1&&oi(e,n),to(e)):oi(Oe,n.stateNode));break;case 4:r=Oe,o=bt,Oe=n.stateNode.containerInfo,bt=!0,tn(e,t,n),Oe=r,bt=o;break;case 0:case 11:case 14:case 15:if(!je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&es(n,t,i),o=o.next}while(o!==r)}tn(e,t,n);break;case 1:if(!je&&(or(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ve(n,t,a)}tn(e,t,n);break;case 21:tn(e,t,n);break;case 22:n.mode&1?(je=(r=je)||n.memoizedState!==null,tn(e,t,n),je=r):tn(e,t,n);break;default:tn(e,t,n)}}function su(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new nm),t.forEach(function(r){var o=fm.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function St(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,i=t,a=i;e:for(;a!==null;){switch(a.tag){case 5:Oe=a.stateNode,bt=!1;break e;case 3:Oe=a.stateNode.containerInfo,bt=!0;break e;case 4:Oe=a.stateNode.containerInfo,bt=!0;break e}a=a.return}if(Oe===null)throw Error(L(160));Sc(l,i,o),Oe=null,bt=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){ve(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Cc(t,e),t=t.sibling}function Cc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(St(t,e),At(e),r&4){try{Xr(3,e,e.return),Pl(3,e)}catch(N){ve(e,e.return,N)}try{Xr(5,e,e.return)}catch(N){ve(e,e.return,N)}}break;case 1:St(t,e),At(e),r&512&&n!==null&&or(n,n.return);break;case 5:if(St(t,e),At(e),r&512&&n!==null&&or(n,n.return),e.flags&32){var o=e.stateNode;try{Kr(o,"")}catch(N){ve(e,e.return,N)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&Wu(o,l),Ti(a,i);var c=Ti(a,l);for(i=0;i<u.length;i+=2){var p=u[i],h=u[i+1];p==="style"?Yu(o,h):p==="dangerouslySetInnerHTML"?Xu(o,h):p==="children"?Kr(o,h):gs(o,p,h,c)}switch(a){case"input":Ci(o,l);break;case"textarea":Vu(o,l);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var v=l.value;v!=null?ir(o,!!l.multiple,v,!1):m!==!!l.multiple&&(l.defaultValue!=null?ir(o,!!l.multiple,l.defaultValue,!0):ir(o,!!l.multiple,l.multiple?[]:"",!1))}o[io]=l}catch(N){ve(e,e.return,N)}}break;case 6:if(St(t,e),At(e),r&4){if(e.stateNode===null)throw Error(L(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(N){ve(e,e.return,N)}}break;case 3:if(St(t,e),At(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{to(t.containerInfo)}catch(N){ve(e,e.return,N)}break;case 4:St(t,e),At(e);break;case 13:St(t,e),At(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(Ys=Ce())),r&4&&su(e);break;case 22:if(p=n!==null&&n.memoizedState!==null,e.mode&1?(je=(c=je)||p,St(t,e),je=c):St(t,e),At(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!p&&e.mode&1)for(R=e,p=e.child;p!==null;){for(h=R=p;R!==null;){switch(m=R,v=m.child,m.tag){case 0:case 11:case 14:case 15:Xr(4,m,m.return);break;case 1:or(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(N){ve(r,n,N)}}break;case 5:or(m,m.return);break;case 22:if(m.memoizedState!==null){uu(h);continue}}v!==null?(v.return=m,R=v):uu(h)}p=p.sibling}e:for(p=null,h=e;;){if(h.tag===5){if(p===null){p=h;try{o=h.stateNode,c?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=h.stateNode,u=h.memoizedProps.style,i=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Qu("display",i))}catch(N){ve(e,e.return,N)}}}else if(h.tag===6){if(p===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(N){ve(e,e.return,N)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;p===h&&(p=null),h=h.return}p===h&&(p=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:St(t,e),At(e),r&4&&su(e);break;case 21:break;default:St(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(wc(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Kr(o,""),r.flags&=-33);var l=iu(e);rs(e,l,o);break;case 3:case 4:var i=r.stateNode.containerInfo,a=iu(e);ns(e,a,i);break;default:throw Error(L(161))}}catch(u){ve(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function om(e,t,n){R=e,Nc(e)}function Nc(e,t,n){for(var r=(e.mode&1)!==0;R!==null;){var o=R,l=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||Ao;if(!i){var a=o.alternate,u=a!==null&&a.memoizedState!==null||je;a=Ao;var c=je;if(Ao=i,(je=u)&&!c)for(R=o;R!==null;)i=R,u=i.child,i.tag===22&&i.memoizedState!==null?du(o):u!==null?(u.return=i,R=u):du(o);for(;l!==null;)R=l,Nc(l),l=l.sibling;R=o,Ao=a,je=c}au(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,R=l):au(e)}}function au(e){for(;R!==null;){var t=R;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:je||Pl(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!je)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Nt(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ga(t,l,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ga(t,i,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var h=p.dehydrated;h!==null&&to(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}je||t.flags&512&&ts(t)}catch(m){ve(t,t.return,m)}}if(t===e){R=null;break}if(n=t.sibling,n!==null){n.return=t.return,R=n;break}R=t.return}}function uu(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var n=t.sibling;if(n!==null){n.return=t.return,R=n;break}R=t.return}}function du(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Pl(4,t)}catch(u){ve(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){ve(t,o,u)}}var l=t.return;try{ts(t)}catch(u){ve(t,l,u)}break;case 5:var i=t.return;try{ts(t)}catch(u){ve(t,i,u)}}}catch(u){ve(t,t.return,u)}if(t===e){R=null;break}var a=t.sibling;if(a!==null){a.return=t.return,R=a;break}R=t.return}}var lm=Math.ceil,gl=Yt.ReactCurrentDispatcher,Xs=Yt.ReactCurrentOwner,mt=Yt.ReactCurrentBatchConfig,le=0,Ae=null,Ee=null,ze=0,tt=0,lr=wn(0),De=0,po=null,$n=0,Al=0,Qs=0,Qr=null,Ye=null,Ys=0,vr=1/0,jt=null,yl=!1,os=null,mn=null,Lo=!1,an=null,vl=0,Yr=0,ls=null,Qo=-1,Yo=0;function We(){return le&6?Ce():Qo!==-1?Qo:Qo=Ce()}function hn(e){return e.mode&1?le&2&&ze!==0?ze&-ze:Bp.transition!==null?(Yo===0&&(Yo=sd()),Yo):(e=ae,e!==0||(e=window.event,e=e===void 0?16:md(e.type)),e):1}function It(e,t,n,r){if(50<Yr)throw Yr=0,ls=null,Error(L(185));ho(e,n,r),(!(le&2)||e!==Ae)&&(e===Ae&&(!(le&2)&&(Al|=n),De===4&&ln(e,ze)),et(e,r),n===1&&le===0&&!(t.mode&1)&&(vr=Ce()+500,Dl&&Sn()))}function et(e,t){var n=e.callbackNode;Bf(e,t);var r=tl(e,e===Ae?ze:0);if(r===0)n!==null&&xa(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&xa(n),t===1)e.tag===0?Hp(cu.bind(null,e)):Ad(cu.bind(null,e)),Fp(function(){!(le&6)&&Sn()}),n=null;else{switch(ad(r)){case 1:n=Ss;break;case 4:n=ld;break;case 16:n=el;break;case 536870912:n=id;break;default:n=el}n=Mc(n,bc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function bc(e,t){if(Qo=-1,Yo=0,le&6)throw Error(L(327));var n=e.callbackNode;if(cr()&&e.callbackNode!==n)return null;var r=tl(e,e===Ae?ze:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xl(e,r);else{t=r;var o=le;le|=2;var l=Ec();(Ae!==e||ze!==t)&&(jt=null,vr=Ce()+500,_n(e,t));do try{am();break}catch(a){kc(e,a)}while(1);Ls(),gl.current=l,le=o,Ee!==null?t=0:(Ae=null,ze=0,t=De)}if(t!==0){if(t===2&&(o=Pi(e),o!==0&&(r=o,t=is(e,o))),t===1)throw n=po,_n(e,0),ln(e,r),et(e,Ce()),n;if(t===6)ln(e,r);else{if(o=e.current.alternate,!(r&30)&&!im(o)&&(t=xl(e,r),t===2&&(l=Pi(e),l!==0&&(r=l,t=is(e,l))),t===1))throw n=po,_n(e,0),ln(e,r),et(e,Ce()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(L(345));case 2:kn(e,Ye,jt);break;case 3:if(ln(e,r),(r&130023424)===r&&(t=Ys+500-Ce(),10<t)){if(tl(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){We(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ji(kn.bind(null,e,Ye,jt),t);break}kn(e,Ye,jt);break;case 4:if(ln(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-Tt(r);l=1<<i,i=t[i],i>o&&(o=i),r&=~l}if(r=o,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*lm(r/1960))-r,10<r){e.timeoutHandle=ji(kn.bind(null,e,Ye,jt),r);break}kn(e,Ye,jt);break;case 5:kn(e,Ye,jt);break;default:throw Error(L(329))}}}return et(e,Ce()),e.callbackNode===n?bc.bind(null,e):null}function is(e,t){var n=Qr;return e.current.memoizedState.isDehydrated&&(_n(e,t).flags|=256),e=xl(e,t),e!==2&&(t=Ye,Ye=n,t!==null&&ss(t)),e}function ss(e){Ye===null?Ye=e:Ye.push.apply(Ye,e)}function im(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!Dt(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ln(e,t){for(t&=~Qs,t&=~Al,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tt(t),r=1<<n;e[n]=-1,t&=~r}}function cu(e){if(le&6)throw Error(L(327));cr();var t=tl(e,0);if(!(t&1))return et(e,Ce()),null;var n=xl(e,t);if(e.tag!==0&&n===2){var r=Pi(e);r!==0&&(t=r,n=is(e,r))}if(n===1)throw n=po,_n(e,0),ln(e,t),et(e,Ce()),n;if(n===6)throw Error(L(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kn(e,Ye,jt),et(e,Ce()),null}function qs(e,t){var n=le;le|=1;try{return e(t)}finally{le=n,le===0&&(vr=Ce()+500,Dl&&Sn())}}function jn(e){an!==null&&an.tag===0&&!(le&6)&&cr();var t=le;le|=1;var n=mt.transition,r=ae;try{if(mt.transition=null,ae=1,e)return e()}finally{ae=r,mt.transition=n,le=t,!(le&6)&&Sn()}}function Ks(){tt=lr.current,ce(lr)}function _n(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,zp(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(Ms(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&il();break;case 3:gr(),ce(Ze),ce(He),js();break;case 5:$s(r);break;case 4:gr();break;case 13:ce(me);break;case 19:ce(me);break;case 10:Os(r.type._context);break;case 22:case 23:Ks()}n=n.return}if(Ae=e,Ee=e=gn(e.current,null),ze=tt=t,De=0,po=null,Qs=Al=$n=0,Ye=Qr=null,In!==null){for(t=0;t<In.length;t++)if(n=In[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var i=l.next;l.next=o,r.next=i}n.pending=r}In=null}return e}function kc(e,t){do{var n=Ee;try{if(Ls(),Vo.current=hl,ml){for(var r=he.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}ml=!1}if(Rn=0,Pe=Ie=he=null,Gr=!1,uo=0,Xs.current=null,n===null||n.return===null){De=1,po=t,Ee=null;break}e:{var l=e,i=n.return,a=n,u=t;if(t=ze,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,p=a,h=p.tag;if(!(p.mode&1)&&(h===0||h===11||h===15)){var m=p.alternate;m?(p.updateQueue=m.updateQueue,p.memoizedState=m.memoizedState,p.lanes=m.lanes):(p.updateQueue=null,p.memoizedState=null)}var v=Za(i);if(v!==null){v.flags&=-257,Ja(v,i,a,l,t),v.mode&1&&Ka(l,c,t),t=v,u=c;var y=t.updateQueue;if(y===null){var N=new Set;N.add(u),t.updateQueue=N}else y.add(u);break e}else{if(!(t&1)){Ka(l,c,t),Zs();break e}u=Error(L(426))}}else if(fe&&a.mode&1){var D=Za(i);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Ja(D,i,a,l,t),Ps(yr(u,a));break e}}l=u=yr(u,a),De!==4&&(De=2),Qr===null?Qr=[l]:Qr.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=ac(l,u,t);Va(l,g);break e;case 1:a=u;var f=l.type,d=l.stateNode;if(!(l.flags&128)&&(typeof f.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(mn===null||!mn.has(d)))){l.flags|=65536,t&=-t,l.lanes|=t;var x=uc(l,a,t);Va(l,x);break e}}l=l.return}while(l!==null)}Ic(n)}catch(b){t=b,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(1)}function Ec(){var e=gl.current;return gl.current=hl,e===null?hl:e}function Zs(){(De===0||De===3||De===2)&&(De=4),Ae===null||!($n&268435455)&&!(Al&268435455)||ln(Ae,ze)}function xl(e,t){var n=le;le|=2;var r=Ec();(Ae!==e||ze!==t)&&(jt=null,_n(e,t));do try{sm();break}catch(o){kc(e,o)}while(1);if(Ls(),le=n,gl.current=r,Ee!==null)throw Error(L(261));return Ae=null,ze=0,De}function sm(){for(;Ee!==null;)Tc(Ee)}function am(){for(;Ee!==null&&!Af();)Tc(Ee)}function Tc(e){var t=_c(e.alternate,e,tt);e.memoizedProps=e.pendingProps,t===null?Ic(e):Ee=t,Xs.current=null}function Ic(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=tm(n,t),n!==null){n.flags&=32767,Ee=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{De=6,Ee=null;return}}else if(n=em(n,t,tt),n!==null){Ee=n;return}if(t=t.sibling,t!==null){Ee=t;return}Ee=t=e}while(t!==null);De===0&&(De=5)}function kn(e,t,n){var r=ae,o=mt.transition;try{mt.transition=null,ae=1,um(e,t,n,r)}finally{mt.transition=o,ae=r}return null}function um(e,t,n,r){do cr();while(an!==null);if(le&6)throw Error(L(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(L(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Uf(e,l),e===Ae&&(Ee=Ae=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lo||(Lo=!0,Mc(el,function(){return cr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=mt.transition,mt.transition=null;var i=ae;ae=1;var a=le;le|=4,Xs.current=null,rm(e,n),Cc(n,e),Dp(Ri),nl=!!Fi,Ri=Fi=null,e.current=n,om(n),Lf(),le=a,ae=i,mt.transition=l}else e.current=n;if(Lo&&(Lo=!1,an=e,vl=o),l=e.pendingLanes,l===0&&(mn=null),Ff(n.stateNode),et(e,Ce()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(yl)throw yl=!1,e=os,os=null,e;return vl&1&&e.tag!==0&&cr(),l=e.pendingLanes,l&1?e===ls?Yr++:(Yr=0,ls=e):Yr=0,Sn(),null}function cr(){if(an!==null){var e=ad(vl),t=mt.transition,n=ae;try{if(mt.transition=null,ae=16>e?16:e,an===null)var r=!1;else{if(e=an,an=null,vl=0,le&6)throw Error(L(331));var o=le;for(le|=4,R=e.current;R!==null;){var l=R,i=l.child;if(R.flags&16){var a=l.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(R=c;R!==null;){var p=R;switch(p.tag){case 0:case 11:case 15:Xr(8,p,l)}var h=p.child;if(h!==null)h.return=p,R=h;else for(;R!==null;){p=R;var m=p.sibling,v=p.return;if(xc(p),p===c){R=null;break}if(m!==null){m.return=v,R=m;break}R=v}}}var y=l.alternate;if(y!==null){var N=y.child;if(N!==null){y.child=null;do{var D=N.sibling;N.sibling=null,N=D}while(N!==null)}}R=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,R=i;else e:for(;R!==null;){if(l=R,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Xr(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,R=g;break e}R=l.return}}var f=e.current;for(R=f;R!==null;){i=R;var d=i.child;if(i.subtreeFlags&2064&&d!==null)d.return=i,R=d;else e:for(i=f;R!==null;){if(a=R,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Pl(9,a)}}catch(b){ve(a,a.return,b)}if(a===i){R=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,R=x;break e}R=a.return}}if(le=o,Sn(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(bl,e)}catch{}r=!0}return r}finally{ae=n,mt.transition=t}}return!1}function fu(e,t,n){t=yr(n,t),t=ac(e,t,1),e=pn(e,t,1),t=We(),e!==null&&(ho(e,1,t),et(e,t))}function ve(e,t,n){if(e.tag===3)fu(e,e,n);else for(;t!==null;){if(t.tag===3){fu(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mn===null||!mn.has(r))){e=yr(n,e),e=uc(t,e,1),t=pn(t,e,1),e=We(),t!==null&&(ho(t,1,e),et(t,e));break}}t=t.return}}function dm(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=We(),e.pingedLanes|=e.suspendedLanes&n,Ae===e&&(ze&n)===n&&(De===4||De===3&&(ze&130023424)===ze&&500>Ce()-Ys?_n(e,0):Qs|=n),et(e,t)}function Dc(e,t){t===0&&(e.mode&1?(t=bo,bo<<=1,!(bo&130023424)&&(bo=4194304)):t=1);var n=We();e=Xt(e,t),e!==null&&(ho(e,t,n),et(e,n))}function cm(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Dc(e,n)}function fm(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(t),Dc(e,n)}var _c;_c=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)Ke=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ke=!1,Jp(e,t,n);Ke=!!(e.flags&131072)}else Ke=!1,fe&&t.flags&1048576&&Ld(t,ul,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Xo(e,t),e=t.pendingProps;var o=pr(t,He.current);dr(t,n),o=Bs(null,t,r,e,o,n);var l=Us();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Je(r)?(l=!0,sl(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Fs(t),o.updater=Ml,t.stateNode=o,o._reactInternals=t,Xi(t,r,e,n),t=qi(null,t,r,!0,l,n)):(t.tag=0,fe&&l&&_s(t),Ue(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Xo(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=mm(r),e=Nt(r,e),o){case 0:t=Yi(null,t,r,e,n);break e;case 1:t=nu(null,t,r,e,n);break e;case 11:t=eu(null,t,r,e,n);break e;case 14:t=tu(null,t,r,Nt(r.type,e),n);break e}throw Error(L(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nt(r,o),Yi(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nt(r,o),nu(e,t,r,o,n);case 3:e:{if(pc(t),e===null)throw Error(L(387));r=t.pendingProps,l=t.memoizedState,o=l.element,jd(e,t),fl(t,r,null,n);var i=t.memoizedState;if(r=i.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=yr(Error(L(423)),t),t=ru(e,t,r,n,o);break e}else if(r!==o){o=yr(Error(L(424)),t),t=ru(e,t,r,n,o);break e}else for(nt=fn(t.stateNode.containerInfo.firstChild),rt=t,fe=!0,kt=null,n=Rd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(mr(),r===o){t=Qt(e,t,n);break e}Ue(e,t,r,n)}t=t.child}return t;case 5:return Hd(t),e===null&&Wi(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,i=o.children,$i(r,o)?i=null:l!==null&&$i(r,l)&&(t.flags|=32),fc(e,t),Ue(e,t,i,n),t.child;case 6:return e===null&&Wi(t),null;case 13:return mc(e,t,n);case 4:return Rs(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hr(t,null,r,n):Ue(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nt(r,o),eu(e,t,r,o,n);case 7:return Ue(e,t,t.pendingProps,n),t.child;case 8:return Ue(e,t,t.pendingProps.children,n),t.child;case 12:return Ue(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,i=o.value,ue(dl,r._currentValue),r._currentValue=i,l!==null)if(Dt(l.value,i)){if(l.children===o.children&&!Ze.current){t=Qt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){i=l.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=Wt(-1,n&-n),u.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?u.next=u:(u.next=p.next,p.next=u),c.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),Vi(l.return,n,t),a.lanes|=n;break}u=u.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(L(341));i.lanes|=n,a=i.alternate,a!==null&&(a.lanes|=n),Vi(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}Ue(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,dr(t,n),o=ht(o),r=r(o),t.flags|=1,Ue(e,t,r,n),t.child;case 14:return r=t.type,o=Nt(r,t.pendingProps),o=Nt(r.type,o),tu(e,t,r,o,n);case 15:return dc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Nt(r,o),Xo(e,t),t.tag=1,Je(r)?(e=!0,sl(t)):e=!1,dr(t,n),sc(t,r,o),Xi(t,r,o,n),qi(null,t,r,!0,e,n);case 19:return hc(e,t,n);case 22:return cc(e,t,n)}throw Error(L(156,t.tag))};function Mc(e,t){return od(e,t)}function pm(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(e,t,n,r){return new pm(e,t,n,r)}function Js(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mm(e){if(typeof e=="function")return Js(e)?1:0;if(e!=null){if(e=e.$$typeof,e===vs)return 11;if(e===xs)return 14}return 2}function gn(e,t){var n=e.alternate;return n===null?(n=pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function qo(e,t,n,r,o,l){var i=2;if(r=e,typeof e=="function")Js(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case Yn:return Mn(n.children,o,l,t);case ys:i=8,o|=8;break;case yi:return e=pt(12,n,t,o|2),e.elementType=yi,e.lanes=l,e;case vi:return e=pt(13,n,t,o),e.elementType=vi,e.lanes=l,e;case xi:return e=pt(19,n,t,o),e.elementType=xi,e.lanes=l,e;case Hu:return Ll(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $u:i=10;break e;case ju:i=9;break e;case vs:i=11;break e;case xs:i=14;break e;case nn:i=16,r=null;break e}throw Error(L(130,e==null?e:typeof e,""))}return t=pt(i,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function Mn(e,t,n,r){return e=pt(7,e,r,t),e.lanes=n,e}function Ll(e,t,n,r){return e=pt(22,e,r,t),e.elementType=Hu,e.lanes=n,e.stateNode={isHidden:!1},e}function fi(e,t,n){return e=pt(6,e,null,t),e.lanes=n,e}function pi(e,t,n){return t=pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hm(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xl(0),this.expirationTimes=Xl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ea(e,t,n,r,o,l,i,a,u){return e=new hm(e,t,n,a,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=pt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fs(l),e}function gm(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Pc(e){if(!e)return vn;e=e._reactInternals;e:{if(Un(e)!==e||e.tag!==1)throw Error(L(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Je(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(L(171))}if(e.tag===1){var n=e.type;if(Je(n))return Pd(e,n,t)}return t}function Ac(e,t,n,r,o,l,i,a,u){return e=ea(n,r,!0,e,o,l,i,a,u),e.context=Pc(null),n=e.current,r=We(),o=hn(n),l=Wt(r,o),l.callback=t??null,pn(n,l,o),e.current.lanes=o,ho(e,o,r),et(e,r),e}function Ol(e,t,n,r){var o=t.current,l=We(),i=hn(o);return n=Pc(n),t.context===null?t.context=n:t.pendingContext=n,t=Wt(l,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=pn(o,t,i),e!==null&&(It(e,o,i,l),Wo(e,o,i)),i}function wl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function ta(e,t){pu(e,t),(e=e.alternate)&&pu(e,t)}function ym(){return null}var Lc=typeof reportError=="function"?reportError:function(e){console.error(e)};function na(e){this._internalRoot=e}zl.prototype.render=na.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(L(409));Ol(e,t,null,null)};zl.prototype.unmount=na.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;jn(function(){Ol(null,e,null,null)}),t[Gt]=null}};function zl(e){this._internalRoot=e}zl.prototype.unstable_scheduleHydration=function(e){if(e){var t=cd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<on.length&&t!==0&&t<on[n].priority;n++);on.splice(n,0,e),n===0&&pd(e)}};function ra(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mu(){}function vm(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var c=wl(i);l.call(c)}}var i=Ac(t,r,e,0,null,!1,!1,"",mu);return e._reactRootContainer=i,e[Gt]=i.current,oo(e.nodeType===8?e.parentNode:e),jn(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=wl(u);a.call(c)}}var u=ea(e,0,!1,null,null,!1,!1,"",mu);return e._reactRootContainer=u,e[Gt]=u.current,oo(e.nodeType===8?e.parentNode:e),jn(function(){Ol(t,u,n,r)}),u}function Rl(e,t,n,r,o){var l=n._reactRootContainer;if(l){var i=l;if(typeof o=="function"){var a=o;o=function(){var u=wl(i);a.call(u)}}Ol(t,i,e,o)}else i=vm(n,t,e,o,r);return wl(i)}ud=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$r(t.pendingLanes);n!==0&&(Cs(t,n|1),et(t,Ce()),!(le&6)&&(vr=Ce()+500,Sn()))}break;case 13:jn(function(){var r=Xt(e,1);if(r!==null){var o=We();It(r,e,1,o)}}),ta(e,1)}};Ns=function(e){if(e.tag===13){var t=Xt(e,134217728);if(t!==null){var n=We();It(t,e,134217728,n)}ta(e,134217728)}};dd=function(e){if(e.tag===13){var t=hn(e),n=Xt(e,t);if(n!==null){var r=We();It(n,e,t,r)}ta(e,t)}};cd=function(){return ae};fd=function(e,t){var n=ae;try{return ae=e,t()}finally{ae=n}};Di=function(e,t,n){switch(t){case"input":if(Ci(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Il(r);if(!o)throw Error(L(90));Uu(r),Ci(r,o)}}}break;case"textarea":Vu(e,n);break;case"select":t=n.value,t!=null&&ir(e,!!n.multiple,t,!1)}};Zu=qs;Ju=jn;var xm={usingClientEntryPoint:!1,Events:[yo,Jn,Il,qu,Ku,qs]},Lr={findFiberByHostInstance:Tn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wm={bundleType:Lr.bundleType,version:Lr.version,rendererPackageName:Lr.rendererPackageName,rendererConfig:Lr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=nd(e),e===null?null:e.stateNode},findFiberByHostInstance:Lr.findFiberByHostInstance||ym,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oo.isDisabled&&Oo.supportsFiber)try{bl=Oo.inject(wm),Ft=Oo}catch{}}lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xm;lt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ra(t))throw Error(L(200));return gm(e,t,null,n)};lt.createRoot=function(e,t){if(!ra(e))throw Error(L(299));var n=!1,r="",o=Lc;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=ea(e,1,!1,null,null,n,!1,r,o),e[Gt]=t.current,oo(e.nodeType===8?e.parentNode:e),new na(t)};lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(L(188)):(e=Object.keys(e).join(","),Error(L(268,e)));return e=nd(t),e=e===null?null:e.stateNode,e};lt.flushSync=function(e){return jn(e)};lt.hydrate=function(e,t,n){if(!Fl(t))throw Error(L(200));return Rl(null,e,t,!0,n)};lt.hydrateRoot=function(e,t,n){if(!ra(e))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",i=Lc;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Ac(t,null,e,1,n??null,o,!1,l,i),e[Gt]=t.current,oo(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new zl(t)};lt.render=function(e,t,n){if(!Fl(t))throw Error(L(200));return Rl(null,e,t,!1,n)};lt.unmountComponentAtNode=function(e){if(!Fl(e))throw Error(L(40));return e._reactRootContainer?(jn(function(){Rl(null,null,e,!1,function(){e._reactRootContainer=null,e[Gt]=null})}),!0):!1};lt.unstable_batchedUpdates=qs;lt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fl(n))throw Error(L(200));if(e==null||e._reactInternals===void 0)throw Error(L(38));return Rl(e,t,n,!1,r)};lt.version="18.3.1-next-f1338f8080-20240426";function Oc(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Oc)}catch(e){console.error(e)}}Oc(),Ou.exports=lt;var zc=Ou.exports,hu=zc;hi.createRoot=hu.createRoot,hi.hydrateRoot=hu.hydrateRoot;var qe=(e=>(e.ProfessorConflitoHorario="professor_conflito_horario",e.MaxAulasDia="max_aulas_dia",e.Intersticio="intersticio",e.Indisponivel="indisponivel",e.ConflitoDisponibilidadeDivisao="conflito_disponibilidade_divisao",e.TurmaErrada="turma_errada",e))(qe||{});const ee=["segunda","terca","quarta","quinta","sexta"],be=["07:10-08:00","08:00-08:50","08:50-09:40","10:00-10:50","10:50-11:40","11:40-12:30"],ke=["13:30-14:20","14:20-15:10","15:10-16:00","16:20-17:10","17:10-18:00","18:00-18:50"],qt=["18:10-19:00","19:00-19:50","19:50-20:50","21:05-21:55","21:55-23:00"],Cr=["18:10-19:00","19:00-19:50","19:50-20:50","21:05-21:55","21:55-23:00"],Sm="grade_v1_data",Pn={[qe.ProfessorConflitoHorario]:{bg:"bg-pink-600",text:"text-white",name:"Conflito de Horrio (Professor)",description:"Alerta Crtico: Professor alocado em mltiplas turmas no mesmo horrio."},[qe.TurmaErrada]:{bg:"bg-blue-500",text:"text-white",name:"Troca entre Turmas",description:"Disciplina alocada em uma turma diferente da original (e no  uma troca BNCC vlida)."},[qe.Intersticio]:{bg:"bg-red-600",text:"text-white",name:"Interstcio < 11h",description:"Menos de 11 horas de descanso entre os dias de trabalho."},[qe.MaxAulasDia]:{bg:"bg-orange-400",text:"text-white",name:"Excesso de Aulas",description:"Professor com mais de 8 aulas no dia."},[qe.ConflitoDisponibilidadeDivisao]:{bg:"bg-purple-500",text:"text-white",name:"Conflito Diviso",description:"Professores de disciplina dividida com disponibilidades conflitantes no mesmo horrio."},[qe.Indisponivel]:{bg:"bg-yellow-400",text:"text-gray-800",name:"Fora de Disponibilidade",description:"Aula alocada em horrio indisponvel para o professor."}},as=e=>{const[t,n]=e.split("-"),[r,o]=t.split(":").map(Number),[l,i]=n.split(":").map(Number);return{start:r*60+o,end:l*60+i}},Sl=e=>{const t=[],{professores:n,grade:r,disciplinas:o,atribuicoes:l,turmas:i}=e,a={};r.forEach(c=>{const p=`${c.professorId}-${c.dia}-${c.horario}`;a[p]||(a[p]=[]),a[p].push(c)});for(const c in a)if(a[c].length>1){const p=a[c],h=n.find(y=>y.id===p[0].professorId),m=p[0].dia,v=p[0].horario;t.push({id:`conflito-horario-${c}`,tipo:qe.ProfessorConflitoHorario,detalhes:`Alerta Crtico: Professor ${(h==null?void 0:h.nome)||"Desconhecido"} est em ${p.length} lugares ao mesmo tempo na ${m} s ${v}.`,timestamp:Date.now(),gradeSlotIds:p.map(y=>y.id)})}return r.forEach(c=>{var h,m;const p=e.disciplinas.find(v=>v.id===c.disciplinaId);if(p&&p.turmaId!==c.turmaId){let v=!1;if(p.bnccId){const y=e.disciplinas.find(N=>N.turmaId===c.turmaId&&N.bnccId===p.bnccId);if(y){const N=e.atribuicoes.find(D=>D.disciplinaId===y.id);N&&N.professores.includes(c.professorId)&&(v=!0)}}if(!v){const y=((h=e.turmas.find(D=>D.id===p.turmaId))==null?void 0:h.nome)||`ID Invlido (${p.turmaId})`,N=((m=e.turmas.find(D=>D.id===c.turmaId))==null?void 0:m.nome)||`ID Invlido (${c.turmaId})`;t.push({id:`turma-errada-${c.id}`,tipo:qe.TurmaErrada,detalhes:`Disciplina ${p.nome} da turma ${y} foi alocada na turma ${N}.`,timestamp:Date.now(),gradeSlotIds:[c.id]})}}}),n.forEach(c=>{const p=r.filter(m=>m.professorId===c.id),h={};p.forEach(m=>{const{start:v,end:y}=as(m.horario);h[m.dia]?(h[m.dia].minStart=Math.min(h[m.dia].minStart,v),h[m.dia].maxEnd=Math.max(h[m.dia].maxEnd,y)):h[m.dia]={minStart:v,maxEnd:y}});for(let m=0;m<ee.length-1;m++){const v=ee[m],y=ee[m+1];if(h[v]&&h[y]){const N=h[v].maxEnd,D=h[y].minStart;if(24*60-N+D<11*60){const f=p.filter(d=>d.dia===v||d.dia===y).map(d=>d.id);t.push({id:`intersticio-${c.id}-${v}-${y}`,tipo:qe.Intersticio,detalhes:`Professor ${c.nome} tem menos de 11h de descanso entre ${v} e ${y}.`,timestamp:Date.now(),gradeSlotIds:f})}}}}),n.forEach(c=>{const p={};r.filter(h=>h.professorId===c.id).forEach(h=>{p[h.dia]||(p[h.dia]=[]),p[h.dia].push(h)});for(const h in p){const m=p[h].reduce((v,y)=>{const N=i.find(g=>g.id===y.turmaId),D=N!=null&&N.isModular?1.25:1;return v+D},0);m>8&&t.push({id:`max-aulas-${c.id}-${h}`,tipo:qe.MaxAulasDia,detalhes:`Professor ${c.nome} tem o equivalente a ${m} aulas na ${h}.`,timestamp:Date.now(),gradeSlotIds:p[h].map(v=>v.id)})}}),r.forEach(c=>{const p=o.find(h=>h.id===c.disciplinaId);if(p&&p.divisao){const h=l.find(m=>m.disciplinaId===p.id);h&&h.professores.length>1&&h.professores.forEach(m=>{const v=n.find(y=>y.id===m);if(v){const y=v.disponibilidade[c.dia];(!y||!y.includes(c.horario))&&t.push({id:`conflito-divisao-${c.id}-${m}`,tipo:qe.ConflitoDisponibilidadeDivisao,detalhes:`Conflito em disciplina dividida: ${p.nome}. Professor ${v.nome} est indisponvel neste horrio.`,timestamp:Date.now(),gradeSlotIds:[c.id]})}})}}),r.forEach(c=>{var h;const p=n.find(m=>m.id===c.professorId);if(p){const m=p.disponibilidade[c.dia];(!m||!m.includes(c.horario))&&t.push({id:`indisponivel-${c.id}`,tipo:qe.Indisponivel,detalhes:`Aula de ${(h=o.find(v=>v.id===c.disciplinaId))==null?void 0:h.nome} para ${p.nome} est fora de sua disponibilidade.`,timestamp:Date.now(),gradeSlotIds:[c.id]})}}),Array.from(new Map(t.map(c=>[c.id,c])).values())};let Et=null,dt=null;{const e={apiKey:"AIzaSyCw5hk7xIGMPJyLNPrc6eIXC59KpDSE9JY",authDomain:"gerenciadorhorario-c62e9.firebaseapp.com",projectId:"gerenciadorhorario-c62e9",storageBucket:"gerenciadorhorario-c62e9.appspot.com",messagingSenderId:"386276022565",appId:"1:386276022565:web:96f71441e3a86f0a67e2cc",measurementId:"G-X8NTQPQCPX"};En.apps.length||En.initializeApp(e),Et=En.auth(),dt=En.firestore()}const Fc=_.createContext(void 0),An={version:"1.0",ano:new Date().getFullYear(),cursos:[],turmas:[],disciplinas:[],professores:[],atribuicoes:[],grade:[],alertas:[],bncc:[],toastMessage:null,draggedItem:null,clipboard:null,selectedSlotId:null,onlineUsers:[],saveStatus:"saved",lastModifiedBy:null,lastModifiedAt:null};let Lt=[An],Ct=0;const zo=e=>{const t=e.split("_"),n=t[0]||"",r=t[1]||"";let o=t.slice(2).join("_");const l=o.match(/(.*)-([01])$/);return l&&(o=l[1]),{turmaId:n,dia:r,horario:o}},Cm=e=>{const t={...An,...e};(typeof t.ano!="number"||isNaN(t.ano))&&(t.ano=new Date().getFullYear()),["cursos","turmas","disciplinas","professores","atribuicoes","grade","alertas","bncc","onlineUsers"].forEach(o=>{Array.isArray(t[o])||(t[o]=[])}),Array.isArray(t.turmas)&&(t.turmas=t.turmas.map(o=>o?{...o,isModular:!!o.isModular}:null).filter(Boolean)),Array.isArray(t.professores)&&(t.professores=t.professores.map(o=>o&&(typeof o.disponibilidade!="object"||o.disponibilidade===null||Array.isArray(o.disponibilidade))?{...o,disponibilidade:{}}:o).filter(Boolean)),Array.isArray(t.grade)&&(t.grade=t.grade.filter(o=>!o||typeof o!="object"?!1:["id","turmaId","dia","horario","disciplinaId","professorId"].every(i=>typeof o[i]=="string"&&o[i])));const r=new Set(t.turmas.map(o=>o.id));return t.grade=t.grade.filter(o=>r.has(o.turmaId)?!0:(console.warn(`Removing orphaned grade slot with invalid turmaId: ${o.turmaId}`,o),!1)),t},Nm=(e,t)=>{switch(t.type){case"SET_STATE":return e;case"UPDATE_GRADE":{const{id:n,slot:r}=t.payload,o=e.grade.filter(l=>l.id!==n);return r&&o.push(r),{...e,grade:o}}case"POPULATE_GRADE":return{...e,grade:t.payload};case"DELETE_SLOT":{const{slotId:n}=t.payload;if(!e.grade.some(l=>l.id===n))return e;const o=e.grade.filter(l=>l.id!==n);return{...e,grade:o,selectedSlotId:null}}case"SWAP_GRADE_SLOTS":{const{sourceId:n,destinationId:r}=t.payload,o=e.grade.find(p=>p.id===n);if(!o)return e;const l=e.grade.find(p=>p.id===r),i=zo(n),a=zo(r),u=e.grade.filter(p=>p.id!==n&&p.id!==r),c={...o,id:r,turmaId:a.turmaId,dia:a.dia,horario:a.horario};if(u.push(c),l){const p={...l,id:n,turmaId:i.turmaId,dia:i.dia,horario:i.horario};u.push(p)}return{...e,grade:u}}case"ADD_CURSO":return{...e,cursos:[...e.cursos,t.payload]};case"UPDATE_CURSO":return{...e,cursos:e.cursos.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_CURSO":{const n=e.turmas.filter(o=>o.cursoId===t.payload.id).map(o=>o.id),r=e.disciplinas.filter(o=>n.includes(o.turmaId)).map(o=>o.id);return{...e,cursos:e.cursos.filter(o=>o.id!==t.payload.id),turmas:e.turmas.filter(o=>o.cursoId!==t.payload.id),disciplinas:e.disciplinas.filter(o=>!n.includes(o.turmaId)),atribuicoes:e.atribuicoes.filter(o=>!r.includes(o.disciplinaId)),grade:e.grade.filter(o=>!n.includes(o.turmaId))}}case"ADD_TURMA":return{...e,turmas:[...e.turmas,t.payload]};case"UPDATE_TURMA":return{...e,turmas:e.turmas.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_TURMA":{const n=e.disciplinas.filter(r=>r.turmaId===t.payload.id).map(r=>r.id);return{...e,turmas:e.turmas.filter(r=>r.id!==t.payload.id),disciplinas:e.disciplinas.filter(r=>r.turmaId!==t.payload.id),atribuicoes:e.atribuicoes.filter(r=>!n.includes(r.disciplinaId)),grade:e.grade.filter(r=>r.turmaId!==t.payload.id)}}case"ADD_DISCIPLINA":return{...e,disciplinas:[...e.disciplinas,t.payload]};case"UPDATE_DISCIPLINA":return{...e,disciplinas:e.disciplinas.map(n=>n.id===t.payload.id?t.payload:n)};case"DELETE_DISCIPLINA":return{...e,disciplinas:e.disciplinas.filter(n=>n.id!==t.payload.id),atribuicoes:e.atribuicoes.filter(n=>n.disciplinaId!==t.payload.id),grade:e.grade.filter(n=>n.disciplinaId!==t.payload.id)};case"ADD_PROFESSOR":return{...e,professores:[...e.professores,t.payload]};case"UPDATE_PROFESSOR":return{...e,professores:e.professores.map(n=>n.id===t.payload.id?t.payload:n)};case"BATCH_UPDATE_PROFESSORS":{const n=new Map(t.payload.professors.map(o=>[o.id,o])),r=e.professores.map(o=>n.get(o.id)||o);return{...e,professores:r}}case"DELETE_PROFESSOR":return{...e,professores:e.professores.filter(n=>n.id!==t.payload.id),atribuicoes:e.atribuicoes.map(n=>({...n,professores:n.professores.filter(r=>r!==t.payload.id)})),grade:e.grade.filter(n=>n.professorId!==t.payload.id)};case"UPDATE_ATRIBUICAO":return e.atribuicoes.find(r=>r.disciplinaId===t.payload.disciplinaId)?{...e,atribuicoes:e.atribuicoes.map(r=>r.disciplinaId===t.payload.disciplinaId?t.payload:r)}:{...e,atribuicoes:[...e.atribuicoes,t.payload]};case"DELETE_ATRIBUICAO":return{...e,atribuicoes:e.atribuicoes.filter(n=>n.disciplinaId!==t.payload.disciplinaId)};case"UPDATE_ANO":return{...e,ano:t.payload};case"SET_ALERTS":return{...e,alertas:t.payload};case"COPY_SLOT":{const{sourceSlotId:n}=t.payload,r=e.grade.find(o=>o.id===n);return r?{...e,clipboard:{sourceSlot:r,type:"copy"},draggedItem:null}:e}case"CUT_SLOT":{const{sourceSlotId:n}=t.payload,r=e.grade.find(l=>l.id===n);if(!r)return e;const o=e.grade.filter(l=>l.id!==n);return{...e,grade:o,clipboard:{sourceSlot:r,type:"cut"},draggedItem:null,selectedSlotId:null}}case"PASTE_SLOT":{const{destinationId:n}=t.payload,{clipboard:r,disciplinas:o}=e;if(!r)return e;const{sourceSlot:l}=r,i=zo(n),a=o.find(y=>y.id===l.disciplinaId),u=!!(a!=null&&a.divisao),c=u?n:`${i.turmaId}_${i.dia}_${i.horario}`,p={...l,id:c,turmaId:i.turmaId,dia:i.dia,horario:i.horario},h=!u,v=[...e.grade.filter(y=>{const N=zo(y.id);return N.turmaId===i.turmaId&&N.dia===i.dia&&N.horario===i.horario?h?!1:!(!(y.id.endsWith("-0")||y.id.endsWith("-1"))||y.id===n):!0}),p];return{...e,grade:v,clipboard:r.type==="cut"?null:e.clipboard}}case"CREATE_BNCC":{const{nome:n}=t.payload,r=`bncc-${Date.now()}`,o={id:r,nome:n},l=e.disciplinas.map(i=>i.nome===n?{...i,bnccId:r}:i);return{...e,disciplinas:l,bncc:[...e.bncc,o]}}case"DELETE_BNCC":{const{bnccId:n}=t.payload,r=e.disciplinas.map(o=>{if(o.bnccId===n){const{bnccId:l,...i}=o;return i}return o});return{...e,disciplinas:r,bncc:e.bncc.filter(o=>o.id!==n)}}}return e},bm=(e,t)=>{if(t.type==="SHOW_TOAST")return{...e,toastMessage:t.payload};if(t.type==="DRAG_START")return{...e,draggedItem:t.payload,clipboard:null,selectedSlotId:null};if(t.type==="DRAG_END")return{...e,draggedItem:null};if(t.type==="SELECT_SLOT")return{...e,selectedSlotId:t.payload.slotId};if(t.type==="SET_ONLINE_USERS")return{...e,onlineUsers:t.payload};if(t.type==="SET_SAVE_STATUS")return{...e,saveStatus:t.payload};if(t.type==="CLEAR_DATA"){if(dt){const{toastMessage:o,draggedItem:l,clipboard:i,selectedSlotId:a,onlineUsers:u,saveStatus:c,...p}=An;dt.collection("timetables").doc("default").set(p)}else localStorage.removeItem(Sm);const r={...An,alertas:Sl(An)};return Lt=[r],Ct=0,r}let n;if(t.type==="UNDO")return Ct>0&&Ct--,Lt[Ct];if(t.type==="REDO")return Ct<Lt.length-1&&Ct++,Lt[Ct];if(t.type==="SET_STATE"?(n=Cm(t.payload),n.alertas=Sl(n),n.saveStatus="saved"):n=Nm(e,t),n!==e){const r={...n,toastMessage:e.toastMessage,draggedItem:e.draggedItem,selectedSlotId:e.selectedSlotId,onlineUsers:e.onlineUsers,saveStatus:e.saveStatus,lastModifiedBy:e.lastModifiedBy,lastModifiedAt:e.lastModifiedAt};if(t.type!=="SET_STATE"){if(Et){const l=Et.currentUser;r.lastModifiedBy=l?l.displayName||l.email:"Sistema"}else r.lastModifiedBy="Usurio Local";r.lastModifiedAt=new Date().toISOString()}return t.type==="SET_STATE"||t.type==="POPULATE_GRADE"?(Lt=[r],Ct=0):t.type!=="SET_ALERTS"&&(Lt=Lt.slice(0,Ct+1),Lt.push(r),Ct=Lt.length-1),r}return e},km=({children:e})=>{const[t,n]=_.useReducer(bm,An,D=>{let g=D;const f={...g,alertas:Sl(g)};return Lt=[f],Ct=0,f}),r=_.useRef(!1),o=_.useRef(!1);_.useEffect(()=>{if(!dt)return;const D=dt.collection("timetables").doc("default"),g=D.onSnapshot(f=>{if(o.current=!0,f.exists&&!f.metadata.hasPendingWrites){console.log("Received remote update from Firestore.");const d=f.data();d&&(r.current=!0,n({type:"SET_STATE",payload:d}))}else if(!f.exists){const{toastMessage:d,draggedItem:x,clipboard:b,selectedSlotId:C,onlineUsers:S,saveStatus:E,...k}=An;D.set(k)}},f=>{o.current=!0,console.error("Error listening to Firestore document:",f),f.code==="permission-denied"?n({type:"SHOW_TOAST",payload:"Permisso negada. Verifique as Regras de Segurana do Firestore."}):n({type:"SHOW_TOAST",payload:"Erro de conexo com o banco de dados."})});return()=>g()},[]),_.useEffect(()=>{if(!Et||!dt)return;let D,g;const f=()=>{D&&clearInterval(D),g&&g()},d=Et.onAuthStateChanged(x=>{if(f(),x){const b=dt.collection("presence").doc(x.uid),C={id:x.uid,name:x.displayName||x.email||"Usurio Annimo",email:x.email||""};b.set({...C,lastSeen:En.firestore.FieldValue.serverTimestamp()}),D=window.setInterval(()=>{b.update({lastSeen:En.firestore.FieldValue.serverTimestamp()})},15e3),g=dt.collection("presence").where("lastSeen",">",new Date(Date.now()-3e4)).onSnapshot(S=>{const E=S.docs.map(k=>k.data());n({type:"SET_ONLINE_USERS",payload:E})},S=>{console.error("Error listening to presence collection:",S)})}else n({type:"SET_ONLINE_USERS",payload:[]})});return()=>{d(),f();const x=Et.currentUser;x&&dt.collection("presence").doc(x.uid).delete()}},[]);const{alertas:l,toastMessage:i,draggedItem:a,clipboard:u,selectedSlotId:c,onlineUsers:p,saveStatus:h,...m}=t,v=JSON.stringify(m);_.useEffect(()=>{{if(r.current){r.current=!1,n({type:"SET_SAVE_STATUS",payload:"saved"});return}if(!o.current)return;n({type:"SET_SAVE_STATUS",payload:"saving"});const D=setTimeout(()=>{if(!dt)return;const g=JSON.parse(v);dt.collection("timetables").doc("default").set(g,{merge:!0}).then(()=>{n({type:"SET_SAVE_STATUS",payload:"saved"})}).catch(f=>{console.error("Error writing to Firestore: ",f),n({type:"SHOW_TOAST",payload:"Falha ao salvar dados."}),n({type:"SET_SAVE_STATUS",payload:"error"})})},1e3);return()=>clearTimeout(D)}},[v]);const y=JSON.stringify({grade:t.grade,professores:t.professores,disciplinas:t.disciplinas,atribuicoes:t.atribuicoes,turmas:t.turmas});_.useEffect(()=>{const D=setTimeout(()=>{const g={...t,...JSON.parse(y)},f=Sl(g);JSON.stringify(f)!==JSON.stringify(t.alertas)&&n({type:"SET_ALERTS",payload:f})},300);return()=>clearTimeout(D)},[y]);const N=_.useCallback(D=>{D.ctrlKey&&D.key==="z"&&(D.preventDefault(),n({type:"UNDO"})),D.ctrlKey&&D.key==="y"&&(D.preventDefault(),n({type:"REDO"}))},[]);return _.useEffect(()=>(window.addEventListener("keydown",N),()=>{window.removeEventListener("keydown",N)}),[N]),s(Fc.Provider,{value:{state:t,dispatch:n},children:e})},Te=()=>{const e=_.useContext(Fc);if(!e)throw new Error("useData must be used within a DataProvider");return e},Rc=({children:e,content:t,isVisible:n,onVisibilityChange:r})=>t?w("div",{className:"relative",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:[e,n&&s("div",{className:"absolute z-50 bottom-full mb-2 w-64 p-2 text-sm text-white bg-gray-800 rounded-md shadow-lg",children:t})]}):s(On,{children:e}),Em=e=>be.includes(e)?"manha":ke.includes(e)?"tarde":"noite",gu=Ln.memo(({baseId:e,subSlotIndex:t,slot:n,isOutOfPeriod:r,alerts:o,onOpenContextMenu:l,onSelectSlot:i,isSelected:a,hoveredProfessorId:u,onProfessorHover:c,highlightStatus:p,onDragStart:h,onDragEnd:m,disciplina:v,professor:y,scaledCellFontSize:N})=>{const[D,g]=_.useState(!1),f=`${e}-${t}`,d=z=>{z.stopPropagation(),i(f)},x=z=>{z.stopPropagation(),l(z,f)},b=o.find(z=>z.gradeSlotIds.includes(f))??(o.length>0&&n?o[0]:null),C=z=>z==="valid"?"bg-green-200":z==="warning"?"bg-yellow-200":"";let S=r?"bg-slate-200":"bg-white";p&&!n&&(S=C(p)),a&&(S="bg-indigo-50"),b&&(S=Pn[b.tipo].bg);const E=a?"ring ring-indigo-500 z-10":"",k=u&&n&&n.professorId===u&&!a,T=u&&n&&n.professorId!==u,I=n&&v&&y?w("div",{className:"p-1 text-left w-full h-full overflow-hidden",style:{fontSize:`${N}px`},children:[s("p",{className:"font-bold truncate",children:v.nome}),s("p",{className:"text-gray-600 truncate",children:y.nome})]}):s("div",{className:"w-full h-full"}),F=o.length>0?w("div",{children:[s("h4",{className:"font-bold mb-1",children:"Alertas:"}),s("ul",{className:"list-disc list-inside text-xs",children:o.map(z=>s("li",{children:z.detalhes},z.id))})]}):null;return s("div",{title:n&&v&&y?`Disciplina: ${v.nome}
Professor: ${y.nome}`:void 0,draggable:!!n,onDragStart:z=>n&&h(z,n.id),onDragEnd:m,onClick:d,onContextMenu:x,onMouseEnter:()=>{n&&c(n.professorId)},className:`relative h-1/2 transition-all duration-150 ${S} ${E} ${n?"cursor-grab active:cursor-grabbing":"cursor-pointer"} ${k?"ring-2 ring-slate-700 z-20":""} ${T?"opacity-40":""}`,children:s(Rc,{content:F,isVisible:D,onVisibilityChange:g,children:I})})}),Tm=({id:e,gridType:t,turma:n,fullSlot:r,slot0:o,slot1:l,isLastInCourse:i,cellAlerts:a,subCellAlerts0:u,subCellAlerts1:c,onOpenContextMenu:p,onSelectSlot:h,selectedSlotId:m,hoveredProfessorId:v,onProfessorHover:y,highlightStatus:N,subSlotHighlightStatus:D,scaledCellMinHeight:g,scaledCellFontSize:f})=>{const{state:d,dispatch:x}=Te(),{disciplinas:b,draggedItem:C,clipboard:S,turmas:E,grade:k}=d,[T,I]=_.useState(!1),[F,z]=_.useState(!1),W=e.split("_").slice(2).join("_"),q=Em(W),O=n&&n.periodo!==q,B="border-b border-gray-300",M=i?"border-r-2 border-r-slate-400":"border-r border-gray-300";if(t==="modular"&&W==="18:10-19:00")return s("div",{className:`relative ${M} ${B} bg-gray-200`,style:{minHeight:`${g}px`,backgroundImage:"repeating-linear-gradient(45deg, #d1d5db, #d1d5db 10px, #e5e7eb 10px, #e5e7eb 20px)"},title:"Horrio no disponvel para aulas modulares"});const H=()=>{var A;if(!C)return null;const U=C.type==="SIDEBAR_ITEM"?C.disciplinaId:(A=k.find($=>$.id===C.sourceSlotId))==null?void 0:A.disciplinaId;return b.find($=>$.id===U)||null},G=(U,A)=>{U.stopPropagation(),z(!1);const $={type:"GRID_ITEM",sourceSlotId:A};U.dataTransfer.setData("application/json",JSON.stringify($)),U.dataTransfer.effectAllowed="move",x({type:"DRAG_START",payload:$})},K=()=>{x({type:"DRAG_END"})},yt=U=>{if(U.preventDefault(),!C){U.dataTransfer.dropEffect="none";return}const A=H();if(!A){U.dataTransfer.dropEffect="none",I(!1);return}let $=!1;if(A.divisao){const se=o||l;(C.type==="GRID_ITEM"&&se||!o||!l)&&($=!0)}else(!r&&!o&&!l||C.type==="GRID_ITEM"&&r)&&($=!0);$?(I(!0),U.dataTransfer.dropEffect="move"):(I(!1),U.dataTransfer.dropEffect="none")},ye=()=>{I(!1)},xe=U=>{if(U.preventDefault(),U.stopPropagation(),I(!1),!!C)try{const A=H();if(!A)return;const $=E.find(ie=>ie.id===A.turmaId),se=n;if($&&se&&$.isModular!==se.isModular){x({type:"SHOW_TOAST",payload:"No  permitido mover aulas entre a grade regular e a modular."});return}let Y;if(A.divisao){const ie=U.currentTarget.getBoundingClientRect(),_e=U.clientY<ie.top+ie.height/2,we=`${e}-${_e?0:1}`,Q=`${e}-${_e?1:0}`;d.grade.find(J=>J.id===we)&&C.sourceSlotId!==we?Y=d.grade.find(X=>X.id===Q)?we:Q:Y=we}else if(r||o||l)if(r&&C.type==="GRID_ITEM")Y=e;else return;else Y=e;if(C.type==="GRID_ITEM"&&C.sourceSlotId===Y)return;if(C.type==="SIDEBAR_ITEM"){const{disciplinaId:ie,professorId:_e}=C;if(ie&&_e){if(!Y)return;const we=Y.split("_"),Q=we[1];let re=we.slice(2).join("_");const J=re.match(/(.*)-([01])$/);J&&(re=J[1]),x({type:"UPDATE_GRADE",payload:{id:Y,slot:{id:Y,turmaId:n.id,dia:Q,horario:re,disciplinaId:ie,professorId:_e}}})}}else if(C.type==="GRID_ITEM"&&C.sourceSlotId){if(!Y)return;x({type:"SWAP_GRADE_SLOTS",payload:{sourceId:C.sourceSlotId,destinationId:Y}})}}catch(A){console.error("Error handling drop in GridCell:",A)}finally{x({type:"DRAG_END"})}},Xe=U=>{U.stopPropagation();const A=b.find(Y=>Y.id===(S==null?void 0:S.sourceSlot.disciplinaId)),$=!!(A!=null&&A.divisao);let se=e;if(!r&&!o&&!l&&$){const Y=U.currentTarget.getBoundingClientRect(),ie=U.clientY<Y.top+Y.height/2;se=`${e}-${ie?0:1}`}h(se)},vt=U=>{U.preventDefault(),U.stopPropagation();const A=b.find(Y=>Y.id===(S==null?void 0:S.sourceSlot.disciplinaId)),$=!!(A!=null&&A.divisao);let se=e;if(!r&&!o&&!l&&$){const Y=U.currentTarget.getBoundingClientRect(),ie=U.clientY<Y.top+Y.height/2;se=`${e}-${ie?0:1}`}p(U,se)},xt=m===e,Nr=U=>U==="valid"?"bg-green-200":U==="warning"?"bg-yellow-200":"";if(r){const U=d.disciplinas.find(J=>J.id===r.disciplinaId),A=d.professores.find(J=>J.id===r.professorId),$=a[0],se=U&&A?w("div",{className:"p-1 text-left w-full h-full",style:{fontSize:`${f}px`},children:[s("p",{className:"font-bold truncate",children:U.nome}),s("p",{className:"text-gray-600 truncate",children:A.nome})]}):s("div",{className:"w-full h-full"}),Y=a.length>0?w("div",{children:[s("h4",{className:"font-bold mb-1",children:"Alertas:"}),s("ul",{className:"list-disc list-inside text-xs",children:a.map(J=>s("li",{children:J.detalhes},J.id))})]}):null;let ie=O?"bg-slate-200":"bg-white";xt&&(ie="bg-indigo-50"),$&&(ie=Pn[$.tipo].bg),T&&(ie="bg-blue-300");const _e=J=>{J.stopPropagation(),h(e)},we=xt?"ring-2 ring-indigo-500 z-10":"",Q=v&&r.professorId===v&&!xt,re=v&&r.professorId!==v;return s("div",{title:U&&A?`Disciplina: ${U.nome}
Professor: ${A.nome}`:void 0,onDragOver:yt,onDragLeave:ye,onDrop:xe,onClick:_e,draggable:!!r,onDragStart:J=>G(J,r.id),onDragEnd:K,onContextMenu:J=>{J.stopPropagation(),p(J,e)},onMouseEnter:()=>y(r.professorId),className:`relative transition-all duration-150 ${ie} ${we} ${r?"cursor-grab active:cursor-grabbing":"cursor-pointer"} ${B} ${Q?"ring-2 ring-slate-700 z-20":""} ${re?"opacity-40":""} ${M}`,style:{minHeight:`${g}px`},children:s(Rc,{content:Y,isVisible:F,onVisibilityChange:z,children:se})})}const _t=xt&&!(m!=null&&m.endsWith("-0"))&&!(m!=null&&m.endsWith("-1"));let Mt=T?"bg-blue-300":O?"bg-slate-200":"bg-white";N&&(Mt=Nr(N)),_t&&(Mt="bg-indigo-50");const P=_t?"ring-2 ring-indigo-500 z-10":"",V=U=>U?{disciplina:d.disciplinas.find(A=>A.id===U.disciplinaId),professor:d.professores.find(A=>A.id===U.professorId)}:{disciplina:null,professor:null},te=V(o),oe=V(l);return w("div",{onDragOver:yt,onDragLeave:ye,onDrop:xe,onClick:Xe,onContextMenu:vt,className:`relative flex flex-col ${Mt} ${P} ${B} cursor-pointer ${M}`,style:{minHeight:`${g}px`},children:[s(gu,{baseId:e,subSlotIndex:0,slot:o,isOutOfPeriod:O,alerts:[...a,...u],onOpenContextMenu:p,onSelectSlot:h,isSelected:m===`${e}-0`,hoveredProfessorId:v,onProfessorHover:y,highlightStatus:D[0]||N,onDragStart:G,onDragEnd:K,disciplina:te.disciplina,professor:te.professor,scaledCellFontSize:f}),s("div",{className:"border-b border-dashed border-gray-300"}),s(gu,{baseId:e,subSlotIndex:1,slot:l,isOutOfPeriod:O,alerts:[...a,...c],onOpenContextMenu:p,onSelectSlot:h,isSelected:m===`${e}-1`,hoveredProfessorId:v,onProfessorHover:y,highlightStatus:D[1]||N,onDragStart:G,onDragEnd:K,disciplina:oe.disciplina,professor:oe.professor,scaledCellFontSize:f})]})},Im=Ln.memo(Tm),Or=({label:e,checked:t,onChange:n,disabled:r})=>w("label",{className:`flex items-center space-x-2 ${r?"cursor-not-allowed text-gray-400":"cursor-pointer"}`,children:[s("input",{type:"checkbox",checked:t,onChange:o=>n(o.target.checked),disabled:r,className:"rounded text-indigo-600 focus:ring-indigo-500"}),s("span",{children:e})]}),yu=({title:e,children:t,onSelectAll:n,onDeselectAll:r})=>w("div",{className:"p-2 border rounded-md bg-white",children:[s("h4",{className:"font-bold mb-2",children:e}),w("div",{className:"flex space-x-2 mb-2",children:[s("button",{onClick:n,className:"text-xs text-indigo-600 hover:underline",children:"Todos"}),s("button",{onClick:r,className:"text-xs text-indigo-600 hover:underline",children:"Nenhum"})]}),s("div",{className:"space-y-1 max-h-48 overflow-y-auto pr-2",children:t})]}),Dm=({visibility:e,onVisibilityChange:t,cursos:n,turmas:r})=>{const[o,l]=_.useState(!1),i=(h,m)=>{t({...e,periods:{...e.periods,[h]:m}})},a=(h,m)=>{const v={...e.turmas};r.forEach(y=>{y.cursoId===h&&(v[y.id]=m)}),t({...e,cursos:{...e.cursos,[h]:m},turmas:v})},u=(h,m)=>{t({...e,turmas:{...e.turmas,[h]:m}})},c=h=>{const m={...e};h==="periods"?Object.keys(m.periods).forEach(v=>m.periods[v]=!0):h==="cursos"?(Object.keys(m.cursos).forEach(v=>m.cursos[v]=!0),Object.keys(m.turmas).forEach(v=>m.turmas[v]=!0)):h==="turmas"&&Object.keys(m.turmas).forEach(v=>m.turmas[v]=!0),t(m)},p=h=>{const m={...e};h==="periods"?Object.keys(m.periods).forEach(v=>m.periods[v]=!1):h==="cursos"?(Object.keys(m.cursos).forEach(v=>m.cursos[v]=!1),Object.keys(m.turmas).forEach(v=>m.turmas[v]=!1)):h==="turmas"&&Object.keys(m.turmas).forEach(v=>m.turmas[v]=!1),t(m)};return w("div",{className:"bg-gray-100 p-2 mb-4 rounded-md shadow-sm border text-sm",children:[w("button",{onClick:()=>l(!o),className:"w-full text-left font-semibold text-gray-700 flex justify-between items-center",children:[s("span",{children:o?"Ocultar Opes de Visualizao":"Exibir Opes de Visualizao"}),s("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${o?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),o&&s("div",{className:"mt-4",children:w("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[w(yu,{title:"Perodos",onSelectAll:()=>c("periods"),onDeselectAll:()=>p("periods"),children:[s(Or,{label:"Manh",checked:e.periods.manha,onChange:h=>i("manha",h)}),s(Or,{label:"Tarde",checked:e.periods.tarde,onChange:h=>i("tarde",h)}),s(Or,{label:"Noite",checked:e.periods.noite,onChange:h=>i("noite",h)})]}),s(yu,{title:"Cursos",onSelectAll:()=>c("cursos"),onDeselectAll:()=>p("cursos"),children:n.map(h=>s(Or,{label:h.nome,checked:e.cursos[h.id]??!0,onChange:m=>a(h.id,m)},h.id))}),w("div",{className:"p-2 border rounded-md bg-white",children:[s("h4",{className:"font-bold mb-2",children:"Turmas"}),w("div",{className:"flex space-x-2 mb-2",children:[s("button",{onClick:()=>c("turmas"),className:"text-xs text-indigo-600 hover:underline",children:"Todas"}),s("button",{onClick:()=>p("turmas"),className:"text-xs text-indigo-600 hover:underline",children:"Nenhuma"})]}),s("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:n.map(h=>w("div",{children:[s("h5",{className:"font-semibold text-gray-600",children:h.nome}),s("div",{className:"pl-4 space-y-1",children:r.filter(m=>m.cursoId===h.id).map(m=>s(Or,{label:m.nome,checked:e.turmas[m.id]??!0,onChange:v=>u(m.id,v),disabled:!(e.cursos[h.id]??!0)},m.id))})]},h.id))})]})]})})]})},_m=({isOpen:e,onClose:t,x:n,y:r,items:o})=>{const l=_.useRef(null);return _.useEffect(()=>{const i=a=>{l.current&&!l.current.contains(a.target)&&t()};return e&&document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[e,t]),e?s("div",{ref:l,className:"absolute z-50 bg-white rounded-md shadow-lg border border-gray-200 py-1 w-32",style:{top:r,left:n},children:s("ul",{children:o.map((i,a)=>s("li",{children:s("button",{onClick:()=>{i.disabled||(i.onClick(),t())},disabled:i.disabled,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:text-gray-400 disabled:bg-white disabled:cursor-not-allowed",children:i.label})},a))})}):null},Mm=({isFocusModeEnabled:e,gridType:t})=>{const{state:n,dispatch:r}=Te(),{ano:o,cursos:l,turmas:i,grade:a,clipboard:u,selectedSlotId:c,disciplinas:p,professores:h,draggedItem:m,atribuicoes:v,alertas:y}=n,[N,D]=_.useState(1),[g,f]=_.useState({isOpen:!1,x:0,y:0,slotId:""}),[d,x]=_.useState(null),b=_.useRef(null),[C,S]=_.useState(!1),[E,k]=_.useState(o.toString()),T=_.useMemo(()=>({dayColWidth:50*N,timeColWidth:80*N,turmaColWidth:150*N,headerHeight:44*N,cellMinHeight:60*N,daySeparatorHeight:8*N,periodSeparatorHeight:8*N,fontSizeHeader:12*N,fontSizeTurmaHeader:11*N,fontSizeTime:12*N,fontSizeCell:12*N,fontSizeYear:18*N,fontSizeYearLabel:12*N}),[N]),I=_.useMemo(()=>i.filter(V=>V.isModular===(t==="modular")).sort((V,te)=>{var A,$;const oe=((A=l.find(se=>se.id===V.cursoId))==null?void 0:A.nome)||"",U=(($=l.find(se=>se.id===te.cursoId))==null?void 0:$.nome)||"";return oe.localeCompare(U)!==0?oe.localeCompare(U):V.nome.localeCompare(te.nome)}),[i,t,l]);_.useEffect(()=>{k(o.toString())},[o]);const F=()=>{const P=parseInt(E,10);!isNaN(P)&&P>2e3&&P<2100?r({type:"UPDATE_ANO",payload:P}):(k(o.toString()),r({type:"SHOW_TOAST",payload:"Ano invlido."})),S(!1)},z=P=>{P.key==="Enter"?P.currentTarget.blur():P.key==="Escape"&&(k(o.toString()),S(!1))},[W,q]=_.useState({periods:{manha:!0,tarde:!0,noite:!0},cursos:{},turmas:{}});_.useEffect(()=>{q(P=>{const V={};l.forEach(oe=>{V[oe.id]=P.cursos[oe.id]??!0});const te={};return I.forEach(oe=>{te[oe.id]=P.turmas[oe.id]??!0}),{...P,cursos:V,turmas:te}})},[l,I]);const O=_.useCallback(P=>{if(P.target===document.body&&c)if(P.ctrlKey){if(P.key==="c")P.preventDefault(),r({type:"COPY_SLOT",payload:{sourceSlotId:c}});else if(P.key==="x")P.preventDefault(),r({type:"CUT_SLOT",payload:{sourceSlotId:c}});else if(P.key==="v"){if(P.preventDefault(),u){const V=i.find(U=>U.id===u.sourceSlot.turmaId),te=c.split("_")[0],oe=i.find(U=>U.id===te);if(V&&oe&&V.isModular!==oe.isModular){r({type:"SHOW_TOAST",payload:"No  permitido colar aulas entre a grade regular e a modular."});return}}r({type:"PASTE_SLOT",payload:{destinationId:c}})}}else P.key==="Delete"&&(P.preventDefault(),r({type:"DELETE_SLOT",payload:{slotId:c}}))},[c,r,u,i]);_.useEffect(()=>(window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)}),[O]),_.useEffect(()=>{const P=b.current;if(!P)return;const V=te=>{te.ctrlKey&&(te.preventDefault(),D(oe=>Math.max(.5,Math.min(2,oe-te.deltaY*.001))))};return P.addEventListener("wheel",V,{passive:!1}),()=>{P.removeEventListener("wheel",V)}},[]);const B=P=>{if(!m)return;const V=b.current;if(!V)return;const te=V.getBoundingClientRect(),oe=P.clientY-te.top,U=60,A=10;oe<U?V.scrollTop-=A:oe>te.height-U&&(V.scrollTop+=A)},M=()=>{f({...g,isOpen:!1})},j=(P,V)=>{P.preventDefault(),P.stopPropagation(),r({type:"SELECT_SLOT",payload:{slotId:V}}),f({isOpen:!0,x:P.pageX,y:P.pageY,slotId:V})},H=()=>{const{slotId:P}=g;if(!P)return[];const V=a.some($=>$.id===P);return[{label:"Copiar",onClick:()=>r({type:"COPY_SLOT",payload:{sourceSlotId:P}}),disabled:!V},{label:"Recortar",onClick:()=>r({type:"CUT_SLOT",payload:{sourceSlotId:P}}),disabled:!V},{label:"Colar",onClick:()=>r({type:"PASTE_SLOT",payload:{destinationId:P}}),disabled:!!!u}]},G=P=>{r({type:"SELECT_SLOT",payload:{slotId:P}})},K=_.useMemo(()=>t==="modular"?Cr:qt,[t]),ye=_.useMemo(()=>[...be,...ke,...K],[K]).filter(P=>!!(be.includes(P)&&W.periods.manha||ke.includes(P)&&W.periods.tarde||K.includes(P)&&W.periods.noite)),xe=I.filter(P=>W.turmas[P.id]),vt=_.useMemo(()=>[...l].sort((P,V)=>P.nome.localeCompare(V.nome)),[l]).map(P=>({...P,turmas:I.filter(V=>V.cursoId===P.id)})).filter(P=>W.cursos[P.id]),xt=_.useMemo(()=>{const P=new Set;return xe.forEach((V,te)=>{const oe=xe[te+1];(!oe||oe.cursoId!==V.cursoId)&&P.add(V.id)}),P},[xe]),Nr=_.useMemo(()=>{const P=new Map;return a.forEach(V=>{const te=`${V.turmaId}_${V.dia}_${V.horario}`;P.has(te)||P.set(te,[]),P.get(te).push(V)}),P},[a]),_t=_.useMemo(()=>{const P=new Map;return y.forEach(V=>{V.gradeSlotIds.forEach(te=>{P.has(te)||P.set(te,[]),P.get(te).push(V)})}),P},[y]),Mt=_.useMemo(()=>{let P=null;if((m==null?void 0:m.type)==="SIDEBAR_ITEM"&&m.disciplinaId&&m.professorId)P={professorId:m.professorId,disciplinaId:m.disciplinaId,slotIdToIgnore:null};else{const Q=c||((m==null?void 0:m.type)==="GRID_ITEM"?m.sourceSlotId:null);if(Q){const re=a.find(J=>J.id===Q);re&&(P={professorId:re.professorId,disciplinaId:re.disciplinaId,slotIdToIgnore:Q})}}if(!P)return{};const{professorId:V,disciplinaId:te,slotIdToIgnore:oe}=P,U=h.find(Q=>Q.id===V);if(!U)return{};const A=p.find(Q=>Q.id===te);if(!A)return{};const $=new Map;a.forEach(Q=>{const re=`${Q.turmaId}_${Q.dia}_${Q.horario}`;$.has(re)||$.set(re,[]),$.get(re).push(Q)});const se=[];if(A.bnccId){const Q=new Set;p.forEach(re=>{if(re.bnccId===A.bnccId){const J=v.find(X=>X.disciplinaId===re.id);J&&J.professores.includes(V)&&Q.add(re.turmaId)}}),se.push(...xe.filter(re=>Q.has(re.id)))}else{const Q=xe.find(re=>re.id===A.turmaId);Q&&se.push(Q)}const Y={},ie={},_e={};a.forEach(Q=>{if(Q.professorId!==V||oe&&Q.id===oe)return;Y[Q.dia]||(Y[Q.dia]=new Set),Y[Q.dia].add(Q.horario);const re=i.find(Qe=>Qe.id===Q.turmaId),J=re!=null&&re.isModular?1.25:1;ie[Q.dia]=(ie[Q.dia]||0)+J;const{start:X,end:Me}=as(Q.horario),Se=_e[Q.dia];Se?(Se.minStart=Math.min(Se.minStart,X),Se.maxEnd=Math.max(Se.maxEnd,Me)):_e[Q.dia]={minStart:X,maxEnd:Me}});const we={};return se.forEach(Q=>{ee.forEach(re=>{ye.forEach(J=>{const X=`${Q.id}_${re}_${J}`,Se=($.get(X)||[]).filter(wt=>!oe||wt.id!==oe),Qe=[];A.divisao?(Se.some(wt=>wt.id===`${X}-0`)||Qe.push(`${X}-0`),Se.some(wt=>wt.id===`${X}-1`)||Qe.push(`${X}-1`)):Se.length===0&&Qe.push(X),Qe.forEach(wt=>{var Kt,pe;let Z=!1,st=!1;(Kt=U.disponibilidade[re])!=null&&Kt.includes(J)||(st=!0),!Z&&((pe=Y[re])!=null&&pe.has(J))&&(Z=!0);const at=i.find(Le=>Le.id===Q.id),oa=at!=null&&at.isModular?1.25:1;if(!Z&&(ie[re]||0)+oa>8&&(Z=!0),!Z){const{start:Le,end:Zt}=as(J),Jt=ee.indexOf(re)-1;if(Jt>=0){const Pt=ee[Jt],Wn=_e[Pt];Wn&&24*60-Wn.maxEnd+Le<11*60&&(Z=!0)}if(!Z){const Pt=ee.indexOf(re)+1;if(Pt<ee.length){const Wn=ee[Pt],Vn=_e[Wn];Vn&&24*60-Zt+Vn.minStart<11*60&&(Z=!0)}}}Z||(we[wt]=st?"warning":"valid")})})})}),we},[c,m,a,p,i,h,xe,ye,v]);return w("div",{ref:b,className:"flex-1 overflow-auto bg-gray-200 p-4",onClick:()=>{M(),G(null)},onDragOver:B,children:[s(Dm,{visibility:W,onVisibilityChange:q,cursos:l,turmas:I}),s("div",{style:{display:"inline-block"},onMouseLeave:()=>x(null),children:w("div",{className:"relative grid",style:{gridTemplateColumns:`${T.dayColWidth}px ${T.timeColWidth}px repeat(${xe.length}, ${T.turmaColWidth}px)`},children:[s("div",{className:"sticky top-0 left-0 z-40 bg-slate-200 border-b-2 border-r border-slate-300 flex items-center justify-center p-1",style:{gridColumn:"1 / span 2",gridRow:"1 / span 2"},children:C?w("div",{className:"flex flex-col items-center",children:[s("label",{htmlFor:"year-input",className:"text-xs text-slate-600 mb-1",children:"Ano"}),s("input",{id:"year-input",type:"number",value:E,onChange:P=>k(P.target.value),onBlur:F,onKeyDown:z,className:"w-20 text-center bg-white rounded border-2 border-indigo-500 shadow-inner",autoFocus:!0,onFocus:P=>P.target.select()})]}):w("div",{onClick:()=>S(!0),className:"p-2 cursor-pointer text-center text-slate-700 hover:bg-slate-300 rounded-md",children:[s("div",{className:"font-bold",style:{fontSize:`${T.fontSizeYear}px`},children:o}),s("div",{className:"text-xs font-semibold uppercase tracking-wider",style:{fontSize:`${T.fontSizeYearLabel}px`},children:"Ano"})]})}),vt.map(P=>{const V=P.turmas.filter(U=>W.turmas[U.id]);if(V.length===0)return null;const te=V[0],oe=xe.findIndex(U=>U.id===te.id)+3;return s("div",{className:"sticky top-0 z-30 bg-slate-200 text-slate-800 flex items-center justify-center font-bold p-2 uppercase tracking-wider border-b-2 border-slate-300",style:{gridColumn:`${oe} / span ${V.length}`,height:`${T.headerHeight}px`,fontSize:`${T.fontSizeHeader}px`},children:s("span",{className:"truncate",title:P.nome,children:P.nome})},P.id)}),xe.map((P,V)=>s("div",{className:`sticky z-20 bg-slate-100 text-slate-600 flex items-center justify-center font-semibold p-2 border-b border-slate-300 ${xt.has(P.id)?"border-r-2 border-r-slate-400":"border-r border-slate-300"}`,style:{gridColumn:V+3,top:`${T.headerHeight}px`,height:`${T.headerHeight}px`,fontSize:`${T.fontSizeTurmaHeader}px`},children:P.nome},P.id)),ee.map((P,V)=>{if(ye.length===0)return null;const te=V===ee.length-1,oe=ye.filter(($,se)=>{if(se===ye.length-1)return!1;const Y=be[be.length-1]===$,ie=ke[ke.length-1]===$;return Y||ie}),U=ye.length+oe.length,A=ye.flatMap(($,se)=>{const Y=be[be.length-1]===$,ie=ke[ke.length-1]===$,_e=Y||ie,we=se===ye.length-1,X=[...[s("div",{className:"sticky z-20 bg-slate-50 p-1 text-center border-r border-slate-300 flex items-center justify-center border-b border-slate-300",style:{left:`${T.dayColWidth}px`,fontSize:`${T.fontSizeTime}px`},children:$},`${P}_${$}_time`),...xe.map(Me=>{const Se=`${Me.id}_${P}_${$}`,Qe=Nr.get(Se)||[],wt=Qe.find(at=>!(at.id.endsWith("-0")||at.id.endsWith("-1"))),Z=Qe.find(at=>at.id.endsWith("-0")),st=Qe.find(at=>at.id.endsWith("-1"));return s(Im,{id:Se,gridType:t,turma:Me,fullSlot:wt,slot0:Z,slot1:st,isLastInCourse:xt.has(Me.id),onOpenContextMenu:j,onSelectSlot:G,selectedSlotId:c||null,hoveredProfessorId:e?d:null,onProfessorHover:e?x:()=>{},highlightStatus:Mt[Se]||null,cellAlerts:_t.get(Se)||[],subCellAlerts0:_t.get(`${Se}-0`)||[],subCellAlerts1:_t.get(`${Se}-1`)||[],subSlotHighlightStatus:{0:Mt[`${Se}-0`]||null,1:Mt[`${Se}-1`]||null},scaledCellMinHeight:T.cellMinHeight,scaledCellFontSize:T.fontSizeCell},Se)})]];if(_e&&!we){const Me=s("div",{style:{gridColumn:`2 / span ${1+xe.length}`,height:`${T.periodSeparatorHeight}px`}},`${P}_${$}_separator`);X.push(Me)}return X});return w(Ln.Fragment,{children:[s("div",{className:"sticky left-0 z-30 bg-slate-200 py-2 text-center font-semibold border-r-2 border-slate-300 flex items-center justify-center capitalize [writing-mode:vertical-rl] rotate-180",style:{gridRow:`span ${U}`,fontSize:`${T.fontSizeHeader}px`},children:P}),s("div",{style:{display:"contents"},children:A}),!te&&w(Ln.Fragment,{children:[s("div",{className:"sticky left-0 z-30 bg-slate-300 border-b-2 border-r-2 border-slate-300",style:{gridColumn:"1",height:`${T.daySeparatorHeight}px`}}),s("div",{className:"bg-slate-300 border-b-2 border-slate-300",style:{gridColumn:`2 / span ${1+xe.length}`,height:`${T.daySeparatorHeight}px`}})]})]},P)})]})}),s(_m,{isOpen:g.isOpen,onClose:M,x:g.x,y:g.y,items:H()})]})},Pm=({id:e,label:t,subLabel:n,isLocked:r=!1,isBeingDragged:o=!1})=>{const{dispatch:l}=Te(),i=p=>{if(r){p.preventDefault();return}const[h,m]=e.split("|"),v={type:"SIDEBAR_ITEM",disciplinaId:h,professorId:m};p.dataTransfer.setData("application/json",JSON.stringify(v)),p.dataTransfer.effectAllowed="move",l({type:"DRAG_START",payload:v})},a=()=>{l({type:"DRAG_END"})},u="p-2 rounded-md shadow-sm transition-all duration-150";let c="";return o?c="opacity-40 border-dashed border-indigo-400 bg-white":r?c="opacity-50 cursor-not-allowed bg-gray-100 border border-gray-200":c="cursor-grab active:cursor-grabbing hover:bg-indigo-50 bg-white border border-gray-200",w("div",{draggable:!r,onDragStart:i,onDragEnd:a,className:`${u} ${c}`,children:[s("div",{className:"font-semibold text-sm text-gray-800",children:t}),s("p",{className:"text-xs text-gray-500",children:n})]})},$c=(e,t)=>{const{disciplinas:n}=t,r=n.find(i=>i.id===e.disciplinaId);if(!r)return{finalDisciplinaId:e.disciplinaId,isSwap:!1};if(!(r.turmaId!==e.turmaId))return{finalDisciplinaId:e.disciplinaId,isSwap:!1};if(!!r.bnccId){const i=n.find(a=>a.turmaId===e.turmaId&&a.bnccId===r.bnccId);if(i)return{finalDisciplinaId:i.id,isSwap:!0}}return{finalDisciplinaId:e.disciplinaId,isSwap:!0}},Am=({gridType:e})=>{const{state:t,dispatch:n}=Te(),{atribuicoes:r,disciplinas:o,professores:l,turmas:i,draggedItem:a}=t,[u,c]=_.useState("all"),[p,h]=_.useState(""),[m,v]=_.useState(!1),y=S=>{c(S.target.value)},N=S=>{var E;return((E=i.find(k=>k.id===S))==null?void 0:E.nome)||"N/A"},D=_.useMemo(()=>{const S={};return t.grade.forEach(E=>{const{finalDisciplinaId:k}=$c(E,t),T=E.professorId,I=t.turmas.find(z=>z.id===E.turmaId),F=I!=null&&I.isModular?1.25:1;S[k]||(S[k]={}),S[k][T]=(S[k][T]||0)+F}),S},[t]),g=_.useMemo(()=>i.filter(S=>S.isModular===(e==="modular")),[i,e]),d=_.useMemo(()=>r.flatMap(S=>{const E=o.find(T=>T.id===S.disciplinaId);if(!E)return[];const k=i.find(T=>T.id===E.turmaId);return!k||k.isModular!==(e==="modular")?[]:S.professores.map((T,I)=>({disciplina:E,professor:l.find(F=>F.id===T),turmaId:E.turmaId,assignmentIndex:I}))}).filter(S=>S.professor),[r,o,i,l,e]).filter(S=>{var E;return!(u!=="all"&&S.turmaId!==u||p.trim()!==""&&!((E=S.professor)!=null&&E.nome.toLowerCase().includes(p.toLowerCase())))});return w("div",{className:`p-4 h-full flex flex-col transition-colors duration-200 ${m?"bg-blue-200 border-2 border-dashed border-blue-500":"bg-gray-50"}`,onDragOver:S=>{S.preventDefault(),(a==null?void 0:a.type)==="GRID_ITEM"?(v(!0),S.dataTransfer.dropEffect="move"):S.dataTransfer.dropEffect="none"},onDragLeave:()=>{v(!1)},onDrop:S=>{S.preventDefault(),v(!1),(a==null?void 0:a.type)==="GRID_ITEM"&&a.sourceSlotId&&n({type:"UPDATE_GRADE",payload:{id:a.sourceSlotId,slot:null}}),n({type:"DRAG_END"})},children:[s("h2",{className:"text-lg font-bold mb-4",children:"Atribuies"}),w("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[w("div",{children:[s("label",{htmlFor:"search-professor",className:"block text-sm font-medium text-gray-700",children:"Buscar Professor"}),s("input",{type:"text",id:"search-professor",value:p,onChange:S=>h(S.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),w("div",{children:[s("label",{htmlFor:"turma-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Turma"}),w("select",{id:"turma-filter",value:u,onChange:y,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s("option",{value:"all",children:"Ver Todas"}),g.map(S=>s("option",{value:S.id,children:S.nome},S.id))]})]})]}),s("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:d.map(S=>{const{disciplina:E,professor:k,assignmentIndex:T}=S;if(!E||!k)return null;const I=D[E.id]&&D[E.id][k.id]||0,F=E.aulasSemanais,z=I>=F,W=`${E.id}|${k.id}`,q=`${E.id}|${k.id}|${T}`,O=(a==null?void 0:a.type)==="SIDEBAR_ITEM"&&a.disciplinaId===E.id&&a.professorId===k.id,B=w("span",{children:[E.nome,E.bnccId&&s("span",{className:"text-xs bg-pink-100 text-pink-800 font-semibold ml-2 px-2 py-0.5 rounded-full align-middle",children:"BNCC"}),E.divisao&&w("span",{className:"text-xs bg-blue-100 text-blue-800 font-semibold ml-2 px-2 py-0.5 rounded-full align-middle",children:["Diviso (",E.numProfessores,")"]}),` (${I}/${F}) - ${k.nome}`]}),M=`Turma: ${N(E.turmaId)}`;return s(Pm,{id:W,label:B,subLabel:M,isLocked:z,isBeingDragged:O},q)})})]})},Lm=e=>{let t=0;for(let m=0;m<e.length;m++)t=e.charCodeAt(m)+((t<<5)-t);const n=t%360,r=70,o=50,l=(1-Math.abs(2*(o/100)-1))*(r/100),i=l*(1-Math.abs(n/60%2-1)),a=o/100-l/2;let u=0,c=0,p=0;0<=n&&n<60?(u=l,c=i,p=0):60<=n&&n<120?(u=i,c=l,p=0):120<=n&&n<180?(u=0,c=l,p=i):180<=n&&n<240?(u=0,c=i,p=l):240<=n&&n<300?(u=i,c=0,p=l):300<=n&&n<360&&(u=l,c=0,p=i),u=Math.round((u+a)*255),c=Math.round((c+a)*255),p=Math.round((p+a)*255);const h=m=>("0"+m.toString(16)).slice(-2);return`#${h(u)}${h(c)}${h(p)}`},Om=()=>{const{state:e}=Te(),{onlineUsers:t}=e;if(t.length===0)return null;const n=Et.currentUser,r=[...t].sort((o,l)=>o.id===(n==null?void 0:n.uid)?1:l.id===(n==null?void 0:n.uid)?-1:o.name.localeCompare(l.name));return s("div",{className:"flex items-center -space-x-2 pr-2",children:r.map(o=>w("div",{className:"group relative",children:[s("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ring-2 ring-white",style:{backgroundColor:Lm(o.id)},children:o.id===(n==null?void 0:n.uid)?"VC":o.name.charAt(0).toUpperCase()}),w("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:[o.id===(n==null?void 0:n.uid)?`${o.name} (Voc)`:o.name,s("svg",{className:"absolute text-gray-800 h-2 w-full left-0 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:s("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})]},o.id))})},zm=({status:e,lastModifiedBy:t,lastModifiedAt:n})=>{const o=(()=>{switch(e){case"saving":return{icon:w("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),text:"Salvando...",textColor:"text-gray-500"};case"saved":return{icon:w("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"}),s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4"})]}),text:"Salvo",textColor:"text-green-600"};case"error":return{icon:w("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"}),s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 13V9.5m0 6.5v.01"})]}),text:"Erro ao salvar",textColor:"text-red-600"};default:return null}})();if(!o)return null;const l=e==="saved"&&t&&n?`(por ${t} s ${new Date(n).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})`:null;return w("div",{className:"flex items-center space-x-2",children:[o.icon,s("span",{className:`text-sm font-medium ${o.textColor}`,children:o.text}),l&&s("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:l})]})},Ne={title:{font:{name:"Calibri",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}},alignment:{horizontal:"center",vertical:"middle"}},curso:{font:{name:"Calibri",size:12,bold:!0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFAEC6CF"}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium"},bottom:{style:"medium"},left:{style:"medium"},right:{style:"medium"}}},turma:{font:{name:"Calibri",size:11,bold:!0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF8EA9DB"}},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{bottom:{style:"medium",color:{argb:"FF2F5496"}}}},day:{font:{name:"Calibri",size:12,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle",textRotation:90},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},periodo:{font:{name:"Calibri",size:11,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle",textRotation:90},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},time:{font:{name:"Calibri",size:10,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle"},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},cell_white:{font:{name:"Calibri",size:9},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}}},cell_gray:{font:{name:"Calibri",size:9},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFF2F2F2"}}},disabledCell:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFD9D9D9"}},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}}},vu=(e,t,n,r)=>{const{ano:o,cursos:l,turmas:i,grade:a,disciplinas:u,professores:c}=t,p=i.filter(C=>C.isModular===(n==="modular")).sort((C,S)=>{var T,I;const E=((T=l.find(F=>F.id===C.cursoId))==null?void 0:T.nome)||"",k=((I=l.find(F=>F.id===S.cursoId))==null?void 0:I.nome)||"";return E.localeCompare(k)!==0?E.localeCompare(k):C.nome.localeCompare(S.nome)});if(p.length===0)return;const h=l.map(C=>({...C,turmas:p.filter(S=>S.cursoId===C.id)})).filter(C=>C.turmas.length>0),m=new Map;a.forEach(C=>{const S=`${C.turmaId}_${C.dia}_${C.horario}`;m.has(S)||m.set(S,[]),m.get(S).push(C)});const v=e.addWorksheet(r),y=v.addRow([`Grade de Horrios ${o}`]);y.height=24,v.mergeCells(1,1,1,3+p.length),v.getCell("A1").style=Ne.title;const N=[null,null,null];h.forEach(C=>{N.push(C.nome);for(let S=1;S<C.turmas.length;S++)N.push(null)});const D=v.addRow(N);D.height=20;let g=4;h.forEach(C=>{if(C.turmas.length>0){C.turmas.length>1&&v.mergeCells(2,g,2,g+C.turmas.length-1);for(let S=0;S<C.turmas.length;S++)v.getCell(2,g+S).style=Ne.curso;g+=C.turmas.length}});const f=v.addRow(["Dia","Perodo","Horrio",...p.map(C=>C.nome)]);f.height=35,f.getCell(1).style={...Ne.day,alignment:{...Ne.day.alignment,textRotation:0}},f.getCell(2).style={...Ne.periodo,alignment:{...Ne.periodo.alignment,textRotation:0}},f.getCell(3).style=Ne.time;for(let C=4;C<=f.cellCount;C++)f.getCell(C).style=Ne.turma;const x=[{name:"Manh",horarios:be},{name:"Tarde",horarios:ke},{name:"Noite",horarios:n==="modular"?Cr:qt}];let b=!1;ee.forEach((C,S)=>{const E=v.rowCount+1;if(x.forEach((k,T)=>{if(k.horarios.length===0)return;const I=v.rowCount+1;if(k.horarios.forEach(z=>{const W=p.map(O=>{if(n==="modular"&&z==="18:10-19:00")return null;const B=`${O.id}_${C}_${z}`,M=m.get(B);return M?M.map(j=>{const H=u.find(K=>K.id===j.disciplinaId),G=c.find(K=>K.id===j.professorId);return`${(H==null?void 0:H.nome)||"?"}
${(G==null?void 0:G.nome)||"?"}`}).join(`

`):""}),q=v.addRow([null,null,z,...W]);q.height=50,q.getCell(3).style=Ne.time;for(let O=4;O<=q.cellCount;O++)q.getCell(O).style=q.getCell(O).value===null?Ne.disabledCell:b?Ne.cell_gray:Ne.cell_white;b=!b}),k.horarios.length>0){const z=v.getCell(I,2);z.value=k.name,z.style=Ne.periodo,k.horarios.length>1&&v.mergeCells(I,2,v.rowCount,2)}if(x.slice(T+1).some(z=>z.horarios.length>0)){const z=v.addRow([]);z.height=3;for(let W=3;W<=3+p.length;W++){const q=z.getCell(W);q.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}}}}),v.rowCount>=E){const k=v.getCell(E,1);k.value=C.charAt(0).toUpperCase()+C.slice(1),k.style=Ne.day,v.rowCount>E&&v.mergeCells(E,1,v.rowCount,1)}if(S<ee.length-1){const k=v.addRow([]);k.height=5;for(let T=1;T<=3+p.length;T++)k.getCell(T).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}}}}),v.columns=[{width:8},{width:10},{width:15},...Array(p.length).fill({width:25})],v.views=[{state:"frozen",xSplit:3,ySplit:3}]},Fm=e=>{const t=new Cl.Workbook;return t.creator="Timetable Scheduler",t.created=new Date,vu(t,e,"regular","Grade Regular"),vu(t,e,"modular","Grade Modular"),t.worksheets.length===0?{workbook:null,error:"No h dados para exportar."}:{workbook:t}},Rm=(e,t)=>{const{professores:n,grade:r,turmas:o,disciplinas:l}=e,i=n.find(f=>f.id===t);if(!i)return{workbook:null,error:"Professor no encontrado."};const a=new Cl.Workbook;a.creator="Timetable Scheduler",a.created=new Date;const u=a.addWorksheet(i.nome.substring(0,31)),c=r.filter(f=>f.professorId===t),p=c.reduce((f,d)=>{const x=o.find(b=>b.id===d.turmaId);return f+(x!=null&&x.isModular?1.25:1)},0),h={};c.forEach(f=>{var d,x;h[f.dia]||(h[f.dia]={}),h[f.dia][f.horario]={turma:((d=o.find(b=>b.id===f.turmaId))==null?void 0:d.nome)||"?",disciplina:((x=l.find(b=>b.id===f.disciplinaId))==null?void 0:x.nome)||"?"}}),u.mergeCells("A1:F1");const m=u.getCell("A1");m.value=i.nome,m.style=Ne.title,u.mergeCells("A2:F2");const v=u.getCell("A2");v.value=`Total de Aulas Semanais: ${p}`,v.style={font:{bold:!0},alignment:{horizontal:"center"}},u.addRow(["Horrio",...ee.map(f=>f.charAt(0).toUpperCase()+f.slice(1))]).eachCell(f=>{f.style=Ne.turma,f.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}});const N=[...new Set([...be,...ke,...qt,...Cr])].sort();N.forEach((f,d)=>{const x=[f];ee.forEach(k=>{var I;const T=(I=h[k])==null?void 0:I[f];x.push(T?`${T.disciplina}
${T.turma}`:"")});const b=u.addRow(x);b.getCell(1).style=Ne.time;for(let k=2;k<=6;k++)b.getCell(k).style=Ne.cell_white;b.height=30;const C=be[be.length-1]===f,S=ke[ke.length-1]===f,E=d===N.length-1;if((C||S)&&!E){const k=u.addRow([]);k.height=3;for(let T=1;T<=1+ee.length;T++){const I=k.getCell(T);I.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}}}});const D=ee.map(f=>c.filter(d=>d.dia===f).reduce((d,x)=>{var b;return d+((b=o.find(C=>C.id===x.turmaId))!=null&&b.isModular?1.25:1)},0));return u.addRow(["Carga Diria",...D]).eachCell(f=>{f.style={...Ne.turma,font:{...Ne.turma.font,bold:!0}}}),u.columns=[{width:15},{width:25},{width:25},{width:25},{width:25},{width:25}],{workbook:a}},xu=(e,t,n,r)=>{const o=t.filter(k=>k.professorId===e.id),l=o.reduce((k,T)=>{const I=n.find(F=>F.id===T.turmaId);return k+(I!=null&&I.isModular?1.25:1)},0),i=ee.reduce((k,T)=>(k[T]=o.filter(I=>I.dia===T).reduce((I,F)=>{const z=n.find(W=>W.id===F.turmaId);return I+(z!=null&&z.isModular?1.25:1)},0),k),{}),a={};o.forEach(k=>{var F,z;a[k.dia]||(a[k.dia]={});const T=((F=n.find(W=>W.id===k.turmaId))==null?void 0:F.nome)||"N/A",I=((z=r.find(W=>W.id===k.disciplinaId))==null?void 0:z.nome)||"N/A";a[k.dia][k.horario]={turma:T,disciplina:I}});const u=[...new Set([...qt,...Cr])].sort(),c=[{label:"Manh",horarios:be},{label:"Tarde",horarios:ke},{label:"Noite",horarios:u}],p=new Nu({orientation:"landscape",unit:"pt",format:"a4"}),h=p.internal.pageSize.getWidth(),m=p.internal.pageSize.getHeight(),v=30;let y={titleFontSize:16,subtitleFontSize:10,headerFontSize:9,periodFontSize:8,cellFontSize:8,footerFontSize:9,titleSpacing:18,subtitleSpacing:25,headerRowH:20,regularRowH:32,periodSeparatorH:5,periodHeaderH:15,footerSpacing:5},N=v;N+=y.titleSpacing,N+=y.subtitleSpacing,N+=y.headerRowH,c.forEach(k=>{k.horarios.length>0&&(N+=y.periodSeparatorH,N+=y.periodHeaderH,N+=k.horarios.length*y.regularRowH)}),N+=y.footerSpacing,N+=y.headerRowH,N+=v;const D=m;let g=1;N>D&&(g=D/N);const f=v*Math.min(g,1),d=h-f*2;for(const k in y)y[k]*=g;let x=f;p.setFont("helvetica","bold"),p.setFontSize(y.titleFontSize),p.text(e.nome,h/2,x,{align:"center"}),x+=y.titleSpacing,p.setFont("helvetica","normal"),p.setFontSize(y.subtitleFontSize),p.text(`Total de Aulas Semanais: ${l}`,h/2,x,{align:"center"}),x+=y.subtitleSpacing;const b=65*Math.min(g,1),C=(d-b)/ee.length;p.setFillColor(230,230,230),p.rect(f,x,d,y.headerRowH,"F"),p.setFont("helvetica","bold"),p.setFontSize(y.headerFontSize),p.setDrawColor(180,180,180),p.rect(f,x,d,y.headerRowH);const S=x+y.headerRowH/2+y.headerFontSize*.35;p.text("Horrio",f+b/2,S,{align:"center"}),ee.forEach((k,T)=>{const I=f+b+T*C+C/2;p.text(k.charAt(0).toUpperCase()+k.slice(1),I,S,{align:"center"});const F=f+b+T*C;p.line(F,x,F,x+y.headerRowH)}),x+=y.headerRowH,c.forEach(k=>{k.horarios.length>0&&(x+=y.periodSeparatorH,p.setFillColor(240,240,240),p.rect(f,x,d,y.periodHeaderH,"F"),p.setFont("helvetica","bold"),p.setFontSize(y.periodFontSize),p.text(k.label,f+5,x+y.periodHeaderH/2,{baseline:"middle"}),x+=y.periodHeaderH,k.horarios.forEach(T=>{const I=x;p.setDrawColor(220,220,220),p.rect(f,I,d,y.regularRowH),p.setFont("helvetica","normal"),p.setFontSize(y.cellFontSize),p.text(T,f+b/2,I+y.regularRowH/2,{align:"center",baseline:"middle"}),p.line(f+b,I,f+b,I+y.regularRowH),ee.forEach((F,z)=>{var O;const W=(O=a[F])==null?void 0:O[T],q=f+b+z*C;if(W){p.setFillColor(232,242,255),p.rect(q,I,C,y.regularRowH,"F");const B=I+y.regularRowH/2-y.cellFontSize*.2,M=B+y.cellFontSize*1.1,j=C-6;let H=W.disciplina;if(p.setFont("helvetica","bold"),p.setFontSize(y.cellFontSize),p.getTextWidth(H)>j){for(;H.length>0&&p.getTextWidth(H+"...")>j;)H=H.slice(0,-1);H+="..."}p.text(H,q+C/2,B,{align:"center"});let G=W.turma;if(p.setFont("helvetica","normal"),p.getTextWidth(G)>j){for(;G.length>0&&p.getTextWidth(G+"...")>j;)G=G.slice(0,-1);G+="..."}p.text(G,q+C/2,M,{align:"center"})}p.line(q,I,q,I+y.regularRowH)}),x+=y.regularRowH}))}),x+=y.footerSpacing,p.setFillColor(230,230,230),p.rect(f,x,d,y.headerRowH,"F"),p.setFont("helvetica","bold"),p.setFontSize(y.footerFontSize),p.setDrawColor(180,180,180),p.rect(f,x,d,y.headerRowH);const E=x+y.headerRowH/2+y.footerFontSize*.35;return p.text("Carga Diria",f+b/2,E,{align:"center"}),ee.forEach((k,T)=>{const I=f+b+T*C+C/2;p.text(String(i[k]||0),I,E,{align:"center"});const F=f+b+T*C;p.line(F,x,F,x+y.headerRowH)}),{doc:p}},$m=e=>{const t=new Map,n=new Map,r=new Map,o=[...e].sort((i,a)=>i.nome.localeCompare(a.nome));for(const i of o){const a=new Set(["de","da","do","dos","das"]),u=i.nome.trim().split(" ").filter(p=>!a.has(p.toLowerCase()));let c="??";if(u.length>0){const p=u[0].charAt(0).toUpperCase(),h=u.length>1?u[u.length-1].charAt(0).toUpperCase():"";c=`${p}${h}`}n.set(c,(n.get(c)||0)+1),r.set(i.nome,c)}const l=new Map;for(const i of o){const a=r.get(i.nome),u=n.get(a);let c=a;if(u>1){const h=(l.get(a)||0)+1;h>1&&(c=`${a}${h}`),l.set(a,h)}t.set(i.id,c)}return t},jm=e=>{const t=new Map,n=new Set;for(const r of e){if(n.has(r.nome))continue;const l=r.nome.trim().split(" ").filter(a=>a.length>0);let i="???";l.length>1?i=l.map(a=>a.charAt(0)).join("").toUpperCase():l.length===1&&l[0].length>0&&(i=l[0].substring(0,3).toUpperCase()),i.length>5&&(i=i.substring(0,5)),t.set(r.nome,i),n.add(r.nome)}return t},wu=(e,t,n,r)=>{const i=n.w-12,a=n.h-n.h*.1;if(i<=0||a<4)return;let u=Math.min(r,a),c=t;for(;u>4&&(e.setFontSize(u),!(e.getTextWidth(c)<i));)u-=.25;if(e.setFontSize(4),e.getTextWidth(t)>i){let h=t;for(;h.length>0&&e.getTextWidth(h+"...")>i;)h=h.slice(0,-1);c=h+"..."}const p=Math.max(u,4);e.setFontSize(p),e.setFont("helvetica","bold"),e.text(c,n.x+n.w/2,n.y+n.h/2,{align:"center",baseline:"middle",maxWidth:i})},Hm=(e,t,n,r,o,l,i,a,u,c,p)=>{const h=e.internal.pageSize.getWidth(),m=e.internal.pageSize.getHeight()-i;e.setFontSize(a*.6),e.setFont("helvetica","bold"),e.setTextColor(0,0,0);const v=n>1?`(Pgina ${t+1} de ${n})`:"";if(e.text(`Grade de Horrios ${l} - ${o} ${v}`,h/2,i,{align:"center"}),e.setFontSize(a*.4),e.setFont("helvetica","italic"),e.setTextColor(100,100,100),r.length>0){const y=r[0].nome,N=r[r.length-1].nome,D=`Exibindo turmas: ${y} a ${N}`;e.text(D,h/2,i+a*.5,{align:"center"})}if(e.setFontSize(u*.4),e.setFont("helvetica","normal"),e.setTextColor(150,150,150),e.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,i,m+u*.6),n>1&&e.text("Instrues: Para montar, imprima todas as pginas e alinhe as guias pontilhadas laterais.",h/2,m+u*.6,{align:"center"}),n>1){if(e.setLineDashPattern([2,2],0),e.setDrawColor(180,180,180),e.setLineWidth(.5),t<n-1){const y=h-i;e.line(y,c,y,p),e.setFontSize(u*.45),e.setTextColor(150,150,150),e.text(`Continua na Pg. ${t+2} ->`,y-5,c+10,{align:"right",angle:90})}if(t>0){const y=i;e.line(y,c,y,p),e.setFontSize(u*.45),e.setTextColor(150,150,150),e.text(`<- Vem da Pg. ${t}`,y+5,p-10,{align:"left",angle:90})}e.setLineDashPattern([],0),e.setTextColor(0,0,0)}},Bm=(e,t)=>{const{ano:n,cursos:r,turmas:o,grade:l,disciplinas:i,professores:a}=e,u=o.filter(A=>A.isModular===(t==="modular")).sort((A,$)=>{var ie,_e;const se=((ie=r.find(we=>we.id===A.cursoId))==null?void 0:ie.nome)||"",Y=((_e=r.find(we=>we.id===$.cursoId))==null?void 0:_e.nome)||"";return se.localeCompare(Y)!==0?se.localeCompare(Y):A.nome.localeCompare($.nome)});if(u.length===0)return{doc:null,error:`Nenhuma turma para a grade ${t==="regular"?"Regular":"Modular"}.`};const c=new Set,p=new Set,h=new Set(u.map(A=>A.id));l.forEach(A=>{h.has(A.turmaId)&&(c.add(A.professorId),p.add(A.disciplinaId))});const m=e.professores.filter(A=>c.has(A.id)),v=e.disciplinas.filter(A=>p.has(A.id)),y=$m(m),N=jm(v),D=u.filter(A=>A.periodo!=="noite"),g=u.filter(A=>A.periodo==="noite"),f=new Map;l.forEach(A=>{const $=`${A.turmaId}_${A.dia}_${A.horario}`;f.has($)||f.set($,[]),f.get($).push(A)});const d=new Nu({orientation:"landscape",unit:"pt",format:"a3"}),x=d.internal.pageSize.getWidth(),b=d.internal.pageSize.getHeight(),C=30,S={title:14,header:11,cell:9,dividedCell:8},E={titleHeader:25,titleSubheader:15,footer:20,curso:18,turma:45,cell:35,periodSeparator:3,daySeparator:5},k={day:40,period:40,time:60,turma:90},T=k.day+k.period+k.time,I=x-C*2-T,F=Math.max(1,Math.floor(I/k.turma)),z=[];for(let A=0;A<D.length;A+=F)z.push(D.slice(A,A+F));const W=[];for(let A=0;A<g.length;A+=F)W.push(g.slice(A,A+F));const q=z.length+W.length;if(q===0)return{doc:null,error:`Nenhuma aula encontrada para a grade ${t==="regular"?"Regular":"Modular"}.`};const O=q+1;let B=0;const M=(A,$,se)=>{A.length!==0&&A.forEach(Y=>{B>0&&d.addPage();let ie=0;ee.forEach((pe,Le)=>{$.forEach((Zt,Jt)=>{Zt.horarios.length!==0&&(ie+=Zt.horarios.length*E.cell,$.slice(Jt+1).some(Pt=>Pt.horarios.length>0)&&(ie+=E.periodSeparator))}),Le<ee.length-1&&(ie+=E.daySeparator)});const we=E.curso+E.turma+ie,Q=E.titleHeader+E.titleSubheader+E.footer+20,re=b-C*2-Q;let J=Math.min(1,re/we);J<1&&(J=J*.95);const X={...E};for(const pe in X)X[pe]*=J;const Me={...S};for(const pe in Me)Me[pe]*=J;const Se=`${t==="regular"?"Grade Regular":"Grade Modular"} - ${se}`,Qe=C+X.titleHeader+X.titleSubheader,wt=Qe+we*J;Hm(d,B,O,Y,Se,n,C,X.titleHeader,X.footer,Qe,wt);let Z=Qe;d.setFont("helvetica","bold"),d.setDrawColor(150);let st=C+T;const at=new Set(Y.map(pe=>pe.id));r.map(pe=>({...pe,turmas:o.filter(Le=>Le.cursoId===pe.id&&at.has(Le.id))})).filter(pe=>pe.turmas.length>0).forEach(pe=>{const Le=pe.turmas.length*k.turma;d.setFillColor(220,220,220),d.rect(st,Z,Le,X.curso,"FD"),d.setFontSize(Me.header*1.2),d.setFont("helvetica","bold"),d.text(pe.nome,st+Le/2,Z+X.curso/2,{align:"center",baseline:"middle",maxWidth:Le-4}),st+=Le}),st=C+T,Y.forEach(pe=>{d.setFillColor(235,235,235),d.setTextColor(0,0,0),d.rect(st,Z+X.curso,k.turma,X.turma,"FD"),d.setFontSize(Me.header*1.1),d.setFont("helvetica","bold");const Le=d.splitTextToSize(pe.nome,k.turma-4);d.text(Le,st+k.turma/2,Z+X.curso+X.turma/2,{align:"center",baseline:"middle"}),st+=k.turma});const Kt=X.curso+X.turma;d.setFillColor(220,220,220),d.rect(C,Z,T,Kt,"FD"),d.setFontSize(Me.header*1.15),d.setFont("helvetica","bold"),d.text("Dia",C+k.day/2,Z+Kt/2,{align:"center",baseline:"middle"}),d.text("Perodo",C+k.day+k.period/2,Z+Kt/2,{align:"center",baseline:"middle"}),d.text("Horrio",C+k.day+k.period+k.time/2,Z+Kt/2,{align:"center",baseline:"middle"}),Z+=Kt,ee.forEach((pe,Le)=>{const Zt=Z;$.forEach((Pt,Wn)=>{if(Pt.horarios.length===0)return;const Vn=Z;Pt.horarios.forEach(br=>{d.setFontSize(Me.header),d.setFont("helvetica","bold"),d.setFillColor(245,245,245),d.setDrawColor(200),d.rect(C+k.day+k.period,Z,k.time,X.cell,"FD"),d.text(br,C+k.day+k.period+k.time/2,Z+X.cell/2,{align:"center",baseline:"middle"});let $t=C+T;Y.forEach(Hc=>{const Bc=t==="modular"&&br==="18:10-19:00";if(d.setDrawColor(200),Bc){d.setFillColor(220,220,220),d.rect($t,Z,k.turma,X.cell,"FD");const Be=4*J;d.line($t+Be,Z+Be,$t+k.turma-Be,Z+X.cell-Be),d.line($t+k.turma-Be,Z+Be,$t+Be,Z+X.cell-Be)}else{const Be=f.get(`${Hc.id}_${pe}_${br}`);if(d.setFillColor(255,255,255),d.rect($t,Z,k.turma,X.cell,"FD"),Be&&Be.length>0){const la=i.find(ut=>ut.id===Be[0].disciplinaId),ia=la&&N.get(la.nome)||"???";if(Be.length===1){const ut=y.get(Be[0].professorId)||"??";wu(d,`${ia} - ${ut}`,{x:$t,y:Z,w:k.turma,h:X.cell},Me.cell)}else{const ut=Be.sort((Nn,en)=>Nn.id.localeCompare(en.id)),kr=k.turma/ut.length;let Er=Me.dividedCell;ut.length===2?Er*=.7:ut.length===3?Er*=.55:ut.length>=4&&(Er*=.45),console.log(`Divises: ${ut.length}, Largura sub-clula: ${kr.toFixed(2)}, Fonte inicial: ${Er.toFixed(2)}`);const Uc=ut.length>2?(Nn,en)=>`${Nn}${en}`:(Nn,en)=>`${Nn} - ${en}`;ut.forEach((Nn,en)=>{const Wc=y.get(Nn.professorId)||"??",Vc=Uc(ia,Wc),Hl=$t+en*kr,Gc={x:Hl,y:Z,w:kr,h:X.cell};wu(d,Vc,Gc,Er),en<ut.length-1&&(d.setDrawColor(200),d.setLineWidth(.5),d.line(Hl+kr,Z,Hl+kr,Z+X.cell))})}}}$t+=k.turma}),Z+=X.cell});const jl=Z-Vn;jl>0&&(d.setFillColor(240,240,240),d.setDrawColor(150),d.rect(C+k.day,Vn,k.period,jl,"FD"),d.text(Pt.name,C+k.day+k.period/2,Vn+jl/2,{align:"center",baseline:"middle",angle:90})),$.slice(Wn+1).some(br=>br.horarios.length>0)&&(d.setFillColor(200,200,200),d.rect(C,Z,x-C*2,X.periodSeparator,"F"),Z+=X.periodSeparator)});const Jt=Z-Zt;Jt>0&&(d.setFillColor(230,230,230),d.setDrawColor(150),d.rect(C,Zt,k.day,Jt,"FD"),d.text(pe.charAt(0).toUpperCase()+pe.slice(1),C+k.day/2,Zt+Jt/2,{align:"center",baseline:"middle",angle:90})),Le<ee.length-1&&(d.setFillColor(150,150,150),d.rect(C,Z,x-C*2,X.daySeparator,"F"),Z+=X.daySeparator)}),B++})},j=[{name:"Manh",horarios:be},{name:"Tarde",horarios:ke}],G=[{name:"Noite",horarios:t==="modular"?Cr:qt}];M(z,j,"Diurno"),M(W,G,"Noturno"),d.addPage("a3","landscape");let K=C;d.setFontSize(16),d.setFont("helvetica","bold"),d.text("Legenda de Siglas",x/2,K,{align:"center"}),K+=30;const yt=C,ye=x/3+C,xe=x/3*2+C,Xe=x/3-C-10,vt=8,xt=vt*1.3;d.setFontSize(12),d.setFont("helvetica","bold"),d.text("Disciplinas",yt,K),d.text("Professores",ye,K),K+=20;const Nr=[...N.entries()].sort((A,$)=>A[0].localeCompare($[0])),_t=[...m].sort((A,$)=>A.nome.localeCompare($.nome));let Mt=K,P=K,V=K;const te=Math.ceil(_t.length/2),oe=_t.slice(0,te),U=_t.slice(te);d.setFontSize(vt),d.setFont("helvetica","normal");for(const[A,$]of Nr){const se=`${$}: ${A}`,Y=d.splitTextToSize(se,Xe);d.text(Y,yt,Mt),Mt+=Y.length*xt}for(const A of oe){const $=y.get(A.id)||"??";d.text(`${$}: ${A.nome}`,ye,P,{maxWidth:Xe}),P+=xt}for(const A of U){const $=y.get(A.id)||"??";d.text(`${$}: ${A.nome}`,xe,V,{maxWidth:Xe}),V+=xt}return{doc:d}},Um=({currentView:e,setCurrentView:t,activeGrid:n,isFocusModeEnabled:r,onFocusModeChange:o,onOpenClearDataModal:l,onOpenLoadExampleModal:i})=>{const{state:a,dispatch:u}=Te(),c=()=>{const{draggedItem:g,clipboard:f,selectedSlotId:d,onlineUsers:x,toastMessage:b,saveStatus:C,...S}=a,E=JSON.stringify(S,null,2),k="data:application/json;charset=utf-8,"+encodeURIComponent(E),T="grade_horarios.json",I=document.createElement("a");I.setAttribute("href",k),I.setAttribute("download",T),I.click()},p=()=>{const{grade:g,turmas:f,disciplinas:d,professores:x}=a,b="Turma,Dia,Horario,Disciplina,Professor",C=g.map(I=>{var q,O,B;const F=((q=f.find(M=>M.id===I.turmaId))==null?void 0:q.nome)||I.turmaId,z=((O=d.find(M=>M.id===I.disciplinaId))==null?void 0:O.nome)||I.disciplinaId,W=((B=x.find(M=>M.id===I.professorId))==null?void 0:B.nome)||I.professorId;return[F,I.dia,I.horario,`"${z}"`,`"${W}"`].join(",")}),S=[b,...C].join(`
`),E=new Blob([`\uFEFF${S}`],{type:"text/csv;charset=utf-8;"}),k=URL.createObjectURL(E),T=document.createElement("a");T.setAttribute("href",k),T.setAttribute("download","grade_horarios.csv"),T.click(),URL.revokeObjectURL(k)},h=()=>{u({type:"SHOW_TOAST",payload:"Gerando arquivo XLSX..."}),setTimeout(()=>{try{const{workbook:g,error:f}=Fm(a);if(f){u({type:"SHOW_TOAST",payload:f});return}g&&g.xlsx.writeBuffer().then(d=>{const x=new Blob([d],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),b=URL.createObjectURL(x),C=document.createElement("a");C.setAttribute("href",b),C.setAttribute("download","grade_horarios.xlsx"),document.body.appendChild(C),C.click(),document.body.removeChild(C),URL.revokeObjectURL(b),u({type:"SHOW_TOAST",payload:"Exportao para XLSX concluda!"})}).catch(d=>{console.error("Error writing XLSX buffer:",d),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})})}catch(g){console.error("Error generating XLSX file:",g),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})}},50)},m=()=>{e==="grid"&&(u({type:"SHOW_TOAST",payload:"Gerando arquivo PDF..."}),setTimeout(()=>{try{const{doc:g,error:f}=Bm(a,n);if(f||!g){u({type:"SHOW_TOAST",payload:f||"Erro ao gerar PDF."});return}const d=`grade_${n}.pdf`;g.save(d),u({type:"SHOW_TOAST",payload:"Exportao para PDF concluda!"})}catch(g){console.error("Error generating PDF:",g),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo PDF."})}},50))},v=g=>{const f=new FileReader;g.target.files&&g.target.files[0]&&(f.readAsText(g.target.files[0],"UTF-8"),f.onload=d=>{if(d.target&&typeof d.target.result=="string")try{const x=JSON.parse(d.target.result);x.version&&x.cursos?(u({type:"SET_STATE",payload:x}),u({type:"SHOW_TOAST",payload:"Arquivo importado com sucesso!"})):u({type:"SHOW_TOAST",payload:"Arquivo JSON invlido."})}catch{u({type:"SHOW_TOAST",payload:"Erro ao processar o arquivo JSON."})}},g.target.value="")},y="px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",N="bg-indigo-600 text-white",D="bg-gray-200 text-gray-700 hover:bg-gray-300";return s(On,{children:w("div",{className:"flex items-center justify-between p-2 bg-white",children:[w("div",{className:"flex items-center space-x-4",children:[s("h1",{className:"text-xl font-bold text-gray-700",children:"Timetable Scheduler"}),w("div",{className:"flex items-center bg-gray-200 rounded-md p-1",children:[s("button",{onClick:()=>t("dashboard"),className:`${y} ${e==="dashboard"?N:D}`,children:"Painel"}),s("button",{onClick:()=>t("grid"),className:`${y} ${e==="grid"?N:D}`,children:"Grade"}),s("button",{onClick:()=>t("management"),className:`${y} ${e==="management"?N:D}`,children:"Gerenciamento"}),s("button",{onClick:()=>t("professor"),className:`${y} ${e==="professor"?N:D}`,children:"Professor"})]}),e==="grid"&&w("div",{className:"flex items-center space-x-2 ml-6",children:[s("label",{htmlFor:"focus-mode-toggle",className:"text-sm font-medium text-gray-700 select-none cursor-pointer",children:"Modo Foco"}),w("div",{className:"relative",children:[s("input",{id:"focus-mode-toggle",type:"checkbox",className:"sr-only",checked:r,onChange:g=>o(g.target.checked)}),s("div",{onClick:()=>o(!r),className:`block w-10 h-6 rounded-full transition-colors cursor-pointer ${r?"bg-indigo-600":"bg-gray-200"}`}),s("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${r?"translate-x-4":""}`})]})]})]}),w("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1",children:[s(zm,{status:a.saveStatus,lastModifiedBy:a.lastModifiedBy,lastModifiedAt:a.lastModifiedAt}),s("div",{className:"w-px h-6 bg-gray-300 mx-2"}),s(Om,{}),s("div",{className:"w-px h-6 bg-gray-300 mx-2"}),s("button",{onClick:i,className:"p-2 rounded hover:bg-gray-200",title:"Carregar dados de demonstrao",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4M4 7v4c0 2.21 3.582 4 8 4s8-1.79 8-4V7"})})}),s("button",{onClick:l,className:"p-2 rounded hover:bg-gray-200",title:"Limpar todos os dados da aplicao",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s("button",{onClick:()=>u({type:"UNDO"}),className:"p-2 rounded hover:bg-gray-200",title:"Desfazer (Ctrl+Z)",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8a5 5 0 015 5v1"})})}),s("button",{onClick:()=>u({type:"REDO"}),className:"p-2 rounded hover:bg-gray-200",title:"Refazer (Ctrl+Y)",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 15l3-3m0 0l-3-3m3 3H5a5 5 0 01-5-5v-1"})})}),w("label",{htmlFor:"import-json",className:"cursor-pointer p-2 rounded hover:bg-gray-200",title:"Restaurar backup (JSON)",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),s("input",{type:"file",id:"import-json",className:"hidden",accept:".json",onChange:v})]}),s("button",{onClick:c,className:"p-2 rounded hover:bg-gray-200",title:"Fazer backup dos dados (JSON)",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s("button",{onClick:p,className:"p-2 rounded hover:bg-gray-200",title:"Exportar dados brutos para planilha (CSV)",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s("button",{onClick:h,className:"p-2 rounded hover:bg-gray-200",title:"Exportar grades formatadas para Excel (XLSX)",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s("button",{onClick:m,disabled:e!=="grid",className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar grade atual para PDF",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]})})},Wm=()=>w("div",{className:"px-4",children:[s("h3",{className:"text-sm font-semibold mb-2",children:"Legenda de Alertas:"}),w("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[w("div",{className:"flex items-center space-x-2 text-xs",children:[s("span",{className:"w-4 h-4 rounded-full bg-green-200 border border-gray-300"}),s("span",{children:"Horrio Vlido (sem conflitos)"})]},"valid-slot"),Object.keys(Pn).map(e=>{const t=e,{bg:n,name:r}=Pn[t];return w("div",{className:"flex items-center space-x-2 text-xs",children:[s("span",{className:`w-4 h-4 rounded-full ${n}`}),s("span",{children:r})]},e)})]})]}),Cn=({isOpen:e,onClose:t,title:n,children:r,size:o="md",contentRef:l})=>{const i=_.useRef(null);if(_.useEffect(()=>{i.current=document.getElementById("modal-root")},[]),!e||!i.current)return null;const a={md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"};return zc.createPortal(s("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:t,children:w("div",{className:`bg-white rounded-lg shadow-xl w-full ${a[o]} flex flex-col max-h-[90vh]`,onClick:u=>u.stopPropagation(),children:[w("div",{className:"flex-shrink-0 flex justify-between items-center p-6 pb-4 border-b",children:[s("h3",{className:"text-lg font-medium text-gray-900",children:n}),s("button",{onClick:t,className:"text-gray-400 hover:text-gray-600",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s("div",{className:"overflow-y-auto p-6",ref:l,children:r})]})}),i.current)},$l=({isOpen:e,onClose:t,onConfirm:n,title:r,message:o})=>s(Cn,{isOpen:e,onClose:t,title:r,children:w("div",{className:"space-y-4",children:[s("p",{className:"text-sm text-gray-700",children:o}),w("div",{className:"mt-6 flex justify-end space-x-2",children:[s("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancelar"}),s("button",{type:"button",onClick:()=>{n(),t()},className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Confirmar Excluso"})]})]})}),Vm=()=>{const{state:e,dispatch:t}=Te(),[n,r]=_.useState(!1),[o,l]=_.useState(null),[i,a]=_.useState(""),[u,c]=_.useState({isOpen:!1,id:null}),p=N=>{l(N),a(N?N.nome:""),r(!0)},h=()=>{r(!1),l(null),a("")},m=N=>{N.preventDefault(),i.trim()&&(t(o?{type:"UPDATE_CURSO",payload:{...o,nome:i}}:{type:"ADD_CURSO",payload:{id:`c${Date.now()}`,nome:i}}),h())},v=N=>{c({isOpen:!0,id:N})},y=()=>{u.id&&t({type:"DELETE_CURSO",payload:{id:u.id}}),c({isOpen:!1,id:null})};return w("div",{children:[w("div",{className:"flex justify-between items-center mb-4",children:[s("h2",{className:"text-2xl font-bold",children:"Gerenciar Cursos"}),s("button",{onClick:()=>p(null),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Adicionar Curso"})]}),s("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:e.cursos.length>0?e.cursos.map(N=>w("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[s("span",{className:"font-medium text-gray-800 mb-4",children:N.nome}),w("div",{className:"flex justify-end space-x-2",children:[s("button",{onClick:()=>p(N),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),s("button",{onClick:()=>v(N.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},N.id)):s("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:"Nenhum curso cadastrado."})}),s(Cn,{isOpen:n,onClose:h,title:o?"Editar Curso":"Adicionar Curso",children:w("form",{onSubmit:m,children:[s("label",{htmlFor:"cursoName",className:"block text-sm font-medium text-gray-700",children:"Nome do Curso"}),s("input",{type:"text",id:"cursoName",value:i,onChange:N=>a(N.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0}),w("div",{className:"mt-4 flex justify-end space-x-2",children:[s("button",{type:"button",onClick:h,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Salvar"})]})]})}),s($l,{isOpen:u.isOpen,onClose:()=>c({isOpen:!1,id:null}),onConfirm:y,title:"Confirmar Excluso de Curso",message:"Tem certeza que deseja excluir este curso? Todas as turmas, disciplinas e aulas associadas tambm sero removidas permanentemente."})]})},Gm=()=>{const{state:e,dispatch:t}=Te(),[n,r]=_.useState(!1),[o,l]=_.useState(null),[i,a]=_.useState({nome:"",cursoId:"",periodo:"manha",isModular:!1}),[u,c]=_.useState("all"),[p,h]=_.useState({isOpen:!1,id:null});_.useEffect(()=>{!i.cursoId&&e.cursos.length>0&&a(d=>({...d,cursoId:e.cursos[0].id}))},[e.cursos,i.cursoId]);const m=d=>{var x;l(d),a(d?{nome:d.nome,cursoId:d.cursoId,periodo:d.periodo,isModular:!!d.isModular}:{nome:"",cursoId:((x=e.cursos[0])==null?void 0:x.id)||"",periodo:"manha",isModular:!1}),r(!0)},v=()=>{r(!1),l(null),a({nome:"",cursoId:"",periodo:"manha",isModular:!1})},y=d=>{d.preventDefault(),!(!i.nome.trim()||!i.cursoId||!i.periodo)&&(t(o?{type:"UPDATE_TURMA",payload:{...o,...i}}:{type:"ADD_TURMA",payload:{id:`t${Date.now()}`,...i}}),v())},N=d=>{h({isOpen:!0,id:d})},D=()=>{p.id&&t({type:"DELETE_TURMA",payload:{id:p.id}}),h({isOpen:!1,id:null})},g=d=>{var x;return((x=e.cursos.find(b=>b.id===d))==null?void 0:x.nome)||"N/A"},f=e.turmas.filter(d=>u==="all"?!0:d.cursoId===u);return w("div",{children:[w("div",{className:"flex justify-between items-center mb-4",children:[s("h2",{className:"text-2xl font-bold",children:"Gerenciar Turmas"}),w("div",{className:"flex items-center space-x-4",children:[w("div",{className:"w-64",children:[s("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Curso"}),w("select",{id:"curso-filter",value:u,onChange:d=>c(d.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s("option",{value:"all",children:"Todos os Cursos"}),e.cursos.map(d=>s("option",{value:d.id,children:d.nome},d.id))]})]}),s("button",{onClick:()=>m(null),className:"self-end px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",disabled:e.cursos.length===0,children:"Adicionar Turma"})]})]}),s("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:f.length>0?f.map(d=>w("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[w("div",{children:[w("div",{className:"flex justify-between items-start",children:[s("h4",{className:"font-bold text-gray-800",children:d.nome}),d.isModular&&s("span",{className:"flex-shrink-0 text-xs bg-purple-100 text-purple-800 font-semibold ml-2 px-2 py-0.5 rounded-full",children:"Modular"})]}),s("p",{className:"text-sm text-gray-500",children:g(d.cursoId)}),s("p",{className:"text-sm text-gray-500 capitalize",children:d.periodo})]}),w("div",{className:"flex justify-end space-x-2 mt-4",children:[s("button",{onClick:()=>m(d),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),s("button",{onClick:()=>N(d.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},d.id)):s("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:e.turmas.length===0?"Nenhuma turma cadastrada.":"Nenhuma turma encontrada para o filtro selecionado."})}),s(Cn,{isOpen:n,onClose:v,title:o?"Editar Turma":"Adicionar Turma",children:w("form",{onSubmit:y,className:"space-y-4",children:[w("div",{children:[s("label",{htmlFor:"turmaName",className:"block text-sm font-medium text-gray-700",children:"Nome da Turma"}),s("input",{type:"text",id:"turmaName",value:i.nome,onChange:d=>a({...i,nome:d.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),w("div",{children:[s("label",{htmlFor:"cursoId",className:"block text-sm font-medium text-gray-700",children:"Curso"}),w("select",{id:"cursoId",value:i.cursoId,onChange:d=>a({...i,cursoId:d.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[s("option",{value:"",disabled:!0,children:"Selecione um curso"}),e.cursos.map(d=>s("option",{value:d.id,children:d.nome},d.id))]})]}),w("div",{children:[s("label",{htmlFor:"turmaPeriodo",className:"block text-sm font-medium text-gray-700",children:"Perodo"}),w("select",{id:"turmaPeriodo",value:i.periodo,onChange:d=>a({...i,periodo:d.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[s("option",{value:"manha",children:"Manh"}),s("option",{value:"tarde",children:"Tarde"}),s("option",{value:"noite",children:"Noite"})]})]}),s("div",{className:"pt-2",children:w("div",{className:"flex items-start",children:[s("div",{className:"flex items-center h-5",children:s("input",{id:"isModular",type:"checkbox",checked:i.isModular,onChange:d=>a({...i,isModular:d.target.checked}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),w("div",{className:"ml-3 text-sm",children:[s("label",{htmlFor:"isModular",className:"font-medium text-gray-700",children:"Turma Modular?"}),s("p",{className:"text-gray-500",children:"Turmas modulares aparecero em uma grade de horrios separada."})]})]})}),w("div",{className:"mt-4 flex justify-end space-x-2",children:[s("button",{type:"button",onClick:v,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Salvar"})]})]})}),s($l,{isOpen:p.isOpen,onClose:()=>h({isOpen:!1,id:null}),onConfirm:D,title:"Confirmar Excluso de Turma",message:"Tem certeza que deseja excluir esta turma? Todas as disciplinas e aulas associadas tambm sero removidas permanentemente."})]})},Xm=({isOpen:e,onClose:t})=>{const{state:n,dispatch:r}=Te(),o=_.useMemo(()=>{const u={};return n.disciplinas.forEach(c=>{c.bnccId||(u[c.nome]||(u[c.nome]={turmas:new Set}),u[c.nome].turmas.add(c.turmaId))}),Object.entries(u).filter(([c,p])=>p.turmas.size>1).map(([c,p])=>({nome:c,count:p.turmas.size})).sort((c,p)=>p.count!==c.count?p.count-c.count:c.nome.localeCompare(p.nome))},[n.disciplinas]),l=u=>{r({type:"CREATE_BNCC",payload:{nome:u}})},i=u=>{r({type:"DELETE_BNCC",payload:{bnccId:u}})},a="flex-shrink-0 w-32 justify-center text-center text-sm px-3 py-1 rounded-md transition-colors";return s(Cn,{isOpen:e,onClose:t,title:"Gerenciar Grupos BNCC",size:"4xl",children:w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[w("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner",children:[s("h3",{className:"text-lg font-semibold mb-3",children:"Sugestes de Grupos BNCC"}),s("p",{className:"text-sm text-gray-500 mb-3",children:"Disciplinas com o mesmo nome em mltiplas turmas so candidatas a se tornarem um grupo BNCC."}),o.length>0?s("ul",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto pr-2",children:o.map(u=>w("li",{className:"py-3 flex justify-between items-center",children:[w("div",{children:[s("span",{className:"font-medium",children:u.nome}),w("span",{className:"text-sm text-gray-500 ml-2",children:["(",u.count," turmas)"]})]}),s("button",{onClick:()=>l(u.nome),className:`${a} bg-green-500 text-white hover:bg-green-600`,children:"Criar Grupo"})]},u.nome))}):s("p",{className:"text-sm text-gray-500",children:"Nenhuma sugesto de grupo BNCC encontrada."})]}),w("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner",children:[s("h3",{className:"text-lg font-semibold mb-3",children:"Grupos BNCC Atuais"}),s("p",{className:"text-sm text-gray-500 mb-3",children:'As atribuies de professores para estes grupos so feitas na aba "Atribuies".'}),n.bncc.length>0?s("ul",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto pr-2",children:n.bncc.map(u=>w("li",{className:"py-3 flex justify-between items-center",children:[s("span",{className:"font-medium",children:u.nome}),s("button",{onClick:()=>i(u.id),className:`${a} bg-red-500 text-white hover:bg-red-600`,children:"Desfazer Grupo"})]},u.id))}):s("p",{className:"text-sm text-gray-500",children:"Nenhum grupo BNCC foi criado."})]})]})})},Qm=()=>{const{state:e,dispatch:t}=Te(),[n,r]=_.useState(!1),[o,l]=_.useState(!1),[i,a]=_.useState(null),[u,c]=_.useState({nome:"",turmaId:"",divisao:!1,numProfessores:1,aulasSemanais:1}),[p,h]=_.useState("all"),[m,v]=_.useState({isOpen:!1,id:null});_.useEffect(()=>{!u.turmaId&&e.turmas.length>0&&c(S=>({...S,turmaId:e.turmas[0].id}))},[e.turmas,u.turmaId]);const y=_.useMemo(()=>{var S;return((S=e.turmas.find(E=>E.id===u.turmaId))==null?void 0:S.isModular)??!1},[u.turmaId,e.turmas]),N=S=>{if(a(S),S)c({...S});else{const E=e.turmas.length>0?e.turmas[0].id:"",k=e.turmas.find(I=>I.id===E),T=k!=null&&k.isModular?1.25:1;c({nome:"",turmaId:E,divisao:!1,numProfessores:1,aulasSemanais:T})}r(!0)},D=()=>{r(!1),a(null)},g=S=>{if(S.preventDefault(),!u.nome.trim()||!u.turmaId)return;const E={...u,numProfessores:u.divisao?u.numProfessores:1};t(i?{type:"UPDATE_DISCIPLINA",payload:{...i,...E}}:{type:"ADD_DISCIPLINA",payload:{id:`d${Date.now()}`,...E}}),D()},f=S=>{v({isOpen:!0,id:S})},d=()=>{m.id&&t({type:"DELETE_DISCIPLINA",payload:{id:m.id}}),v({isOpen:!1,id:null})},x=S=>{c(E=>{if(i)return{...E,turmaId:S};const k=e.turmas.find(I=>I.id===S),T=k!=null&&k.isModular?1.25:1;return{...E,turmaId:S,aulasSemanais:T}})},b=S=>{var E;return((E=e.turmas.find(k=>k.id===S))==null?void 0:E.nome)||"N/A"},C=_.useMemo(()=>{if(p==="all")return e.disciplinas;const S=e.turmas.filter(E=>E.cursoId===p).map(E=>E.id);return e.disciplinas.filter(E=>S.includes(E.turmaId))},[e.disciplinas,e.turmas,p]);return w("div",{children:[w("div",{className:"flex justify-between items-center mb-4",children:[s("h2",{className:"text-2xl font-bold",children:"Gerenciar Disciplinas"}),w("div",{className:"flex items-center space-x-4",children:[w("div",{className:"w-64",children:[s("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Curso"}),w("select",{id:"curso-filter",value:p,onChange:S=>h(S.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s("option",{value:"all",children:"Todos os Cursos"}),e.cursos.map(S=>s("option",{value:S.id,children:S.nome},S.id))]})]}),s("button",{onClick:()=>l(!0),className:"self-end px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:"Gerenciar Grupos BNCC"}),s("button",{onClick:()=>N(null),className:"self-end px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",disabled:e.turmas.length===0,children:"Adicionar Disciplina"})]})]}),s("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:C.length>0?C.map(S=>w("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[w("div",{children:[s("h4",{className:"font-bold text-gray-800",children:S.nome}),s("p",{className:"text-sm text-gray-500",children:b(S.turmaId)}),w("p",{className:"text-sm text-gray-500",children:[S.aulasSemanais," aulas/semana"]}),w("div",{className:"mt-2 flex flex-wrap gap-2",children:[S.bnccId&&s("span",{className:"text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),S.divisao&&w("span",{className:"text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",S.numProfessores,")"]})]})]}),w("div",{className:"flex justify-end space-x-2 mt-4",children:[s("button",{onClick:()=>N(S),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),s("button",{onClick:()=>f(S.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},S.id)):s("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:e.disciplinas.length===0?"Nenhuma disciplina cadastrada.":"Nenhuma disciplina encontrada para o filtro selecionado."})}),s(Cn,{isOpen:n,onClose:D,title:i?"Editar Disciplina":"Adicionar Disciplina",children:w("form",{onSubmit:g,className:"space-y-4",children:[w("div",{children:[s("label",{className:"block text-sm font-medium",children:"Nome da Disciplina"}),s("input",{type:"text",value:u.nome,onChange:S=>c({...u,nome:S.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),w("div",{children:[s("label",{className:"block text-sm font-medium",children:"Aulas por Semana"}),s("input",{type:"number",min:y?"1.25":"1",step:y?"1.25":"1",value:u.aulasSemanais,onChange:S=>c({...u,aulasSemanais:parseFloat(S.target.value)||(y?1.25:1)}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),w("div",{children:[s("label",{className:"block text-sm font-medium",children:"Turma"}),s("select",{value:u.turmaId,onChange:S=>x(S.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:e.turmas.map(S=>s("option",{value:S.id,children:S.nome},S.id))})]}),w("div",{className:"flex items-start",children:[s("div",{className:"flex items-center h-5",children:s("input",{id:"divisao",type:"checkbox",checked:u.divisao,onChange:S=>c({...u,divisao:S.target.checked}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),s("div",{className:"ml-3 text-sm",children:s("label",{htmlFor:"divisao",className:"font-medium text-gray-700",children:"Diviso de turma?"})})]}),u.divisao&&w("div",{children:[s("label",{className:"block text-sm font-medium",children:"Nmero de Professores"}),s("input",{type:"number",min:"2",value:u.numProfessores,onChange:S=>c({...u,numProfessores:parseInt(S.target.value)||2}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),w("div",{className:"mt-4 flex justify-end space-x-2",children:[s("button",{type:"button",onClick:D,className:"px-4 py-2 bg-gray-200 rounded-md",children:"Cancelar"}),s("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Salvar"})]})]})}),s($l,{isOpen:m.isOpen,onClose:()=>v({isOpen:!1,id:null}),onConfirm:d,title:"Confirmar Excluso de Disciplina",message:"Tem certeza que deseja excluir esta disciplina? Todas as atribuies e aulas associadas tambm sero removidas permanentemente."}),s(Xm,{isOpen:o,onClose:()=>l(!1)})]})},Ym=({disponibilidade:e,onAvailabilityChange:t})=>{const n=(i,a)=>{const u={...e};u[i]||(u[i]=[]);const c=u[i].includes(a);u[i]=c?u[i].filter(p=>p!==a):[...u[i],a],t(u)},r=(i,a)=>{const u={...e};u[i]||(u[i]=[]);const c=a.every(h=>u[i].includes(h));let p=[...u[i]];c?p=p.filter(h=>!a.includes(h)):a.forEach(h=>{p.includes(h)||p.push(h)}),u[i]=p,t(u)},o=i=>{const a={...e},u=ee.every(c=>{var p;return(p=a[c])==null?void 0:p.includes(i)});ee.forEach(c=>{a[c]||(a[c]=[]);const p=a[c].includes(i);u?p&&(a[c]=a[c].filter(h=>h!==i)):p||a[c].push(i)}),t(a)},l=({label:i,horarios:a})=>w("div",{className:"p-4 border rounded-lg bg-gray-50/50",children:[s("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:i}),w("div",{className:"grid gap-px",style:{gridTemplateColumns:"auto repeat(6, 1fr)"},children:[s("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center sticky top-0 bg-gray-50",children:"Horrio"}),ee.map(u=>s("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center capitalize sticky top-0 bg-gray-50",children:s("button",{onClick:()=>r(u,a),className:"hover:text-indigo-600 w-full",title:`Marcar/desmarcar todos os horrios da ${i.toLowerCase()} para ${u}`,children:u})},u)),s("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center sticky top-0 bg-gray-50",children:"Aes"}),a.map(u=>w(Ln.Fragment,{children:[s("div",{className:"text-sm font-mono px-1 py-2 text-center flex items-center justify-center bg-white",children:u}),ee.map(c=>{var h;const p=((h=e[c])==null?void 0:h.includes(u))??!1;return s("div",{className:"py-1 px-0.5 flex items-center justify-center bg-white",children:s("button",{type:"button",onClick:()=>n(c,u),className:`w-6 h-6 rounded-md transition-colors ${p?"bg-emerald-500 hover:bg-emerald-600":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":`Disponibilidade para ${c} s ${u}: ${p?"Disponvel":"Indisponvel"}`})},`${c}-${u}`)}),s("div",{className:"py-1 px-0.5 flex items-center justify-center bg-white",children:s("button",{onClick:()=>o(u),className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded-full text-xs font-semibold hover:bg-indigo-200 transition-colors",title:`Marcar/desmarcar ${u} para todos os dias`,children:"Todos"})})]},u))]})]});return w("div",{className:"space-y-4",children:[s(l,{label:"Manh",horarios:be}),s(l,{label:"Tarde",horarios:ke}),s(l,{label:"Noite",horarios:qt})]})},qm=()=>{const{state:e,dispatch:t}=Te(),[n,r]=_.useState(!1),[o,l]=_.useState(new Set),[i,a]=_.useState([]),[u,c]=_.useState({nome:"",disponibilidade:{}}),[p,h]=_.useState(""),[m,v]=_.useState({isOpen:!1,ids:[]}),[y,N]=_.useState(""),D=_.useRef(null),g=_.useRef(0),f=_.useMemo(()=>[...e.professores].sort((O,B)=>O.nome.localeCompare(B.nome)),[e.professores]),d=_.useMemo(()=>y.trim()?f.filter(O=>O.nome.toLowerCase().includes(y.toLowerCase())):f,[f,y]),x=O=>{const B=new Set(o);B.has(O)?B.delete(O):B.add(O),l(B)},b=()=>{o.size===d.length?l(new Set):l(new Set(d.map(O=>O.id)))},C=()=>{a([]),c({nome:"",disponibilidade:{}}),h(""),g.current=0,r(!0)},S=()=>{if(o.size===0)return;const O=f.filter(B=>o.has(B.id));if(a(O),O.length===1)c({...O[0]});else if(O.length>1){const B={},M=[...be,...ke,...qt];ee.forEach(j=>{B[j]=M.filter(H=>O.every(G=>{var K;return(K=G.disponibilidade[j])==null?void 0:K.includes(H)}))}),c({nome:"",disponibilidade:B})}h(""),g.current=0,r(!0)},E=()=>{r(!1)},k=O=>{if(O.preventDefault(),i.length>0){if(i.length===1&&!u.nome.trim())return;i.forEach(B=>{const M={...B,nome:i.length===1?u.nome:B.nome,disponibilidade:u.disponibilidade};t({type:"UPDATE_PROFESSOR",payload:M})})}else{if(!u.nome.trim())return;t({type:"ADD_PROFESSOR",payload:{id:`p${Date.now()}`,...u}})}E(),l(new Set)},T=()=>{o.size!==0&&v({isOpen:!0,ids:Array.from(o)})},I=()=>{m.ids.forEach(O=>{t({type:"DELETE_PROFESSOR",payload:{id:O}})}),v({isOpen:!1,ids:[]}),l(new Set)},F=()=>{if(!p)return;const O=e.professores.find(B=>B.id===p);if(O){const B=JSON.parse(JSON.stringify(O.disponibilidade));c(M=>({...M,disponibilidade:B}))}},z=O=>{D.current&&(g.current=D.current.scrollTop),c(B=>({...B,disponibilidade:O}))};_.useLayoutEffect(()=>{D.current&&(D.current.scrollTop=g.current)},[u.disponibilidade]);const W=d.length>0&&o.size===d.length,q=i.length===0?"Adicionar Professor":i.length>1?`Editar Disponibilidade de ${i.length} Professores`:"Editar Professor";return w("div",{children:[w("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[s("h2",{className:"text-2xl font-bold",children:"Gerenciar Professores"}),w("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2 w-full md:w-auto",children:[s("input",{type:"text",value:y,onChange:O=>N(O.target.value),placeholder:"Buscar por nome...",className:"block w-full sm:w-48 pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"}),s("button",{onClick:C,className:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Adicionar"}),s("button",{onClick:S,disabled:o.size===0,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Editar Selecionados"}),s("button",{onClick:T,disabled:o.size===0,className:"w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400",children:"Excluir Selecionados"})]})]}),w("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[s("div",{className:"px-4 sm:px-6 py-3 border-b border-gray-200 bg-gray-50 rounded-t-lg",children:w("div",{className:"flex items-center",children:[s("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:W,onChange:b,"aria-label":"Selecionar todos os professores"}),s("span",{className:"ml-3 text-sm font-medium text-gray-600",children:o.size>0?`${o.size} selecionado(s)`:`Selecionar Todos (${d.length})`})]})}),s("div",{className:"divide-y divide-gray-200",children:d.length>0?d.map(O=>s("div",{className:"px-4 sm:px-6 py-3 flex items-center justify-between hover:bg-gray-50/50 transition-colors",children:w("label",{htmlFor:`prof-select-${O.id}`,className:"flex items-center cursor-pointer",children:[s("input",{id:`prof-select-${O.id}`,type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:o.has(O.id),onChange:()=>x(O.id)}),s("span",{className:"ml-3 font-medium text-gray-800",children:O.nome})]})},O.id)):s("div",{className:"px-6 py-4 text-center text-gray-500",children:e.professores.length===0?"Nenhum professor cadastrado.":"Nenhum professor encontrado para o filtro selecionado."})})]}),s(Cn,{isOpen:n,onClose:E,title:q,size:"5xl",contentRef:D,children:w("form",{onSubmit:k,className:"space-y-6",children:[i.length<=1&&w("div",{children:[s("label",{className:"block text-sm font-medium",children:"Nome do Professor"}),s("input",{type:"text",value:u.nome,onChange:O=>c({...u,nome:O.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),i.length<=1&&w("div",{children:[s("label",{className:"block text-sm font-medium",children:"Copiar Disponibilidade de:"}),w("div",{className:"mt-1 flex space-x-2",children:[w("select",{value:p,onChange:O=>h(O.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",disabled:e.professores.filter(O=>{var B;return O.id!==(((B=i[0])==null?void 0:B.id)||"")}).length===0,children:[s("option",{value:"",children:"Selecione um professor..."}),e.professores.filter(O=>{var B;return O.id!==(((B=i[0])==null?void 0:B.id)||"")}).sort((O,B)=>O.nome.localeCompare(B.nome)).map(O=>s("option",{value:O.id,children:O.nome},O.id))]}),s("button",{type:"button",onClick:F,disabled:!p,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed",children:"Copiar"})]})]}),w("div",{children:[s("h4",{className:"text-sm font-medium mb-2",children:"Disponibilidade"}),i.length>1&&w("p",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded-md mb-2",children:[s("strong",{children:"Ateno:"})," Voc est editando mltiplos professores. Um horrio aparecer marcado apenas se TODOS os professores selecionados estiverem disponveis. Qualquer alterao aqui ser aplicada a TODOS."]}),s(Ym,{disponibilidade:u.disponibilidade,onAvailabilityChange:z})]}),w("div",{className:"mt-6 flex justify-end space-x-2",children:[s("button",{type:"button",onClick:E,className:"px-4 py-2 bg-gray-200 rounded-md",children:"Cancelar"}),s("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Salvar"})]})]})}),s($l,{isOpen:m.isOpen,onClose:()=>v({isOpen:!1,ids:[]}),onConfirm:I,title:`Confirmar Excluso de ${m.ids.length} Professor(es)`,message:`Tem certeza que deseja excluir ${m.ids.length>1?`os ${m.ids.length} professores selecionados`:"este professor"}? Eles sero removidos de todas as atribuies e aulas permanentemente.`})]})},Su=({allProfessors:e,selectedProfessorIds:t,onSelectionChange:n,maxSelection:r=1})=>{const[o,l]=_.useState(""),[i,a]=_.useState(!1),u=_.useRef(null),c=_.useMemo(()=>t.map(y=>e.find(N=>N.id===y)).filter(y=>!!y),[t,e]),p=_.useMemo(()=>{const y=o.toLowerCase();return e.filter(N=>N.nome.toLowerCase().includes(y))},[o,e]);_.useEffect(()=>{const y=N=>{u.current&&!u.current.contains(N.target)&&a(!1)};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[u]);const h=y=>{t.length<r&&(n([...t,y]),l(""),a(!1))},m=y=>{n(t.filter((N,D)=>D!==y))},v=t.length<r;return w("div",{className:"relative",ref:u,children:[w("div",{className:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md bg-white min-h-[42px]",children:[c.map((y,N)=>w("div",{className:"flex items-center bg-indigo-100 text-indigo-800 text-sm font-medium px-2 py-1 rounded-full",children:[s("span",{children:y.nome}),s("button",{type:"button",onClick:()=>m(N),className:"ml-2 text-indigo-500 hover:text-indigo-700 focus:outline-none","aria-label":`Remover ${y.nome}`,children:""})]},`${y.id}-${N}`)),v&&s("input",{type:"text",value:o,onChange:y=>l(y.target.value),onFocus:()=>a(!0),placeholder:"Adicionar professor...",className:"flex-grow p-1 bg-transparent focus:outline-none"})]}),i&&v&&s("ul",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:p.length>0?p.map(y=>s("li",{onClick:()=>h(y.id),className:"px-4 py-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100",children:y.nome},y.id)):s("li",{className:"px-4 py-2 text-sm text-gray-500 cursor-default",children:"Nenhum professor encontrado."})})]})},Km=()=>{const{state:e,dispatch:t}=Te(),{disciplinas:n,professores:r,atribuicoes:o,turmas:l,cursos:i}=e,[a,u]=_.useState(""),c=[...r].sort((D,g)=>D.nome.localeCompare(g.nome)),p=[...i].sort((D,g)=>D.nome.localeCompare(g.nome)),h=D=>{var g;return((g=o.find(f=>f.disciplinaId===D))==null?void 0:g.professores)||[]},m=(D,g)=>{g.length===0?t({type:"DELETE_ATRIBUICAO",payload:{disciplinaId:D}}):t({type:"UPDATE_ATRIBUICAO",payload:{disciplinaId:D,professores:g}})},v=_.useMemo(()=>{if(!a.trim())return null;const D=a.toLowerCase();return c.filter(d=>d.nome.toLowerCase().includes(D)).map(d=>{const x=o.filter(b=>b.professores.includes(d.id)).map(b=>n.find(C=>C.id===b.disciplinaId)).filter(b=>!!b);return{professor:d,disciplinas:x.sort((b,C)=>b.nome.localeCompare(C.nome))}}).filter(d=>d.disciplinas.length>0)},[a,c,o,n]),y=()=>s(On,{children:p.length>0?p.map(D=>{const g=l.filter(f=>f.cursoId===D.id).sort((f,d)=>f.nome.localeCompare(d.nome));return g.length===0?null:w("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:[s("h3",{className:"text-xl font-bold text-indigo-700 mb-4 pb-2 border-b",children:D.nome}),s("div",{className:"space-y-6",children:g.map(f=>{const d=n.filter(x=>x.turmaId===f.id).sort((x,b)=>x.nome.localeCompare(b.nome));return d.length===0?null:w("div",{children:[w("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[f.nome,f.isModular&&s("span",{className:"text-xs bg-purple-100 text-purple-800 font-semibold ml-2 px-2 py-0.5 rounded-full",children:"Modular"})]}),s("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(x=>w("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[w("div",{className:"mb-2",children:[s("span",{className:"text-sm font-bold text-gray-700",children:x.nome}),x.bnccId&&s("span",{className:"ml-2 text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),x.divisao&&w("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",x.numProfessores,")"]})]}),s(Su,{allProfessors:c,selectedProfessorIds:h(x.id),onSelectionChange:b=>m(x.id,b),maxSelection:x.numProfessores})]},x.id))})]},f.id)})})]},D.id)}):s("div",{className:"text-center text-gray-500 py-8 bg-white rounded-lg shadow",children:"Nenhum curso cadastrado. Por favor, adicione cursos na aba 'Cursos'."})}),N=()=>s(On,{children:v&&v.length>0?v.map(({professor:D,disciplinas:g})=>w("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:[s("h3",{className:"text-xl font-bold text-indigo-700 mb-4 pb-2 border-b",children:D.nome}),s("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(f=>{const d=l.find(b=>b.id===f.turmaId),x=i.find(b=>b.id===(d==null?void 0:d.cursoId));return w("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[w("div",{className:"mb-1",children:[s("span",{className:"text-sm font-bold text-gray-700",children:f.nome}),f.bnccId&&s("span",{className:"ml-2 text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),f.divisao&&w("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",f.numProfessores,")"]})]}),w("div",{className:"text-xs text-gray-500 mb-2",children:[x==null?void 0:x.nome," / ",d==null?void 0:d.nome]}),s(Su,{allProfessors:c,selectedProfessorIds:h(f.id),onSelectionChange:b=>m(f.id,b),maxSelection:f.numProfessores})]},f.id)})})]},D.id)):w("div",{className:"text-center text-gray-500 py-8 bg-white rounded-lg shadow",children:['Nenhum professor encontrado com o nome "',a,'" que possua atribuies.']})});return w("div",{children:[w("div",{className:"flex justify-between items-center mb-4",children:[s("h2",{className:"text-2xl font-bold",children:"Gerenciar Atribuies"}),w("div",{className:"w-64",children:[s("label",{htmlFor:"professor-search-atribuicao",className:"block text-sm font-medium text-gray-700",children:"Buscar por Professor"}),s("input",{type:"text",id:"professor-search-atribuicao",value:a,onChange:D=>u(D.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]})]}),s("div",{className:"space-y-8",children:a.trim()?N():y()})]})},Zm=e=>{const t=e.toLowerCase();return t.includes("manh")?"manha":t.includes("tarde")?"tarde":t.includes("noite")?"noite":"manha"},Fo=(e,t)=>{let n=0;for(let o=0;o<e.length;o++){const l=e.charCodeAt(o);n=(n<<5)-n+l,n|=0}const r=e.trim().toLowerCase().replace(/[^a-z0-9]/g,"");return`${t}-${r.substring(0,30)}-${Math.abs(n).toString(36)}`},Jm=e=>{const n=new DOMParser().parseFromString(e,"text/html"),r=new Map,o=new Map,l=new Map,i=new Map,a=[],u=["ensino mdio","mtec","novotec","integrado"],c=h=>{const m=h.trim();if(!m)return i.has("Vago")||i.set("Vago",{id:"p-vago",nome:"Vago",disponibilidade:{}}),i.get("Vago");if(!i.has(m)){const v={id:Fo(m,"p"),nome:m,disponibilidade:{}};i.set(m,v)}return i.get(m)};n.querySelectorAll("tr.success").forEach(h=>{var T;h.textContent;const m=Array.from(h.querySelectorAll("strong")),v=Array.from(h.querySelectorAll("b")),y=(I,F)=>{var z,W,q;for(const O of F)if(O&&((W=(z=O.previousSibling)==null?void 0:z.textContent)!=null&&W.includes(I)))return((q=O.textContent)==null?void 0:q.trim())||null;return null},N=y("Curso:",v)||"Curso Desconhecido",D=!u.some(I=>N.toLowerCase().includes(I)),g=N.replace(/\s*\(.*?\)\s*/g," ").trim(),f=y("Turma:",m),d=y("Perodo:",m);if(!f||!d)return;r.has(g)||r.set(g,{id:Fo(g,"c"),nome:g});const x=r.get(g),b=`${x.nome}-${f}`;o.has(b)||o.set(b,{id:Fo(b,"t"),cursoId:x.id,nome:f,periodo:Zm(d),isModular:D});const C=o.get(b),S=(T=h.nextElementSibling)==null?void 0:T.querySelector("table.table-condensed");if(!S)return;const E=Array.from(S.querySelectorAll("tbody > tr:not(.warning)")),k=new Map;E.forEach(I=>{const F=I.querySelectorAll("td");if(F.length<7)return;const z=F[0].querySelector("a");if(!z)return;const O=(z.textContent||"").trim().replace(/^\(\d+\)_/,"").trim().replace(/\s*\(.*?\)\s*/g," ").trim(),B=parseFloat((F[4].textContent||"0").replace(",",".")),M=D?B:Math.round(B);k.has(O)||k.set(O,{rows:[],aulasSemanais:M}),k.get(O).rows.push(I)}),k.forEach((I,F)=>{const{rows:z,aulasSemanais:W}=I;if(z.length===0)return;const q=z.length>1,O=[];z.forEach(j=>{const G=(j.querySelectorAll("td")[6].textContent||"").trim();O.push(c(G).id)});const B=`${C.id}-${F}`;if(!l.has(B)){const j={id:Fo(B,"d"),turmaId:C.id,nome:F,aulasSemanais:W,divisao:q,numProfessores:z.length};l.set(B,j)}const M=l.get(B);O.length>0&&(a.find(H=>H.disciplinaId===M.id)||a.push({disciplinaId:M.id,professores:O.filter(H=>H!=="p-vago")}))})});const p=Array.from(i.values());return{ano:new Date().getFullYear(),cursos:Array.from(r.values()),turmas:Array.from(o.values()),disciplinas:Array.from(l.values()),professores:p,atribuicoes:a,grade:[],alertas:[]}},eh=()=>{var f,d,x,b;const{dispatch:e}=Te(),[t,n]=_.useState("upload"),[r,o]=_.useState(null),[l,i]=_.useState(null),[a,u]=_.useState({}),[c,p]=_.useState(!1),[h,m]=_.useState(null),v=C=>{var E;const S=(E=C.target.files)==null?void 0:E[0];S&&(o(S),m(null))},y=()=>{if(!r){m("Por favor, selecione um arquivo HTML.");return}p(!0),m(null);const C=new FileReader;C.onload=S=>{var E;try{const k=(E=S.target)==null?void 0:E.result,T=Jm(k);if(i(T),T.turmas){const I={};T.turmas.forEach(F=>{I[F.id]=F.isModular}),u(I)}n("validate")}catch(k){m("Ocorreu um erro ao analisar o arquivo. Verifique se o formato est correto."),console.error(k)}finally{p(!1)}},C.onerror=()=>{m("No foi possvel ler o arquivo."),p(!1)},C.readAsText(r,"UTF-8")},N=()=>{var C;if(l){const S=((C=l.turmas)==null?void 0:C.map(k=>({...k,isModular:a[k.id]??k.isModular})))??[],E={version:"1.0",ano:l.ano??new Date().getFullYear(),cursos:l.cursos??[],turmas:S,disciplinas:l.disciplinas??[],professores:l.professores??[],atribuicoes:l.atribuicoes??[],grade:[],alertas:[],bncc:[],toastMessage:null,draggedItem:null,clipboard:null,selectedSlotId:null,onlineUsers:[],saveStatus:"saved",lastModifiedBy:null,lastModifiedAt:null};e({type:"SET_STATE",payload:E}),n("success")}},D=()=>{o(null),i(null),m(null),p(!1),n("upload")},g=(C,S)=>{u(E=>({...E,[C]:S}))};return w("div",{className:"max-w-4xl mx-auto",children:[s("h2",{className:"text-2xl font-bold mb-4",children:"Importar Dados de HTML (SIG)"}),t==="upload"&&w("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[s("h3",{className:"text-lg font-semibold",children:"Passo 1: Selecionar Arquivo"}),s("p",{className:"text-sm text-gray-600",children:'Selecione o arquivo HTML salvo a partir da pgina "Consultar Quadros" do sistema SIG-URH. O sistema ir extrair os cursos, turmas, disciplinas e professores.'}),w("div",{children:[s("label",{htmlFor:"html-upload-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo HTML"}),w("div",{className:"mt-1 flex items-center space-x-3",children:[s("label",{htmlFor:"html-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Escolher arquivo"}),s("input",{id:"html-upload",name:"html-upload",type:"file",accept:".html,.htm",onChange:v,className:"sr-only"}),r?s("span",{className:"text-sm text-gray-600",children:r.name}):s("span",{className:"text-sm text-gray-500",children:"Nenhum arquivo selecionado"})]})]}),h&&s("p",{className:"text-sm text-red-600",children:h}),s("div",{className:"flex justify-end",children:s("button",{onClick:y,disabled:!r||c,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:c?"Analisando...":"Analisar Arquivo"})})]}),t==="validate"&&l&&w("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[s("h3",{className:"text-lg font-semibold",children:"Passo 2: Validar Dados"}),w("p",{className:"text-sm text-gray-600",children:["Os seguintes dados foram encontrados. ",s("strong",{children:"Ateno:"})," A importao substituir todos os dados existentes."]}),w("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[w("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s("div",{className:"text-2xl font-bold",children:((f=l.cursos)==null?void 0:f.length)||0}),s("div",{className:"text-sm",children:"Cursos"})]}),w("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s("div",{className:"text-2xl font-bold",children:((d=l.turmas)==null?void 0:d.length)||0}),s("div",{className:"text-sm",children:"Turmas"})]}),w("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s("div",{className:"text-2xl font-bold",children:((x=l.disciplinas)==null?void 0:x.length)||0}),s("div",{className:"text-sm",children:"Disciplinas"})]}),w("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s("div",{className:"text-2xl font-bold",children:((b=l.professores)==null?void 0:b.length)||0}),s("div",{className:"text-sm",children:"Professores"})]})]}),w("div",{className:"mt-4 border-t pt-4",children:[s("h4",{className:"font-semibold",children:"Validar Classificao das Turmas"}),s("p",{className:"text-sm text-gray-600 mb-2",children:"Verifique a lista de turmas importadas. Marque a caixa ao lado de cada turma que deve ser considerada 'Modular'. Turmas no marcadas sero tratadas como 'Regular' (Ensino Mdio, MTec, etc.)."}),s("div",{className:"max-h-64 overflow-y-auto space-y-1 border p-3 rounded-md bg-gray-50",children:l.turmas&&l.turmas.length>0?l.turmas.slice().sort((C,S)=>C.nome.localeCompare(S.nome)).map(C=>w("div",{className:"flex items-center p-1 hover:bg-gray-100 rounded",children:[s("input",{type:"checkbox",id:`turma-modular-toggle-${C.id}`,checked:a[C.id]??!1,onChange:S=>g(C.id,S.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),s("label",{htmlFor:`turma-modular-toggle-${C.id}`,className:"ml-3 block text-sm font-medium text-gray-700 cursor-pointer",children:C.nome})]},C.id)):s("p",{className:"text-sm text-gray-500",children:"Nenhuma turma encontrada no arquivo."})})]}),w("div",{className:"flex justify-end space-x-2",children:[s("button",{onClick:D,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s("button",{onClick:N,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirmar e Importar"})]})]}),t==="success"&&w("div",{className:"bg-white p-6 rounded-lg shadow text-center space-y-4",children:[s("h3",{className:"text-lg font-semibold text-green-700",children:"Importao Concluda!"}),s("p",{children:"Os dados foram importados com sucesso. Voc j pode navegar para as outras abas de gerenciamento para ver os resultados."}),s("button",{onClick:D,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Importar Novo Arquivo"})]})]})},mi={"2":"segunda","3":"terca","4":"quarta","5":"quinta","6":"sexta"},zr={MANHA:{horarios:be,title:"Dias da Semana Manh"},TARDE:{horarios:ke,title:"Dias da Semana Tarde"},NOITE:{horarios:qt,title:"Dias da Semana Noite"}},Xn=e=>{if(e.value===null||e.value===void 0)return"";if(e.value&&typeof e.value=="object"&&"richText"in e.value){const t=e.value;if(Array.isArray(t.richText))return t.richText.map(n=>n.text).join("")}return e.value.toString()},th=async e=>{console.log("Iniciando anlise da planilha...");const t=new Cl.Workbook;await t.xlsx.load(e);const n=t.worksheets[0];if(!n)throw new Error("A planilha est vazia ou no pde ser lida.");const r=[],o=[];if(n.eachRow((l,i)=>{let a="";l.eachCell(u=>{const c=Xn(u).trim();c.toLowerCase().startsWith("docente:")&&(a=c.substring(8).trim())}),a&&(console.log(`Encontrado "Docente:": ${a} na linha ${i}`),o.push({name:a,row:i}))}),o.length===0)throw new Error("Nenhum professor encontrado. Verifique se a planilha contm a linha 'Docente:'.");for(const l of o){const i={segunda:[],terca:[],quarta:[],quinta:[],sexta:[]};let a=-1;for(let m=l.row;m<=n.rowCount&&m<l.row+10;m++){const v=n.getRow(m);let y=!1;if(v.eachCell(N=>{Xn(N).includes(zr.MANHA.title)&&(y=!0)}),y){a=m,console.log(`Cabealho da tabela encontrado para ${l.name} na linha ${a}`);break}}if(a===-1){console.warn(`Tabelas no encontradas para o professor: ${l.name}`);continue}const u=n.getRow(a),c=n.getRow(a+1),p={};u.eachCell((m,v)=>{const y=Xn(m);y.includes(zr.MANHA.title)&&(p.MANHA=v),y.includes(zr.TARDE.title)&&(p.TARDE=v),y.includes(zr.NOITE.title)&&(p.NOITE=v)});for(const m of Object.keys(p)){const v=p[m],{horarios:y}=zr[m],N={},D=8;for(let x=0;x<D;x++){const b=v+x,C=c.getCell(b),S=Xn(C).trim();mi[S]&&(N[mi[S]]=b)}const g=Object.keys(mi).length;Object.keys(N).length<g&&console.warn(`Apenas ${Object.keys(N).length} de ${g} dias foram mapeados para ${l.name} [${m}]`),console.log(`Mapeamento de colunas para ${l.name} [${m}]:`,N);const f=v-1,d=6;console.log(`
=== Processando perodo ${m} para ${l.name} ===`),console.log(`Coluna inicial (dias): ${v}, Coluna 'Aulas': ${f}`),console.log(`Linha do cabealho dos dias: ${c.number}`),console.log("Horrios disponveis no perodo:",y);for(let x=0;x<d;x++){const b=n.getRow(c.number+1+x),C=b.getCell(f),E=Xn(C).trim().match(/^(\d+)/);if(E){const k=parseInt(E[1],10)-1;if(k>=0&&k<y.length){const T=y[k];for(const I in N){const F=N[I],z=b.getCell(F);Xn(z).trim().toLowerCase()==="x"&&(i[I].includes(T)||i[I].push(T))}}}}}const h=Object.values(i).reduce((m,v)=>m+v.length,0);console.log(`Disponibilidades encontradas para ${l.name}: ${h} horrios.`),r.push({name:l.name,availability:i})}return console.log("Anlise finalizada.",r),r},nh=async()=>{const e=new Cl.Workbook,t=e.addWorksheet("Disponibilidade"),n={name:"Calibri",size:11,bold:!0},r={name:"Calibri",size:14,bold:!0},o={vertical:"middle",horizontal:"center"},l={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},i={manha:{start:2,title:"Dias da Semana Manh"},tarde:{start:10,title:"Dias da Semana Tarde"},noite:{start:18,title:"Dias da Semana Noite"}},a=7,u=i.noite.start+a-1;t.mergeCells(3,2,3,u);const c=t.getCell(3,2);c.value="RELATRIO DE DISPONIBILIDADES DOS DOCENTES",c.font=r,c.alignment=o,t.mergeCells(4,2,4,u),t.getCell(4,2).value="Semestre/ano: 1/2025",t.getCell(4,2).font=n;let h=(v=>{t.mergeCells(v,2,v,u);const y=t.getCell(v,2);y.value={richText:[{text:"Docente: ",font:{name:"Calibri",size:12,bold:!0}},{text:"NOME COMPLETO DO DOCENTE EM MAISCULAS",font:{name:"Calibri",size:12,bold:!0}}]};const N=v+2,D=v+3,g=v+4;return Object.values(i).forEach(f=>{t.mergeCells(N,f.start,N,f.start+a-1);const d=t.getCell(N,f.start);d.value=f.title,d.font=n,d.alignment=o,["Aulas","2","3","4","5","6","Sb"].forEach((b,C)=>{const S=t.getCell(D,f.start+C);S.value=b,S.font=n,S.alignment=o,S.border=l});for(let b=0;b<6;b++){const C=g+b,S=t.getCell(C,f.start);S.value=`${b+1}`,S.font=n,S.alignment=o,S.border=l;for(let E=1;E<a;E++){const k=t.getCell(C,f.start+E);k.border=l,k.alignment=o,f.start===i.manha.start&&b<2&&E<3&&(k.value="X")}}}),g+6})(5);t.mergeCells(h+1,2,h+1,u);const m=t.getCell(h+1,2);return m.value="Para adicionar mais professores, copie o bloco acima (linhas 5 a 15) e cole abaixo, depois preencha os dados.",m.font={italic:!0,color:{argb:"FF666666"}},t.getColumn(1).width=2,t.getColumn(9).width=2,t.getColumn(17).width=2,Object.values(i).forEach(v=>{t.getColumn(v.start).width=8;for(let y=1;y<a;y++)t.getColumn(v.start+y).width=5}),e},Cu=e=>e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),rh=()=>{const{state:e,dispatch:t}=Te(),[n,r]=_.useState("upload"),[o,l]=_.useState(null),[i,a]=_.useState([]),[u,c]=_.useState(!1),[p,h]=_.useState(null),m=d=>{var b;const x=(b=d.target.files)==null?void 0:b[0];x&&(l(x),h(null))},v=async()=>{try{const x=await(await nh()).xlsx.writeBuffer(),b=new Blob([x],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),C=URL.createObjectURL(b),S=document.createElement("a");S.href=C,S.download="modelo_disponibilidade.xlsx",document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(C)}catch(d){console.error("Error generating template:",d),h("No foi possvel gerar o modelo de planilha.")}},y=()=>{if(!o){h("Por favor, selecione um arquivo Excel.");return}c(!0),h(null);const d=new FileReader;d.onload=async x=>{var b;try{const C=(b=x.target)==null?void 0:b.result,S=await th(C);if(S.length===0)throw new Error("Nenhum professor encontrado na planilha. Verifique se o formato est correto ou use o modelo.");const E=e.professores,k=S.map(T=>{const I=E.find(F=>Cu(F.nome)===Cu(T.name));return{parsed:T,matchId:I?I.id:"not_found"}});a(k),r("validate")}catch(C){h(C.message||"Ocorreu um erro ao analisar a planilha. Verifique se o formato est correto."),console.error(C)}finally{c(!1)}},d.onerror=()=>{h("No foi possvel ler o arquivo."),c(!1)},d.readAsArrayBuffer(o)},N=(d,x)=>{const b=[...i];b[d].matchId=x,a(b)},D=()=>{const d=[];i.forEach(x=>{if(x.matchId!=="not_found"&&x.matchId!=="ignore"){const b=e.professores.find(C=>C.id===x.matchId);b&&d.push({...b,disponibilidade:x.parsed.availability})}}),d.length>0?(t({type:"BATCH_UPDATE_PROFESSORS",payload:{professors:d}}),r("success")):h("Nenhum professor foi selecionado para atualizao. Verifique os pareamentos.")},g=()=>{l(null),a([]),h(null),c(!1),r("upload")},f=_.useMemo(()=>[...e.professores].sort((d,x)=>d.nome.localeCompare(x.nome)),[e.professores]);return w("div",{className:"max-w-4xl mx-auto",children:[s("h2",{className:"text-2xl font-bold mb-4",children:"Importar Disponibilidade de Professores (Excel)"}),n==="upload"&&w("div",{className:"bg-white p-6 rounded-lg shadow space-y-6",children:[w("div",{children:[s("h3",{className:"text-lg font-semibold",children:"Instrues"}),w("ol",{className:"list-decimal list-inside text-sm text-gray-600 mt-2 space-y-1",children:[s("li",{children:"Baixe o modelo de planilha para garantir o formato correto."}),s("li",{children:"Preencha a planilha com os dados de disponibilidade dos professores, marcando 'X' nos horrios disponveis."}),s("li",{children:"Salve a planilha e selecione o arquivo abaixo."}),s("li",{children:'Clique em "Analisar Planilha" para continuar.'})]})]}),s("div",{className:"flex justify-start",children:w("button",{onClick:v,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Baixar Modelo de Planilha"]})}),w("div",{children:[s("label",{htmlFor:"excel-upload-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo Excel (.xlsx)"}),w("div",{className:"mt-1 flex items-center space-x-3",children:[s("label",{htmlFor:"excel-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Escolher arquivo"}),s("input",{id:"excel-upload",name:"excel-upload",type:"file",accept:".xlsx",onChange:m,className:"sr-only"}),o?s("span",{className:"text-sm text-gray-600",children:o.name}):s("span",{className:"text-sm text-gray-500",children:"Nenhum arquivo selecionado"})]})]}),p&&s("p",{className:"text-sm text-red-600",children:p}),s("div",{className:"flex justify-end",children:s("button",{onClick:y,disabled:!o||u,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:u?"Analisando...":"Analisar Planilha"})})]}),n==="validate"&&i.length>0&&w("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[s("h3",{className:"text-lg font-semibold",children:"Passo 2: Validar Pareamento"}),s("p",{className:"text-sm text-gray-600",children:"O sistema tentou parear os professores da planilha com os do sistema. Por favor, revise e ajuste os pareamentos. A disponibilidade dos professores selecionados ser **substituda**."}),p&&s("p",{className:"text-sm text-red-600",children:p}),s("div",{className:"overflow-x-auto border rounded-lg",children:w("table",{className:"min-w-full divide-y divide-gray-200",children:[s("thead",{className:"bg-gray-50",children:w("tr",{children:[s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome na Planilha"}),s("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Professor no Sistema"})]})}),s("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((d,x)=>w("tr",{className:d.matchId==="not_found"?"bg-yellow-50":d.matchId==="ignore"?"bg-gray-100 opacity-60":"",children:[s("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:d.parsed.name}),s("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:w("select",{value:d.matchId,onChange:b=>N(x,b.target.value),className:"w-full p-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[d.matchId==="not_found"&&s("option",{value:"not_found",children:"-- Nenhum professor encontrado --"}),s("option",{value:"ignore",children:"Ignorar este professor"}),f.map(b=>s("option",{value:b.id,children:b.nome},b.id))]})})]},x))})]})}),w("div",{className:"flex justify-end space-x-2",children:[s("button",{onClick:g,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s("button",{onClick:D,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirmar e Atualizar"})]})]}),n==="success"&&w("div",{className:"bg-white p-6 rounded-lg shadow text-center space-y-4",children:[s("h3",{className:"text-lg font-semibold text-green-700",children:"Importao Concluda!"}),s("p",{children:'A disponibilidade dos professores selecionados foi atualizada com sucesso. Voc pode verificar as mudanas na aba "Professores".'}),s("button",{onClick:g,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Importar Nova Planilha"})]})]})},oh=()=>{const[e,t]=_.useState("cursos"),n=()=>{switch(e){case"cursos":return s(Vm,{});case"turmas":return s(Gm,{});case"disciplinas":return s(Qm,{});case"professores":return s(qm,{});case"atribuicoes":return s(Km,{});case"importar-html":return s(eh,{});case"importar-disp-excel":return s(rh,{});default:return null}},r=({tabName:o,label:l,disabled:i})=>s("button",{onClick:()=>t(o),disabled:i,title:i?"Funo em desenvolvimento":"",className:`px-4 py-2 text-sm font-medium border-b-2 ${e===o?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:hover:border-transparent`,children:l});return w("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[s("div",{className:"border-b border-gray-200",children:w("nav",{className:"-mb-px flex space-x-4 px-4 overflow-x-auto","aria-label":"Tabs",children:[s(r,{tabName:"cursos",label:"Cursos"}),s(r,{tabName:"turmas",label:"Turmas"}),s(r,{tabName:"disciplinas",label:"Disciplinas"}),s(r,{tabName:"professores",label:"Professores"}),s(r,{tabName:"atribuicoes",label:"Atribuies"}),s(r,{tabName:"importar-html",label:"Importar SIG (HTML)"}),s(r,{tabName:"importar-disp-excel",label:"Importar Disp. (Excel)",disabled:!0})]})}),s("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:n()})]})},lh=({professorId:e})=>{const{state:t}=Te(),{professores:n,grade:r,turmas:o,disciplinas:l}=t,i=n.find(m=>m.id===e);if(!i)return s("div",{className:"p-4 text-red-500",children:"Professor no encontrado."});const a=r.filter(m=>m.professorId===e),u=_.useMemo(()=>a.reduce((m,v)=>{const y=o.find(D=>D.id===v.turmaId),N=y!=null&&y.isModular?1.25:1;return m+N},0),[a,o]),c={};a.forEach(m=>{var N,D;c[m.dia]||(c[m.dia]={});const v=((N=o.find(g=>g.id===m.turmaId))==null?void 0:N.nome)||"N/A",y=((D=l.find(g=>g.id===m.disciplinaId))==null?void 0:D.nome)||"N/A";c[m.dia][m.horario]={turma:v,disciplina:y}});const p=_.useMemo(()=>ee.reduce((m,v)=>{const y=a.filter(N=>N.dia===v).reduce((N,D)=>{const g=o.find(d=>d.id===D.turmaId),f=g!=null&&g.isModular?1.25:1;return N+f},0);return m[v]=y,m},{}),[a,o]),h=_.useMemo(()=>{const m=[...new Set([...qt,...Cr])].sort();return[...be,...ke,...m]},[]);return s("div",{className:"bg-white shadow-lg rounded-lg overflow-auto border border-gray-200",children:w("div",{className:"grid",style:{gridTemplateColumns:"80px repeat(5, minmax(150px, 1fr))"},children:[w("div",{className:"row-span-2 p-2 border-b-2 border-r border-gray-300 bg-gray-100 flex flex-col items-center justify-center text-center",children:[s("span",{className:"font-bold text-2xl",children:u}),s("span",{className:"text-xs text-gray-600",children:"Aulas"})]}),s("div",{className:"col-span-5 p-4 border-b-2 border-gray-300 bg-gray-200 text-center text-xl font-bold text-gray-800 flex items-center justify-center",children:i.nome}),s("div",{className:"col-start-2 col-span-5 grid grid-cols-5",children:ee.map((m,v)=>s("div",{className:`p-2 border-b-2 bg-gray-100 text-center font-semibold capitalize ${v<ee.length-1?"border-r":""} border-gray-300`,children:m.split("").join(" ")},m))}),h.map((m,v)=>{const y=be[be.length-1]===m,N=ke[ke.length-1]===m,D=y||N,g=v===h.length-1;return w(Ln.Fragment,{children:[w("div",{className:"contents",children:[s("div",{className:`p-2 border-r border-gray-300 bg-gray-50 text-xs text-center font-medium flex items-center justify-center ${g?"":"border-b"}`,children:m}),ee.map((f,d)=>{var b;const x=(b=c[f])==null?void 0:b[m];return s("div",{className:`p-2 min-h-[50px] ${d<ee.length-1?"border-r":""} ${g?"":"border-b"} border-gray-200`,children:x&&w("div",{className:"text-xs bg-indigo-100 p-1 rounded",children:[s("p",{className:"font-bold truncate",children:x.disciplina}),s("p",{className:"text-gray-600 truncate",children:x.turma})]})},`${f}-${m}`)})]}),D&&!g&&s("div",{className:"col-span-6 h-2 bg-gray-200 border-b border-gray-300"})]},m)}),s("div",{className:"p-2 border-r border-t border-gray-300 bg-gray-100 font-bold text-center flex items-center justify-center",children:"Carga Diria"}),ee.map((m,v)=>s("div",{className:`p-2 bg-gray-100 text-center font-bold border-t ${v<ee.length-1?"border-r":""} border-gray-200`,children:p[m]||0},`total-${m}`))]})})},ih=()=>{var d;const{state:e,dispatch:t}=Te(),{professores:n,grade:r,turmas:o,disciplinas:l}=e,i=_.useMemo(()=>[...n].sort((x,b)=>x.nome.localeCompare(b.nome)),[n]),[a,u]=_.useState(""),[c,p]=_.useState(!1),[h,m]=_.useState({current:0,total:0}),v=_.useMemo(()=>a.trim()?i.filter(x=>x.nome.toLowerCase().includes(a.toLowerCase())):i,[i,a]),[y,N]=_.useState(((d=i[0])==null?void 0:d.id)||"");_.useEffect(()=>{var b;v.some(C=>C.id===y)||N(((b=v[0])==null?void 0:b.id)||"")},[a,v,y]),_.useEffect(()=>{!y&&i.length>0&&N(i[0].id)},[i,y]);const D=()=>{const x=n.find(b=>b.id===y);if(!x){t({type:"SHOW_TOAST",payload:"Professor no selecionado."});return}try{const{doc:b,error:C}=xu(x,r,o,l);if(C||!b){t({type:"SHOW_TOAST",payload:C||"Erro ao gerar PDF."});return}const E=`horario_${x.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`;b.save(E)}catch(b){console.error("Error generating PDF:",b),t({type:"SHOW_TOAST",payload:"Erro ao gerar o PDF."})}},g=()=>{if(!y){t({type:"SHOW_TOAST",payload:"Professor no selecionado."});return}t({type:"SHOW_TOAST",payload:"Gerando arquivo XLSX..."}),setTimeout(()=>{try{const{workbook:x,error:b}=Rm(e,y);if(b||!x){t({type:"SHOW_TOAST",payload:b||"Erro desconhecido ao gerar XLSX."});return}x.xlsx.writeBuffer().then(C=>{const S=new Blob([C],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),E=URL.createObjectURL(S),k=n.find(F=>F.id===y),T=k?k.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase():"professor",I=document.createElement("a");I.setAttribute("href",E),I.setAttribute("download",`horario_${T}.xlsx`),document.body.appendChild(I),I.click(),document.body.removeChild(I),URL.revokeObjectURL(E),t({type:"SHOW_TOAST",payload:"Exportao para XLSX concluda!"})}).catch(C=>{console.error("Error writing XLSX buffer:",C),t({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})})}catch(x){console.error("Error generating XLSX file:",x),t({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})}},50)},f=async()=>{const x=[...new Set(r.map(S=>S.professorId))],b=i.filter(S=>x.includes(S.id));if(b.length===0){t({type:"SHOW_TOAST",payload:"Nenhum professor com aulas na grade para exportar."});return}const C=new Xc;p(!0),m({current:0,total:b.length}),t({type:"SHOW_TOAST",payload:`Iniciando exportao de ${b.length} horrios...`});for(const[S,E]of b.entries()){m({current:S+1,total:b.length});try{const{doc:k,error:T}=xu(E,r,o,l);if(k){const F=`horario_${E.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,z=k.output("blob");C.file(F,z)}}catch(k){console.error(`Error generating PDF for ${E.nome}:`,k)}await new Promise(k=>setTimeout(k,0))}t({type:"SHOW_TOAST",payload:"Gerando arquivo ZIP..."});try{const S=await C.generateAsync({type:"blob"}),E=document.createElement("a");E.href=URL.createObjectURL(S),E.download="horarios_professores.zip",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(E.href),t({type:"SHOW_TOAST",payload:"Exportao para ZIP concluda!"})}catch(S){console.error("Error generating ZIP file:",S),t({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo ZIP."})}finally{p(!1)}};return w("div",{className:"flex-1 flex flex-col overflow-auto bg-gray-50 p-4",children:[w("header",{className:"mb-4",children:[s("h1",{className:"text-2xl font-bold text-gray-800",children:"Grade por Professor"}),w("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-end sm:justify-between",children:[w("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[w("div",{children:[s("label",{htmlFor:"professor-search",className:"block text-sm font-medium text-gray-700",children:"Buscar Professor"}),s("input",{type:"text",id:"professor-search",value:a,onChange:x=>u(x.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),w("div",{children:[s("label",{htmlFor:"professor-select",className:"block text-sm font-medium text-gray-700",children:"Selecione um Professor"}),s("select",{id:"professor-select",value:y,onChange:x=>N(x.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:v.length>0?v.map(x=>s("option",{value:x.id,children:x.nome},x.id)):s("option",{value:"",disabled:!0,children:"Nenhum professor encontrado"})})]})]}),w("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[w("button",{onClick:f,disabled:c,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),c?`Gerando ${h.current}/${h.total}...`:"Exportar Todos (ZIP)"]}),w("button",{onClick:g,disabled:!y||c,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[w("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s("polyline",{points:"14 2 14 8 20 8"}),s("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),s("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),s("polyline",{points:"10 9 9 9 8 9"})]}),"Exportar Selecionado (XLSX)"]}),w("button",{onClick:D,disabled:!y||c,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar Selecionado (PDF)"]})]})]})]}),s("main",{className:"flex-1 overflow-auto",children:y?s(lh,{professorId:y}):s("div",{className:"flex items-center justify-center h-full bg-white rounded-lg shadow",children:s("p",{className:"text-gray-500",children:n.length===0?"Nenhum professor cadastrado.":"Por favor, selecione um professor para visualizar a grade de horrios."})})})]})},Hn=({tooltipText:e,children:t})=>w("div",{className:"relative group flex items-center",children:[t,w("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-2 text-xs text-white bg-gray-800 rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:[e,s("svg",{className:"absolute text-gray-800 h-2 w-full left-0 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:s("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})]}),Ro=({title:e,value:t,icon:n,colorClass:r,tooltipText:o})=>w("div",{className:"bg-white p-4 rounded-lg shadow flex items-center",children:[s("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${r} mr-4 flex-shrink-0`,children:n}),w("div",{children:[s(Hn,{tooltipText:o,children:w("div",{className:"text-sm font-medium text-gray-500 flex items-center gap-1 cursor-help",children:[e,s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s("div",{className:"text-2xl font-bold text-gray-800",children:t})]})]}),sh=({completionPercentage:e,criticalAlerts:t,activeProfessors:n,totalTurmas:r})=>w("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s(Ro,{title:"Preenchimento da Grade",value:`${e.toFixed(1)}%`,tooltipText:"Percentual de aulas alocadas na grade em relao ao total de aulas semanais necessrias para todas as disciplinas desta modalidade.",colorClass:"bg-blue-100 text-blue-600",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s(Ro,{title:"Alertas Crticos",value:String(t),tooltipText:"Nmero de conflitos de horrio de professor (mesmo professor em duas turmas ao mesmo tempo). Estes so os alertas mais graves e devem ser resolvidos com prioridade.",colorClass:"bg-red-100 text-red-600",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s(Ro,{title:"Professores Ativos",value:String(n),tooltipText:"Nmero de professores nicos que possuem pelo menos uma aula alocada nesta grade de horrios.",colorClass:"bg-green-100 text-green-600",icon:s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s(Ro,{title:"Total de Turmas",value:String(r),tooltipText:"Nmero total de turmas cadastradas para esta modalidade (Regular ou Modular).",colorClass:"bg-purple-100 text-purple-600",icon:w("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),s("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20"})]})})]}),ah=({segments:e})=>{const t=e.reduce((l,i)=>l+i.value,0);if(t===0)return s("div",{className:"flex items-center justify-center h-full",children:w("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 120 120",children:[s("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#e5e7eb",strokeWidth:"20"}),s("text",{x:"60",y:"60",textAnchor:"middle",dominantBaseline:"central",className:"transform rotate-90",fontSize:"14",fill:"#9ca3af",children:"Sem Alertas"})]})});const n=50,r=2*Math.PI*n;let o=0;return s("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 120 120",children:e.map((l,i)=>{const a=l.value/t*r,u=s("circle",{cx:"60",cy:"60",r:n,fill:"none",stroke:l.color,strokeWidth:"20",strokeDasharray:`${a} ${r}`,strokeDashoffset:-o},i);return o+=a,u})})},uh=({data:e})=>{const t=Object.entries(e).map(([l,i])=>({type:l,value:i,color:Pn[l].bg.replace("bg-",""),name:Pn[l].name})),n={"pink-600":"#db2777","blue-500":"#3b82f6","red-600":"#dc2626","orange-400":"#fb923c","purple-500":"#a855f7","yellow-400":"#facc15"},r=t.map(l=>({value:l.value,color:n[l.color]||"#9ca3af"})),o=t.reduce((l,i)=>l+i.value,0);return w("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s(Hn,{tooltipText:"Distribuio dos tipos de alertas encontrados na grade. Alertas so problemas como conflitos de horrio, excesso de aulas, etc.",children:w("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Anlise de Alertas",s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),w("div",{className:"flex-1 flex flex-col md:flex-row items-center gap-4 mt-4",children:[w("div",{className:"relative",children:[s(ah,{segments:r}),w("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s("span",{className:"text-3xl font-bold text-gray-800",children:o}),s("span",{className:"text-sm text-gray-500",children:"Total"})]})]}),s("div",{className:"flex-1 space-y-2 text-sm w-full",children:t.sort((l,i)=>i.value-l.value).map(l=>w("div",{className:"flex items-center justify-between",children:[w("div",{className:"flex items-center",children:[s("span",{className:`w-3 h-3 rounded-full mr-2 ${Pn[l.type].bg}`}),s("span",{className:"text-gray-600",children:l.name})]}),s("span",{className:"font-semibold text-gray-800",children:l.value})]},l.type))})]})]})},dh=({data:e})=>{const t=e.slice(0,10),n=Math.max(8,...t.map(r=>r.aulas));return w("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s(Hn,{tooltipText:"Exibe os professores com a maior quantidade de aulas alocadas. As cores indicam a carga: Normal (azul), Alta (amarelo, >6 aulas) ou Sobrecarga (vermelho, >8 aulas).",children:w("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Carga Horria dos Professores (Top 10)",s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s("div",{className:"flex-1 space-y-3 pr-4 mt-4",children:t.length>0?t.map((r,o)=>{const l=r.aulas/n*100;let i="bg-blue-500";return r.aulas>8?i="bg-red-500":r.aulas>6&&(i="bg-yellow-500"),w("div",{className:"flex items-center gap-4 text-sm",children:[s("div",{className:"w-1/3 truncate text-gray-600",title:r.nome,children:r.nome}),w("div",{className:"w-2/3 flex items-center",children:[s("div",{className:"w-full bg-gray-200 rounded-full h-5",children:s("div",{className:`h-5 rounded-full ${i} transition-all duration-500 ease-out`,style:{width:`${l}%`}})}),s("span",{className:"ml-3 font-semibold text-gray-800 w-8 text-right",children:r.aulas})]})]},o)}):s("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Nenhuma aula alocada na grade."})})]})},ch=({data:e})=>w("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s(Hn,{tooltipText:"Progresso de alocao de aulas para cada turma. Mostra quantas aulas j foram inseridas na grade em comparao com o total necessrio para a turma.",children:w("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Status de Preenchimento por Turma",s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 mt-4",children:e.length>0?e.map(t=>{const n=t.total>0?t.alocadas/t.total*100:0;return w("div",{children:[w("div",{className:"flex justify-between items-center text-sm mb-1",children:[s("span",{className:"font-medium text-gray-700 truncate",title:t.nome,children:t.nome}),w("span",{className:"text-gray-500",children:[t.alocadas.toFixed(2)," / ",t.total.toFixed(2)]})]}),s("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s("div",{className:"bg-green-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${n}%`}})})]},t.id)}):s("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Nenhuma turma para exibir."})})]}),fh=({data:e})=>{const{manha:t,tarde:n,noite:r}=e,l=t+n+r>0?Math.max(t,n,r):1,i=({label:a,value:u,colorClass:c})=>{const p=l>0?u/l*100:0;return w("div",{className:"flex flex-col items-center flex-1",children:[s("div",{className:"w-full h-40 flex items-end justify-center",children:s("div",{className:`w-10 rounded-t-md ${c} transition-all duration-500 ease-out`,style:{height:`${p}%`},title:`${a}: ${u} aulas`})}),s("div",{className:"text-xs font-semibold text-gray-600 mt-2",children:a}),s("div",{className:"text-sm font-bold text-gray-800",children:u})]})};return w("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s(Hn,{tooltipText:"Distribuio do nmero de aulas alocadas em cada perodo. Ajuda a visualizar o equilbrio da ocupao da grade entre manh, tarde e noite.",children:w("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Ocupao por Perodo",s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),w("div",{className:"flex-1 flex items-end justify-around gap-4 mt-4",children:[s(i,{label:"Manh",value:t,colorClass:"bg-yellow-400"}),s(i,{label:"Tarde",value:n,colorClass:"bg-blue-400"}),s(i,{label:"Noite",value:r,colorClass:"bg-indigo-500"})]})]})},ph=({unassignedDisciplines:e,unassignedProfessors:t})=>w("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Insights Rpidos"}),w("div",{className:"flex-1 space-y-4 overflow-y-auto",children:[w("div",{children:[s(Hn,{tooltipText:"Lista de disciplinas da grade selecionada (Regular ou Modular) que ainda no tm nenhum professor atribudo na tela de Gerenciamento.",children:w("h4",{className:"font-semibold text-gray-700 flex items-center cursor-help",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Disciplinas Sem Atribuio (",e.length,")"]})}),e.length>0?s("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside pl-7 max-h-24 overflow-y-auto",children:e.map(n=>s("li",{className:"truncate",title:n.nome,children:n.nome},n.id))}):s("p",{className:"mt-1 text-sm text-gray-500 pl-7",children:"Todas as disciplinas foram atribudas."})]}),w("div",{children:[s(Hn,{tooltipText:"Lista de professores cadastrados no sistema que no foram atribudos a NENHUMA disciplina, seja na grade Regular ou na Modular. Ajuda a identificar professores pendentes de configurao.",children:w("h4",{className:"font-semibold text-gray-700 flex items-center cursor-help",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Professores Sem Aulas (",t.length,")"]})}),t.length>0?s("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside pl-7 max-h-24 overflow-y-auto",children:t.map(n=>s("li",{className:"truncate",title:n.nome,children:n.nome},n.id))}):s("p",{className:"mt-1 text-sm text-gray-500 pl-7",children:"Todos os professores foram atribudos a alguma disciplina."})]})]})]}),mh=()=>{const{state:e}=Te(),[t,n]=_.useState("regular"),r=_.useMemo(()=>{const l=t==="modular",i=e.turmas.filter(v=>v.isModular===l),a=new Set(i.map(v=>v.id)),u=e.disciplinas.filter(v=>a.has(v.turmaId)),c=new Set(u.map(v=>v.id)),p=e.atribuicoes.filter(v=>c.has(v.disciplinaId)),h=e.grade.filter(v=>a.has(v.turmaId)),m=e.alertas.filter(v=>v.gradeSlotIds.some(y=>{const N=y.split("_")[0];return a.has(N)}));return{turmas:i,disciplinas:u,atribuicoes:p,grade:h,alertas:m,professores:e.professores}},[t,e]),o=_.useMemo(()=>{const{turmas:l,disciplinas:i,atribuicoes:a,grade:u,alertas:c}=r,p=i.reduce((T,I)=>T+I.aulasSemanais,0),h=new Map;u.forEach(T=>{const I=`${T.turmaId}_${T.dia}_${T.horario}`;if(!h.has(I)){const{finalDisciplinaId:F}=$c(T,e);h.set(I,{disciplinaId:F,turmaId:T.turmaId})}});const m=new Map;h.forEach(T=>{const I=l.find(W=>W.id===T.turmaId),F=I!=null&&I.isModular?1.25:1,z=m.get(T.disciplinaId)||0;m.set(T.disciplinaId,z+F)});let v=0;m.forEach(T=>{v+=T});const y=p>0?v/p*100:0,N=c.reduce((T,I)=>(T[I.tipo]=(T[I.tipo]||0)+1,T),{}),D=N[qe.ProfessorConflitoHorario]||0,g=new Set(u.map(T=>T.professorId)),f=new Map;u.forEach(T=>{var W;const I=e.professores.find(q=>q.id===T.professorId);if(!I)return;const z=((W=l.find(q=>q.id===T.turmaId))==null?void 0:W.isModular)??!1?1.25:1;f.has(I.id)||f.set(I.id,{nome:I.nome,aulas:0}),f.get(I.id).aulas+=z});const d=Array.from(f.values()).sort((T,I)=>I.aulas-T.aulas),x=l.map(T=>{const I=i.filter(W=>W.turmaId===T.id),F=I.reduce((W,q)=>W+q.aulasSemanais,0);let z=0;return I.forEach(W=>{z+=m.get(W.id)||0}),{id:T.id,nome:T.nome,alocadas:z,total:F}}).sort((T,I)=>(T.alocadas/T.total||0)-(I.alocadas/I.total||0)),b={manha:0,tarde:0,noite:0};h.forEach(T=>{const I=u.find(z=>z.turmaId===T.turmaId&&z.disciplinaId===T.disciplinaId);if(!I)return;const F=I.horario;be.includes(F)?b.manha++:ke.includes(F)?b.tarde++:b.noite++});const C=new Set(a.map(T=>T.disciplinaId)),S=i.filter(T=>!C.has(T.id)),E=new Set(e.atribuicoes.flatMap(T=>T.professores)),k=e.professores.filter(T=>!E.has(T.id));return{completionPercentage:y,criticalAlertCount:D,activeProfessorCount:g.size,turmaCount:l.length,alertCounts:N,professorLoadData:d,turmaCompletionData:x,periodDistribution:b,unassignedDisciplines:S,unassignedProfessors:k}},[r,e]);return w("div",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 lg:p-6",children:[w("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[s("h1",{className:"text-3xl font-bold text-gray-800",children:"Painel de Controle"}),s("div",{className:"mt-4 md:mt-0",children:w("div",{className:"flex items-center bg-gray-200 rounded-md p-1",children:[s("button",{onClick:()=>n("regular"),className:`px-4 py-2 text-sm font-medium rounded-md ${t==="regular"?"bg-indigo-600 text-white shadow":"text-gray-700 hover:bg-gray-300"}`,children:"Grade Regular"}),s("button",{onClick:()=>n("modular"),className:`px-4 py-2 text-sm font-medium rounded-md ${t==="modular"?"bg-indigo-600 text-white shadow":"text-gray-700 hover:bg-gray-300"}`,children:"Grade Modular"})]})})]}),w("div",{className:"grid grid-cols-12 gap-6",children:[s("div",{className:"col-span-12",children:s(sh,{completionPercentage:o.completionPercentage,criticalAlerts:o.criticalAlertCount,activeProfessors:o.activeProfessorCount,totalTurmas:o.turmaCount})}),s("div",{className:"col-span-12 lg:col-span-4",children:s(uh,{data:o.alertCounts})}),s("div",{className:"col-span-12 lg:col-span-8",children:s(dh,{data:o.professorLoadData})}),s("div",{className:"col-span-12 lg:col-span-5",children:s(ch,{data:o.turmaCompletionData})}),s("div",{className:"col-span-12 lg:col-span-3",children:s(fh,{data:o.periodDistribution})}),s("div",{className:"col-span-12 lg:col-span-4",children:s(ph,{unassignedDisciplines:o.unassignedDisciplines,unassignedProfessors:o.unassignedProfessors})})]})]})},hh=({message:e,onClose:t})=>(_.useEffect(()=>{const n=setTimeout(()=>{t()},3e3);return()=>clearTimeout(n)},[t]),w("div",{className:"fixed bottom-5 left-1/2 -translate-x-1/2 z-50",children:[w("div",{className:"bg-gray-800 text-white font-bold py-2 px-4 rounded-lg shadow-lg flex items-center animate-fade-in-up",children:[s("span",{className:"mr-3",children:e}),s("button",{onClick:t,className:"text-gray-300 hover:text-white leading-none text-2xl",children:""})]}),s("style",{children:`
        @keyframes fade-in-up {
          0% {
            opacity: 0;
            transform: translate(-50%, 10px);
          }
          100% {
            opacity: 1;
            transform: translate(-50%, 0);
          }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]})),gh=({isOpen:e,onClose:t})=>{const{dispatch:n}=Te(),[r,o]=_.useState(""),l=r==="DELETE";return _.useEffect(()=>{e||o("")},[e]),s(Cn,{isOpen:e,onClose:t,title:"Apagar Todos os Dados",children:w("div",{className:"space-y-4",children:[w("p",{className:"text-sm text-gray-700",children:[s("strong",{children:"Ateno:"})," Esta ao  irreversvel. Todos os cursos, turmas, disciplinas, professores, atribuies e a grade de horrios sero permanentemente apagados."]}),w("p",{className:"text-sm text-gray-700",children:["Para confirmar, por favor, digite ",s("strong",{children:"DELETE"})," no campo abaixo."]}),w("div",{children:[s("label",{htmlFor:"confirm-delete",className:"sr-only",children:"Confirmar excluso"}),s("input",{type:"text",id:"confirm-delete",value:r,onChange:a=>o(a.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"DELETE",autoComplete:"off"})]}),w("div",{className:"mt-4 flex justify-end space-x-2",children:[s("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s("button",{type:"button",onClick:()=>{if(l)try{n({type:"CLEAR_DATA"})}finally{window.location.reload()}},disabled:!l,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed",children:"Apagar Tudo"})]})]})})},yh=({isOpen:e,onClose:t})=>{const{dispatch:n}=Te();return s(Cn,{isOpen:e,onClose:t,title:"Carregar Dados de Exemplo",children:w("div",{className:"space-y-4",children:[w("p",{className:"text-sm text-gray-700",children:[s("strong",{children:"Ateno:"})," Esta ao ir substituir todos os dados atuais pelos dados de exemplo."]}),s("p",{className:"text-sm text-gray-700",children:"Qualquer trabalho no salvo ser perdido. Deseja continuar?"}),w("div",{className:"mt-4 flex justify-end space-x-2",children:[s("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s("button",{type:"button",onClick:async()=>{try{const o=await fetch("/mock-data.json");if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();if(l&&l.version&&Array.isArray(l.cursos))n({type:"SET_STATE",payload:l}),n({type:"SHOW_TOAST",payload:"Dados de exemplo carregados com sucesso!"});else throw new Error("Arquivo de exemplo invlido.")}catch(o){console.error("Erro ao carregar dados de exemplo:",o),n({type:"SHOW_TOAST",payload:"Falha ao carregar dados de exemplo."})}finally{t()}},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Carregar Exemplo"})]})]})})},vh=()=>{const[e,t]=_.useState("grid"),[n,r]=_.useState("regular"),[o,l]=_.useState(!1),[i,a]=_.useState(!1),[u,c]=_.useState(!1),[p,h]=_.useState(!1),{state:m,dispatch:v}=Te();return w("div",{className:"flex flex-col h-screen font-sans text-gray-800",children:[s("header",{className:"bg-white shadow-md z-20",children:s(Um,{currentView:e,setCurrentView:t,activeGrid:n,isFocusModeEnabled:o,onFocusModeChange:l,onOpenClearDataModal:()=>a(!0),onOpenLoadExampleModal:()=>c(!0)})}),w("main",{className:"flex flex-1 overflow-hidden relative",children:[(()=>{switch(e){case"dashboard":return s(mh,{});case"grid":return w("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s("div",{className:"flex-shrink-0 px-4 pt-2 border-b border-gray-200 bg-gray-50",children:w("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[s("button",{onClick:()=>r("regular"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${n==="regular"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Grade Regular"}),s("button",{onClick:()=>r("modular"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${n==="modular"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Grade Modular"})]})}),w("div",{className:"flex flex-1 overflow-hidden",children:[w("div",{className:"flex-1 flex flex-col overflow-auto",children:[s(Mm,{isFocusModeEnabled:o,gridType:n}),s("footer",{className:"bg-white p-2 border-t",children:s(Wm,{})})]}),s("aside",{className:`bg-gray-50 border-l border-gray-200 overflow-y-auto flex-shrink-0 transition-all duration-300 ease-in-out ${p?"w-0":"w-64 lg:w-80"}`,children:s("div",{className:`h-full overflow-hidden ${p?"invisible":"visible"}`,children:s(Am,{gridType:n})})})]})]});case"management":return s(oh,{});case"professor":return s(ih,{});default:return null}})(),e==="grid"&&s("button",{onClick:()=>h(!p),className:`absolute top-1/2 -translate-y-1/2 z-30 bg-white hover:bg-gray-100 text-gray-600 border border-gray-300 rounded-full w-8 h-8 flex items-center justify-center shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-300 ease-in-out ${p?"right-0 translate-x-1/2":"right-[16rem] lg:right-[20rem] translate-x-1/2"}`,title:p?"Expandir painel":"Recolher painel",children:p?s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}):s("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),m.toastMessage&&s(hh,{message:m.toastMessage,onClose:()=>v({type:"SHOW_TOAST",payload:null})}),s(gh,{isOpen:i,onClose:()=>a(!1)}),s(yh,{isOpen:u,onClose:()=>c(!1)})]})},xh=()=>s(km,{children:s(vh,{})}),wh=({onRetry:e})=>{const[t,n]=_.useState(!1),[r,o]=_.useState(null),i="https://console.firebase.google.com/u/0/project/gerenciadorhorario-c62e9/authentication/providers";return _.useEffect(()=>{o(window.location.hostname||"domnio no detectado")},[]),w(On,{children:[s("h3",{className:"text-xl font-bold text-red-700 mb-4 text-center",children:"Configurao Necessria"}),s("p",{className:"text-sm text-gray-700 mb-4",children:"Para que o login com Google funcione, o domnio que voc est usando para acessar esta aplicao precisa ser autorizado no seu projeto Firebase."}),w("div",{className:"bg-red-50 p-3 rounded-md border border-red-200 mb-4",children:[s("p",{className:"text-sm text-gray-600",children:"Copie este domnio:"}),w("div",{className:"flex items-center justify-between mt-1 gap-2",children:[s("code",{className:"text-red-800 font-mono bg-red-100 px-2 py-1 rounded w-full break-all h-8 flex items-center",children:r===null?"Carregando...":r}),s("button",{onClick:()=>{r&&r!=="domnio no detectado"&&navigator.clipboard.writeText(r).then(()=>{n(!0),setTimeout(()=>n(!1),2e3)})},disabled:!r||r==="domnio no detectado",className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-400 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",children:t?"Copiado!":"Copiar"})]})]}),s("h4",{className:"font-semibold mb-2 text-gray-800",children:"Como Corrigir:"}),w("ol",{className:"list-decimal list-inside text-sm space-y-2 mb-4 text-gray-700",children:[s("li",{children:"Abra o Console do Firebase (link abaixo)."}),w("li",{children:["Navegue at a seo ",s("strong",{className:"font-semibold",children:"Authentication"}),"."]}),w("li",{children:["Clique na aba ",s("strong",{className:"font-semibold",children:"Sign-in method"}),"."]}),w("li",{children:["Role para baixo at a seo ",s("strong",{className:"font-semibold",children:"Authorized domains"}),"."]}),w("li",{children:["Clique em ",s("strong",{className:"font-semibold",children:"Add domain"})," e cole o domnio copiado."]})]}),w("div",{className:"space-y-3 mt-6",children:[s("a",{href:i,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Abrir Firebase Console"}),s("button",{onClick:e,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Tentar Novamente"})]})]})},Sh=()=>{const[e,t]=_.useState("loading"),[n,r]=_.useState(null),[o,l]=_.useState(null),i=async()=>{const c=new En.auth.GoogleAuthProvider;t("loading"),l(null);try{await Et.signInWithPopup(c)}catch(p){console.error("Firebase login error:",p);let h="Falha ao fazer login. Por favor, tente novamente.";if(p.code)switch(p.code){case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":t("unauthenticated");return;case"auth/popup-blocked":h="O popup de login foi bloqueado pelo seu navegador. Por favor, habilite popups para este site e tente novamente.";break;case"auth/operation-not-allowed":h="O login com Google no est habilitado para este aplicativo. Por favor, contate o administrador.";break;case"auth/unauthorized-domain":l("auth/unauthorized-domain"),t("unauthenticated");return}l(h),t("unauthenticated")}};_.useEffect(()=>{const c=Et.onAuthStateChanged(async p=>{if(t("loading"),p&&p.email){r(p);const h=dt.doc(`allowed_users/${p.email}`);try{(await h.get()).exists?(t("authenticated"),l(null)):t("unauthorized")}catch(m){console.error("Error checking Firestore permissions:",m),m.code==="permission-denied"||m.code==="unauthenticated"?l("Erro de permisso ao verificar usurio. Tente novamente."):l("Erro ao verificar permisses. Tente novamente mais tarde."),t("unauthenticated"),await Et.signOut()}}else r(null),t("unauthenticated"),o!=="auth/unauthorized-domain"&&l(null)});return()=>c()},[o]);const a=async()=>{await Et.signOut(),l(null)};return e==="authenticated"?s(xh,{}):s("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-sm",children:(()=>{if(o==="auth/unauthorized-domain")return s(wh,{onRetry:i});switch(e){case"loading":return s("p",{className:"text-gray-600 text-center",children:"Verificando..."});case"unauthorized":return w(On,{children:[w("p",{className:"text-center text-red-600 mb-4",children:["Acesso negado. O e-mail ",s("strong",{children:n==null?void 0:n.email})," no tem permisso para acessar este sistema."]}),s("button",{onClick:a,className:"w-full bg-gray-500 text-white py-2 px-4 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"Sair e tentar com outra conta"})]});case"unauthenticated":default:return w(On,{children:[s("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Acesso ao Sistema"}),s("p",{className:"text-center text-gray-600 mb-6",children:"Por favor, utilize sua conta Google para continuar."}),o&&s("p",{className:"text-sm text-red-600 mb-4 text-center",children:o}),w("button",{onClick:i,className:"w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[w("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 48 48",children:[s("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),s("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.53-4.18 7.13-10.12 7.13-17.65z"}),s("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),s("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),s("path",{fill:"none",d:"M0 0h48v48H0z"})]}),"Entrar com Google"]})]})}})()})})};const jc=document.getElementById("root");if(!jc)throw new Error("Could not find root element to mount to");const Ch=hi.createRoot(jc);Ch.render(s(Ln.StrictMode,{children:s(Sh,{})}));

import"firebase/compat/app";import"firebase/compat/auth";import"firebase/compat/firestore";import Ls from"exceljs";import wd from"jspdf";import yf from"jszip";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const m of g.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&f(m)}).observe(document,{childList:!0,subtree:!0});function a(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function f(c){if(c.ep)return;c.ep=!0;const g=a(c);fetch(c.href,g)}})();function Sd(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var vi={exports:{}},wo={},wi={exports:{}},Ie={};var od;function vf(){if(od)return Ie;od=1;var i=Symbol.for("react.element"),u=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),m=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),j=Symbol.iterator;function y(D){return D===null||typeof D!="object"?null:(D=j&&D[j]||D["@@iterator"],typeof D=="function"?D:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,P={};function R(D,U,je){this.props=D,this.context=U,this.refs=P,this.updater=je||N}R.prototype.isReactComponent={},R.prototype.setState=function(D,U){if(typeof D!="object"&&typeof D!="function"&&D!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,D,U,"setState")},R.prototype.forceUpdate=function(D){this.updater.enqueueForceUpdate(this,D,"forceUpdate")};function H(){}H.prototype=R.prototype;function k(D,U,je){this.props=D,this.context=U,this.refs=P,this.updater=je||N}var p=k.prototype=new H;p.constructor=k,C(p,R.prototype),p.isPureReactComponent=!0;var I=Array.isArray,z=Object.prototype.hasOwnProperty,_={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function W(D,U,je){var me,xe={},Te=null,Pe=null;if(U!=null)for(me in U.ref!==void 0&&(Pe=U.ref),U.key!==void 0&&(Te=""+U.key),U)z.call(U,me)&&!T.hasOwnProperty(me)&&(xe[me]=U[me]);var be=arguments.length-2;if(be===1)xe.children=je;else if(1<be){for(var Fe=Array(be),Be=0;Be<be;Be++)Fe[Be]=arguments[Be+2];xe.children=Fe}if(D&&D.defaultProps)for(me in be=D.defaultProps,be)xe[me]===void 0&&(xe[me]=be[me]);return{$$typeof:i,type:D,key:Te,ref:Pe,props:xe,_owner:_.current}}function O(D,U){return{$$typeof:i,type:D.type,key:U,ref:D.ref,props:D.props,_owner:D._owner}}function A(D){return typeof D=="object"&&D!==null&&D.$$typeof===i}function B(D){var U={"=":"=0",":":"=2"};return"$"+D.replace(/[=:]/g,function(je){return U[je]})}var te=/\/+/g;function ee(D,U){return typeof D=="object"&&D!==null&&D.key!=null?B(""+D.key):U.toString(36)}function de(D,U,je,me,xe){var Te=typeof D;(Te==="undefined"||Te==="boolean")&&(D=null);var Pe=!1;if(D===null)Pe=!0;else switch(Te){case"string":case"number":Pe=!0;break;case"object":switch(D.$$typeof){case i:case u:Pe=!0}}if(Pe)return Pe=D,xe=xe(Pe),D=me===""?"."+ee(Pe,0):me,I(xe)?(je="",D!=null&&(je=D.replace(te,"$&/")+"/"),de(xe,U,je,"",function(Be){return Be})):xe!=null&&(A(xe)&&(xe=O(xe,je+(!xe.key||Pe&&Pe.key===xe.key?"":(""+xe.key).replace(te,"$&/")+"/")+D)),U.push(xe)),1;if(Pe=0,me=me===""?".":me+":",I(D))for(var be=0;be<D.length;be++){Te=D[be];var Fe=me+ee(Te,be);Pe+=de(Te,U,je,Fe,xe)}else if(Fe=y(D),typeof Fe=="function")for(D=Fe.call(D),be=0;!(Te=D.next()).done;)Te=Te.value,Fe=me+ee(Te,be++),Pe+=de(Te,U,je,Fe,xe);else if(Te==="object")throw U=String(D),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(D).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.");return Pe}function pe(D,U,je){if(D==null)return D;var me=[],xe=0;return de(D,me,"","",function(Te){return U.call(je,Te,xe++)}),me}function K(D){if(D._status===-1){var U=D._result;U=U(),U.then(function(je){(D._status===0||D._status===-1)&&(D._status=1,D._result=je)},function(je){(D._status===0||D._status===-1)&&(D._status=2,D._result=je)}),D._status===-1&&(D._status=0,D._result=U)}if(D._status===1)return D._result.default;throw D._result}var oe={current:null},V={transition:null},re={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:V,ReactCurrentOwner:_};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Ie.Children={map:pe,forEach:function(D,U,je){pe(D,function(){U.apply(this,arguments)},je)},count:function(D){var U=0;return pe(D,function(){U++}),U},toArray:function(D){return pe(D,function(U){return U})||[]},only:function(D){if(!A(D))throw Error("React.Children.only expected to receive a single React element child.");return D}},Ie.Component=R,Ie.Fragment=a,Ie.Profiler=c,Ie.PureComponent=k,Ie.StrictMode=f,Ie.Suspense=x,Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ie.act=Z,Ie.cloneElement=function(D,U,je){if(D==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+D+".");var me=C({},D.props),xe=D.key,Te=D.ref,Pe=D._owner;if(U!=null){if(U.ref!==void 0&&(Te=U.ref,Pe=_.current),U.key!==void 0&&(xe=""+U.key),D.type&&D.type.defaultProps)var be=D.type.defaultProps;for(Fe in U)z.call(U,Fe)&&!T.hasOwnProperty(Fe)&&(me[Fe]=U[Fe]===void 0&&be!==void 0?be[Fe]:U[Fe])}var Fe=arguments.length-2;if(Fe===1)me.children=je;else if(1<Fe){be=Array(Fe);for(var Be=0;Be<Fe;Be++)be[Be]=arguments[Be+2];me.children=be}return{$$typeof:i,type:D.type,key:xe,ref:Te,props:me,_owner:Pe}},Ie.createContext=function(D){return D={$$typeof:m,_currentValue:D,_currentValue2:D,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},D.Provider={$$typeof:g,_context:D},D.Consumer=D},Ie.createElement=W,Ie.createFactory=function(D){var U=W.bind(null,D);return U.type=D,U},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(D){return{$$typeof:S,render:D}},Ie.isValidElement=A,Ie.lazy=function(D){return{$$typeof:h,_payload:{_status:-1,_result:D},_init:K}},Ie.memo=function(D,U){return{$$typeof:w,type:D,compare:U===void 0?null:U}},Ie.startTransition=function(D){var U=V.transition;V.transition={};try{D()}finally{V.transition=U}},Ie.unstable_act=Z,Ie.useCallback=function(D,U){return oe.current.useCallback(D,U)},Ie.useContext=function(D){return oe.current.useContext(D)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(D){return oe.current.useDeferredValue(D)},Ie.useEffect=function(D,U){return oe.current.useEffect(D,U)},Ie.useId=function(){return oe.current.useId()},Ie.useImperativeHandle=function(D,U,je){return oe.current.useImperativeHandle(D,U,je)},Ie.useInsertionEffect=function(D,U){return oe.current.useInsertionEffect(D,U)},Ie.useLayoutEffect=function(D,U){return oe.current.useLayoutEffect(D,U)},Ie.useMemo=function(D,U){return oe.current.useMemo(D,U)},Ie.useReducer=function(D,U,je){return oe.current.useReducer(D,U,je)},Ie.useRef=function(D){return oe.current.useRef(D)},Ie.useState=function(D){return oe.current.useState(D)},Ie.useSyncExternalStore=function(D,U,je){return oe.current.useSyncExternalStore(D,U,je)},Ie.useTransition=function(){return oe.current.useTransition()},Ie.version="18.3.1",Ie}var sd;function ki(){return sd||(sd=1,wi.exports=vf()),wi.exports}var ld;function wf(){if(ld)return wo;ld=1;var i=ki(),u=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function m(S,x,w){var h,j={},y=null,N=null;w!==void 0&&(y=""+w),x.key!==void 0&&(y=""+x.key),x.ref!==void 0&&(N=x.ref);for(h in x)f.call(x,h)&&!g.hasOwnProperty(h)&&(j[h]=x[h]);if(S&&S.defaultProps)for(h in x=S.defaultProps,x)j[h]===void 0&&(j[h]=x[h]);return{$$typeof:u,type:S,key:y,ref:N,props:j,_owner:c.current}}return wo.Fragment=a,wo.jsx=m,wo.jsxs=m,wo}var id;function Sf(){return id||(id=1,vi.exports=wf()),vi.exports}var o=Sf(),$=ki();const an=Sd($);var Ds={},Si={exports:{}},Pt={},ji={exports:{}},Ci={};var ad;function jf(){return ad||(ad=1,(function(i){function u(V,re){var Z=V.length;V.push(re);e:for(;0<Z;){var D=Z-1>>>1,U=V[D];if(0<c(U,re))V[D]=re,V[Z]=U,Z=D;else break e}}function a(V){return V.length===0?null:V[0]}function f(V){if(V.length===0)return null;var re=V[0],Z=V.pop();if(Z!==re){V[0]=Z;e:for(var D=0,U=V.length,je=U>>>1;D<je;){var me=2*(D+1)-1,xe=V[me],Te=me+1,Pe=V[Te];if(0>c(xe,Z))Te<U&&0>c(Pe,xe)?(V[D]=Pe,V[Te]=Z,D=Te):(V[D]=xe,V[me]=Z,D=me);else if(Te<U&&0>c(Pe,Z))V[D]=Pe,V[Te]=Z,D=Te;else break e}}return re}function c(V,re){var Z=V.sortIndex-re.sortIndex;return Z!==0?Z:V.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;i.unstable_now=function(){return g.now()}}else{var m=Date,S=m.now();i.unstable_now=function(){return m.now()-S}}var x=[],w=[],h=1,j=null,y=3,N=!1,C=!1,P=!1,R=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function p(V){for(var re=a(w);re!==null;){if(re.callback===null)f(w);else if(re.startTime<=V)f(w),re.sortIndex=re.expirationTime,u(x,re);else break;re=a(w)}}function I(V){if(P=!1,p(V),!C)if(a(x)!==null)C=!0,K(z);else{var re=a(w);re!==null&&oe(I,re.startTime-V)}}function z(V,re){C=!1,P&&(P=!1,H(W),W=-1),N=!0;var Z=y;try{for(p(re),j=a(x);j!==null&&(!(j.expirationTime>re)||V&&!B());){var D=j.callback;if(typeof D=="function"){j.callback=null,y=j.priorityLevel;var U=D(j.expirationTime<=re);re=i.unstable_now(),typeof U=="function"?j.callback=U:j===a(x)&&f(x),p(re)}else f(x);j=a(x)}if(j!==null)var je=!0;else{var me=a(w);me!==null&&oe(I,me.startTime-re),je=!1}return je}finally{j=null,y=Z,N=!1}}var _=!1,T=null,W=-1,O=5,A=-1;function B(){return!(i.unstable_now()-A<O)}function te(){if(T!==null){var V=i.unstable_now();A=V;var re=!0;try{re=T(!0,V)}finally{re?ee():(_=!1,T=null)}}else _=!1}var ee;if(typeof k=="function")ee=function(){k(te)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,pe=de.port2;de.port1.onmessage=te,ee=function(){pe.postMessage(null)}}else ee=function(){R(te,0)};function K(V){T=V,_||(_=!0,ee())}function oe(V,re){W=R(function(){V(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_continueExecution=function(){C||N||(C=!0,K(z))},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return y},i.unstable_getFirstCallbackNode=function(){return a(x)},i.unstable_next=function(V){switch(y){case 1:case 2:case 3:var re=3;break;default:re=y}var Z=y;y=re;try{return V()}finally{y=Z}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(V,re){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Z=y;y=V;try{return re()}finally{y=Z}},i.unstable_scheduleCallback=function(V,re,Z){var D=i.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?D+Z:D):Z=D,V){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=Z+U,V={id:h++,callback:re,priorityLevel:V,startTime:Z,expirationTime:U,sortIndex:-1},Z>D?(V.sortIndex=Z,u(w,V),a(x)===null&&V===a(w)&&(P?(H(W),W=-1):P=!0,oe(I,Z-D))):(V.sortIndex=U,u(x,V),C||N||(C=!0,K(z))),V},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(V){var re=y;return function(){var Z=y;y=re;try{return V.apply(this,arguments)}finally{y=Z}}}})(Ci)),Ci}var ud;function Cf(){return ud||(ud=1,ji.exports=jf()),ji.exports}var dd;function Nf(){if(dd)return Pt;dd=1;var i=ki(),u=Cf();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,c={};function g(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(c[e]=t,e=0;e<t.length;e++)f.add(t[e])}var S=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},j={};function y(e){return x.call(j,e)?!0:x.call(h,e)?!1:w.test(e)?j[e]=!0:(h[e]=!0,!1)}function N(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,t,r,n){if(t===null||typeof t>"u"||N(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,r,n,s,l,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=d}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){R[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];R[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){R[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){R[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){R[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){R[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){R[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){R[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){R[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function k(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(H,k);R[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(H,k);R[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(H,k);R[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){R[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),R.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){R[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function p(e,t,r,n){var s=R.hasOwnProperty(t)?R[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C(t,r,s,n)&&(r=null),n||s===null?y(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var I=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),B=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),V=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var Z=Object.assign,D;function U(e){if(D===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);D=t&&t[1]||""}return`
`+D+e}var je=!1;function me(e,t){if(!e||je)return"";je=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var n=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){n=F}e.call(t.prototype)}else{try{throw Error()}catch(F){n=F}e()}}catch(F){if(F&&n&&typeof F.stack=="string"){for(var s=F.stack.split(`
`),l=n.stack.split(`
`),d=s.length-1,v=l.length-1;1<=d&&0<=v&&s[d]!==l[v];)v--;for(;1<=d&&0<=v;d--,v--)if(s[d]!==l[v]){if(d!==1||v!==1)do if(d--,v--,0>v||s[d]!==l[v]){var b=`
`+s[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=v);break}}}finally{je=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function xe(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=me(e.type,!1),e;case 11:return e=me(e.type.render,!1),e;case 1:return e=me(e.type,!0),e;default:return""}}function Te(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case _:return"Portal";case O:return"Profiler";case W:return"StrictMode";case ee:return"Suspense";case de:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case te:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pe:return t=e.displayName||null,t!==null?t:Te(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return Te(e(t))}catch{}}return null}function Pe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(t);case 8:return t===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function be(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Fe(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Be(e){var t=Fe(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(d){n=""+d,l.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function St(e){e._valueTracker||(e._valueTracker=Be(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Fe(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ae(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ke(e,t){var r=t.checked;return Z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function _e(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=be(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ie(e,t){t=t.checked,t!=null&&p(e,"checked",t,!1)}function Y(e,t){ie(e,t);var r=be(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Oe(e,t.type,r):t.hasOwnProperty("defaultValue")&&Oe(e,t.type,be(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ce(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Oe(e,t,r){(t!=="number"||ae(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ye=Array.isArray;function Ee(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+be(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function lt(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return Z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Je(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(a(92));if(ye(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:be(r)}}function we(e,t){var r=be(t.value),n=be(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Me(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ne(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ve(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ne(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ge,We=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ge=Ge||document.createElement("div"),Ge.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ge.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ze(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var mt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ce=["Webkit","ms","Moz","O"];Object.keys(mt).forEach(function(e){Ce.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),mt[t]=mt[e]})});function jt(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||mt.hasOwnProperty(e)&&mt[e]?(""+t).trim():t+"px"}function $t(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=jt(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var Co=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lt(e,t){if(t){if(Co[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function Re(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var et=null;function Ct(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Et=null,Nt=null,Cr=null;function dn(e){if(e=oo(e)){if(typeof Et!="function")throw Error(a(280));var t=e.stateNode;t&&(t=Vo(t),Et(e.stateNode,e.type,t))}}function cn(e){Nt?Cr?Cr.push(e):Cr=[e]:Nt=e}function Nr(){if(Nt){var e=Nt,t=Cr;if(Cr=Nt=null,dn(e),t)for(e=0;e<t.length;e++)dn(t[e])}}function Ht(e,t){return e(t)}function No(){}var zn=!1;function ut(e,t,r){if(zn)return e(t,r);zn=!0;try{return Ht(e,t,r)}finally{zn=!1,(Nt!==null||Cr!==null)&&(No(),Nr())}}function br(e,t){var r=e.stateNode;if(r===null)return null;var n=Vo(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(a(231,t,typeof r));return r}var fn=!1;if(S)try{var dt={};Object.defineProperty(dt,"passive",{get:function(){fn=!0}}),window.addEventListener("test",dt,dt),window.removeEventListener("test",dt,dt)}catch{fn=!1}function Gr(e,t,r,n,s,l,d,v,b){var F=Array.prototype.slice.call(arguments,3);try{t.apply(r,F)}catch(X){this.onError(X)}}var Kt=!1,pn=null,Ut=!1,Bt=null,Fs={onError:function(e){Kt=!0,pn=e}};function zs(e,t,r,n,s,l,d,v,b){Kt=!1,pn=null,Gr.apply(Fs,arguments)}function Rn(e,t,r,n,s,l,d,v,b){if(zs.apply(this,arguments),Kt){if(Kt){var F=pn;Kt=!1,pn=null}else throw Error(a(198));Ut||(Ut=!0,Bt=F)}}function pr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ei(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Ti(e){if(pr(e)!==e)throw Error(a(188))}function Ed(e){var t=e.alternate;if(!t){if(t=pr(e),t===null)throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var l=s.alternate;if(l===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===l.child){for(l=s.child;l;){if(l===r)return Ti(s),e;if(l===n)return Ti(s),t;l=l.sibling}throw Error(a(188))}if(r.return!==n.return)r=s,n=l;else{for(var d=!1,v=s.child;v;){if(v===r){d=!0,r=s,n=l;break}if(v===n){d=!0,n=s,r=l;break}v=v.sibling}if(!d){for(v=l.child;v;){if(v===r){d=!0,r=l,n=s;break}if(v===n){d=!0,n=l,r=s;break}v=v.sibling}if(!d)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?e:t}function Ii(e){return e=Ed(e),e!==null?Di(e):null}function Di(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Di(e);if(t!==null)return t;e=e.sibling}return null}var _i=u.unstable_scheduleCallback,Mi=u.unstable_cancelCallback,Td=u.unstable_shouldYield,Id=u.unstable_requestPaint,Ye=u.unstable_now,Dd=u.unstable_getCurrentPriorityLevel,Rs=u.unstable_ImmediatePriority,Pi=u.unstable_UserBlockingPriority,bo=u.unstable_NormalPriority,_d=u.unstable_LowPriority,Ai=u.unstable_IdlePriority,ko=null,ir=null;function Md(e){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(ko,e,void 0,(e.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:Ld,Pd=Math.log,Ad=Math.LN2;function Ld(e){return e>>>=0,e===0?32:31-(Pd(e)/Ad|0)|0}var Eo=64,To=4194304;function $n(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Io(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,l=e.pingedLanes,d=r&268435455;if(d!==0){var v=d&~s;v!==0?n=$n(v):(l&=d,l!==0&&(n=$n(l)))}else d=r&~s,d!==0?n=$n(d):l!==0&&(n=$n(l));if(n===0)return 0;if(t!==0&&t!==n&&(t&s)===0&&(s=n&-n,l=t&-t,s>=l||s===16&&(l&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-Jt(t),s=1<<r,n|=e[r],t&=~s;return n}function Od(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fd(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,l=e.pendingLanes;0<l;){var d=31-Jt(l),v=1<<d,b=s[d];b===-1?((v&r)===0||(v&n)!==0)&&(s[d]=Od(v,t)):b<=t&&(e.expiredLanes|=v),l&=~v}}function $s(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Li(){var e=Eo;return Eo<<=1,(Eo&4194240)===0&&(Eo=64),e}function Hs(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Hn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Jt(t),e[t]=r}function zd(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-Jt(r),l=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~l}}function Us(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-Jt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var ze=0;function Oi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Fi,Bs,zi,Ri,$i,Ws=!1,Do=[],kr=null,Er=null,Tr=null,Un=new Map,Bn=new Map,Ir=[],Rd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hi(e,t){switch(e){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":Er=null;break;case"mouseover":case"mouseout":Tr=null;break;case"pointerover":case"pointerout":Un.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bn.delete(t.pointerId)}}function Wn(e,t,r,n,s,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[s]},t!==null&&(t=oo(t),t!==null&&Bs(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function $d(e,t,r,n,s){switch(t){case"focusin":return kr=Wn(kr,e,t,r,n,s),!0;case"dragenter":return Er=Wn(Er,e,t,r,n,s),!0;case"mouseover":return Tr=Wn(Tr,e,t,r,n,s),!0;case"pointerover":var l=s.pointerId;return Un.set(l,Wn(Un.get(l)||null,e,t,r,n,s)),!0;case"gotpointercapture":return l=s.pointerId,Bn.set(l,Wn(Bn.get(l)||null,e,t,r,n,s)),!0}return!1}function Ui(e){var t=qr(e.target);if(t!==null){var r=pr(t);if(r!==null){if(t=r.tag,t===13){if(t=Ei(r),t!==null){e.blockedOn=t,$i(e.priority,function(){zi(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _o(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Gs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);et=n,r.target.dispatchEvent(n),et=null}else return t=oo(r),t!==null&&Bs(t),e.blockedOn=r,!1;t.shift()}return!0}function Bi(e,t,r){_o(e)&&r.delete(t)}function Hd(){Ws=!1,kr!==null&&_o(kr)&&(kr=null),Er!==null&&_o(Er)&&(Er=null),Tr!==null&&_o(Tr)&&(Tr=null),Un.forEach(Bi),Bn.forEach(Bi)}function Vn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ws||(Ws=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Hd)))}function Gn(e){function t(s){return Vn(s,e)}if(0<Do.length){Vn(Do[0],e);for(var r=1;r<Do.length;r++){var n=Do[r];n.blockedOn===e&&(n.blockedOn=null)}}for(kr!==null&&Vn(kr,e),Er!==null&&Vn(Er,e),Tr!==null&&Vn(Tr,e),Un.forEach(t),Bn.forEach(t),r=0;r<Ir.length;r++)n=Ir[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Ir.length&&(r=Ir[0],r.blockedOn===null);)Ui(r),r.blockedOn===null&&Ir.shift()}var mn=I.ReactCurrentBatchConfig,Mo=!0;function Ud(e,t,r,n){var s=ze,l=mn.transition;mn.transition=null;try{ze=1,Vs(e,t,r,n)}finally{ze=s,mn.transition=l}}function Bd(e,t,r,n){var s=ze,l=mn.transition;mn.transition=null;try{ze=4,Vs(e,t,r,n)}finally{ze=s,mn.transition=l}}function Vs(e,t,r,n){if(Mo){var s=Gs(e,t,r,n);if(s===null)ul(e,t,n,Po,r),Hi(e,n);else if($d(s,e,t,r,n))n.stopPropagation();else if(Hi(e,n),t&4&&-1<Rd.indexOf(e)){for(;s!==null;){var l=oo(s);if(l!==null&&Fi(l),l=Gs(e,t,r,n),l===null&&ul(e,t,n,Po,r),l===s)break;s=l}s!==null&&n.stopPropagation()}else ul(e,t,n,null,r)}}var Po=null;function Gs(e,t,r,n){if(Po=null,e=Ct(n),e=qr(e),e!==null)if(t=pr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ei(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Po=e,null}function Wi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dd()){case Rs:return 1;case Pi:return 4;case bo:case _d:return 16;case Ai:return 536870912;default:return 16}default:return 16}}var Dr=null,qs=null,Ao=null;function Vi(){if(Ao)return Ao;var e,t=qs,r=t.length,n,s="value"in Dr?Dr.value:Dr.textContent,l=s.length;for(e=0;e<r&&t[e]===s[e];e++);var d=r-e;for(n=1;n<=d&&t[r-n]===s[l-n];n++);return Ao=s.slice(e,1<n?1-n:void 0)}function Lo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Oo(){return!0}function Gi(){return!1}function Ot(e){function t(r,n,s,l,d){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(r=e[v],this[v]=r?r(l):l[v]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Oo:Gi,this.isPropagationStopped=Gi,this}return Z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Oo)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Oo)},persist:function(){},isPersistent:Oo}),t}var hn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xs=Ot(hn),qn=Z({},hn,{view:0,detail:0}),Wd=Ot(qn),Qs,Ys,Xn,Fo=Z({},qn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Js,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xn&&(Xn&&e.type==="mousemove"?(Qs=e.screenX-Xn.screenX,Ys=e.screenY-Xn.screenY):Ys=Qs=0,Xn=e),Qs)},movementY:function(e){return"movementY"in e?e.movementY:Ys}}),qi=Ot(Fo),Vd=Z({},Fo,{dataTransfer:0}),Gd=Ot(Vd),qd=Z({},qn,{relatedTarget:0}),Ks=Ot(qd),Xd=Z({},hn,{animationName:0,elapsedTime:0,pseudoElement:0}),Qd=Ot(Xd),Yd=Z({},hn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Kd=Ot(Yd),Jd=Z({},hn,{data:0}),Xi=Ot(Jd),Zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=tc[e])?!!t[e]:!1}function Js(){return rc}var nc=Z({},qn,{key:function(e){if(e.key){var t=Zd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Lo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ec[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Js,charCode:function(e){return e.type==="keypress"?Lo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Lo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),oc=Ot(nc),sc=Z({},Fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Ot(sc),lc=Z({},qn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Js}),ic=Ot(lc),ac=Z({},hn,{propertyName:0,elapsedTime:0,pseudoElement:0}),uc=Ot(ac),dc=Z({},Fo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cc=Ot(dc),fc=[9,13,27,32],Zs=S&&"CompositionEvent"in window,Qn=null;S&&"documentMode"in document&&(Qn=document.documentMode);var pc=S&&"TextEvent"in window&&!Qn,Yi=S&&(!Zs||Qn&&8<Qn&&11>=Qn),Ki=" ",Ji=!1;function Zi(e,t){switch(e){case"keyup":return fc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ea(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gn=!1;function mc(e,t){switch(e){case"compositionend":return ea(t);case"keypress":return t.which!==32?null:(Ji=!0,Ki);case"textInput":return e=t.data,e===Ki&&Ji?null:e;default:return null}}function hc(e,t){if(gn)return e==="compositionend"||!Zs&&Zi(e,t)?(e=Vi(),Ao=qs=Dr=null,gn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yi&&t.locale!=="ko"?null:t.data;default:return null}}var gc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ta(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gc[e.type]:t==="textarea"}function ra(e,t,r,n){cn(n),t=Uo(t,"onChange"),0<t.length&&(r=new Xs("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Yn=null,Kn=null;function xc(e){wa(e,0)}function zo(e){var t=Sn(e);if(q(t))return e}function yc(e,t){if(e==="change")return t}var na=!1;if(S){var el;if(S){var tl="oninput"in document;if(!tl){var oa=document.createElement("div");oa.setAttribute("oninput","return;"),tl=typeof oa.oninput=="function"}el=tl}else el=!1;na=el&&(!document.documentMode||9<document.documentMode)}function sa(){Yn&&(Yn.detachEvent("onpropertychange",la),Kn=Yn=null)}function la(e){if(e.propertyName==="value"&&zo(Kn)){var t=[];ra(t,Kn,e,Ct(e)),ut(xc,t)}}function vc(e,t,r){e==="focusin"?(sa(),Yn=t,Kn=r,Yn.attachEvent("onpropertychange",la)):e==="focusout"&&sa()}function wc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zo(Kn)}function Sc(e,t){if(e==="click")return zo(t)}function jc(e,t){if(e==="input"||e==="change")return zo(t)}function Cc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zt=typeof Object.is=="function"?Object.is:Cc;function Jn(e,t){if(Zt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!x.call(t,s)||!Zt(e[s],t[s]))return!1}return!0}function ia(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function aa(e,t){var r=ia(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ia(r)}}function ua(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ua(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function da(){for(var e=window,t=ae();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ae(e.document)}return t}function rl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Nc(e){var t=da(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ua(r.ownerDocument.documentElement,r)){if(n!==null&&rl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,l=Math.min(n.start,s);n=n.end===void 0?l:Math.min(n.end,s),!e.extend&&l>n&&(s=n,n=l,l=s),s=aa(r,l);var d=aa(r,n);s&&d&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bc=S&&"documentMode"in document&&11>=document.documentMode,xn=null,nl=null,Zn=null,ol=!1;function ca(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ol||xn==null||xn!==ae(n)||(n=xn,"selectionStart"in n&&rl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Zn&&Jn(Zn,n)||(Zn=n,n=Uo(nl,"onSelect"),0<n.length&&(t=new Xs("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=xn)))}function Ro(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var yn={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionend:Ro("Transition","TransitionEnd")},sl={},fa={};S&&(fa=document.createElement("div").style,"AnimationEvent"in window||(delete yn.animationend.animation,delete yn.animationiteration.animation,delete yn.animationstart.animation),"TransitionEvent"in window||delete yn.transitionend.transition);function $o(e){if(sl[e])return sl[e];if(!yn[e])return e;var t=yn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in fa)return sl[e]=t[r];return e}var pa=$o("animationend"),ma=$o("animationiteration"),ha=$o("animationstart"),ga=$o("transitionend"),xa=new Map,ya="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(e,t){xa.set(e,t),g(t,[e])}for(var ll=0;ll<ya.length;ll++){var il=ya[ll],kc=il.toLowerCase(),Ec=il[0].toUpperCase()+il.slice(1);_r(kc,"on"+Ec)}_r(pa,"onAnimationEnd"),_r(ma,"onAnimationIteration"),_r(ha,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(ga,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tc=new Set("cancel close invalid load scroll toggle".split(" ").concat(eo));function va(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Rn(n,t,void 0,e),e.currentTarget=null}function wa(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var d=n.length-1;0<=d;d--){var v=n[d],b=v.instance,F=v.currentTarget;if(v=v.listener,b!==l&&s.isPropagationStopped())break e;va(s,v,F),l=b}else for(d=0;d<n.length;d++){if(v=n[d],b=v.instance,F=v.currentTarget,v=v.listener,b!==l&&s.isPropagationStopped())break e;va(s,v,F),l=b}}}if(Ut)throw e=Bt,Ut=!1,Bt=null,e}function He(e,t){var r=t[hl];r===void 0&&(r=t[hl]=new Set);var n=e+"__bubble";r.has(n)||(Sa(t,e,2,!1),r.add(n))}function al(e,t,r){var n=0;t&&(n|=4),Sa(r,e,n,t)}var Ho="_reactListening"+Math.random().toString(36).slice(2);function to(e){if(!e[Ho]){e[Ho]=!0,f.forEach(function(r){r!=="selectionchange"&&(Tc.has(r)||al(r,!1,e),al(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ho]||(t[Ho]=!0,al("selectionchange",!1,t))}}function Sa(e,t,r,n){switch(Wi(t)){case 1:var s=Ud;break;case 4:s=Bd;break;default:s=Vs}r=s.bind(null,t,r,e),s=void 0,!fn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function ul(e,t,r,n,s){var l=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var v=n.stateNode.containerInfo;if(v===s||v.nodeType===8&&v.parentNode===s)break;if(d===4)for(d=n.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===s||b.nodeType===8&&b.parentNode===s))return;d=d.return}for(;v!==null;){if(d=qr(v),d===null)return;if(b=d.tag,b===5||b===6){n=l=d;continue e}v=v.parentNode}}n=n.return}ut(function(){var F=l,X=Ct(r),Q=[];e:{var G=xa.get(e);if(G!==void 0){var ne=Xs,le=e;switch(e){case"keypress":if(Lo(r)===0)break e;case"keydown":case"keyup":ne=oc;break;case"focusin":le="focus",ne=Ks;break;case"focusout":le="blur",ne=Ks;break;case"beforeblur":case"afterblur":ne=Ks;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Gd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=ic;break;case pa:case ma:case ha:ne=Qd;break;case ga:ne=uc;break;case"scroll":ne=Wd;break;case"wheel":ne=cc;break;case"copy":case"cut":case"paste":ne=Kd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Qi}var ue=(t&4)!==0,Ke=!ue&&e==="scroll",M=ue?G!==null?G+"Capture":null:G;ue=[];for(var E=F,L;E!==null;){L=E;var J=L.stateNode;if(L.tag===5&&J!==null&&(L=J,M!==null&&(J=br(E,M),J!=null&&ue.push(ro(E,J,L)))),Ke)break;E=E.return}0<ue.length&&(G=new ne(G,le,null,r,X),Q.push({event:G,listeners:ue}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",G&&r!==et&&(le=r.relatedTarget||r.fromElement)&&(qr(le)||le[mr]))break e;if((ne||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,ne?(le=r.relatedTarget||r.toElement,ne=F,le=le?qr(le):null,le!==null&&(Ke=pr(le),le!==Ke||le.tag!==5&&le.tag!==6)&&(le=null)):(ne=null,le=F),ne!==le)){if(ue=qi,J="onMouseLeave",M="onMouseEnter",E="mouse",(e==="pointerout"||e==="pointerover")&&(ue=Qi,J="onPointerLeave",M="onPointerEnter",E="pointer"),Ke=ne==null?G:Sn(ne),L=le==null?G:Sn(le),G=new ue(J,E+"leave",ne,r,X),G.target=Ke,G.relatedTarget=L,J=null,qr(X)===F&&(ue=new ue(M,E+"enter",le,r,X),ue.target=L,ue.relatedTarget=Ke,J=ue),Ke=J,ne&&le)t:{for(ue=ne,M=le,E=0,L=ue;L;L=vn(L))E++;for(L=0,J=M;J;J=vn(J))L++;for(;0<E-L;)ue=vn(ue),E--;for(;0<L-E;)M=vn(M),L--;for(;E--;){if(ue===M||M!==null&&ue===M.alternate)break t;ue=vn(ue),M=vn(M)}ue=null}else ue=null;ne!==null&&ja(Q,G,ne,ue,!1),le!==null&&Ke!==null&&ja(Q,Ke,le,ue,!0)}}e:{if(G=F?Sn(F):window,ne=G.nodeName&&G.nodeName.toLowerCase(),ne==="select"||ne==="input"&&G.type==="file")var fe=yc;else if(ta(G))if(na)fe=jc;else{fe=wc;var he=vc}else(ne=G.nodeName)&&ne.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(fe=Sc);if(fe&&(fe=fe(e,F))){ra(Q,fe,r,X);break e}he&&he(e,G,F),e==="focusout"&&(he=G._wrapperState)&&he.controlled&&G.type==="number"&&Oe(G,"number",G.value)}switch(he=F?Sn(F):window,e){case"focusin":(ta(he)||he.contentEditable==="true")&&(xn=he,nl=F,Zn=null);break;case"focusout":Zn=nl=xn=null;break;case"mousedown":ol=!0;break;case"contextmenu":case"mouseup":case"dragend":ol=!1,ca(Q,r,X);break;case"selectionchange":if(bc)break;case"keydown":case"keyup":ca(Q,r,X)}var ge;if(Zs)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else gn?Zi(e,r)&&(Se="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Se="onCompositionStart");Se&&(Yi&&r.locale!=="ko"&&(gn||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&gn&&(ge=Vi()):(Dr=X,qs="value"in Dr?Dr.value:Dr.textContent,gn=!0)),he=Uo(F,Se),0<he.length&&(Se=new Xi(Se,e,null,r,X),Q.push({event:Se,listeners:he}),ge?Se.data=ge:(ge=ea(r),ge!==null&&(Se.data=ge)))),(ge=pc?mc(e,r):hc(e,r))&&(F=Uo(F,"onBeforeInput"),0<F.length&&(X=new Xi("onBeforeInput","beforeinput",null,r,X),Q.push({event:X,listeners:F}),X.data=ge))}wa(Q,t)})}function ro(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Uo(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,l=s.stateNode;s.tag===5&&l!==null&&(s=l,l=br(e,r),l!=null&&n.unshift(ro(e,l,s)),l=br(e,t),l!=null&&n.push(ro(e,l,s))),e=e.return}return n}function vn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ja(e,t,r,n,s){for(var l=t._reactName,d=[];r!==null&&r!==n;){var v=r,b=v.alternate,F=v.stateNode;if(b!==null&&b===n)break;v.tag===5&&F!==null&&(v=F,s?(b=br(r,l),b!=null&&d.unshift(ro(r,b,v))):s||(b=br(r,l),b!=null&&d.push(ro(r,b,v)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var Ic=/\r\n?/g,Dc=/\u0000|\uFFFD/g;function Ca(e){return(typeof e=="string"?e:""+e).replace(Ic,`
`).replace(Dc,"")}function Bo(e,t,r){if(t=Ca(t),Ca(e)!==t&&r)throw Error(a(425))}function Wo(){}var dl=null,cl=null;function fl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pl=typeof setTimeout=="function"?setTimeout:void 0,_c=typeof clearTimeout=="function"?clearTimeout:void 0,Na=typeof Promise=="function"?Promise:void 0,Mc=typeof queueMicrotask=="function"?queueMicrotask:typeof Na<"u"?function(e){return Na.resolve(null).then(e).catch(Pc)}:pl;function Pc(e){setTimeout(function(){throw e})}function ml(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Gn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Gn(t)}function Mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ba(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wn=Math.random().toString(36).slice(2),ar="__reactFiber$"+wn,no="__reactProps$"+wn,mr="__reactContainer$"+wn,hl="__reactEvents$"+wn,Ac="__reactListeners$"+wn,Lc="__reactHandles$"+wn;function qr(e){var t=e[ar];if(t)return t;for(var r=e.parentNode;r;){if(t=r[mr]||r[ar]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ba(e);e!==null;){if(r=e[ar])return r;e=ba(e)}return t}e=r,r=e.parentNode}return null}function oo(e){return e=e[ar]||e[mr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function Vo(e){return e[no]||null}var gl=[],jn=-1;function Pr(e){return{current:e}}function Ue(e){0>jn||(e.current=gl[jn],gl[jn]=null,jn--)}function $e(e,t){jn++,gl[jn]=e.current,e.current=t}var Ar={},xt=Pr(Ar),Tt=Pr(!1),Xr=Ar;function Cn(e,t){var r=e.type.contextTypes;if(!r)return Ar;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},l;for(l in r)s[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function It(e){return e=e.childContextTypes,e!=null}function Go(){Ue(Tt),Ue(xt)}function ka(e,t,r){if(xt.current!==Ar)throw Error(a(168));$e(xt,t),$e(Tt,r)}function Ea(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(a(108,Pe(e)||"Unknown",s));return Z({},r,n)}function qo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ar,Xr=xt.current,$e(xt,e),$e(Tt,Tt.current),!0}function Ta(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Ea(e,t,Xr),n.__reactInternalMemoizedMergedChildContext=e,Ue(Tt),Ue(xt),$e(xt,e)):Ue(Tt),$e(Tt,r)}var hr=null,Xo=!1,xl=!1;function Ia(e){hr===null?hr=[e]:hr.push(e)}function Oc(e){Xo=!0,Ia(e)}function Lr(){if(!xl&&hr!==null){xl=!0;var e=0,t=ze;try{var r=hr;for(ze=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}hr=null,Xo=!1}catch(s){throw hr!==null&&(hr=hr.slice(e+1)),_i(Rs,Lr),s}finally{ze=t,xl=!1}}return null}var Nn=[],bn=0,Qo=null,Yo=0,Wt=[],Vt=0,Qr=null,gr=1,xr="";function Yr(e,t){Nn[bn++]=Yo,Nn[bn++]=Qo,Qo=e,Yo=t}function Da(e,t,r){Wt[Vt++]=gr,Wt[Vt++]=xr,Wt[Vt++]=Qr,Qr=e;var n=gr;e=xr;var s=32-Jt(n)-1;n&=~(1<<s),r+=1;var l=32-Jt(t)+s;if(30<l){var d=s-s%5;l=(n&(1<<d)-1).toString(32),n>>=d,s-=d,gr=1<<32-Jt(t)+s|r<<s|n,xr=l+e}else gr=1<<l|r<<s|n,xr=e}function yl(e){e.return!==null&&(Yr(e,1),Da(e,1,0))}function vl(e){for(;e===Qo;)Qo=Nn[--bn],Nn[bn]=null,Yo=Nn[--bn],Nn[bn]=null;for(;e===Qr;)Qr=Wt[--Vt],Wt[Vt]=null,xr=Wt[--Vt],Wt[Vt]=null,gr=Wt[--Vt],Wt[Vt]=null}var Ft=null,zt=null,Ve=!1,er=null;function _a(e,t){var r=Qt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Ma(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ft=e,zt=Mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ft=e,zt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Qr!==null?{id:gr,overflow:xr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ft=e,zt=null,!0):!1;default:return!1}}function wl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sl(e){if(Ve){var t=zt;if(t){var r=t;if(!Ma(e,t)){if(wl(e))throw Error(a(418));t=Mr(r.nextSibling);var n=Ft;t&&Ma(e,t)?_a(n,r):(e.flags=e.flags&-4097|2,Ve=!1,Ft=e)}}else{if(wl(e))throw Error(a(418));e.flags=e.flags&-4097|2,Ve=!1,Ft=e}}}function Pa(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ft=e}function Ko(e){if(e!==Ft)return!1;if(!Ve)return Pa(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fl(e.type,e.memoizedProps)),t&&(t=zt)){if(wl(e))throw Aa(),Error(a(418));for(;t;)_a(e,t),t=Mr(t.nextSibling)}if(Pa(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){zt=Mr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}zt=null}}else zt=Ft?Mr(e.stateNode.nextSibling):null;return!0}function Aa(){for(var e=zt;e;)e=Mr(e.nextSibling)}function kn(){zt=Ft=null,Ve=!1}function jl(e){er===null?er=[e]:er.push(e)}var Fc=I.ReactCurrentBatchConfig;function so(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var s=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(d){var v=s.refs;d===null?delete v[l]:v[l]=d},t._stringRef=l,t)}if(typeof e!="string")throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function Jo(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function La(e){var t=e._init;return t(e._payload)}function Oa(e){function t(M,E){if(e){var L=M.deletions;L===null?(M.deletions=[E],M.flags|=16):L.push(E)}}function r(M,E){if(!e)return null;for(;E!==null;)t(M,E),E=E.sibling;return null}function n(M,E){for(M=new Map;E!==null;)E.key!==null?M.set(E.key,E):M.set(E.index,E),E=E.sibling;return M}function s(M,E){return M=Br(M,E),M.index=0,M.sibling=null,M}function l(M,E,L){return M.index=L,e?(L=M.alternate,L!==null?(L=L.index,L<E?(M.flags|=2,E):L):(M.flags|=2,E)):(M.flags|=1048576,E)}function d(M){return e&&M.alternate===null&&(M.flags|=2),M}function v(M,E,L,J){return E===null||E.tag!==6?(E=pi(L,M.mode,J),E.return=M,E):(E=s(E,L),E.return=M,E)}function b(M,E,L,J){var fe=L.type;return fe===T?X(M,E,L.props.children,J,L.key):E!==null&&(E.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===K&&La(fe)===E.type)?(J=s(E,L.props),J.ref=so(M,E,L),J.return=M,J):(J=js(L.type,L.key,L.props,null,M.mode,J),J.ref=so(M,E,L),J.return=M,J)}function F(M,E,L,J){return E===null||E.tag!==4||E.stateNode.containerInfo!==L.containerInfo||E.stateNode.implementation!==L.implementation?(E=mi(L,M.mode,J),E.return=M,E):(E=s(E,L.children||[]),E.return=M,E)}function X(M,E,L,J,fe){return E===null||E.tag!==7?(E=on(L,M.mode,J,fe),E.return=M,E):(E=s(E,L),E.return=M,E)}function Q(M,E,L){if(typeof E=="string"&&E!==""||typeof E=="number")return E=pi(""+E,M.mode,L),E.return=M,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case z:return L=js(E.type,E.key,E.props,null,M.mode,L),L.ref=so(M,null,E),L.return=M,L;case _:return E=mi(E,M.mode,L),E.return=M,E;case K:var J=E._init;return Q(M,J(E._payload),L)}if(ye(E)||re(E))return E=on(E,M.mode,L,null),E.return=M,E;Jo(M,E)}return null}function G(M,E,L,J){var fe=E!==null?E.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return fe!==null?null:v(M,E,""+L,J);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case z:return L.key===fe?b(M,E,L,J):null;case _:return L.key===fe?F(M,E,L,J):null;case K:return fe=L._init,G(M,E,fe(L._payload),J)}if(ye(L)||re(L))return fe!==null?null:X(M,E,L,J,null);Jo(M,L)}return null}function ne(M,E,L,J,fe){if(typeof J=="string"&&J!==""||typeof J=="number")return M=M.get(L)||null,v(E,M,""+J,fe);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case z:return M=M.get(J.key===null?L:J.key)||null,b(E,M,J,fe);case _:return M=M.get(J.key===null?L:J.key)||null,F(E,M,J,fe);case K:var he=J._init;return ne(M,E,L,he(J._payload),fe)}if(ye(J)||re(J))return M=M.get(L)||null,X(E,M,J,fe,null);Jo(E,J)}return null}function le(M,E,L,J){for(var fe=null,he=null,ge=E,Se=E=0,pt=null;ge!==null&&Se<L.length;Se++){ge.index>Se?(pt=ge,ge=null):pt=ge.sibling;var Le=G(M,ge,L[Se],J);if(Le===null){ge===null&&(ge=pt);break}e&&ge&&Le.alternate===null&&t(M,ge),E=l(Le,E,Se),he===null?fe=Le:he.sibling=Le,he=Le,ge=pt}if(Se===L.length)return r(M,ge),Ve&&Yr(M,Se),fe;if(ge===null){for(;Se<L.length;Se++)ge=Q(M,L[Se],J),ge!==null&&(E=l(ge,E,Se),he===null?fe=ge:he.sibling=ge,he=ge);return Ve&&Yr(M,Se),fe}for(ge=n(M,ge);Se<L.length;Se++)pt=ne(ge,M,Se,L[Se],J),pt!==null&&(e&&pt.alternate!==null&&ge.delete(pt.key===null?Se:pt.key),E=l(pt,E,Se),he===null?fe=pt:he.sibling=pt,he=pt);return e&&ge.forEach(function(Wr){return t(M,Wr)}),Ve&&Yr(M,Se),fe}function ue(M,E,L,J){var fe=re(L);if(typeof fe!="function")throw Error(a(150));if(L=fe.call(L),L==null)throw Error(a(151));for(var he=fe=null,ge=E,Se=E=0,pt=null,Le=L.next();ge!==null&&!Le.done;Se++,Le=L.next()){ge.index>Se?(pt=ge,ge=null):pt=ge.sibling;var Wr=G(M,ge,Le.value,J);if(Wr===null){ge===null&&(ge=pt);break}e&&ge&&Wr.alternate===null&&t(M,ge),E=l(Wr,E,Se),he===null?fe=Wr:he.sibling=Wr,he=Wr,ge=pt}if(Le.done)return r(M,ge),Ve&&Yr(M,Se),fe;if(ge===null){for(;!Le.done;Se++,Le=L.next())Le=Q(M,Le.value,J),Le!==null&&(E=l(Le,E,Se),he===null?fe=Le:he.sibling=Le,he=Le);return Ve&&Yr(M,Se),fe}for(ge=n(M,ge);!Le.done;Se++,Le=L.next())Le=ne(ge,M,Se,Le.value,J),Le!==null&&(e&&Le.alternate!==null&&ge.delete(Le.key===null?Se:Le.key),E=l(Le,E,Se),he===null?fe=Le:he.sibling=Le,he=Le);return e&&ge.forEach(function(xf){return t(M,xf)}),Ve&&Yr(M,Se),fe}function Ke(M,E,L,J){if(typeof L=="object"&&L!==null&&L.type===T&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case z:e:{for(var fe=L.key,he=E;he!==null;){if(he.key===fe){if(fe=L.type,fe===T){if(he.tag===7){r(M,he.sibling),E=s(he,L.props.children),E.return=M,M=E;break e}}else if(he.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===K&&La(fe)===he.type){r(M,he.sibling),E=s(he,L.props),E.ref=so(M,he,L),E.return=M,M=E;break e}r(M,he);break}else t(M,he);he=he.sibling}L.type===T?(E=on(L.props.children,M.mode,J,L.key),E.return=M,M=E):(J=js(L.type,L.key,L.props,null,M.mode,J),J.ref=so(M,E,L),J.return=M,M=J)}return d(M);case _:e:{for(he=L.key;E!==null;){if(E.key===he)if(E.tag===4&&E.stateNode.containerInfo===L.containerInfo&&E.stateNode.implementation===L.implementation){r(M,E.sibling),E=s(E,L.children||[]),E.return=M,M=E;break e}else{r(M,E);break}else t(M,E);E=E.sibling}E=mi(L,M.mode,J),E.return=M,M=E}return d(M);case K:return he=L._init,Ke(M,E,he(L._payload),J)}if(ye(L))return le(M,E,L,J);if(re(L))return ue(M,E,L,J);Jo(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,E!==null&&E.tag===6?(r(M,E.sibling),E=s(E,L),E.return=M,M=E):(r(M,E),E=pi(L,M.mode,J),E.return=M,M=E),d(M)):r(M,E)}return Ke}var En=Oa(!0),Fa=Oa(!1),Zo=Pr(null),es=null,Tn=null,Cl=null;function Nl(){Cl=Tn=es=null}function bl(e){var t=Zo.current;Ue(Zo),e._currentValue=t}function kl(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function In(e,t){es=e,Cl=Tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(Dt=!0),e.firstContext=null)}function Gt(e){var t=e._currentValue;if(Cl!==e)if(e={context:e,memoizedValue:t,next:null},Tn===null){if(es===null)throw Error(a(308));Tn=e,es.dependencies={lanes:0,firstContext:e}}else Tn=Tn.next=e;return t}var Kr=null;function El(e){Kr===null?Kr=[e]:Kr.push(e)}function za(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,El(t)):(r.next=s.next,s.next=r),t.interleaved=r,yr(e,n)}function yr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Or=!1;function Tl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Fr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Ae&2)!==0){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,yr(e,r)}return s=n.interleaved,s===null?(t.next=t,El(n)):(t.next=s.next,s.next=t),n.interleaved=t,yr(e,r)}function ts(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Us(e,r)}}function $a(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?s=l=d:l=l.next=d,r=r.next}while(r!==null);l===null?s=l=t:l=l.next=t}else s=l=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function rs(e,t,r,n){var s=e.updateQueue;Or=!1;var l=s.firstBaseUpdate,d=s.lastBaseUpdate,v=s.shared.pending;if(v!==null){s.shared.pending=null;var b=v,F=b.next;b.next=null,d===null?l=F:d.next=F,d=b;var X=e.alternate;X!==null&&(X=X.updateQueue,v=X.lastBaseUpdate,v!==d&&(v===null?X.firstBaseUpdate=F:v.next=F,X.lastBaseUpdate=b))}if(l!==null){var Q=s.baseState;d=0,X=F=b=null,v=l;do{var G=v.lane,ne=v.eventTime;if((n&G)===G){X!==null&&(X=X.next={eventTime:ne,lane:0,tag:v.tag,payload:v.payload,callback:v.callback,next:null});e:{var le=e,ue=v;switch(G=t,ne=r,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){Q=le.call(ne,Q,G);break e}Q=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,G=typeof le=="function"?le.call(ne,Q,G):le,G==null)break e;Q=Z({},Q,G);break e;case 2:Or=!0}}v.callback!==null&&v.lane!==0&&(e.flags|=64,G=s.effects,G===null?s.effects=[v]:G.push(v))}else ne={eventTime:ne,lane:G,tag:v.tag,payload:v.payload,callback:v.callback,next:null},X===null?(F=X=ne,b=Q):X=X.next=ne,d|=G;if(v=v.next,v===null){if(v=s.shared.pending,v===null)break;G=v,v=G.next,G.next=null,s.lastBaseUpdate=G,s.shared.pending=null}}while(!0);if(X===null&&(b=Q),s.baseState=b,s.firstBaseUpdate=F,s.lastBaseUpdate=X,t=s.shared.interleaved,t!==null){s=t;do d|=s.lane,s=s.next;while(s!==t)}else l===null&&(s.shared.lanes=0);en|=d,e.lanes=d,e.memoizedState=Q}}function Ha(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(a(191,s));s.call(n)}}}var lo={},ur=Pr(lo),io=Pr(lo),ao=Pr(lo);function Jr(e){if(e===lo)throw Error(a(174));return e}function Il(e,t){switch($e(ao,t),$e(io,e),$e(ur,lo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ve(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ve(t,e)}Ue(ur),$e(ur,t)}function Dn(){Ue(ur),Ue(io),Ue(ao)}function Ua(e){Jr(ao.current);var t=Jr(ur.current),r=ve(t,e.type);t!==r&&($e(io,e),$e(ur,r))}function Dl(e){io.current===e&&(Ue(ur),Ue(io))}var qe=Pr(0);function ns(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _l=[];function Ml(){for(var e=0;e<_l.length;e++)_l[e]._workInProgressVersionPrimary=null;_l.length=0}var os=I.ReactCurrentDispatcher,Pl=I.ReactCurrentBatchConfig,Zr=0,Xe=null,it=null,ct=null,ss=!1,uo=!1,co=0,zc=0;function yt(){throw Error(a(321))}function Al(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zt(e[r],t[r]))return!1;return!0}function Ll(e,t,r,n,s,l){if(Zr=l,Xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,os.current=e===null||e.memoizedState===null?Uc:Bc,e=r(n,s),uo){l=0;do{if(uo=!1,co=0,25<=l)throw Error(a(301));l+=1,ct=it=null,t.updateQueue=null,os.current=Wc,e=r(n,s)}while(uo)}if(os.current=as,t=it!==null&&it.next!==null,Zr=0,ct=it=Xe=null,ss=!1,t)throw Error(a(300));return e}function Ol(){var e=co!==0;return co=0,e}function dr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ct===null?Xe.memoizedState=ct=e:ct=ct.next=e,ct}function qt(){if(it===null){var e=Xe.alternate;e=e!==null?e.memoizedState:null}else e=it.next;var t=ct===null?Xe.memoizedState:ct.next;if(t!==null)ct=t,it=e;else{if(e===null)throw Error(a(310));it=e,e={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},ct===null?Xe.memoizedState=ct=e:ct=ct.next=e}return ct}function fo(e,t){return typeof t=="function"?t(e):t}function Fl(e){var t=qt(),r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var n=it,s=n.baseQueue,l=r.pending;if(l!==null){if(s!==null){var d=s.next;s.next=l.next,l.next=d}n.baseQueue=s=l,r.pending=null}if(s!==null){l=s.next,n=n.baseState;var v=d=null,b=null,F=l;do{var X=F.lane;if((Zr&X)===X)b!==null&&(b=b.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),n=F.hasEagerState?F.eagerState:e(n,F.action);else{var Q={lane:X,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};b===null?(v=b=Q,d=n):b=b.next=Q,Xe.lanes|=X,en|=X}F=F.next}while(F!==null&&F!==l);b===null?d=n:b.next=v,Zt(n,t.memoizedState)||(Dt=!0),t.memoizedState=n,t.baseState=d,t.baseQueue=b,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do l=s.lane,Xe.lanes|=l,en|=l,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function zl(e){var t=qt(),r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,l=t.memoizedState;if(s!==null){r.pending=null;var d=s=s.next;do l=e(l,d.action),d=d.next;while(d!==s);Zt(l,t.memoizedState)||(Dt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function Ba(){}function Wa(e,t){var r=Xe,n=qt(),s=t(),l=!Zt(n.memoizedState,s);if(l&&(n.memoizedState=s,Dt=!0),n=n.queue,Rl(qa.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||ct!==null&&ct.memoizedState.tag&1){if(r.flags|=2048,po(9,Ga.bind(null,r,n,s,t),void 0,null),ft===null)throw Error(a(349));(Zr&30)!==0||Va(r,t,s)}return s}function Va(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ga(e,t,r,n){t.value=r,t.getSnapshot=n,Xa(t)&&Qa(e)}function qa(e,t,r){return r(function(){Xa(t)&&Qa(e)})}function Xa(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zt(e,r)}catch{return!0}}function Qa(e){var t=yr(e,1);t!==null&&or(t,e,1,-1)}function Ya(e){var t=dr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:e},t.queue=e,e=e.dispatch=Hc.bind(null,Xe,e),[t.memoizedState,e]}function po(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Xe.updateQueue,t===null?(t={lastEffect:null,stores:null},Xe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ka(){return qt().memoizedState}function ls(e,t,r,n){var s=dr();Xe.flags|=e,s.memoizedState=po(1|t,r,void 0,n===void 0?null:n)}function is(e,t,r,n){var s=qt();n=n===void 0?null:n;var l=void 0;if(it!==null){var d=it.memoizedState;if(l=d.destroy,n!==null&&Al(n,d.deps)){s.memoizedState=po(t,r,l,n);return}}Xe.flags|=e,s.memoizedState=po(1|t,r,l,n)}function Ja(e,t){return ls(8390656,8,e,t)}function Rl(e,t){return is(2048,8,e,t)}function Za(e,t){return is(4,2,e,t)}function eu(e,t){return is(4,4,e,t)}function tu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ru(e,t,r){return r=r!=null?r.concat([e]):null,is(4,4,tu.bind(null,t,e),r)}function $l(){}function nu(e,t){var r=qt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Al(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function ou(e,t){var r=qt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Al(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function su(e,t,r){return(Zr&21)===0?(e.baseState&&(e.baseState=!1,Dt=!0),e.memoizedState=r):(Zt(r,t)||(r=Li(),Xe.lanes|=r,en|=r,e.baseState=!0),t)}function Rc(e,t){var r=ze;ze=r!==0&&4>r?r:4,e(!0);var n=Pl.transition;Pl.transition={};try{e(!1),t()}finally{ze=r,Pl.transition=n}}function lu(){return qt().memoizedState}function $c(e,t,r){var n=Hr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},iu(e))au(t,r);else if(r=za(e,t,r,n),r!==null){var s=kt();or(r,e,n,s),uu(r,t,n)}}function Hc(e,t,r){var n=Hr(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(iu(e))au(t,s);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var d=t.lastRenderedState,v=l(d,r);if(s.hasEagerState=!0,s.eagerState=v,Zt(v,d)){var b=t.interleaved;b===null?(s.next=s,El(t)):(s.next=b.next,b.next=s),t.interleaved=s;return}}catch{}finally{}r=za(e,t,s,n),r!==null&&(s=kt(),or(r,e,n,s),uu(r,t,n))}}function iu(e){var t=e.alternate;return e===Xe||t!==null&&t===Xe}function au(e,t){uo=ss=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function uu(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Us(e,r)}}var as={readContext:Gt,useCallback:yt,useContext:yt,useEffect:yt,useImperativeHandle:yt,useInsertionEffect:yt,useLayoutEffect:yt,useMemo:yt,useReducer:yt,useRef:yt,useState:yt,useDebugValue:yt,useDeferredValue:yt,useTransition:yt,useMutableSource:yt,useSyncExternalStore:yt,useId:yt,unstable_isNewReconciler:!1},Uc={readContext:Gt,useCallback:function(e,t){return dr().memoizedState=[e,t===void 0?null:t],e},useContext:Gt,useEffect:Ja,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,ls(4194308,4,tu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ls(4194308,4,e,t)},useInsertionEffect:function(e,t){return ls(4,2,e,t)},useMemo:function(e,t){var r=dr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=dr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=$c.bind(null,Xe,e),[n.memoizedState,e]},useRef:function(e){var t=dr();return e={current:e},t.memoizedState=e},useState:Ya,useDebugValue:$l,useDeferredValue:function(e){return dr().memoizedState=e},useTransition:function(){var e=Ya(!1),t=e[0];return e=Rc.bind(null,e[1]),dr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Xe,s=dr();if(Ve){if(r===void 0)throw Error(a(407));r=r()}else{if(r=t(),ft===null)throw Error(a(349));(Zr&30)!==0||Va(n,t,r)}s.memoizedState=r;var l={value:r,getSnapshot:t};return s.queue=l,Ja(qa.bind(null,n,l,e),[e]),n.flags|=2048,po(9,Ga.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=dr(),t=ft.identifierPrefix;if(Ve){var r=xr,n=gr;r=(n&~(1<<32-Jt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=co++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=zc++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Bc={readContext:Gt,useCallback:nu,useContext:Gt,useEffect:Rl,useImperativeHandle:ru,useInsertionEffect:Za,useLayoutEffect:eu,useMemo:ou,useReducer:Fl,useRef:Ka,useState:function(){return Fl(fo)},useDebugValue:$l,useDeferredValue:function(e){var t=qt();return su(t,it.memoizedState,e)},useTransition:function(){var e=Fl(fo)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Ba,useSyncExternalStore:Wa,useId:lu,unstable_isNewReconciler:!1},Wc={readContext:Gt,useCallback:nu,useContext:Gt,useEffect:Rl,useImperativeHandle:ru,useInsertionEffect:Za,useLayoutEffect:eu,useMemo:ou,useReducer:zl,useRef:Ka,useState:function(){return zl(fo)},useDebugValue:$l,useDeferredValue:function(e){var t=qt();return it===null?t.memoizedState=e:su(t,it.memoizedState,e)},useTransition:function(){var e=zl(fo)[0],t=qt().memoizedState;return[e,t]},useMutableSource:Ba,useSyncExternalStore:Wa,useId:lu,unstable_isNewReconciler:!1};function tr(e,t){if(e&&e.defaultProps){t=Z({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Hl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Z({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var us={isMounted:function(e){return(e=e._reactInternals)?pr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=kt(),s=Hr(e),l=vr(n,s);l.payload=t,r!=null&&(l.callback=r),t=Fr(e,l,s),t!==null&&(or(t,e,s,n),ts(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=kt(),s=Hr(e),l=vr(n,s);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=Fr(e,l,s),t!==null&&(or(t,e,s,n),ts(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=kt(),n=Hr(e),s=vr(r,n);s.tag=2,t!=null&&(s.callback=t),t=Fr(e,s,n),t!==null&&(or(t,e,n,r),ts(t,e,n))}};function du(e,t,r,n,s,l,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,d):t.prototype&&t.prototype.isPureReactComponent?!Jn(r,n)||!Jn(s,l):!0}function cu(e,t,r){var n=!1,s=Ar,l=t.contextType;return typeof l=="object"&&l!==null?l=Gt(l):(s=It(t)?Xr:xt.current,n=t.contextTypes,l=(n=n!=null)?Cn(e,s):Ar),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=us,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=l),t}function fu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&us.enqueueReplaceState(t,t.state,null)}function Ul(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Tl(e);var l=t.contextType;typeof l=="object"&&l!==null?s.context=Gt(l):(l=It(t)?Xr:xt.current,s.context=Cn(e,l)),s.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Hl(e,t,l,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&us.enqueueReplaceState(s,s.state,null),rs(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function _n(e,t){try{var r="",n=t;do r+=xe(n),n=n.return;while(n);var s=r}catch(l){s=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:s,digest:null}}function Bl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Wl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Vc=typeof WeakMap=="function"?WeakMap:Map;function pu(e,t,r){r=vr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){gs||(gs=!0,si=n),Wl(e,t)},r}function mu(e,t,r){r=vr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){Wl(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Wl(e,t),typeof n!="function"&&(Rr===null?Rr=new Set([this]):Rr.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function hu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Vc;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=sf.bind(null,e,t,r),t.then(e,e))}function gu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function xu(e,t,r,n,s){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=vr(-1,1),t.tag=2,Fr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Gc=I.ReactCurrentOwner,Dt=!1;function bt(e,t,r,n){t.child=e===null?Fa(t,null,r,n):En(t,e.child,r,n)}function yu(e,t,r,n,s){r=r.render;var l=t.ref;return In(t,s),n=Ll(e,t,r,n,l,s),r=Ol(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wr(e,t,s)):(Ve&&r&&yl(t),t.flags|=1,bt(e,t,n,s),t.child)}function vu(e,t,r,n,s){if(e===null){var l=r.type;return typeof l=="function"&&!fi(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,wu(e,t,l,n,s)):(e=js(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,(e.lanes&s)===0){var d=l.memoizedProps;if(r=r.compare,r=r!==null?r:Jn,r(d,n)&&e.ref===t.ref)return wr(e,t,s)}return t.flags|=1,e=Br(l,n),e.ref=t.ref,e.return=t,t.child=e}function wu(e,t,r,n,s){if(e!==null){var l=e.memoizedProps;if(Jn(l,n)&&e.ref===t.ref)if(Dt=!1,t.pendingProps=n=l,(e.lanes&s)!==0)(e.flags&131072)!==0&&(Dt=!0);else return t.lanes=e.lanes,wr(e,t,s)}return Vl(e,t,r,n,s)}function Su(e,t,r){var n=t.pendingProps,s=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Pn,Rt),Rt|=r;else{if((r&1073741824)===0)return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,$e(Pn,Rt),Rt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,$e(Pn,Rt),Rt|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,$e(Pn,Rt),Rt|=n;return bt(e,t,s,r),t.child}function ju(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Vl(e,t,r,n,s){var l=It(r)?Xr:xt.current;return l=Cn(t,l),In(t,s),r=Ll(e,t,r,n,l,s),n=Ol(),e!==null&&!Dt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,wr(e,t,s)):(Ve&&n&&yl(t),t.flags|=1,bt(e,t,r,s),t.child)}function Cu(e,t,r,n,s){if(It(r)){var l=!0;qo(t)}else l=!1;if(In(t,s),t.stateNode===null)cs(e,t),cu(t,r,n),Ul(t,r,n,s),n=!0;else if(e===null){var d=t.stateNode,v=t.memoizedProps;d.props=v;var b=d.context,F=r.contextType;typeof F=="object"&&F!==null?F=Gt(F):(F=It(r)?Xr:xt.current,F=Cn(t,F));var X=r.getDerivedStateFromProps,Q=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function";Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==n||b!==F)&&fu(t,d,n,F),Or=!1;var G=t.memoizedState;d.state=G,rs(t,n,d,s),b=t.memoizedState,v!==n||G!==b||Tt.current||Or?(typeof X=="function"&&(Hl(t,r,X,n),b=t.memoizedState),(v=Or||du(t,r,v,n,G,b,F))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=b),d.props=n,d.state=b,d.context=F,n=v):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,Ra(e,t),v=t.memoizedProps,F=t.type===t.elementType?v:tr(t.type,v),d.props=F,Q=t.pendingProps,G=d.context,b=r.contextType,typeof b=="object"&&b!==null?b=Gt(b):(b=It(r)?Xr:xt.current,b=Cn(t,b));var ne=r.getDerivedStateFromProps;(X=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==Q||G!==b)&&fu(t,d,n,b),Or=!1,G=t.memoizedState,d.state=G,rs(t,n,d,s);var le=t.memoizedState;v!==Q||G!==le||Tt.current||Or?(typeof ne=="function"&&(Hl(t,r,ne,n),le=t.memoizedState),(F=Or||du(t,r,F,n,G,le,b)||!1)?(X||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,le,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,le,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=le),d.props=n,d.state=le,d.context=b,n=F):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),n=!1)}return Gl(e,t,r,n,l,s)}function Gl(e,t,r,n,s,l){ju(e,t);var d=(t.flags&128)!==0;if(!n&&!d)return s&&Ta(t,r,!1),wr(e,t,l);n=t.stateNode,Gc.current=t;var v=d&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&d?(t.child=En(t,e.child,null,l),t.child=En(t,null,v,l)):bt(e,t,v,l),t.memoizedState=n.state,s&&Ta(t,r,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?ka(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ka(e,t.context,!1),Il(e,t.containerInfo)}function bu(e,t,r,n,s){return kn(),jl(s),t.flags|=256,bt(e,t,r,n),t.child}var ql={dehydrated:null,treeContext:null,retryLane:0};function Xl(e){return{baseLanes:e,cachePool:null,transitions:null}}function ku(e,t,r){var n=t.pendingProps,s=qe.current,l=!1,d=(t.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(s&2)!==0),v?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),$e(qe,s&1),e===null)return Sl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(d=n.children,e=n.fallback,l?(n=t.mode,l=t.child,d={mode:"hidden",children:d},(n&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=d):l=Cs(d,n,0,null),e=on(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Xl(r),t.memoizedState=ql,e):Ql(t,d));if(s=e.memoizedState,s!==null&&(v=s.dehydrated,v!==null))return qc(e,t,d,n,v,s,r);if(l){l=n.fallback,d=t.mode,s=e.child,v=s.sibling;var b={mode:"hidden",children:n.children};return(d&1)===0&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=b,t.deletions=null):(n=Br(s,b),n.subtreeFlags=s.subtreeFlags&14680064),v!==null?l=Br(v,l):(l=on(l,d,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,d=e.child.memoizedState,d=d===null?Xl(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=e.childLanes&~r,t.memoizedState=ql,n}return l=e.child,e=l.sibling,n=Br(l,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ql(e,t){return t=Cs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ds(e,t,r,n){return n!==null&&jl(n),En(t,e.child,null,r),e=Ql(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qc(e,t,r,n,s,l,d){if(r)return t.flags&256?(t.flags&=-257,n=Bl(Error(a(422))),ds(e,t,d,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,s=t.mode,n=Cs({mode:"visible",children:n.children},s,0,null),l=on(l,s,d,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,(t.mode&1)!==0&&En(t,e.child,null,d),t.child.memoizedState=Xl(d),t.memoizedState=ql,l);if((t.mode&1)===0)return ds(e,t,d,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var v=n.dgst;return n=v,l=Error(a(419)),n=Bl(l,n,void 0),ds(e,t,d,n)}if(v=(d&e.childLanes)!==0,Dt||v){if(n=ft,n!==null){switch(d&-d){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(n.suspendedLanes|d))!==0?0:s,s!==0&&s!==l.retryLane&&(l.retryLane=s,yr(e,s),or(n,e,s,-1))}return ci(),n=Bl(Error(a(421))),ds(e,t,d,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=lf.bind(null,e),s._reactRetry=t,null):(e=l.treeContext,zt=Mr(s.nextSibling),Ft=t,Ve=!0,er=null,e!==null&&(Wt[Vt++]=gr,Wt[Vt++]=xr,Wt[Vt++]=Qr,gr=e.id,xr=e.overflow,Qr=t),t=Ql(t,n.children),t.flags|=4096,t)}function Eu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),kl(e.return,t,r)}function Yl(e,t,r,n,s){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=s)}function Tu(e,t,r){var n=t.pendingProps,s=n.revealOrder,l=n.tail;if(bt(e,t,n.children,r),n=qe.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Eu(e,r,t);else if(e.tag===19)Eu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if($e(qe,n),(t.mode&1)===0)t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&ns(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Yl(t,!1,s,r,l);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&ns(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Yl(t,!0,r,null,l);break;case"together":Yl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function cs(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function wr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),en|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,r=Br(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Br(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Xc(e,t,r){switch(t.tag){case 3:Nu(t),kn();break;case 5:Ua(t);break;case 1:It(t.type)&&qo(t);break;case 4:Il(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;$e(Zo,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?($e(qe,qe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?ku(e,t,r):($e(qe,qe.current&1),e=wr(e,t,r),e!==null?e.sibling:null);$e(qe,qe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return Tu(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(qe,qe.current),n)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,r)}return wr(e,t,r)}var Iu,Kl,Du,_u;Iu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Kl=function(){},Du=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Jr(ur.current);var l=null;switch(r){case"input":s=ke(e,s),n=ke(e,n),l=[];break;case"select":s=Z({},s,{value:void 0}),n=Z({},n,{value:void 0}),l=[];break;case"textarea":s=lt(e,s),n=lt(e,n),l=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Wo)}Lt(r,n);var d;r=null;for(F in s)if(!n.hasOwnProperty(F)&&s.hasOwnProperty(F)&&s[F]!=null)if(F==="style"){var v=s[F];for(d in v)v.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(c.hasOwnProperty(F)?l||(l=[]):(l=l||[]).push(F,null));for(F in n){var b=n[F];if(v=s?.[F],n.hasOwnProperty(F)&&b!==v&&(b!=null||v!=null))if(F==="style")if(v){for(d in v)!v.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in b)b.hasOwnProperty(d)&&v[d]!==b[d]&&(r||(r={}),r[d]=b[d])}else r||(l||(l=[]),l.push(F,r)),r=b;else F==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,v=v?v.__html:void 0,b!=null&&v!==b&&(l=l||[]).push(F,b)):F==="children"?typeof b!="string"&&typeof b!="number"||(l=l||[]).push(F,""+b):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(c.hasOwnProperty(F)?(b!=null&&F==="onScroll"&&He("scroll",e),l||v===b||(l=[])):(l=l||[]).push(F,b))}r&&(l=l||[]).push("style",r);var F=l;(t.updateQueue=F)&&(t.flags|=4)}},_u=function(e,t,r,n){r!==n&&(t.flags|=4)};function mo(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function vt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Qc(e,t,r){var n=t.pendingProps;switch(vl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(t),null;case 1:return It(t.type)&&Go(),vt(t),null;case 3:return n=t.stateNode,Dn(),Ue(Tt),Ue(xt),Ml(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ko(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,er!==null&&(ai(er),er=null))),Kl(e,t),vt(t),null;case 5:Dl(t);var s=Jr(ao.current);if(r=t.type,e!==null&&t.stateNode!=null)Du(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(a(166));return vt(t),null}if(e=Jr(ur.current),Ko(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[ar]=t,n[no]=l,e=(t.mode&1)!==0,r){case"dialog":He("cancel",n),He("close",n);break;case"iframe":case"object":case"embed":He("load",n);break;case"video":case"audio":for(s=0;s<eo.length;s++)He(eo[s],n);break;case"source":He("error",n);break;case"img":case"image":case"link":He("error",n),He("load",n);break;case"details":He("toggle",n);break;case"input":_e(n,l),He("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},He("invalid",n);break;case"textarea":Je(n,l),He("invalid",n)}Lt(r,l),s=null;for(var d in l)if(l.hasOwnProperty(d)){var v=l[d];d==="children"?typeof v=="string"?n.textContent!==v&&(l.suppressHydrationWarning!==!0&&Bo(n.textContent,v,e),s=["children",v]):typeof v=="number"&&n.textContent!==""+v&&(l.suppressHydrationWarning!==!0&&Bo(n.textContent,v,e),s=["children",""+v]):c.hasOwnProperty(d)&&v!=null&&d==="onScroll"&&He("scroll",n)}switch(r){case"input":St(n),ce(n,l,!0);break;case"textarea":St(n),Me(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Wo)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{d=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ne(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=d.createElement(r,{is:n.is}):(e=d.createElement(r),r==="select"&&(d=e,n.multiple?d.multiple=!0:n.size&&(d.size=n.size))):e=d.createElementNS(e,r),e[ar]=t,e[no]=n,Iu(e,t,!1,!1),t.stateNode=e;e:{switch(d=Re(r,n),r){case"dialog":He("cancel",e),He("close",e),s=n;break;case"iframe":case"object":case"embed":He("load",e),s=n;break;case"video":case"audio":for(s=0;s<eo.length;s++)He(eo[s],e);s=n;break;case"source":He("error",e),s=n;break;case"img":case"image":case"link":He("error",e),He("load",e),s=n;break;case"details":He("toggle",e),s=n;break;case"input":_e(e,n),s=ke(e,n),He("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=Z({},n,{value:void 0}),He("invalid",e);break;case"textarea":Je(e,n),s=lt(e,n),He("invalid",e);break;default:s=n}Lt(r,s),v=s;for(l in v)if(v.hasOwnProperty(l)){var b=v[l];l==="style"?$t(e,b):l==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&We(e,b)):l==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&Ze(e,b):typeof b=="number"&&Ze(e,""+b):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(c.hasOwnProperty(l)?b!=null&&l==="onScroll"&&He("scroll",e):b!=null&&p(e,l,b,d))}switch(r){case"input":St(e),ce(e,n,!1);break;case"textarea":St(e),Me(e);break;case"option":n.value!=null&&e.setAttribute("value",""+be(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Ee(e,!!n.multiple,l,!1):n.defaultValue!=null&&Ee(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=Wo)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return vt(t),null;case 6:if(e&&t.stateNode!=null)_u(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(a(166));if(r=Jr(ao.current),Jr(ur.current),Ko(t)){if(n=t.stateNode,r=t.memoizedProps,n[ar]=t,(l=n.nodeValue!==r)&&(e=Ft,e!==null))switch(e.tag){case 3:Bo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Bo(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ar]=t,t.stateNode=n}return vt(t),null;case 13:if(Ue(qe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&zt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Aa(),kn(),t.flags|=98560,l=!1;else if(l=Ko(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(a(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));l[ar]=t}else kn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;vt(t),l=!1}else er!==null&&(ai(er),er=null),l=!0;if(!l)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(qe.current&1)!==0?at===0&&(at=3):ci())),t.updateQueue!==null&&(t.flags|=4),vt(t),null);case 4:return Dn(),Kl(e,t),e===null&&to(t.stateNode.containerInfo),vt(t),null;case 10:return bl(t.type._context),vt(t),null;case 17:return It(t.type)&&Go(),vt(t),null;case 19:if(Ue(qe),l=t.memoizedState,l===null)return vt(t),null;if(n=(t.flags&128)!==0,d=l.rendering,d===null)if(n)mo(l,!1);else{if(at!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=ns(e),d!==null){for(t.flags|=128,mo(l,!1),n=d.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,e=d.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return $e(qe,qe.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ye()>An&&(t.flags|=128,n=!0,mo(l,!1),t.lanes=4194304)}else{if(!n)if(e=ns(d),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),mo(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ve)return vt(t),null}else 2*Ye()-l.renderingStartTime>An&&r!==1073741824&&(t.flags|=128,n=!0,mo(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(r=l.last,r!==null?r.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ye(),t.sibling=null,r=qe.current,$e(qe,n?r&1|2:r&1),t):(vt(t),null);case 22:case 23:return di(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?(Rt&1073741824)!==0&&(vt(t),t.subtreeFlags&6&&(t.flags|=8192)):vt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function Yc(e,t){switch(vl(t),t.tag){case 1:return It(t.type)&&Go(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Dn(),Ue(Tt),Ue(xt),Ml(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Dl(t),null;case 13:if(Ue(qe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(qe),null;case 4:return Dn(),null;case 10:return bl(t.type._context),null;case 22:case 23:return di(),null;case 24:return null;default:return null}}var fs=!1,wt=!1,Kc=typeof WeakSet=="function"?WeakSet:Set,se=null;function Mn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Qe(e,t,n)}else r.current=null}function Jl(e,t,r){try{r()}catch(n){Qe(e,t,n)}}var Mu=!1;function Jc(e,t){if(dl=Mo,e=da(),rl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var d=0,v=-1,b=-1,F=0,X=0,Q=e,G=null;t:for(;;){for(var ne;Q!==r||s!==0&&Q.nodeType!==3||(v=d+s),Q!==l||n!==0&&Q.nodeType!==3||(b=d+n),Q.nodeType===3&&(d+=Q.nodeValue.length),(ne=Q.firstChild)!==null;)G=Q,Q=ne;for(;;){if(Q===e)break t;if(G===r&&++F===s&&(v=d),G===l&&++X===n&&(b=d),(ne=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=ne}r=v===-1||b===-1?null:{start:v,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(cl={focusedElem:e,selectionRange:r},Mo=!1,se=t;se!==null;)if(t=se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,se=e;else for(;se!==null;){t=se;try{var le=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,Ke=le.memoizedState,M=t.stateNode,E=M.getSnapshotBeforeUpdate(t.elementType===t.type?ue:tr(t.type,ue),Ke);M.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(J){Qe(t,t.return,J)}if(e=t.sibling,e!==null){e.return=t.return,se=e;break}se=t.return}return le=Mu,Mu=!1,le}function ho(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var l=s.destroy;s.destroy=void 0,l!==void 0&&Jl(t,r,l)}s=s.next}while(s!==n)}}function ps(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Zl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Pu(e){var t=e.alternate;t!==null&&(e.alternate=null,Pu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ar],delete t[no],delete t[hl],delete t[Ac],delete t[Lc])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Au(e){return e.tag===5||e.tag===3||e.tag===4}function Lu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ei(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Wo));else if(n!==4&&(e=e.child,e!==null))for(ei(e,t,r),e=e.sibling;e!==null;)ei(e,t,r),e=e.sibling}function ti(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ti(e,t,r),e=e.sibling;e!==null;)ti(e,t,r),e=e.sibling}var ht=null,rr=!1;function zr(e,t,r){for(r=r.child;r!==null;)Ou(e,t,r),r=r.sibling}function Ou(e,t,r){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(ko,r)}catch{}switch(r.tag){case 5:wt||Mn(r,t);case 6:var n=ht,s=rr;ht=null,zr(e,t,r),ht=n,rr=s,ht!==null&&(rr?(e=ht,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ht.removeChild(r.stateNode));break;case 18:ht!==null&&(rr?(e=ht,r=r.stateNode,e.nodeType===8?ml(e.parentNode,r):e.nodeType===1&&ml(e,r),Gn(e)):ml(ht,r.stateNode));break;case 4:n=ht,s=rr,ht=r.stateNode.containerInfo,rr=!0,zr(e,t,r),ht=n,rr=s;break;case 0:case 11:case 14:case 15:if(!wt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var l=s,d=l.destroy;l=l.tag,d!==void 0&&((l&2)!==0||(l&4)!==0)&&Jl(r,t,d),s=s.next}while(s!==n)}zr(e,t,r);break;case 1:if(!wt&&(Mn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(v){Qe(r,t,v)}zr(e,t,r);break;case 21:zr(e,t,r);break;case 22:r.mode&1?(wt=(n=wt)||r.memoizedState!==null,zr(e,t,r),wt=n):zr(e,t,r);break;default:zr(e,t,r)}}function Fu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Kc),t.forEach(function(n){var s=af.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function nr(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var l=e,d=t,v=d;e:for(;v!==null;){switch(v.tag){case 5:ht=v.stateNode,rr=!1;break e;case 3:ht=v.stateNode.containerInfo,rr=!0;break e;case 4:ht=v.stateNode.containerInfo,rr=!0;break e}v=v.return}if(ht===null)throw Error(a(160));Ou(l,d,s),ht=null,rr=!1;var b=s.alternate;b!==null&&(b.return=null),s.return=null}catch(F){Qe(s,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)zu(t,e),t=t.sibling}function zu(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(nr(t,e),cr(e),n&4){try{ho(3,e,e.return),ps(3,e)}catch(ue){Qe(e,e.return,ue)}try{ho(5,e,e.return)}catch(ue){Qe(e,e.return,ue)}}break;case 1:nr(t,e),cr(e),n&512&&r!==null&&Mn(r,r.return);break;case 5:if(nr(t,e),cr(e),n&512&&r!==null&&Mn(r,r.return),e.flags&32){var s=e.stateNode;try{Ze(s,"")}catch(ue){Qe(e,e.return,ue)}}if(n&4&&(s=e.stateNode,s!=null)){var l=e.memoizedProps,d=r!==null?r.memoizedProps:l,v=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{v==="input"&&l.type==="radio"&&l.name!=null&&ie(s,l),Re(v,d);var F=Re(v,l);for(d=0;d<b.length;d+=2){var X=b[d],Q=b[d+1];X==="style"?$t(s,Q):X==="dangerouslySetInnerHTML"?We(s,Q):X==="children"?Ze(s,Q):p(s,X,Q,F)}switch(v){case"input":Y(s,l);break;case"textarea":we(s,l);break;case"select":var G=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!l.multiple;var ne=l.value;ne!=null?Ee(s,!!l.multiple,ne,!1):G!==!!l.multiple&&(l.defaultValue!=null?Ee(s,!!l.multiple,l.defaultValue,!0):Ee(s,!!l.multiple,l.multiple?[]:"",!1))}s[no]=l}catch(ue){Qe(e,e.return,ue)}}break;case 6:if(nr(t,e),cr(e),n&4){if(e.stateNode===null)throw Error(a(162));s=e.stateNode,l=e.memoizedProps;try{s.nodeValue=l}catch(ue){Qe(e,e.return,ue)}}break;case 3:if(nr(t,e),cr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Gn(t.containerInfo)}catch(ue){Qe(e,e.return,ue)}break;case 4:nr(t,e),cr(e);break;case 13:nr(t,e),cr(e),s=e.child,s.flags&8192&&(l=s.memoizedState!==null,s.stateNode.isHidden=l,!l||s.alternate!==null&&s.alternate.memoizedState!==null||(oi=Ye())),n&4&&Fu(e);break;case 22:if(X=r!==null&&r.memoizedState!==null,e.mode&1?(wt=(F=wt)||X,nr(t,e),wt=F):nr(t,e),cr(e),n&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!X&&(e.mode&1)!==0)for(se=e,X=e.child;X!==null;){for(Q=se=X;se!==null;){switch(G=se,ne=G.child,G.tag){case 0:case 11:case 14:case 15:ho(4,G,G.return);break;case 1:Mn(G,G.return);var le=G.stateNode;if(typeof le.componentWillUnmount=="function"){n=G,r=G.return;try{t=n,le.props=t.memoizedProps,le.state=t.memoizedState,le.componentWillUnmount()}catch(ue){Qe(n,r,ue)}}break;case 5:Mn(G,G.return);break;case 22:if(G.memoizedState!==null){Hu(Q);continue}}ne!==null?(ne.return=G,se=ne):Hu(Q)}X=X.sibling}e:for(X=null,Q=e;;){if(Q.tag===5){if(X===null){X=Q;try{s=Q.stateNode,F?(l=s.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(v=Q.stateNode,b=Q.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,v.style.display=jt("display",d))}catch(ue){Qe(e,e.return,ue)}}}else if(Q.tag===6){if(X===null)try{Q.stateNode.nodeValue=F?"":Q.memoizedProps}catch(ue){Qe(e,e.return,ue)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===e)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===e)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===e)break e;X===Q&&(X=null),Q=Q.return}X===Q&&(X=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:nr(t,e),cr(e),n&4&&Fu(e);break;case 21:break;default:nr(t,e),cr(e)}}function cr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Au(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Ze(s,""),n.flags&=-33);var l=Lu(e);ti(e,l,s);break;case 3:case 4:var d=n.stateNode.containerInfo,v=Lu(e);ei(e,v,d);break;default:throw Error(a(161))}}catch(b){Qe(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zc(e,t,r){se=e,Ru(e)}function Ru(e,t,r){for(var n=(e.mode&1)!==0;se!==null;){var s=se,l=s.child;if(s.tag===22&&n){var d=s.memoizedState!==null||fs;if(!d){var v=s.alternate,b=v!==null&&v.memoizedState!==null||wt;v=fs;var F=wt;if(fs=d,(wt=b)&&!F)for(se=s;se!==null;)d=se,b=d.child,d.tag===22&&d.memoizedState!==null?Uu(s):b!==null?(b.return=d,se=b):Uu(s);for(;l!==null;)se=l,Ru(l),l=l.sibling;se=s,fs=v,wt=F}$u(e)}else(s.subtreeFlags&8772)!==0&&l!==null?(l.return=s,se=l):$u(e)}}function $u(e){for(;se!==null;){var t=se;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:wt||ps(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!wt)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:tr(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ha(t,l,n);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ha(t,d,r)}break;case 5:var v=t.stateNode;if(r===null&&t.flags&4){r=v;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var X=F.memoizedState;if(X!==null){var Q=X.dehydrated;Q!==null&&Gn(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}wt||t.flags&512&&Zl(t)}catch(G){Qe(t,t.return,G)}}if(t===e){se=null;break}if(r=t.sibling,r!==null){r.return=t.return,se=r;break}se=t.return}}function Hu(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,se=r;break}se=t.return}}function Uu(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ps(4,t)}catch(b){Qe(t,r,b)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(b){Qe(t,s,b)}}var l=t.return;try{Zl(t)}catch(b){Qe(t,l,b)}break;case 5:var d=t.return;try{Zl(t)}catch(b){Qe(t,d,b)}}}catch(b){Qe(t,t.return,b)}if(t===e){se=null;break}var v=t.sibling;if(v!==null){v.return=t.return,se=v;break}se=t.return}}var ef=Math.ceil,ms=I.ReactCurrentDispatcher,ri=I.ReactCurrentOwner,Xt=I.ReactCurrentBatchConfig,Ae=0,ft=null,tt=null,gt=0,Rt=0,Pn=Pr(0),at=0,go=null,en=0,hs=0,ni=0,xo=null,_t=null,oi=0,An=1/0,Sr=null,gs=!1,si=null,Rr=null,xs=!1,$r=null,ys=0,yo=0,li=null,vs=-1,ws=0;function kt(){return(Ae&6)!==0?Ye():vs!==-1?vs:vs=Ye()}function Hr(e){return(e.mode&1)===0?1:(Ae&2)!==0&&gt!==0?gt&-gt:Fc.transition!==null?(ws===0&&(ws=Li()),ws):(e=ze,e!==0||(e=window.event,e=e===void 0?16:Wi(e.type)),e)}function or(e,t,r,n){if(50<yo)throw yo=0,li=null,Error(a(185));Hn(e,r,n),((Ae&2)===0||e!==ft)&&(e===ft&&((Ae&2)===0&&(hs|=r),at===4&&Ur(e,gt)),Mt(e,n),r===1&&Ae===0&&(t.mode&1)===0&&(An=Ye()+500,Xo&&Lr()))}function Mt(e,t){var r=e.callbackNode;Fd(e,t);var n=Io(e,e===ft?gt:0);if(n===0)r!==null&&Mi(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Mi(r),t===1)e.tag===0?Oc(Wu.bind(null,e)):Ia(Wu.bind(null,e)),Mc(function(){(Ae&6)===0&&Lr()}),r=null;else{switch(Oi(n)){case 1:r=Rs;break;case 4:r=Pi;break;case 16:r=bo;break;case 536870912:r=Ai;break;default:r=bo}r=Ju(r,Bu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Bu(e,t){if(vs=-1,ws=0,(Ae&6)!==0)throw Error(a(327));var r=e.callbackNode;if(Ln()&&e.callbackNode!==r)return null;var n=Io(e,e===ft?gt:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=Ss(e,n);else{t=n;var s=Ae;Ae|=2;var l=Gu();(ft!==e||gt!==t)&&(Sr=null,An=Ye()+500,rn(e,t));do try{nf();break}catch(v){Vu(e,v)}while(!0);Nl(),ms.current=l,Ae=s,tt!==null?t=0:(ft=null,gt=0,t=at)}if(t!==0){if(t===2&&(s=$s(e),s!==0&&(n=s,t=ii(e,s))),t===1)throw r=go,rn(e,0),Ur(e,n),Mt(e,Ye()),r;if(t===6)Ur(e,n);else{if(s=e.current.alternate,(n&30)===0&&!tf(s)&&(t=Ss(e,n),t===2&&(l=$s(e),l!==0&&(n=l,t=ii(e,l))),t===1))throw r=go,rn(e,0),Ur(e,n),Mt(e,Ye()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:nn(e,_t,Sr);break;case 3:if(Ur(e,n),(n&130023424)===n&&(t=oi+500-Ye(),10<t)){if(Io(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){kt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=pl(nn.bind(null,e,_t,Sr),t);break}nn(e,_t,Sr);break;case 4:if(Ur(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var d=31-Jt(n);l=1<<d,d=t[d],d>s&&(s=d),n&=~l}if(n=s,n=Ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ef(n/1960))-n,10<n){e.timeoutHandle=pl(nn.bind(null,e,_t,Sr),n);break}nn(e,_t,Sr);break;case 5:nn(e,_t,Sr);break;default:throw Error(a(329))}}}return Mt(e,Ye()),e.callbackNode===r?Bu.bind(null,e):null}function ii(e,t){var r=xo;return e.current.memoizedState.isDehydrated&&(rn(e,t).flags|=256),e=Ss(e,t),e!==2&&(t=_t,_t=r,t!==null&&ai(t)),e}function ai(e){_t===null?_t=e:_t.push.apply(_t,e)}function tf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],l=s.getSnapshot;s=s.value;try{if(!Zt(l(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ur(e,t){for(t&=~ni,t&=~hs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Jt(t),n=1<<r;e[r]=-1,t&=~n}}function Wu(e){if((Ae&6)!==0)throw Error(a(327));Ln();var t=Io(e,0);if((t&1)===0)return Mt(e,Ye()),null;var r=Ss(e,t);if(e.tag!==0&&r===2){var n=$s(e);n!==0&&(t=n,r=ii(e,n))}if(r===1)throw r=go,rn(e,0),Ur(e,t),Mt(e,Ye()),r;if(r===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,nn(e,_t,Sr),Mt(e,Ye()),null}function ui(e,t){var r=Ae;Ae|=1;try{return e(t)}finally{Ae=r,Ae===0&&(An=Ye()+500,Xo&&Lr())}}function tn(e){$r!==null&&$r.tag===0&&(Ae&6)===0&&Ln();var t=Ae;Ae|=1;var r=Xt.transition,n=ze;try{if(Xt.transition=null,ze=1,e)return e()}finally{ze=n,Xt.transition=r,Ae=t,(Ae&6)===0&&Lr()}}function di(){Rt=Pn.current,Ue(Pn)}function rn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,_c(r)),tt!==null)for(r=tt.return;r!==null;){var n=r;switch(vl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Go();break;case 3:Dn(),Ue(Tt),Ue(xt),Ml();break;case 5:Dl(n);break;case 4:Dn();break;case 13:Ue(qe);break;case 19:Ue(qe);break;case 10:bl(n.type._context);break;case 22:case 23:di()}r=r.return}if(ft=e,tt=e=Br(e.current,null),gt=Rt=t,at=0,go=null,ni=hs=en=0,_t=xo=null,Kr!==null){for(t=0;t<Kr.length;t++)if(r=Kr[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,l=r.pending;if(l!==null){var d=l.next;l.next=s,n.next=d}r.pending=n}Kr=null}return e}function Vu(e,t){do{var r=tt;try{if(Nl(),os.current=as,ss){for(var n=Xe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}ss=!1}if(Zr=0,ct=it=Xe=null,uo=!1,co=0,ri.current=null,r===null||r.return===null){at=1,go=t,tt=null;break}e:{var l=e,d=r.return,v=r,b=t;if(t=gt,v.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var F=b,X=v,Q=X.tag;if((X.mode&1)===0&&(Q===0||Q===11||Q===15)){var G=X.alternate;G?(X.updateQueue=G.updateQueue,X.memoizedState=G.memoizedState,X.lanes=G.lanes):(X.updateQueue=null,X.memoizedState=null)}var ne=gu(d);if(ne!==null){ne.flags&=-257,xu(ne,d,v,l,t),ne.mode&1&&hu(l,F,t),t=ne,b=F;var le=t.updateQueue;if(le===null){var ue=new Set;ue.add(b),t.updateQueue=ue}else le.add(b);break e}else{if((t&1)===0){hu(l,F,t),ci();break e}b=Error(a(426))}}else if(Ve&&v.mode&1){var Ke=gu(d);if(Ke!==null){(Ke.flags&65536)===0&&(Ke.flags|=256),xu(Ke,d,v,l,t),jl(_n(b,v));break e}}l=b=_n(b,v),at!==4&&(at=2),xo===null?xo=[l]:xo.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var M=pu(l,b,t);$a(l,M);break e;case 1:v=b;var E=l.type,L=l.stateNode;if((l.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&(Rr===null||!Rr.has(L)))){l.flags|=65536,t&=-t,l.lanes|=t;var J=mu(l,v,t);$a(l,J);break e}}l=l.return}while(l!==null)}Xu(r)}catch(fe){t=fe,tt===r&&r!==null&&(tt=r=r.return);continue}break}while(!0)}function Gu(){var e=ms.current;return ms.current=as,e===null?as:e}function ci(){(at===0||at===3||at===2)&&(at=4),ft===null||(en&268435455)===0&&(hs&268435455)===0||Ur(ft,gt)}function Ss(e,t){var r=Ae;Ae|=2;var n=Gu();(ft!==e||gt!==t)&&(Sr=null,rn(e,t));do try{rf();break}catch(s){Vu(e,s)}while(!0);if(Nl(),Ae=r,ms.current=n,tt!==null)throw Error(a(261));return ft=null,gt=0,at}function rf(){for(;tt!==null;)qu(tt)}function nf(){for(;tt!==null&&!Td();)qu(tt)}function qu(e){var t=Ku(e.alternate,e,Rt);e.memoizedProps=e.pendingProps,t===null?Xu(e):tt=t,ri.current=null}function Xu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Qc(r,t,Rt),r!==null){tt=r;return}}else{if(r=Yc(r,t),r!==null){r.flags&=32767,tt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{at=6,tt=null;return}}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);at===0&&(at=5)}function nn(e,t,r){var n=ze,s=Xt.transition;try{Xt.transition=null,ze=1,of(e,t,r,n)}finally{Xt.transition=s,ze=n}return null}function of(e,t,r,n){do Ln();while($r!==null);if((Ae&6)!==0)throw Error(a(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if(zd(e,l),e===ft&&(tt=ft=null,gt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||xs||(xs=!0,Ju(bo,function(){return Ln(),null})),l=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||l){l=Xt.transition,Xt.transition=null;var d=ze;ze=1;var v=Ae;Ae|=4,ri.current=null,Jc(e,r),zu(r,e),Nc(cl),Mo=!!dl,cl=dl=null,e.current=r,Zc(r),Id(),Ae=v,ze=d,Xt.transition=l}else e.current=r;if(xs&&(xs=!1,$r=e,ys=s),l=e.pendingLanes,l===0&&(Rr=null),Md(r.stateNode),Mt(e,Ye()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(gs)throw gs=!1,e=si,si=null,e;return(ys&1)!==0&&e.tag!==0&&Ln(),l=e.pendingLanes,(l&1)!==0?e===li?yo++:(yo=0,li=e):yo=0,Lr(),null}function Ln(){if($r!==null){var e=Oi(ys),t=Xt.transition,r=ze;try{if(Xt.transition=null,ze=16>e?16:e,$r===null)var n=!1;else{if(e=$r,$r=null,ys=0,(Ae&6)!==0)throw Error(a(331));var s=Ae;for(Ae|=4,se=e.current;se!==null;){var l=se,d=l.child;if((se.flags&16)!==0){var v=l.deletions;if(v!==null){for(var b=0;b<v.length;b++){var F=v[b];for(se=F;se!==null;){var X=se;switch(X.tag){case 0:case 11:case 15:ho(8,X,l)}var Q=X.child;if(Q!==null)Q.return=X,se=Q;else for(;se!==null;){X=se;var G=X.sibling,ne=X.return;if(Pu(X),X===F){se=null;break}if(G!==null){G.return=ne,se=G;break}se=ne}}}var le=l.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var Ke=ue.sibling;ue.sibling=null,ue=Ke}while(ue!==null)}}se=l}}if((l.subtreeFlags&2064)!==0&&d!==null)d.return=l,se=d;else e:for(;se!==null;){if(l=se,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:ho(9,l,l.return)}var M=l.sibling;if(M!==null){M.return=l.return,se=M;break e}se=l.return}}var E=e.current;for(se=E;se!==null;){d=se;var L=d.child;if((d.subtreeFlags&2064)!==0&&L!==null)L.return=d,se=L;else e:for(d=E;se!==null;){if(v=se,(v.flags&2048)!==0)try{switch(v.tag){case 0:case 11:case 15:ps(9,v)}}catch(fe){Qe(v,v.return,fe)}if(v===d){se=null;break e}var J=v.sibling;if(J!==null){J.return=v.return,se=J;break e}se=v.return}}if(Ae=s,Lr(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(ko,e)}catch{}n=!0}return n}finally{ze=r,Xt.transition=t}}return!1}function Qu(e,t,r){t=_n(r,t),t=pu(e,t,1),e=Fr(e,t,1),t=kt(),e!==null&&(Hn(e,1,t),Mt(e,t))}function Qe(e,t,r){if(e.tag===3)Qu(e,e,r);else for(;t!==null;){if(t.tag===3){Qu(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Rr===null||!Rr.has(n))){e=_n(r,e),e=mu(t,e,1),t=Fr(t,e,1),e=kt(),t!==null&&(Hn(t,1,e),Mt(t,e));break}}t=t.return}}function sf(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=kt(),e.pingedLanes|=e.suspendedLanes&r,ft===e&&(gt&r)===r&&(at===4||at===3&&(gt&130023424)===gt&&500>Ye()-oi?rn(e,0):ni|=r),Mt(e,t)}function Yu(e,t){t===0&&((e.mode&1)===0?t=1:(t=To,To<<=1,(To&130023424)===0&&(To=4194304)));var r=kt();e=yr(e,t),e!==null&&(Hn(e,t,r),Mt(e,r))}function lf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Yu(e,r)}function af(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}n!==null&&n.delete(t),Yu(e,r)}var Ku;Ku=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tt.current)Dt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return Dt=!1,Xc(e,t,r);Dt=(e.flags&131072)!==0}else Dt=!1,Ve&&(t.flags&1048576)!==0&&Da(t,Yo,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;cs(e,t),e=t.pendingProps;var s=Cn(t,xt.current);In(t,r),s=Ll(null,t,n,e,s,r);var l=Ol();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,It(n)?(l=!0,qo(t)):l=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Tl(t),s.updater=us,t.stateNode=s,s._reactInternals=t,Ul(t,n,e,r),t=Gl(null,t,n,!0,l,r)):(t.tag=0,Ve&&l&&yl(t),bt(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(cs(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=df(n),e=tr(n,e),s){case 0:t=Vl(null,t,n,e,r);break e;case 1:t=Cu(null,t,n,e,r);break e;case 11:t=yu(null,t,n,e,r);break e;case 14:t=vu(null,t,n,tr(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tr(n,s),Vl(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tr(n,s),Cu(e,t,n,s,r);case 3:e:{if(Nu(t),e===null)throw Error(a(387));n=t.pendingProps,l=t.memoizedState,s=l.element,Ra(e,t),rs(t,n,null,r);var d=t.memoizedState;if(n=d.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){s=_n(Error(a(423)),t),t=bu(e,t,n,r,s);break e}else if(n!==s){s=_n(Error(a(424)),t),t=bu(e,t,n,r,s);break e}else for(zt=Mr(t.stateNode.containerInfo.firstChild),Ft=t,Ve=!0,er=null,r=Fa(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(kn(),n===s){t=wr(e,t,r);break e}bt(e,t,n,r)}t=t.child}return t;case 5:return Ua(t),e===null&&Sl(t),n=t.type,s=t.pendingProps,l=e!==null?e.memoizedProps:null,d=s.children,fl(n,s)?d=null:l!==null&&fl(n,l)&&(t.flags|=32),ju(e,t),bt(e,t,d,r),t.child;case 6:return e===null&&Sl(t),null;case 13:return ku(e,t,r);case 4:return Il(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=En(t,null,n,r):bt(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tr(n,s),yu(e,t,n,s,r);case 7:return bt(e,t,t.pendingProps,r),t.child;case 8:return bt(e,t,t.pendingProps.children,r),t.child;case 12:return bt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,l=t.memoizedProps,d=s.value,$e(Zo,n._currentValue),n._currentValue=d,l!==null)if(Zt(l.value,d)){if(l.children===s.children&&!Tt.current){t=wr(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var v=l.dependencies;if(v!==null){d=l.child;for(var b=v.firstContext;b!==null;){if(b.context===n){if(l.tag===1){b=vr(-1,r&-r),b.tag=2;var F=l.updateQueue;if(F!==null){F=F.shared;var X=F.pending;X===null?b.next=b:(b.next=X.next,X.next=b),F.pending=b}}l.lanes|=r,b=l.alternate,b!==null&&(b.lanes|=r),kl(l.return,r,t),v.lanes|=r;break}b=b.next}}else if(l.tag===10)d=l.type===t.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(a(341));d.lanes|=r,v=d.alternate,v!==null&&(v.lanes|=r),kl(d,r,t),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===t){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}bt(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,In(t,r),s=Gt(s),n=n(s),t.flags|=1,bt(e,t,n,r),t.child;case 14:return n=t.type,s=tr(n,t.pendingProps),s=tr(n.type,s),vu(e,t,n,s,r);case 15:return wu(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:tr(n,s),cs(e,t),t.tag=1,It(n)?(e=!0,qo(t)):e=!1,In(t,r),cu(t,n,s),Ul(t,n,s,r),Gl(null,t,n,!0,e,r);case 19:return Tu(e,t,r);case 22:return Su(e,t,r)}throw Error(a(156,t.tag))};function Ju(e,t){return _i(e,t)}function uf(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qt(e,t,r,n){return new uf(e,t,r,n)}function fi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function df(e){if(typeof e=="function")return fi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===te)return 11;if(e===pe)return 14}return 2}function Br(e,t){var r=e.alternate;return r===null?(r=Qt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function js(e,t,r,n,s,l){var d=2;if(n=e,typeof e=="function")fi(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case T:return on(r.children,s,l,t);case W:d=8,s|=8;break;case O:return e=Qt(12,r,t,s|2),e.elementType=O,e.lanes=l,e;case ee:return e=Qt(13,r,t,s),e.elementType=ee,e.lanes=l,e;case de:return e=Qt(19,r,t,s),e.elementType=de,e.lanes=l,e;case oe:return Cs(r,s,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:d=10;break e;case B:d=9;break e;case te:d=11;break e;case pe:d=14;break e;case K:d=16,n=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Qt(d,r,t,s),t.elementType=e,t.type=n,t.lanes=l,t}function on(e,t,r,n){return e=Qt(7,e,n,t),e.lanes=r,e}function Cs(e,t,r,n){return e=Qt(22,e,n,t),e.elementType=oe,e.lanes=r,e.stateNode={isHidden:!1},e}function pi(e,t,r){return e=Qt(6,e,null,t),e.lanes=r,e}function mi(e,t,r){return t=Qt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function cf(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hs(0),this.expirationTimes=Hs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hs(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function hi(e,t,r,n,s,l,d,v,b){return e=new cf(e,t,r,v,b),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Qt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tl(l),e}function ff(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Zu(e){if(!e)return Ar;e=e._reactInternals;e:{if(pr(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(It(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var r=e.type;if(It(r))return Ea(e,r,t)}return t}function ed(e,t,r,n,s,l,d,v,b){return e=hi(r,n,!0,e,s,l,d,v,b),e.context=Zu(null),r=e.current,n=kt(),s=Hr(r),l=vr(n,s),l.callback=t??null,Fr(r,l,s),e.current.lanes=s,Hn(e,s,n),Mt(e,n),e}function Ns(e,t,r,n){var s=t.current,l=kt(),d=Hr(s);return r=Zu(r),t.context===null?t.context=r:t.pendingContext=r,t=vr(l,d),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Fr(s,t,d),e!==null&&(or(e,s,d,l),ts(e,s,d)),d}function bs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function td(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function gi(e,t){td(e,t),(e=e.alternate)&&td(e,t)}function pf(){return null}var rd=typeof reportError=="function"?reportError:function(e){console.error(e)};function xi(e){this._internalRoot=e}ks.prototype.render=xi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));Ns(e,t,null,null)},ks.prototype.unmount=xi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;tn(function(){Ns(null,e,null,null)}),t[mr]=null}};function ks(e){this._internalRoot=e}ks.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ri();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ir.length&&t!==0&&t<Ir[r].priority;r++);Ir.splice(r,0,e),r===0&&Ui(e)}};function yi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Es(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nd(){}function mf(e,t,r,n,s){if(s){if(typeof n=="function"){var l=n;n=function(){var F=bs(d);l.call(F)}}var d=ed(t,n,e,0,null,!1,!1,"",nd);return e._reactRootContainer=d,e[mr]=d.current,to(e.nodeType===8?e.parentNode:e),tn(),d}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var v=n;n=function(){var F=bs(b);v.call(F)}}var b=hi(e,0,!1,null,null,!1,!1,"",nd);return e._reactRootContainer=b,e[mr]=b.current,to(e.nodeType===8?e.parentNode:e),tn(function(){Ns(t,b,r,n)}),b}function Ts(e,t,r,n,s){var l=r._reactRootContainer;if(l){var d=l;if(typeof s=="function"){var v=s;s=function(){var b=bs(d);v.call(b)}}Ns(t,d,e,s)}else d=mf(r,t,e,s,n);return bs(d)}Fi=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=$n(t.pendingLanes);r!==0&&(Us(t,r|1),Mt(t,Ye()),(Ae&6)===0&&(An=Ye()+500,Lr()))}break;case 13:tn(function(){var n=yr(e,1);if(n!==null){var s=kt();or(n,e,1,s)}}),gi(e,1)}},Bs=function(e){if(e.tag===13){var t=yr(e,134217728);if(t!==null){var r=kt();or(t,e,134217728,r)}gi(e,134217728)}},zi=function(e){if(e.tag===13){var t=Hr(e),r=yr(e,t);if(r!==null){var n=kt();or(r,e,t,n)}gi(e,t)}},Ri=function(){return ze},$i=function(e,t){var r=ze;try{return ze=e,t()}finally{ze=r}},Et=function(e,t,r){switch(t){case"input":if(Y(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Vo(n);if(!s)throw Error(a(90));q(n),Y(n,s)}}}break;case"textarea":we(e,r);break;case"select":t=r.value,t!=null&&Ee(e,!!r.multiple,t,!1)}},Ht=ui,No=tn;var hf={usingClientEntryPoint:!1,Events:[oo,Sn,Vo,cn,Nr,ui]},vo={findFiberByHostInstance:qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gf={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ii(e),e===null?null:e.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||pf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Is=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Is.isDisabled&&Is.supportsFiber)try{ko=Is.inject(gf),ir=Is}catch{}}return Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hf,Pt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yi(t))throw Error(a(200));return ff(e,t,null,r)},Pt.createRoot=function(e,t){if(!yi(e))throw Error(a(299));var r=!1,n="",s=rd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=hi(e,1,!1,null,null,r,!1,n,s),e[mr]=t.current,to(e.nodeType===8?e.parentNode:e),new xi(t)},Pt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=Ii(t),e=e===null?null:e.stateNode,e},Pt.flushSync=function(e){return tn(e)},Pt.hydrate=function(e,t,r){if(!Es(t))throw Error(a(200));return Ts(null,e,t,!0,r)},Pt.hydrateRoot=function(e,t,r){if(!yi(e))throw Error(a(405));var n=r!=null&&r.hydratedSources||null,s=!1,l="",d=rd;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=ed(t,null,e,1,r??null,s,!1,l,d),e[mr]=t.current,to(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new ks(t)},Pt.render=function(e,t,r){if(!Es(t))throw Error(a(200));return Ts(null,e,t,!1,r)},Pt.unmountComponentAtNode=function(e){if(!Es(e))throw Error(a(40));return e._reactRootContainer?(tn(function(){Ts(null,null,e,!1,function(){e._reactRootContainer=null,e[mr]=null})}),!0):!1},Pt.unstable_batchedUpdates=ui,Pt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Es(r))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Ts(e,t,r,!1,n)},Pt.version="18.3.1-next-f1338f8080-20240426",Pt}var cd;function jd(){if(cd)return Si.exports;cd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(u){console.error(u)}}return i(),Si.exports=Nf(),Si.exports}var fd;function bf(){if(fd)return Ds;fd=1;var i=jd();return Ds.createRoot=i.createRoot,Ds.hydrateRoot=i.hydrateRoot,Ds}var kf=bf();const Ef=Sd(kf);var At=(i=>(i.ProfessorConflitoHorario="professor_conflito_horario",i.MaxAulasDia="max_aulas_dia",i.Intersticio="intersticio",i.Indisponivel="indisponivel",i.ConflitoDisponibilidadeDivisao="conflito_disponibilidade_divisao",i.TurmaErrada="turma_errada",i))(At||{});const De=["segunda","terca","quarta","quinta","sexta"],nt=["07:10-08:00","08:00-08:50","08:50-09:40","10:00-10:50","10:50-11:40","11:40-12:30"],ot=["13:30-14:20","14:20-15:10","15:10-16:00","16:20-17:10","17:10-18:00","18:00-18:50"],jr=["18:10-19:00","19:00-19:50","19:50-20:50","21:05-21:55","21:55-23:00"],Fn=["18:10-19:00","19:00-19:50","19:50-20:50","21:05-21:55","21:55-23:00"],Tf="grade_v1_data",sn={[At.ProfessorConflitoHorario]:{bg:"bg-pink-600",text:"text-white",name:"Conflito de Horrio (Professor)",description:"Alerta Crtico: Professor alocado em mltiplas turmas no mesmo horrio."},[At.TurmaErrada]:{bg:"bg-blue-500",text:"text-white",name:"Troca entre Turmas",description:"Disciplina alocada em uma turma diferente da original (e no  uma troca BNCC vlida)."},[At.Intersticio]:{bg:"bg-red-600",text:"text-white",name:"Interstcio < 11h",description:"Menos de 11 horas de descanso entre os dias de trabalho."},[At.MaxAulasDia]:{bg:"bg-orange-400",text:"text-white",name:"Excesso de Aulas",description:"Professor com mais de 8 aulas no dia."},[At.ConflitoDisponibilidadeDivisao]:{bg:"bg-purple-500",text:"text-white",name:"Conflito Diviso",description:"Professores de disciplina dividida com disponibilidades conflitantes no mesmo horrio."},[At.Indisponivel]:{bg:"bg-yellow-400",text:"text-gray-800",name:"Fora de Disponibilidade",description:"Aula alocada em horrio indisponvel para o professor."}},bi=i=>{const[u,a]=i.split("-"),[f,c]=u.split(":").map(Number),[g,m]=a.split(":").map(Number);return{start:f*60+c,end:g*60+m}},As=i=>{const u=[],{professores:a,grade:f,disciplinas:c,atribuicoes:g,turmas:m}=i,S={};f.forEach(w=>{const h=`${w.professorId}-${w.dia}-${w.horario}`;S[h]||(S[h]=[]),S[h].push(w)});for(const w in S)if(S[w].length>1){const h=S[w],j=a.find(C=>C.id===h[0].professorId),y=h[0].dia,N=h[0].horario;u.push({id:`conflito-horario-${w}`,tipo:At.ProfessorConflitoHorario,detalhes:`Alerta Crtico: Professor ${j?.nome||"Desconhecido"} est em ${h.length} lugares ao mesmo tempo na ${y} s ${N}.`,timestamp:Date.now(),gradeSlotIds:h.map(C=>C.id)})}return f.forEach(w=>{const h=i.disciplinas.find(j=>j.id===w.disciplinaId);if(h&&h.turmaId!==w.turmaId){let j=!1;if(h.bnccId){const y=i.disciplinas.find(N=>N.turmaId===w.turmaId&&N.bnccId===h.bnccId);if(y){const N=i.atribuicoes.find(C=>C.disciplinaId===y.id);N&&N.professores.includes(w.professorId)&&(j=!0)}}if(!j){const y=i.turmas.find(C=>C.id===h.turmaId)?.nome||`ID Invlido (${h.turmaId})`,N=i.turmas.find(C=>C.id===w.turmaId)?.nome||`ID Invlido (${w.turmaId})`;u.push({id:`turma-errada-${w.id}`,tipo:At.TurmaErrada,detalhes:`Disciplina ${h.nome} da turma ${y} foi alocada na turma ${N}.`,timestamp:Date.now(),gradeSlotIds:[w.id]})}}}),a.forEach(w=>{const h=f.filter(y=>y.professorId===w.id),j={};h.forEach(y=>{const{start:N,end:C}=bi(y.horario);j[y.dia]?(j[y.dia].minStart=Math.min(j[y.dia].minStart,N),j[y.dia].maxEnd=Math.max(j[y.dia].maxEnd,C)):j[y.dia]={minStart:N,maxEnd:C}});for(let y=0;y<De.length-1;y++){const N=De[y],C=De[y+1];if(j[N]&&j[C]){const P=j[N].maxEnd,R=j[C].minStart;if(1440-P+R<660){const k=h.filter(p=>p.dia===N||p.dia===C).map(p=>p.id);u.push({id:`intersticio-${w.id}-${N}-${C}`,tipo:At.Intersticio,detalhes:`Professor ${w.nome} tem menos de 11h de descanso entre ${N} e ${C}.`,timestamp:Date.now(),gradeSlotIds:k})}}}}),a.forEach(w=>{const h={};f.filter(j=>j.professorId===w.id).forEach(j=>{h[j.dia]||(h[j.dia]=[]),h[j.dia].push(j)});for(const j in h){const y=h[j].reduce((N,C)=>{const R=m.find(H=>H.id===C.turmaId)?.isModular?1.25:1;return N+R},0);y>8&&u.push({id:`max-aulas-${w.id}-${j}`,tipo:At.MaxAulasDia,detalhes:`Professor ${w.nome} tem o equivalente a ${y} aulas na ${j}.`,timestamp:Date.now(),gradeSlotIds:h[j].map(N=>N.id)})}}),f.forEach(w=>{const h=c.find(j=>j.id===w.disciplinaId);if(h&&h.divisao){const j=g.find(y=>y.disciplinaId===h.id);j&&j.professores.length>1&&j.professores.forEach(y=>{const N=a.find(C=>C.id===y);if(N){const C=N.disponibilidade[w.dia];(!C||!C.includes(w.horario))&&u.push({id:`conflito-divisao-${w.id}-${y}`,tipo:At.ConflitoDisponibilidadeDivisao,detalhes:`Conflito em disciplina dividida: ${h.nome}. Professor ${N.nome} est indisponvel neste horrio.`,timestamp:Date.now(),gradeSlotIds:[w.id]})}})}}),f.forEach(w=>{const h=a.find(j=>j.id===w.professorId);if(h){const j=h.disponibilidade[w.dia];(!j||!j.includes(w.horario))&&u.push({id:`indisponivel-${w.id}`,tipo:At.Indisponivel,detalhes:`Aula de ${c.find(y=>y.id===w.disciplinaId)?.nome} para ${h.nome} est fora de sua disponibilidade.`,timestamp:Date.now(),gradeSlotIds:[w.id]})}}),Array.from(new Map(u.map(w=>[w.id,w])).values())};let lr=null,Yt=null;{const i=window.firebase,u={apiKey:"AIzaSyCw5hk7xIGMPJyLNPrc6eIXC59KpDSE9JY",authDomain:"gerenciadorhorario-c62e9.firebaseapp.com",projectId:"gerenciadorhorario-c62e9",storageBucket:"gerenciadorhorario-c62e9.appspot.com",messagingSenderId:"386276022565",appId:"1:386276022565:web:96f71441e3a86f0a67e2cc",measurementId:"G-X8NTQPQCPX"};i.apps.length||i.initializeApp(u),lr=i.auth(),Yt=i.firestore()}const Cd=$.createContext(void 0),ln={version:"1.0",ano:new Date().getFullYear(),cursos:[],turmas:[],disciplinas:[],professores:[],atribuicoes:[],grade:[],alertas:[],bncc:[],toastMessage:null,draggedItem:null,clipboard:null,selectedSlotId:null,onlineUsers:[],saveStatus:"saved",lastModifiedBy:null,lastModifiedAt:null};let fr=[ln],sr=0;const _s=i=>{const u=i.split("_"),a=u[0]||"",f=u[1]||"";let c=u.slice(2).join("_");const g=c.match(/(.*)-([01])$/);return g&&(c=g[1]),{turmaId:a,dia:f,horario:c}},If=i=>{const u={...ln,...i};(typeof u.ano!="number"||isNaN(u.ano))&&(u.ano=new Date().getFullYear()),["cursos","turmas","disciplinas","professores","atribuicoes","grade","alertas","bncc","onlineUsers"].forEach(c=>{Array.isArray(u[c])||(u[c]=[])}),Array.isArray(u.turmas)&&(u.turmas=u.turmas.map(c=>c?{...c,isModular:!!c.isModular}:null).filter(Boolean)),Array.isArray(u.professores)&&(u.professores=u.professores.map(c=>c&&(typeof c.disponibilidade!="object"||c.disponibilidade===null||Array.isArray(c.disponibilidade))?{...c,disponibilidade:{}}:c).filter(Boolean)),Array.isArray(u.grade)&&(u.grade=u.grade.filter(c=>!c||typeof c!="object"?!1:["id","turmaId","dia","horario","disciplinaId","professorId"].every(m=>typeof c[m]=="string"&&c[m])));const f=new Set(u.turmas.map(c=>c.id));return u.grade=u.grade.filter(c=>f.has(c.turmaId)?!0:(console.warn(`Removing orphaned grade slot with invalid turmaId: ${c.turmaId}`,c),!1)),u},Df=(i,u)=>{switch(u.type){case"SET_STATE":return i;case"UPDATE_GRADE":{const{id:a,slot:f}=u.payload,c=i.grade.filter(g=>g.id!==a);return f&&c.push(f),{...i,grade:c}}case"POPULATE_GRADE":return{...i,grade:u.payload};case"DELETE_SLOT":{const{slotId:a}=u.payload;if(!i.grade.some(g=>g.id===a))return i;const c=i.grade.filter(g=>g.id!==a);return{...i,grade:c,selectedSlotId:null}}case"SWAP_GRADE_SLOTS":{const{sourceId:a,destinationId:f}=u.payload,c=i.grade.find(h=>h.id===a);if(!c)return i;const g=i.grade.find(h=>h.id===f),m=_s(a),S=_s(f),x=i.grade.filter(h=>h.id!==a&&h.id!==f),w={...c,id:f,turmaId:S.turmaId,dia:S.dia,horario:S.horario};if(x.push(w),g){const h={...g,id:a,turmaId:m.turmaId,dia:m.dia,horario:m.horario};x.push(h)}return{...i,grade:x}}case"ADD_CURSO":return{...i,cursos:[...i.cursos,u.payload]};case"UPDATE_CURSO":return{...i,cursos:i.cursos.map(a=>a.id===u.payload.id?u.payload:a)};case"DELETE_CURSO":{const a=i.turmas.filter(c=>c.cursoId===u.payload.id).map(c=>c.id),f=i.disciplinas.filter(c=>a.includes(c.turmaId)).map(c=>c.id);return{...i,cursos:i.cursos.filter(c=>c.id!==u.payload.id),turmas:i.turmas.filter(c=>c.cursoId!==u.payload.id),disciplinas:i.disciplinas.filter(c=>!a.includes(c.turmaId)),atribuicoes:i.atribuicoes.filter(c=>!f.includes(c.disciplinaId)),grade:i.grade.filter(c=>!a.includes(c.turmaId))}}case"ADD_TURMA":return{...i,turmas:[...i.turmas,u.payload]};case"UPDATE_TURMA":return{...i,turmas:i.turmas.map(a=>a.id===u.payload.id?u.payload:a)};case"DELETE_TURMA":{const a=i.disciplinas.filter(f=>f.turmaId===u.payload.id).map(f=>f.id);return{...i,turmas:i.turmas.filter(f=>f.id!==u.payload.id),disciplinas:i.disciplinas.filter(f=>f.turmaId!==u.payload.id),atribuicoes:i.atribuicoes.filter(f=>!a.includes(f.disciplinaId)),grade:i.grade.filter(f=>f.turmaId!==u.payload.id)}}case"ADD_DISCIPLINA":return{...i,disciplinas:[...i.disciplinas,u.payload]};case"UPDATE_DISCIPLINA":return{...i,disciplinas:i.disciplinas.map(a=>a.id===u.payload.id?u.payload:a)};case"DELETE_DISCIPLINA":return{...i,disciplinas:i.disciplinas.filter(a=>a.id!==u.payload.id),atribuicoes:i.atribuicoes.filter(a=>a.disciplinaId!==u.payload.id),grade:i.grade.filter(a=>a.disciplinaId!==u.payload.id)};case"ADD_PROFESSOR":return{...i,professores:[...i.professores,u.payload]};case"UPDATE_PROFESSOR":return{...i,professores:i.professores.map(a=>a.id===u.payload.id?u.payload:a)};case"BATCH_UPDATE_PROFESSORS":{const a=new Map(u.payload.professors.map(c=>[c.id,c])),f=i.professores.map(c=>a.get(c.id)||c);return{...i,professores:f}}case"DELETE_PROFESSOR":return{...i,professores:i.professores.filter(a=>a.id!==u.payload.id),atribuicoes:i.atribuicoes.map(a=>({...a,professores:a.professores.filter(f=>f!==u.payload.id)})),grade:i.grade.filter(a=>a.professorId!==u.payload.id)};case"UPDATE_ATRIBUICAO":return i.atribuicoes.find(f=>f.disciplinaId===u.payload.disciplinaId)?{...i,atribuicoes:i.atribuicoes.map(f=>f.disciplinaId===u.payload.disciplinaId?u.payload:f)}:{...i,atribuicoes:[...i.atribuicoes,u.payload]};case"DELETE_ATRIBUICAO":return{...i,atribuicoes:i.atribuicoes.filter(a=>a.disciplinaId!==u.payload.disciplinaId)};case"UPDATE_ANO":return{...i,ano:u.payload};case"SET_ALERTS":return{...i,alertas:u.payload};case"COPY_SLOT":{const{sourceSlotId:a}=u.payload,f=i.grade.find(c=>c.id===a);return f?{...i,clipboard:{sourceSlot:f,type:"copy"},draggedItem:null}:i}case"CUT_SLOT":{const{sourceSlotId:a}=u.payload,f=i.grade.find(g=>g.id===a);if(!f)return i;const c=i.grade.filter(g=>g.id!==a);return{...i,grade:c,clipboard:{sourceSlot:f,type:"cut"},draggedItem:null,selectedSlotId:null}}case"PASTE_SLOT":{const{destinationId:a}=u.payload,{clipboard:f,disciplinas:c}=i;if(!f)return i;const{sourceSlot:g}=f,m=_s(a),x=!!c.find(C=>C.id===g.disciplinaId)?.divisao,w=x?a:`${m.turmaId}_${m.dia}_${m.horario}`,h={...g,id:w,turmaId:m.turmaId,dia:m.dia,horario:m.horario},j=!x,N=[...i.grade.filter(C=>{const P=_s(C.id);return P.turmaId===m.turmaId&&P.dia===m.dia&&P.horario===m.horario?j?!1:!(!(C.id.endsWith("-0")||C.id.endsWith("-1"))||C.id===a):!0}),h];return{...i,grade:N,clipboard:f.type==="cut"?null:i.clipboard}}case"CREATE_BNCC":{const{nome:a}=u.payload,f=`bncc-${Date.now()}`,c={id:f,nome:a},g=i.disciplinas.map(m=>m.nome===a?{...m,bnccId:f}:m);return{...i,disciplinas:g,bncc:[...i.bncc,c]}}case"DELETE_BNCC":{const{bnccId:a}=u.payload,f=i.disciplinas.map(c=>{if(c.bnccId===a){const{bnccId:g,...m}=c;return m}return c});return{...i,disciplinas:f,bncc:i.bncc.filter(c=>c.id!==a)}}}return i},_f=(i,u)=>{if(u.type==="SHOW_TOAST")return{...i,toastMessage:u.payload};if(u.type==="DRAG_START")return{...i,draggedItem:u.payload,clipboard:null,selectedSlotId:null};if(u.type==="DRAG_END")return{...i,draggedItem:null};if(u.type==="SELECT_SLOT")return{...i,selectedSlotId:u.payload.slotId};if(u.type==="SET_ONLINE_USERS")return{...i,onlineUsers:u.payload};if(u.type==="SET_SAVE_STATUS")return{...i,saveStatus:u.payload};if(u.type==="CLEAR_DATA"){if(Yt){const{toastMessage:c,draggedItem:g,clipboard:m,selectedSlotId:S,onlineUsers:x,saveStatus:w,...h}=ln;Yt.collection("timetables").doc("default").set(h)}else localStorage.removeItem(Tf);const f={...ln,alertas:As(ln)};return fr=[f],sr=0,f}let a;if(u.type==="UNDO")return sr>0&&sr--,fr[sr];if(u.type==="REDO")return sr<fr.length-1&&sr++,fr[sr];if(u.type==="SET_STATE"?(a=If(u.payload),a.alertas=As(a),a.saveStatus="saved"):a=Df(i,u),a!==i){const f={...a,toastMessage:i.toastMessage,draggedItem:i.draggedItem,selectedSlotId:i.selectedSlotId,onlineUsers:i.onlineUsers,saveStatus:i.saveStatus,lastModifiedBy:i.lastModifiedBy,lastModifiedAt:i.lastModifiedAt};if(u.type!=="SET_STATE"){if(lr){const g=lr.currentUser;f.lastModifiedBy=g?g.displayName||g.email:"Sistema"}else f.lastModifiedBy="Usurio Local";f.lastModifiedAt=new Date().toISOString()}return u.type==="SET_STATE"||u.type==="POPULATE_GRADE"?(fr=[f],sr=0):u.type!=="SET_ALERTS"&&(fr=fr.slice(0,sr+1),fr.push(f),sr=fr.length-1),f}return i},Mf=({children:i})=>{const[u,a]=$.useReducer(_f,ln,R=>{let H=R;const k={...H,alertas:As(H)};return fr=[k],sr=0,k}),f=$.useRef(!1),c=$.useRef(!1);$.useEffect(()=>{if(!Yt)return;const R=Yt.collection("timetables").doc("default"),H=R.onSnapshot(k=>{if(c.current=!0,k.exists&&!k.metadata.hasPendingWrites){console.log("Received remote update from Firestore.");const p=k.data();p&&(f.current=!0,a({type:"SET_STATE",payload:p}))}else if(!k.exists){const{toastMessage:p,draggedItem:I,clipboard:z,selectedSlotId:_,onlineUsers:T,saveStatus:W,...O}=ln;R.set(O)}},k=>{c.current=!0,console.error("Error listening to Firestore document:",k),k.code==="permission-denied"?a({type:"SHOW_TOAST",payload:"Permisso negada. Verifique as Regras de Segurana do Firestore."}):a({type:"SHOW_TOAST",payload:"Erro de conexo com o banco de dados."})});return()=>H()},[]),$.useEffect(()=>{if(!lr||!Yt)return;let R,H;const k=()=>{R&&clearInterval(R),H&&H()},p=lr.onAuthStateChanged(I=>{if(k(),I){const z=Yt.collection("presence").doc(I.uid),_={id:I.uid,name:I.displayName||I.email||"Usurio Annimo",email:I.email||""};z.set({..._,lastSeen:window.firebase.firestore.FieldValue.serverTimestamp()}),R=window.setInterval(()=>{z.update({lastSeen:window.firebase.firestore.FieldValue.serverTimestamp()})},15e3),H=Yt.collection("presence").where("lastSeen",">",new Date(Date.now()-3e4)).onSnapshot(T=>{const W=T.docs.map(O=>O.data());a({type:"SET_ONLINE_USERS",payload:W})},T=>{console.error("Error listening to presence collection:",T)})}else a({type:"SET_ONLINE_USERS",payload:[]})});return()=>{p(),k();const I=lr.currentUser;I&&Yt.collection("presence").doc(I.uid).delete()}},[]);const{alertas:g,toastMessage:m,draggedItem:S,clipboard:x,selectedSlotId:w,onlineUsers:h,saveStatus:j,...y}=u,N=JSON.stringify(y);$.useEffect(()=>{{if(f.current){f.current=!1,a({type:"SET_SAVE_STATUS",payload:"saved"});return}if(!c.current)return;a({type:"SET_SAVE_STATUS",payload:"saving"});const R=setTimeout(()=>{if(!Yt)return;const H=JSON.parse(N);Yt.collection("timetables").doc("default").set(H,{merge:!0}).then(()=>{a({type:"SET_SAVE_STATUS",payload:"saved"})}).catch(k=>{console.error("Error writing to Firestore: ",k),a({type:"SHOW_TOAST",payload:"Falha ao salvar dados."}),a({type:"SET_SAVE_STATUS",payload:"error"})})},1e3);return()=>clearTimeout(R)}},[N]);const C=JSON.stringify({grade:u.grade,professores:u.professores,disciplinas:u.disciplinas,atribuicoes:u.atribuicoes,turmas:u.turmas});$.useEffect(()=>{const R=setTimeout(()=>{const H={...u,...JSON.parse(C)},k=As(H);JSON.stringify(k)!==JSON.stringify(u.alertas)&&a({type:"SET_ALERTS",payload:k})},300);return()=>clearTimeout(R)},[C]);const P=$.useCallback(R=>{R.ctrlKey&&R.key==="z"&&(R.preventDefault(),a({type:"UNDO"})),R.ctrlKey&&R.key==="y"&&(R.preventDefault(),a({type:"REDO"}))},[]);return $.useEffect(()=>(window.addEventListener("keydown",P),()=>{window.removeEventListener("keydown",P)}),[P]),o.jsx(Cd.Provider,{value:{state:u,dispatch:a},children:i})},st=()=>{const i=$.useContext(Cd);if(!i)throw new Error("useData must be used within a DataProvider");return i},Nd=({children:i,content:u,isVisible:a,onVisibilityChange:f})=>u?o.jsxs("div",{className:"relative",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[i,a&&o.jsx("div",{className:"absolute z-50 bottom-full mb-2 w-64 p-2 text-sm text-white bg-gray-800 rounded-md shadow-lg",children:u})]}):o.jsx(o.Fragment,{children:i}),Pf=i=>nt.includes(i)?"manha":ot.includes(i)?"tarde":"noite",pd=an.memo(({baseId:i,subSlotIndex:u,slot:a,isOutOfPeriod:f,alerts:c,onOpenContextMenu:g,onSelectSlot:m,isSelected:S,hoveredProfessorId:x,onProfessorHover:w,highlightStatus:h,onDragStart:j,onDragEnd:y,disciplina:N,professor:C,scaledCellFontSize:P})=>{const[R,H]=$.useState(!1),k=`${i}-${u}`,p=ee=>{ee.stopPropagation(),m(k)},I=ee=>{ee.stopPropagation(),g(ee,k)},z=c.find(ee=>ee.gradeSlotIds.includes(k))??(c.length>0&&a?c[0]:null),_=ee=>ee==="valid"?"bg-green-200":ee==="warning"?"bg-yellow-200":"";let T=f?"bg-slate-200":"bg-white";h&&!a&&(T=_(h)),S&&(T="bg-indigo-50"),z&&(T=sn[z.tipo].bg);const W=S?"ring ring-indigo-500 z-10":"",O=x&&a&&a.professorId===x&&!S,A=x&&a&&a.professorId!==x,B=a&&N&&C?o.jsxs("div",{className:"p-1 text-left w-full h-full overflow-hidden",style:{fontSize:`${P}px`},children:[o.jsx("p",{className:"font-bold truncate",children:N.nome}),o.jsx("p",{className:"text-gray-600 truncate",children:C.nome})]}):o.jsx("div",{className:"w-full h-full"}),te=c.length>0?o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold mb-1",children:"Alertas:"}),o.jsx("ul",{className:"list-disc list-inside text-xs",children:c.map(ee=>o.jsx("li",{children:ee.detalhes},ee.id))})]}):null;return o.jsx("div",{title:a&&N&&C?`Disciplina: ${N.nome}
Professor: ${C.nome}`:void 0,draggable:!!a,onDragStart:ee=>a&&j(ee,a.id),onDragEnd:y,onClick:p,onContextMenu:I,onMouseEnter:()=>{a&&w(a.professorId)},className:`relative h-1/2 transition-all duration-150 ${T} ${W} ${a?"cursor-grab active:cursor-grabbing":"cursor-pointer"} ${O?"ring-2 ring-slate-700 z-20":""} ${A?"opacity-40":""}`,children:o.jsx(Nd,{content:te,isVisible:R,onVisibilityChange:H,children:B})})}),Af=({id:i,gridType:u,turma:a,fullSlot:f,slot0:c,slot1:g,isLastInCourse:m,cellAlerts:S,subCellAlerts0:x,subCellAlerts1:w,onOpenContextMenu:h,onSelectSlot:j,selectedSlotId:y,hoveredProfessorId:N,onProfessorHover:C,highlightStatus:P,subSlotHighlightStatus:R,scaledCellMinHeight:H,scaledCellFontSize:k})=>{const{state:p,dispatch:I}=st(),{disciplinas:z,draggedItem:_,clipboard:T,turmas:W,grade:O}=p,[A,B]=$.useState(!1),[te,ee]=$.useState(!1),de=i.split("_").slice(2).join("_"),pe=Pf(de),K=a&&a.periodo!==pe,oe="border-b border-gray-300",V=m?"border-r-2 border-r-slate-400":"border-r border-gray-300";if(u==="modular"&&de==="18:10-19:00")return o.jsx("div",{className:`relative ${V} ${oe} bg-gray-200`,style:{minHeight:`${H}px`,backgroundImage:"repeating-linear-gradient(45deg, #d1d5db, #d1d5db 10px, #e5e7eb 10px, #e5e7eb 20px)"},title:"Horrio no disponvel para aulas modulares"});const Z=()=>{if(!_)return null;const ie=_.type==="SIDEBAR_ITEM"?_.disciplinaId:O.find(Y=>Y.id===_.sourceSlotId)?.disciplinaId;return z.find(Y=>Y.id===ie)||null},D=(ie,Y)=>{ie.stopPropagation(),ee(!1);const ce={type:"GRID_ITEM",sourceSlotId:Y};ie.dataTransfer.setData("application/json",JSON.stringify(ce)),ie.dataTransfer.effectAllowed="move",I({type:"DRAG_START",payload:ce})},U=()=>{I({type:"DRAG_END"})},je=ie=>{if(ie.preventDefault(),!_){ie.dataTransfer.dropEffect="none";return}const Y=Z();if(!Y){ie.dataTransfer.dropEffect="none",B(!1);return}let ce=!1;if(Y.divisao){const Oe=c||g;(_.type==="GRID_ITEM"&&Oe||!c||!g)&&(ce=!0)}else(!f&&!c&&!g||_.type==="GRID_ITEM"&&f)&&(ce=!0);ce?(B(!0),ie.dataTransfer.dropEffect="move"):(B(!1),ie.dataTransfer.dropEffect="none")},me=()=>{B(!1)},xe=ie=>{if(ie.preventDefault(),ie.stopPropagation(),B(!1),!!_)try{const Y=Z();if(!Y)return;const ce=W.find(Ee=>Ee.id===Y.turmaId),Oe=a;if(ce&&Oe&&ce.isModular!==Oe.isModular){I({type:"SHOW_TOAST",payload:"No  permitido mover aulas entre a grade regular e a modular."});return}let ye;if(Y.divisao){const Ee=ie.currentTarget.getBoundingClientRect(),lt=ie.clientY<Ee.top+Ee.height/2,Je=`${i}-${lt?0:1}`,we=`${i}-${lt?1:0}`;p.grade.find(Ne=>Ne.id===Je)&&_.sourceSlotId!==Je?ye=p.grade.find(ve=>ve.id===we)?Je:we:ye=Je}else if(f||c||g)if(f&&_.type==="GRID_ITEM")ye=i;else return;else ye=i;if(_.type==="GRID_ITEM"&&_.sourceSlotId===ye)return;if(_.type==="SIDEBAR_ITEM"){const{disciplinaId:Ee,professorId:lt}=_;if(Ee&&lt){if(!ye)return;const Je=ye.split("_"),we=Je[1];let Me=Je.slice(2).join("_");const Ne=Me.match(/(.*)-([01])$/);Ne&&(Me=Ne[1]),I({type:"UPDATE_GRADE",payload:{id:ye,slot:{id:ye,turmaId:a.id,dia:we,horario:Me,disciplinaId:Ee,professorId:lt}}})}}else if(_.type==="GRID_ITEM"&&_.sourceSlotId){if(!ye)return;I({type:"SWAP_GRADE_SLOTS",payload:{sourceId:_.sourceSlotId,destinationId:ye}})}}catch(Y){console.error("Error handling drop in GridCell:",Y)}finally{I({type:"DRAG_END"})}},Te=ie=>{ie.stopPropagation();const ce=!!z.find(ye=>ye.id===T?.sourceSlot.disciplinaId)?.divisao;let Oe=i;if(!f&&!c&&!g&&ce){const ye=ie.currentTarget.getBoundingClientRect(),Ee=ie.clientY<ye.top+ye.height/2;Oe=`${i}-${Ee?0:1}`}j(Oe)},Pe=ie=>{ie.preventDefault(),ie.stopPropagation();const ce=!!z.find(ye=>ye.id===T?.sourceSlot.disciplinaId)?.divisao;let Oe=i;if(!f&&!c&&!g&&ce){const ye=ie.currentTarget.getBoundingClientRect(),Ee=ie.clientY<ye.top+ye.height/2;Oe=`${i}-${Ee?0:1}`}h(ie,Oe)},be=y===i,Fe=ie=>ie==="valid"?"bg-green-200":ie==="warning"?"bg-yellow-200":"";if(f){const ie=p.disciplinas.find(Ne=>Ne.id===f.disciplinaId),Y=p.professores.find(Ne=>Ne.id===f.professorId),ce=S[0],Oe=ie&&Y?o.jsxs("div",{className:"p-1 text-left w-full h-full",style:{fontSize:`${k}px`},children:[o.jsx("p",{className:"font-bold truncate",children:ie.nome}),o.jsx("p",{className:"text-gray-600 truncate",children:Y.nome})]}):o.jsx("div",{className:"w-full h-full"}),ye=S.length>0?o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold mb-1",children:"Alertas:"}),o.jsx("ul",{className:"list-disc list-inside text-xs",children:S.map(Ne=>o.jsx("li",{children:Ne.detalhes},Ne.id))})]}):null;let Ee=K?"bg-slate-200":"bg-white";be&&(Ee="bg-indigo-50"),ce&&(Ee=sn[ce.tipo].bg),A&&(Ee="bg-blue-300");const lt=Ne=>{Ne.stopPropagation(),j(i)},Je=be?"ring-2 ring-indigo-500 z-10":"",we=N&&f.professorId===N&&!be,Me=N&&f.professorId!==N;return o.jsx("div",{title:ie&&Y?`Disciplina: ${ie.nome}
Professor: ${Y.nome}`:void 0,onDragOver:je,onDragLeave:me,onDrop:xe,onClick:lt,draggable:!!f,onDragStart:Ne=>D(Ne,f.id),onDragEnd:U,onContextMenu:Ne=>{Ne.stopPropagation(),h(Ne,i)},onMouseEnter:()=>C(f.professorId),className:`relative transition-all duration-150 ${Ee} ${Je} ${f?"cursor-grab active:cursor-grabbing":"cursor-pointer"} ${oe} ${we?"ring-2 ring-slate-700 z-20":""} ${Me?"opacity-40":""} ${V}`,style:{minHeight:`${H}px`},children:o.jsx(Nd,{content:ye,isVisible:te,onVisibilityChange:ee,children:Oe})})}const Be=be&&!y?.endsWith("-0")&&!y?.endsWith("-1");let St=A?"bg-blue-300":K?"bg-slate-200":"bg-white";P&&(St=Fe(P)),Be&&(St="bg-indigo-50");const q=Be?"ring-2 ring-indigo-500 z-10":"",ae=ie=>ie?{disciplina:p.disciplinas.find(Y=>Y.id===ie.disciplinaId),professor:p.professores.find(Y=>Y.id===ie.professorId)}:{disciplina:null,professor:null},ke=ae(c),_e=ae(g);return o.jsxs("div",{onDragOver:je,onDragLeave:me,onDrop:xe,onClick:Te,onContextMenu:Pe,className:`relative flex flex-col ${St} ${q} ${oe} cursor-pointer ${V}`,style:{minHeight:`${H}px`},children:[o.jsx(pd,{baseId:i,subSlotIndex:0,slot:c,isOutOfPeriod:K,alerts:[...S,...x],onOpenContextMenu:h,onSelectSlot:j,isSelected:y===`${i}-0`,hoveredProfessorId:N,onProfessorHover:C,highlightStatus:R[0]||P,onDragStart:D,onDragEnd:U,disciplina:ke.disciplina,professor:ke.professor,scaledCellFontSize:k}),o.jsx("div",{className:"border-b border-dashed border-gray-300"}),o.jsx(pd,{baseId:i,subSlotIndex:1,slot:g,isOutOfPeriod:K,alerts:[...S,...w],onOpenContextMenu:h,onSelectSlot:j,isSelected:y===`${i}-1`,hoveredProfessorId:N,onProfessorHover:C,highlightStatus:R[1]||P,onDragStart:D,onDragEnd:U,disciplina:_e.disciplina,professor:_e.professor,scaledCellFontSize:k})]})},Lf=an.memo(Af),So=({label:i,checked:u,onChange:a,disabled:f})=>o.jsxs("label",{className:`flex items-center space-x-2 ${f?"cursor-not-allowed text-gray-400":"cursor-pointer"}`,children:[o.jsx("input",{type:"checkbox",checked:u,onChange:c=>a(c.target.checked),disabled:f,className:"rounded text-indigo-600 focus:ring-indigo-500"}),o.jsx("span",{children:i})]}),md=({title:i,children:u,onSelectAll:a,onDeselectAll:f})=>o.jsxs("div",{className:"p-2 border rounded-md bg-white",children:[o.jsx("h4",{className:"font-bold mb-2",children:i}),o.jsxs("div",{className:"flex space-x-2 mb-2",children:[o.jsx("button",{onClick:a,className:"text-xs text-indigo-600 hover:underline",children:"Todos"}),o.jsx("button",{onClick:f,className:"text-xs text-indigo-600 hover:underline",children:"Nenhum"})]}),o.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto pr-2",children:u})]}),Of=({visibility:i,onVisibilityChange:u,cursos:a,turmas:f})=>{const[c,g]=$.useState(!1),m=(j,y)=>{u({...i,periods:{...i.periods,[j]:y}})},S=(j,y)=>{const N={...i.turmas};f.forEach(C=>{C.cursoId===j&&(N[C.id]=y)}),u({...i,cursos:{...i.cursos,[j]:y},turmas:N})},x=(j,y)=>{u({...i,turmas:{...i.turmas,[j]:y}})},w=j=>{const y={...i};j==="periods"?Object.keys(y.periods).forEach(N=>y.periods[N]=!0):j==="cursos"?(Object.keys(y.cursos).forEach(N=>y.cursos[N]=!0),Object.keys(y.turmas).forEach(N=>y.turmas[N]=!0)):j==="turmas"&&Object.keys(y.turmas).forEach(N=>y.turmas[N]=!0),u(y)},h=j=>{const y={...i};j==="periods"?Object.keys(y.periods).forEach(N=>y.periods[N]=!1):j==="cursos"?(Object.keys(y.cursos).forEach(N=>y.cursos[N]=!1),Object.keys(y.turmas).forEach(N=>y.turmas[N]=!1)):j==="turmas"&&Object.keys(y.turmas).forEach(N=>y.turmas[N]=!1),u(y)};return o.jsxs("div",{className:"bg-gray-100 p-2 mb-4 rounded-md shadow-sm border text-sm",children:[o.jsxs("button",{onClick:()=>g(!c),className:"w-full text-left font-semibold text-gray-700 flex justify-between items-center",children:[o.jsx("span",{children:c?"Ocultar Opes de Visualizao":"Exibir Opes de Visualizao"}),o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),c&&o.jsx("div",{className:"mt-4",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[o.jsxs(md,{title:"Perodos",onSelectAll:()=>w("periods"),onDeselectAll:()=>h("periods"),children:[o.jsx(So,{label:"Manh",checked:i.periods.manha,onChange:j=>m("manha",j)}),o.jsx(So,{label:"Tarde",checked:i.periods.tarde,onChange:j=>m("tarde",j)}),o.jsx(So,{label:"Noite",checked:i.periods.noite,onChange:j=>m("noite",j)})]}),o.jsx(md,{title:"Cursos",onSelectAll:()=>w("cursos"),onDeselectAll:()=>h("cursos"),children:a.map(j=>o.jsx(So,{label:j.nome,checked:i.cursos[j.id]??!0,onChange:y=>S(j.id,y)},j.id))}),o.jsxs("div",{className:"p-2 border rounded-md bg-white",children:[o.jsx("h4",{className:"font-bold mb-2",children:"Turmas"}),o.jsxs("div",{className:"flex space-x-2 mb-2",children:[o.jsx("button",{onClick:()=>w("turmas"),className:"text-xs text-indigo-600 hover:underline",children:"Todas"}),o.jsx("button",{onClick:()=>h("turmas"),className:"text-xs text-indigo-600 hover:underline",children:"Nenhuma"})]}),o.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:a.map(j=>o.jsxs("div",{children:[o.jsx("h5",{className:"font-semibold text-gray-600",children:j.nome}),o.jsx("div",{className:"pl-4 space-y-1",children:f.filter(y=>y.cursoId===j.id).map(y=>o.jsx(So,{label:y.nome,checked:i.turmas[y.id]??!0,onChange:N=>x(y.id,N),disabled:!(i.cursos[j.id]??!0)},y.id))})]},j.id))})]})]})})]})},Ff=({isOpen:i,onClose:u,x:a,y:f,items:c})=>{const g=$.useRef(null);return $.useEffect(()=>{const m=S=>{g.current&&!g.current.contains(S.target)&&u()};return i&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[i,u]),i?o.jsx("div",{ref:g,className:"absolute z-50 bg-white rounded-md shadow-lg border border-gray-200 py-1 w-32",style:{top:f,left:a},children:o.jsx("ul",{children:c.map((m,S)=>o.jsx("li",{children:o.jsx("button",{onClick:()=>{m.disabled||(m.onClick(),u())},disabled:m.disabled,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:text-gray-400 disabled:bg-white disabled:cursor-not-allowed",children:m.label})},S))})}):null},zf=({isFocusModeEnabled:i,gridType:u})=>{const{state:a,dispatch:f}=st(),{ano:c,cursos:g,turmas:m,grade:S,clipboard:x,selectedSlotId:w,disciplinas:h,professores:j,draggedItem:y,atribuicoes:N,alertas:C}=a,[P,R]=$.useState(1),[H,k]=$.useState({isOpen:!1,x:0,y:0,slotId:""}),[p,I]=$.useState(null),z=$.useRef(null),[_,T]=$.useState(!1),[W,O]=$.useState(c.toString()),A=$.useMemo(()=>({dayColWidth:50*P,timeColWidth:80*P,turmaColWidth:150*P,headerHeight:44*P,cellMinHeight:60*P,daySeparatorHeight:8*P,periodSeparatorHeight:8*P,fontSizeHeader:12*P,fontSizeTurmaHeader:11*P,fontSizeTime:12*P,fontSizeCell:12*P,fontSizeYear:18*P,fontSizeYearLabel:12*P}),[P]),B=$.useMemo(()=>m.filter(ae=>ae.isModular===(u==="modular")).sort((ae,ke)=>{const _e=g.find(Y=>Y.id===ae.cursoId)?.nome||"",ie=g.find(Y=>Y.id===ke.cursoId)?.nome||"";return _e.localeCompare(ie)!==0?_e.localeCompare(ie):ae.nome.localeCompare(ke.nome)}),[m,u,g]);$.useEffect(()=>{O(c.toString())},[c]);const te=()=>{const q=parseInt(W,10);!isNaN(q)&&q>2e3&&q<2100?f({type:"UPDATE_ANO",payload:q}):(O(c.toString()),f({type:"SHOW_TOAST",payload:"Ano invlido."})),T(!1)},ee=q=>{q.key==="Enter"?q.currentTarget.blur():q.key==="Escape"&&(O(c.toString()),T(!1))},[de,pe]=$.useState({periods:{manha:!0,tarde:!0,noite:!0},cursos:{},turmas:{}});$.useEffect(()=>{pe(q=>{const ae={};g.forEach(_e=>{ae[_e.id]=q.cursos[_e.id]??!0});const ke={};return B.forEach(_e=>{ke[_e.id]=q.turmas[_e.id]??!0}),{...q,cursos:ae,turmas:ke}})},[g,B]);const K=$.useCallback(q=>{if(q.target===document.body&&w)if(q.ctrlKey){if(q.key==="c")q.preventDefault(),f({type:"COPY_SLOT",payload:{sourceSlotId:w}});else if(q.key==="x")q.preventDefault(),f({type:"CUT_SLOT",payload:{sourceSlotId:w}});else if(q.key==="v"){if(q.preventDefault(),x){const ae=m.find(ie=>ie.id===x.sourceSlot.turmaId),ke=w.split("_")[0],_e=m.find(ie=>ie.id===ke);if(ae&&_e&&ae.isModular!==_e.isModular){f({type:"SHOW_TOAST",payload:"No  permitido colar aulas entre a grade regular e a modular."});return}}f({type:"PASTE_SLOT",payload:{destinationId:w}})}}else q.key==="Delete"&&(q.preventDefault(),f({type:"DELETE_SLOT",payload:{slotId:w}}))},[w,f,x,m]);$.useEffect(()=>(window.addEventListener("keydown",K),()=>{window.removeEventListener("keydown",K)}),[K]),$.useEffect(()=>{const q=z.current;if(!q)return;const ae=ke=>{ke.ctrlKey&&(ke.preventDefault(),R(_e=>Math.max(.5,Math.min(2,_e-ke.deltaY*.001))))};return q.addEventListener("wheel",ae,{passive:!1}),()=>{q.removeEventListener("wheel",ae)}},[]);const oe=q=>{if(!y)return;const ae=z.current;if(!ae)return;const ke=ae.getBoundingClientRect(),_e=q.clientY-ke.top,ie=60,Y=10;_e<ie?ae.scrollTop-=Y:_e>ke.height-ie&&(ae.scrollTop+=Y)},V=()=>{k({...H,isOpen:!1})},re=(q,ae)=>{q.preventDefault(),q.stopPropagation(),f({type:"SELECT_SLOT",payload:{slotId:ae}}),k({isOpen:!0,x:q.pageX,y:q.pageY,slotId:ae})},Z=()=>{const{slotId:q}=H;if(!q)return[];const ae=S.some(ce=>ce.id===q);return[{label:"Copiar",onClick:()=>f({type:"COPY_SLOT",payload:{sourceSlotId:q}}),disabled:!ae},{label:"Recortar",onClick:()=>f({type:"CUT_SLOT",payload:{sourceSlotId:q}}),disabled:!ae},{label:"Colar",onClick:()=>f({type:"PASTE_SLOT",payload:{destinationId:q}}),disabled:!!!x}]},D=q=>{f({type:"SELECT_SLOT",payload:{slotId:q}})},U=$.useMemo(()=>u==="modular"?Fn:jr,[u]),me=$.useMemo(()=>[...nt,...ot,...U],[U]).filter(q=>!!(nt.includes(q)&&de.periods.manha||ot.includes(q)&&de.periods.tarde||U.includes(q)&&de.periods.noite)),xe=B.filter(q=>de.turmas[q.id]),Pe=$.useMemo(()=>[...g].sort((q,ae)=>q.nome.localeCompare(ae.nome)),[g]).map(q=>({...q,turmas:B.filter(ae=>ae.cursoId===q.id)})).filter(q=>de.cursos[q.id]),be=$.useMemo(()=>{const q=new Set;return xe.forEach((ae,ke)=>{const _e=xe[ke+1];(!_e||_e.cursoId!==ae.cursoId)&&q.add(ae.id)}),q},[xe]),Fe=$.useMemo(()=>{const q=new Map;return S.forEach(ae=>{const ke=`${ae.turmaId}_${ae.dia}_${ae.horario}`;q.has(ke)||q.set(ke,[]),q.get(ke).push(ae)}),q},[S]),Be=$.useMemo(()=>{const q=new Map;return C.forEach(ae=>{ae.gradeSlotIds.forEach(ke=>{q.has(ke)||q.set(ke,[]),q.get(ke).push(ae)})}),q},[C]),St=$.useMemo(()=>{let q=null;if(y?.type==="SIDEBAR_ITEM"&&y.disciplinaId&&y.professorId)q={professorId:y.professorId,disciplinaId:y.disciplinaId,slotIdToIgnore:null};else{const we=w||(y?.type==="GRID_ITEM"?y.sourceSlotId:null);if(we){const Me=S.find(Ne=>Ne.id===we);Me&&(q={professorId:Me.professorId,disciplinaId:Me.disciplinaId,slotIdToIgnore:we})}}if(!q)return{};const{professorId:ae,disciplinaId:ke,slotIdToIgnore:_e}=q,ie=j.find(we=>we.id===ae);if(!ie)return{};const Y=h.find(we=>we.id===ke);if(!Y)return{};const ce=new Map;S.forEach(we=>{const Me=`${we.turmaId}_${we.dia}_${we.horario}`;ce.has(Me)||ce.set(Me,[]),ce.get(Me).push(we)});const Oe=[];if(Y.bnccId){const we=new Set;h.forEach(Me=>{if(Me.bnccId===Y.bnccId){const Ne=N.find(ve=>ve.disciplinaId===Me.id);Ne&&Ne.professores.includes(ae)&&we.add(Me.turmaId)}}),Oe.push(...xe.filter(Me=>we.has(Me.id)))}else{const we=xe.find(Me=>Me.id===Y.turmaId);we&&Oe.push(we)}const ye={},Ee={},lt={};S.forEach(we=>{if(we.professorId!==ae||_e&&we.id===_e)return;ye[we.dia]||(ye[we.dia]=new Set),ye[we.dia].add(we.horario);const Ne=m.find(Ze=>Ze.id===we.turmaId)?.isModular?1.25:1;Ee[we.dia]=(Ee[we.dia]||0)+Ne;const{start:ve,end:Ge}=bi(we.horario),We=lt[we.dia];We?(We.minStart=Math.min(We.minStart,ve),We.maxEnd=Math.max(We.maxEnd,Ge)):lt[we.dia]={minStart:ve,maxEnd:Ge}});const Je={};return Oe.forEach(we=>{De.forEach(Me=>{me.forEach(Ne=>{const ve=`${we.id}_${Me}_${Ne}`,We=(ce.get(ve)||[]).filter(mt=>!_e||mt.id!==_e),Ze=[];Y.divisao?(We.some(mt=>mt.id===`${ve}-0`)||Ze.push(`${ve}-0`),We.some(mt=>mt.id===`${ve}-1`)||Ze.push(`${ve}-1`)):We.length===0&&Ze.push(ve),Ze.forEach(mt=>{let Ce=!1,jt=!1;ie.disponibilidade[Me]?.includes(Ne)||(jt=!0),!Ce&&ye[Me]?.has(Ne)&&(Ce=!0);const Co=m.find(Lt=>Lt.id===we.id)?.isModular?1.25:1;if(!Ce&&(Ee[Me]||0)+Co>8&&(Ce=!0),!Ce){const{start:Lt,end:Re}=bi(Ne),et=De.indexOf(Me)-1;if(et>=0){const Ct=De[et],Et=lt[Ct];Et&&1440-Et.maxEnd+Lt<660&&(Ce=!0)}if(!Ce){const Ct=De.indexOf(Me)+1;if(Ct<De.length){const Et=De[Ct],Nt=lt[Et];Nt&&1440-Re+Nt.minStart<660&&(Ce=!0)}}}Ce||(Je[mt]=jt?"warning":"valid")})})})}),Je},[w,y,S,h,m,j,xe,me,N]);return o.jsxs("div",{ref:z,className:"flex-1 overflow-auto bg-gray-200 p-4",onClick:()=>{V(),D(null)},onDragOver:oe,children:[o.jsx(Of,{visibility:de,onVisibilityChange:pe,cursos:g,turmas:B}),o.jsx("div",{style:{display:"inline-block"},onMouseLeave:()=>I(null),children:o.jsxs("div",{className:"relative grid",style:{gridTemplateColumns:`${A.dayColWidth}px ${A.timeColWidth}px repeat(${xe.length}, ${A.turmaColWidth}px)`},children:[o.jsx("div",{className:"sticky top-0 left-0 z-40 bg-slate-200 border-b-2 border-r border-slate-300 flex items-center justify-center p-1",style:{gridColumn:"1 / span 2",gridRow:"1 / span 2"},children:_?o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("label",{htmlFor:"year-input",className:"text-xs text-slate-600 mb-1",children:"Ano"}),o.jsx("input",{id:"year-input",type:"number",value:W,onChange:q=>O(q.target.value),onBlur:te,onKeyDown:ee,className:"w-20 text-center bg-white rounded border-2 border-indigo-500 shadow-inner",autoFocus:!0,onFocus:q=>q.target.select()})]}):o.jsxs("div",{onClick:()=>T(!0),className:"p-2 cursor-pointer text-center text-slate-700 hover:bg-slate-300 rounded-md",children:[o.jsx("div",{className:"font-bold",style:{fontSize:`${A.fontSizeYear}px`},children:c}),o.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider",style:{fontSize:`${A.fontSizeYearLabel}px`},children:"Ano"})]})}),Pe.map(q=>{const ae=q.turmas.filter(ie=>de.turmas[ie.id]);if(ae.length===0)return null;const ke=ae[0],_e=xe.findIndex(ie=>ie.id===ke.id)+3;return o.jsx("div",{className:"sticky top-0 z-30 bg-slate-200 text-slate-800 flex items-center justify-center font-bold p-2 uppercase tracking-wider border-b-2 border-slate-300",style:{gridColumn:`${_e} / span ${ae.length}`,height:`${A.headerHeight}px`,fontSize:`${A.fontSizeHeader}px`},children:o.jsx("span",{className:"truncate",title:q.nome,children:q.nome})},q.id)}),xe.map((q,ae)=>o.jsx("div",{className:`sticky z-20 bg-slate-100 text-slate-600 flex items-center justify-center font-semibold p-2 border-b border-slate-300 ${be.has(q.id)?"border-r-2 border-r-slate-400":"border-r border-slate-300"}`,style:{gridColumn:ae+3,top:`${A.headerHeight}px`,height:`${A.headerHeight}px`,fontSize:`${A.fontSizeTurmaHeader}px`},children:q.nome},q.id)),De.map((q,ae)=>{if(me.length===0)return null;const ke=ae===De.length-1,_e=me.filter((ce,Oe)=>{if(Oe===me.length-1)return!1;const ye=nt[nt.length-1]===ce,Ee=ot[ot.length-1]===ce;return ye||Ee}),ie=me.length+_e.length,Y=me.flatMap((ce,Oe)=>{const ye=nt[nt.length-1]===ce,Ee=ot[ot.length-1]===ce,lt=ye||Ee,Je=Oe===me.length-1,ve=[...[o.jsx("div",{className:"sticky z-20 bg-slate-50 p-1 text-center border-r border-slate-300 flex items-center justify-center border-b border-slate-300",style:{left:`${A.dayColWidth}px`,fontSize:`${A.fontSizeTime}px`},children:ce},`${q}_${ce}_time`),...xe.map(Ge=>{const We=`${Ge.id}_${q}_${ce}`,Ze=Fe.get(We)||[],mt=Ze.find($t=>!($t.id.endsWith("-0")||$t.id.endsWith("-1"))),Ce=Ze.find($t=>$t.id.endsWith("-0")),jt=Ze.find($t=>$t.id.endsWith("-1"));return o.jsx(Lf,{id:We,gridType:u,turma:Ge,fullSlot:mt,slot0:Ce,slot1:jt,isLastInCourse:be.has(Ge.id),onOpenContextMenu:re,onSelectSlot:D,selectedSlotId:w||null,hoveredProfessorId:i?p:null,onProfessorHover:i?I:()=>{},highlightStatus:St[We]||null,cellAlerts:Be.get(We)||[],subCellAlerts0:Be.get(`${We}-0`)||[],subCellAlerts1:Be.get(`${We}-1`)||[],subSlotHighlightStatus:{0:St[`${We}-0`]||null,1:St[`${We}-1`]||null},scaledCellMinHeight:A.cellMinHeight,scaledCellFontSize:A.fontSizeCell},We)})]];if(lt&&!Je){const Ge=o.jsx("div",{style:{gridColumn:`2 / span ${1+xe.length}`,height:`${A.periodSeparatorHeight}px`}},`${q}_${ce}_separator`);ve.push(Ge)}return ve});return o.jsxs(an.Fragment,{children:[o.jsx("div",{className:"sticky left-0 z-30 bg-slate-200 py-2 text-center font-semibold border-r-2 border-slate-300 flex items-center justify-center capitalize [writing-mode:vertical-rl] rotate-180",style:{gridRow:`span ${ie}`,fontSize:`${A.fontSizeHeader}px`},children:q}),o.jsx("div",{style:{display:"contents"},children:Y}),!ke&&o.jsxs(an.Fragment,{children:[o.jsx("div",{className:"sticky left-0 z-30 bg-slate-300 border-b-2 border-r-2 border-slate-300",style:{gridColumn:"1",height:`${A.daySeparatorHeight}px`}}),o.jsx("div",{className:"bg-slate-300 border-b-2 border-slate-300",style:{gridColumn:`2 / span ${1+xe.length}`,height:`${A.daySeparatorHeight}px`}})]})]},q)})]})}),o.jsx(Ff,{isOpen:H.isOpen,onClose:V,x:H.x,y:H.y,items:Z()})]})},Rf=({id:i,label:u,subLabel:a,isLocked:f=!1,isBeingDragged:c=!1})=>{const{dispatch:g}=st(),m=h=>{if(f){h.preventDefault();return}const[j,y]=i.split("|"),N={type:"SIDEBAR_ITEM",disciplinaId:j,professorId:y};h.dataTransfer.setData("application/json",JSON.stringify(N)),h.dataTransfer.effectAllowed="move",g({type:"DRAG_START",payload:N})},S=()=>{g({type:"DRAG_END"})},x="p-2 rounded-md shadow-sm transition-all duration-150";let w="";return c?w="opacity-40 border-dashed border-indigo-400 bg-white":f?w="opacity-50 cursor-not-allowed bg-gray-100 border border-gray-200":w="cursor-grab active:cursor-grabbing hover:bg-indigo-50 bg-white border border-gray-200",o.jsxs("div",{draggable:!f,onDragStart:m,onDragEnd:S,className:`${x} ${w}`,children:[o.jsx("div",{className:"font-semibold text-sm text-gray-800",children:u}),o.jsx("p",{className:"text-xs text-gray-500",children:a})]})},bd=(i,u)=>{const{disciplinas:a}=u,f=a.find(m=>m.id===i.disciplinaId);if(!f)return{finalDisciplinaId:i.disciplinaId,isSwap:!1};if(!(f.turmaId!==i.turmaId))return{finalDisciplinaId:i.disciplinaId,isSwap:!1};if(!!f.bnccId){const m=a.find(S=>S.turmaId===i.turmaId&&S.bnccId===f.bnccId);if(m)return{finalDisciplinaId:m.id,isSwap:!0}}return{finalDisciplinaId:i.disciplinaId,isSwap:!0}},$f=({gridType:i})=>{const{state:u,dispatch:a}=st(),{atribuicoes:f,disciplinas:c,professores:g,turmas:m,draggedItem:S}=u,[x,w]=$.useState("all"),[h,j]=$.useState(""),[y,N]=$.useState(!1),C=T=>{w(T.target.value)},P=T=>m.find(W=>W.id===T)?.nome||"N/A",R=$.useMemo(()=>{const T={};return u.grade.forEach(W=>{const{finalDisciplinaId:O}=bd(W,u),A=W.professorId,te=u.turmas.find(ee=>ee.id===W.turmaId)?.isModular?1.25:1;T[O]||(T[O]={}),T[O][A]=(T[O][A]||0)+te}),T},[u]),H=$.useMemo(()=>m.filter(T=>T.isModular===(i==="modular")),[m,i]),p=$.useMemo(()=>f.flatMap(T=>{const W=c.find(A=>A.id===T.disciplinaId);if(!W)return[];const O=m.find(A=>A.id===W.turmaId);return!O||O.isModular!==(i==="modular")?[]:T.professores.map((A,B)=>({disciplina:W,professor:g.find(te=>te.id===A),turmaId:W.turmaId,assignmentIndex:B}))}).filter(T=>T.professor),[f,c,m,g,i]).filter(T=>!(x!=="all"&&T.turmaId!==x||h.trim()!==""&&!T.professor?.nome.toLowerCase().includes(h.toLowerCase()))),I=T=>{T.preventDefault(),S?.type==="GRID_ITEM"?(N(!0),T.dataTransfer.dropEffect="move"):T.dataTransfer.dropEffect="none"},z=()=>{N(!1)},_=T=>{T.preventDefault(),N(!1),S?.type==="GRID_ITEM"&&S.sourceSlotId&&a({type:"UPDATE_GRADE",payload:{id:S.sourceSlotId,slot:null}}),a({type:"DRAG_END"})};return o.jsxs("div",{className:`p-4 h-full flex flex-col transition-colors duration-200 ${y?"bg-blue-200 border-2 border-dashed border-blue-500":"bg-gray-50"}`,onDragOver:I,onDragLeave:z,onDrop:_,children:[o.jsx("h2",{className:"text-lg font-bold mb-4",children:"Atribuies"}),o.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"search-professor",className:"block text-sm font-medium text-gray-700",children:"Buscar Professor"}),o.jsx("input",{type:"text",id:"search-professor",value:h,onChange:T=>j(T.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"turma-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Turma"}),o.jsxs("select",{id:"turma-filter",value:x,onChange:C,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[o.jsx("option",{value:"all",children:"Ver Todas"}),H.map(T=>o.jsx("option",{value:T.id,children:T.nome},T.id))]})]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:p.map(T=>{const{disciplina:W,professor:O,assignmentIndex:A}=T;if(!W||!O)return null;const B=R[W.id]&&R[W.id][O.id]||0,te=W.aulasSemanais,ee=B>=te,de=`${W.id}|${O.id}`,pe=`${W.id}|${O.id}|${A}`,K=S?.type==="SIDEBAR_ITEM"&&S.disciplinaId===W.id&&S.professorId===O.id,oe=o.jsxs("span",{children:[W.nome,W.bnccId&&o.jsx("span",{className:"text-xs bg-pink-100 text-pink-800 font-semibold ml-2 px-2 py-0.5 rounded-full align-middle",children:"BNCC"}),W.divisao&&o.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 font-semibold ml-2 px-2 py-0.5 rounded-full align-middle",children:["Diviso (",W.numProfessores,")"]}),` (${B}/${te}) - ${O.nome}`]}),V=`Turma: ${P(W.turmaId)}`;return o.jsx(Rf,{id:de,label:oe,subLabel:V,isLocked:ee,isBeingDragged:K},pe)})})]})},Hf=i=>{let u=0;for(let y=0;y<i.length;y++)u=i.charCodeAt(y)+((u<<5)-u);const a=u%360,f=70,c=50,g=(1-Math.abs(2*(c/100)-1))*(f/100),m=g*(1-Math.abs(a/60%2-1)),S=c/100-g/2;let x=0,w=0,h=0;0<=a&&a<60?(x=g,w=m,h=0):60<=a&&a<120?(x=m,w=g,h=0):120<=a&&a<180?(x=0,w=g,h=m):180<=a&&a<240?(x=0,w=m,h=g):240<=a&&a<300?(x=m,w=0,h=g):300<=a&&a<360&&(x=g,w=0,h=m),x=Math.round((x+S)*255),w=Math.round((w+S)*255),h=Math.round((h+S)*255);const j=y=>("0"+y.toString(16)).slice(-2);return`#${j(x)}${j(w)}${j(h)}`},Uf=()=>{const{state:i}=st(),{onlineUsers:u}=i;if(u.length===0)return null;const a=lr.currentUser,f=[...u].sort((c,g)=>c.id===a?.uid?1:g.id===a?.uid?-1:c.name.localeCompare(g.name));return o.jsx("div",{className:"flex items-center -space-x-2 pr-2",children:f.map(c=>o.jsxs("div",{className:"group relative",children:[o.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ring-2 ring-white",style:{backgroundColor:Hf(c.id)},children:c.id===a?.uid?"VC":c.name.charAt(0).toUpperCase()}),o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:[c.id===a?.uid?`${c.name} (Voc)`:c.name,o.jsx("svg",{className:"absolute text-gray-800 h-2 w-full left-0 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:o.jsx("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})]},c.id))})},Bf=({status:i,lastModifiedBy:u,lastModifiedAt:a})=>{const c=(()=>{switch(i){case"saving":return{icon:o.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),text:"Salvando...",textColor:"text-gray-500"};case"saved":return{icon:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4"})]}),text:"Salvo",textColor:"text-green-600"};case"error":return{icon:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 13V9.5m0 6.5v.01"})]}),text:"Erro ao salvar",textColor:"text-red-600"};default:return null}})();if(!c)return null;const g=i==="saved"&&u&&a?`(por ${u} s ${new Date(a).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})`:null;return o.jsxs("div",{className:"flex items-center space-x-2",children:[c.icon,o.jsx("span",{className:`text-sm font-medium ${c.textColor}`,children:c.text}),g&&o.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:g})]})},rt={title:{font:{name:"Calibri",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}},alignment:{horizontal:"center",vertical:"middle"}},curso:{font:{name:"Calibri",size:12,bold:!0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFAEC6CF"}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium"},bottom:{style:"medium"},left:{style:"medium"},right:{style:"medium"}}},turma:{font:{name:"Calibri",size:11,bold:!0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF8EA9DB"}},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{bottom:{style:"medium",color:{argb:"FF2F5496"}}}},day:{font:{name:"Calibri",size:12,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle",textRotation:90},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},periodo:{font:{name:"Calibri",size:11,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle",textRotation:90},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},time:{font:{name:"Calibri",size:10,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle"},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},cell_white:{font:{name:"Calibri",size:9},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}}},cell_gray:{font:{name:"Calibri",size:9},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFF2F2F2"}}},disabledCell:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFD9D9D9"}},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}}},hd=(i,u,a,f)=>{const{ano:c,cursos:g,turmas:m,grade:S,disciplinas:x,professores:w}=u,h=m.filter(_=>_.isModular===(a==="modular")).sort((_,T)=>{const W=g.find(A=>A.id===_.cursoId)?.nome||"",O=g.find(A=>A.id===T.cursoId)?.nome||"";return W.localeCompare(O)!==0?W.localeCompare(O):_.nome.localeCompare(T.nome)});if(h.length===0)return;const j=g.map(_=>({..._,turmas:h.filter(T=>T.cursoId===_.id)})).filter(_=>_.turmas.length>0),y=new Map;S.forEach(_=>{const T=`${_.turmaId}_${_.dia}_${_.horario}`;y.has(T)||y.set(T,[]),y.get(T).push(_)});const N=i.addWorksheet(f),C=N.addRow([`Grade de Horrios ${c}`]);C.height=24,N.mergeCells(1,1,1,3+h.length),N.getCell("A1").style=rt.title;const P=[null,null,null];j.forEach(_=>{P.push(_.nome);for(let T=1;T<_.turmas.length;T++)P.push(null)});const R=N.addRow(P);R.height=20;let H=4;j.forEach(_=>{if(_.turmas.length>0){_.turmas.length>1&&N.mergeCells(2,H,2,H+_.turmas.length-1);for(let T=0;T<_.turmas.length;T++)N.getCell(2,H+T).style=rt.curso;H+=_.turmas.length}});const k=N.addRow(["Dia","Perodo","Horrio",...h.map(_=>_.nome)]);k.height=35,k.getCell(1).style={...rt.day,alignment:{...rt.day.alignment,textRotation:0}},k.getCell(2).style={...rt.periodo,alignment:{...rt.periodo.alignment,textRotation:0}},k.getCell(3).style=rt.time;for(let _=4;_<=k.cellCount;_++)k.getCell(_).style=rt.turma;const I=[{name:"Manh",horarios:nt},{name:"Tarde",horarios:ot},{name:"Noite",horarios:a==="modular"?Fn:jr}];let z=!1;De.forEach((_,T)=>{const W=N.rowCount+1;if(I.forEach((O,A)=>{if(O.horarios.length===0)return;const B=N.rowCount+1;if(O.horarios.forEach(ee=>{const de=h.map(K=>{if(a==="modular"&&ee==="18:10-19:00")return null;const oe=`${K.id}_${_}_${ee}`,V=y.get(oe);return V?V.map(re=>{const Z=x.find(U=>U.id===re.disciplinaId),D=w.find(U=>U.id===re.professorId);return`${Z?.nome||"?"}
${D?.nome||"?"}`}).join(`

`):""}),pe=N.addRow([null,null,ee,...de]);pe.height=50,pe.getCell(3).style=rt.time;for(let K=4;K<=pe.cellCount;K++)pe.getCell(K).style=pe.getCell(K).value===null?rt.disabledCell:z?rt.cell_gray:rt.cell_white;z=!z}),O.horarios.length>0){const ee=N.getCell(B,2);ee.value=O.name,ee.style=rt.periodo,O.horarios.length>1&&N.mergeCells(B,2,N.rowCount,2)}if(I.slice(A+1).some(ee=>ee.horarios.length>0)){const ee=N.addRow([]);ee.height=3;for(let de=3;de<=3+h.length;de++){const pe=ee.getCell(de);pe.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}}}}),N.rowCount>=W){const O=N.getCell(W,1);O.value=_.charAt(0).toUpperCase()+_.slice(1),O.style=rt.day,N.rowCount>W&&N.mergeCells(W,1,N.rowCount,1)}if(T<De.length-1){const O=N.addRow([]);O.height=5;for(let A=1;A<=3+h.length;A++)O.getCell(A).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}}}}),N.columns=[{width:8},{width:10},{width:15},...Array(h.length).fill({width:25})],N.views=[{state:"frozen",xSplit:3,ySplit:3}]},Wf=i=>{const u=new Ls.Workbook;return u.creator="Timetable Scheduler",u.created=new Date,hd(u,i,"regular","Grade Regular"),hd(u,i,"modular","Grade Modular"),u.worksheets.length===0?{workbook:null,error:"No h dados para exportar."}:{workbook:u}},Vf=(i,u)=>{const{professores:a,grade:f,turmas:c,disciplinas:g}=i,m=a.find(k=>k.id===u);if(!m)return{workbook:null,error:"Professor no encontrado."};const S=new Ls.Workbook;S.creator="Timetable Scheduler",S.created=new Date;const x=S.addWorksheet(m.nome.substring(0,31)),w=f.filter(k=>k.professorId===u),h=w.reduce((k,p)=>{const I=c.find(z=>z.id===p.turmaId);return k+(I?.isModular?1.25:1)},0),j={};w.forEach(k=>{j[k.dia]||(j[k.dia]={}),j[k.dia][k.horario]={turma:c.find(p=>p.id===k.turmaId)?.nome||"?",disciplina:g.find(p=>p.id===k.disciplinaId)?.nome||"?"}}),x.mergeCells("A1:F1");const y=x.getCell("A1");y.value=m.nome,y.style=rt.title,x.mergeCells("A2:F2");const N=x.getCell("A2");N.value=`Total de Aulas Semanais: ${h}`,N.style={font:{bold:!0},alignment:{horizontal:"center"}},x.addRow(["Horrio",...De.map(k=>k.charAt(0).toUpperCase()+k.slice(1))]).eachCell(k=>{k.style=rt.turma,k.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}});const P=[...new Set([...nt,...ot,...jr,...Fn])].sort();P.forEach((k,p)=>{const I=[k];De.forEach(O=>{const A=j[O]?.[k];I.push(A?`${A.disciplina}
${A.turma}`:"")});const z=x.addRow(I);z.getCell(1).style=rt.time;for(let O=2;O<=6;O++)z.getCell(O).style=rt.cell_white;z.height=30;const _=nt[nt.length-1]===k,T=ot[ot.length-1]===k,W=p===P.length-1;if((_||T)&&!W){const O=x.addRow([]);O.height=3;for(let A=1;A<=1+De.length;A++){const B=O.getCell(A);B.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}}}});const R=De.map(k=>w.filter(p=>p.dia===k).reduce((p,I)=>p+(c.find(z=>z.id===I.turmaId)?.isModular?1.25:1),0));return x.addRow(["Carga Diria",...R]).eachCell(k=>{k.style={...rt.turma,font:{...rt.turma.font,bold:!0}}}),x.columns=[{width:15},{width:25},{width:25},{width:25},{width:25},{width:25}],{workbook:S}},gd=(i,u,a,f)=>{const c=u.filter(O=>O.professorId===i.id),g=c.reduce((O,A)=>{const B=a.find(te=>te.id===A.turmaId);return O+(B?.isModular?1.25:1)},0),m=De.reduce((O,A)=>(O[A]=c.filter(B=>B.dia===A).reduce((B,te)=>{const ee=a.find(de=>de.id===te.turmaId);return B+(ee?.isModular?1.25:1)},0),O),{}),S={};c.forEach(O=>{S[O.dia]||(S[O.dia]={});const A=a.find(te=>te.id===O.turmaId)?.nome||"N/A",B=f.find(te=>te.id===O.disciplinaId)?.nome||"N/A";S[O.dia][O.horario]={turma:A,disciplina:B}});const x=[...new Set([...jr,...Fn])].sort(),w=[{label:"Manh",horarios:nt},{label:"Tarde",horarios:ot},{label:"Noite",horarios:x}],h=new wd({orientation:"landscape",unit:"pt",format:"a4"}),j=h.internal.pageSize.getWidth(),y=h.internal.pageSize.getHeight(),N=30;let C={titleFontSize:16,subtitleFontSize:10,headerFontSize:9,periodFontSize:8,cellFontSize:8,footerFontSize:9,titleSpacing:18,subtitleSpacing:25,headerRowH:20,regularRowH:32,periodSeparatorH:5,periodHeaderH:15,footerSpacing:5},P=N;P+=C.titleSpacing,P+=C.subtitleSpacing,P+=C.headerRowH,w.forEach(O=>{O.horarios.length>0&&(P+=C.periodSeparatorH,P+=C.periodHeaderH,P+=O.horarios.length*C.regularRowH)}),P+=C.footerSpacing,P+=C.headerRowH,P+=N;const R=y;let H=1;P>R&&(H=R/P);const k=N*Math.min(H,1),p=j-k*2;for(const O in C)C[O]*=H;let I=k;h.setFont("helvetica","bold"),h.setFontSize(C.titleFontSize),h.text(i.nome,j/2,I,{align:"center"}),I+=C.titleSpacing,h.setFont("helvetica","normal"),h.setFontSize(C.subtitleFontSize),h.text(`Total de Aulas Semanais: ${g}`,j/2,I,{align:"center"}),I+=C.subtitleSpacing;const z=65*Math.min(H,1),_=(p-z)/De.length;h.setFillColor(230,230,230),h.rect(k,I,p,C.headerRowH,"F"),h.setFont("helvetica","bold"),h.setFontSize(C.headerFontSize),h.setDrawColor(180,180,180),h.rect(k,I,p,C.headerRowH);const T=I+C.headerRowH/2+C.headerFontSize*.35;h.text("Horrio",k+z/2,T,{align:"center"}),De.forEach((O,A)=>{const B=k+z+A*_+_/2;h.text(O.charAt(0).toUpperCase()+O.slice(1),B,T,{align:"center"});const te=k+z+A*_;h.line(te,I,te,I+C.headerRowH)}),I+=C.headerRowH,w.forEach(O=>{O.horarios.length>0&&(I+=C.periodSeparatorH,h.setFillColor(240,240,240),h.rect(k,I,p,C.periodHeaderH,"F"),h.setFont("helvetica","bold"),h.setFontSize(C.periodFontSize),h.text(O.label,k+5,I+C.periodHeaderH/2,{baseline:"middle"}),I+=C.periodHeaderH,O.horarios.forEach(A=>{const B=I;h.setDrawColor(220,220,220),h.rect(k,B,p,C.regularRowH),h.setFont("helvetica","normal"),h.setFontSize(C.cellFontSize),h.text(A,k+z/2,B+C.regularRowH/2,{align:"center",baseline:"middle"}),h.line(k+z,B,k+z,B+C.regularRowH),De.forEach((te,ee)=>{const de=S[te]?.[A],pe=k+z+ee*_;if(de){h.setFillColor(232,242,255),h.rect(pe,B,_,C.regularRowH,"F");const K=B+C.regularRowH/2-C.cellFontSize*.2,oe=K+C.cellFontSize*1.1,V=_-6;let re=de.disciplina;if(h.setFont("helvetica","bold"),h.setFontSize(C.cellFontSize),h.getTextWidth(re)>V){for(;re.length>0&&h.getTextWidth(re+"...")>V;)re=re.slice(0,-1);re+="..."}h.text(re,pe+_/2,K,{align:"center"});let Z=de.turma;if(h.setFont("helvetica","normal"),h.getTextWidth(Z)>V){for(;Z.length>0&&h.getTextWidth(Z+"...")>V;)Z=Z.slice(0,-1);Z+="..."}h.text(Z,pe+_/2,oe,{align:"center"})}h.line(pe,B,pe,B+C.regularRowH)}),I+=C.regularRowH}))}),I+=C.footerSpacing,h.setFillColor(230,230,230),h.rect(k,I,p,C.headerRowH,"F"),h.setFont("helvetica","bold"),h.setFontSize(C.footerFontSize),h.setDrawColor(180,180,180),h.rect(k,I,p,C.headerRowH);const W=I+C.headerRowH/2+C.footerFontSize*.35;return h.text("Carga Diria",k+z/2,W,{align:"center"}),De.forEach((O,A)=>{const B=k+z+A*_+_/2;h.text(String(m[O]||0),B,W,{align:"center"});const te=k+z+A*_;h.line(te,I,te,I+C.headerRowH)}),{doc:h}},Gf=i=>{const u=new Map,a=new Map,f=new Map,c=[...i].sort((m,S)=>m.nome.localeCompare(S.nome));for(const m of c){const S=new Set(["de","da","do","dos","das"]),x=m.nome.trim().split(" ").filter(h=>!S.has(h.toLowerCase()));let w="??";if(x.length>0){const h=x[0].charAt(0).toUpperCase(),j=x.length>1?x[x.length-1].charAt(0).toUpperCase():"";w=`${h}${j}`}a.set(w,(a.get(w)||0)+1),f.set(m.nome,w)}const g=new Map;for(const m of c){const S=f.get(m.nome),x=a.get(S);let w=S;if(x>1){const j=(g.get(S)||0)+1;j>1&&(w=`${S}${j}`),g.set(S,j)}u.set(m.id,w)}return u},qf=i=>{const u=new Map,a=new Set;for(const f of i){if(a.has(f.nome))continue;const g=f.nome.trim().split(" ").filter(S=>S.length>0);let m="???";g.length>1?m=g.map(S=>S.charAt(0)).join("").toUpperCase():g.length===1&&g[0].length>0&&(m=g[0].substring(0,3).toUpperCase()),m.length>5&&(m=m.substring(0,5)),u.set(f.nome,m),a.add(f.nome)}return u},xd=(i,u,a,f)=>{const m=a.w-12,S=a.h-a.h*.1;if(m<=0||S<4)return;let x=Math.min(f,S),w=u;for(;x>4&&(i.setFontSize(x),!(i.getTextWidth(w)<m));)x-=.25;if(i.setFontSize(4),i.getTextWidth(u)>m){let j=u;for(;j.length>0&&i.getTextWidth(j+"...")>m;)j=j.slice(0,-1);w=j+"..."}const h=Math.max(x,4);i.setFontSize(h),i.setFont("helvetica","bold"),i.text(w,a.x+a.w/2,a.y+a.h/2,{align:"center",baseline:"middle",maxWidth:m})},Xf=(i,u,a,f,c,g,m,S,x,w,h)=>{const j=i.internal.pageSize.getWidth(),y=i.internal.pageSize.getHeight()-m;i.setFontSize(S*.6),i.setFont("helvetica","bold"),i.setTextColor(0,0,0);const N=a>1?`(Pgina ${u+1} de ${a})`:"";if(i.text(`Grade de Horrios ${g} - ${c} ${N}`,j/2,m,{align:"center"}),i.setFontSize(S*.4),i.setFont("helvetica","italic"),i.setTextColor(100,100,100),f.length>0){const C=f[0].nome,P=f[f.length-1].nome,R=`Exibindo turmas: ${C} a ${P}`;i.text(R,j/2,m+S*.5,{align:"center"})}if(i.setFontSize(x*.4),i.setFont("helvetica","normal"),i.setTextColor(150,150,150),i.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,m,y+x*.6),a>1&&i.text("Instrues: Para montar, imprima todas as pginas e alinhe as guias pontilhadas laterais.",j/2,y+x*.6,{align:"center"}),a>1){if(i.setLineDashPattern([2,2],0),i.setDrawColor(180,180,180),i.setLineWidth(.5),u<a-1){const C=j-m;i.line(C,w,C,h),i.setFontSize(x*.45),i.setTextColor(150,150,150),i.text(`Continua na Pg. ${u+2} ->`,C-5,w+10,{align:"right",angle:90})}if(u>0){const C=m;i.line(C,w,C,h),i.setFontSize(x*.45),i.setTextColor(150,150,150),i.text(`<- Vem da Pg. ${u}`,C+5,h-10,{align:"left",angle:90})}i.setLineDashPattern([],0),i.setTextColor(0,0,0)}},Qf=(i,u)=>{const{ano:a,cursos:f,turmas:c,grade:g,disciplinas:m,professores:S}=i,x=c.filter(Y=>Y.isModular===(u==="modular")).sort((Y,ce)=>{const Oe=f.find(Ee=>Ee.id===Y.cursoId)?.nome||"",ye=f.find(Ee=>Ee.id===ce.cursoId)?.nome||"";return Oe.localeCompare(ye)!==0?Oe.localeCompare(ye):Y.nome.localeCompare(ce.nome)});if(x.length===0)return{doc:null,error:`Nenhuma turma para a grade ${u==="regular"?"Regular":"Modular"}.`};const w=new Set,h=new Set,j=new Set(x.map(Y=>Y.id));g.forEach(Y=>{j.has(Y.turmaId)&&(w.add(Y.professorId),h.add(Y.disciplinaId))});const y=i.professores.filter(Y=>w.has(Y.id)),N=i.disciplinas.filter(Y=>h.has(Y.id)),C=Gf(y),P=qf(N),R=x.filter(Y=>Y.periodo!=="noite"),H=x.filter(Y=>Y.periodo==="noite"),k=new Map;g.forEach(Y=>{const ce=`${Y.turmaId}_${Y.dia}_${Y.horario}`;k.has(ce)||k.set(ce,[]),k.get(ce).push(Y)});const p=new wd({orientation:"landscape",unit:"pt",format:"a3"}),I=p.internal.pageSize.getWidth(),z=p.internal.pageSize.getHeight(),_=30,T={title:14,header:11,cell:9,dividedCell:8},W={titleHeader:25,titleSubheader:15,footer:20,curso:18,turma:45,cell:35,periodSeparator:3,daySeparator:5},O={day:40,period:40,time:60,turma:90},A=O.day+O.period+O.time,B=I-_*2-A,te=Math.max(1,Math.floor(B/O.turma)),ee=[];for(let Y=0;Y<R.length;Y+=te)ee.push(R.slice(Y,Y+te));const de=[];for(let Y=0;Y<H.length;Y+=te)de.push(H.slice(Y,Y+te));const pe=ee.length+de.length;if(pe===0)return{doc:null,error:`Nenhuma aula encontrada para a grade ${u==="regular"?"Regular":"Modular"}.`};const K=pe+1;let oe=0;const V=(Y,ce,Oe)=>{Y.length!==0&&Y.forEach(ye=>{oe>0&&p.addPage();let Ee=0;De.forEach((Re,et)=>{ce.forEach((Ct,Et)=>{Ct.horarios.length!==0&&(Ee+=Ct.horarios.length*W.cell,ce.slice(Et+1).some(Nt=>Nt.horarios.length>0)&&(Ee+=W.periodSeparator))}),et<De.length-1&&(Ee+=W.daySeparator)});const Je=W.curso+W.turma+Ee,we=W.titleHeader+W.titleSubheader+W.footer+20,Me=z-_*2-we;let Ne=Math.min(1,Me/Je);Ne<1&&(Ne=Ne*.95);const ve={...W};for(const Re in ve)ve[Re]*=Ne;const Ge={...T};for(const Re in Ge)Ge[Re]*=Ne;const We=`${u==="regular"?"Grade Regular":"Grade Modular"} - ${Oe}`,Ze=_+ve.titleHeader+ve.titleSubheader,mt=Ze+Je*Ne;Xf(p,oe,K,ye,We,a,_,ve.titleHeader,ve.footer,Ze,mt);let Ce=Ze;p.setFont("helvetica","bold"),p.setDrawColor(150);let jt=_+A;const $t=new Set(ye.map(Re=>Re.id));f.map(Re=>({...Re,turmas:c.filter(et=>et.cursoId===Re.id&&$t.has(et.id))})).filter(Re=>Re.turmas.length>0).forEach(Re=>{const et=Re.turmas.length*O.turma;p.setFillColor(220,220,220),p.rect(jt,Ce,et,ve.curso,"FD"),p.setFontSize(Ge.header*1.2),p.setFont("helvetica","bold"),p.text(Re.nome,jt+et/2,Ce+ve.curso/2,{align:"center",baseline:"middle",maxWidth:et-4}),jt+=et}),jt=_+A,ye.forEach(Re=>{p.setFillColor(235,235,235),p.setTextColor(0,0,0),p.rect(jt,Ce+ve.curso,O.turma,ve.turma,"FD"),p.setFontSize(Ge.header*1.1),p.setFont("helvetica","bold");const et=p.splitTextToSize(Re.nome,O.turma-4);p.text(et,jt+O.turma/2,Ce+ve.curso+ve.turma/2,{align:"center",baseline:"middle"}),jt+=O.turma});const Lt=ve.curso+ve.turma;p.setFillColor(220,220,220),p.rect(_,Ce,A,Lt,"FD"),p.setFontSize(Ge.header*1.15),p.setFont("helvetica","bold"),p.text("Dia",_+O.day/2,Ce+Lt/2,{align:"center",baseline:"middle"}),p.text("Perodo",_+O.day+O.period/2,Ce+Lt/2,{align:"center",baseline:"middle"}),p.text("Horrio",_+O.day+O.period+O.time/2,Ce+Lt/2,{align:"center",baseline:"middle"}),Ce+=Lt,De.forEach((Re,et)=>{const Ct=Ce;ce.forEach((Nt,Cr)=>{if(Nt.horarios.length===0)return;const dn=Ce;Nt.horarios.forEach(Nr=>{p.setFontSize(Ge.header),p.setFont("helvetica","bold"),p.setFillColor(245,245,245),p.setDrawColor(200),p.rect(_+O.day+O.period,Ce,O.time,ve.cell,"FD"),p.text(Nr,_+O.day+O.period+O.time/2,Ce+ve.cell/2,{align:"center",baseline:"middle"});let Ht=_+A;ye.forEach(No=>{const zn=u==="modular"&&Nr==="18:10-19:00";if(p.setDrawColor(200),zn){p.setFillColor(220,220,220),p.rect(Ht,Ce,O.turma,ve.cell,"FD");const ut=4*Ne;p.line(Ht+ut,Ce+ut,Ht+O.turma-ut,Ce+ve.cell-ut),p.line(Ht+O.turma-ut,Ce+ut,Ht+ut,Ce+ve.cell-ut)}else{const ut=k.get(`${No.id}_${Re}_${Nr}`);if(p.setFillColor(255,255,255),p.rect(Ht,Ce,O.turma,ve.cell,"FD"),ut&&ut.length>0){const br=m.find(dt=>dt.id===ut[0].disciplinaId),fn=br&&P.get(br.nome)||"???";if(ut.length===1){const dt=C.get(ut[0].professorId)||"??";xd(p,`${fn} - ${dt}`,{x:Ht,y:Ce,w:O.turma,h:ve.cell},Ge.cell)}else{const dt=ut.sort((Ut,Bt)=>Ut.id.localeCompare(Bt.id)),Gr=O.turma/dt.length;let Kt=Ge.dividedCell;dt.length===2?Kt*=.7:dt.length===3?Kt*=.55:dt.length>=4&&(Kt*=.45),console.log(`Divises: ${dt.length}, Largura sub-clula: ${Gr.toFixed(2)}, Fonte inicial: ${Kt.toFixed(2)}`);const pn=dt.length>2?(Ut,Bt)=>`${Ut}${Bt}`:(Ut,Bt)=>`${Ut} - ${Bt}`;dt.forEach((Ut,Bt)=>{const Fs=C.get(Ut.professorId)||"??",zs=pn(fn,Fs),Rn=Ht+Bt*Gr,pr={x:Rn,y:Ce,w:Gr,h:ve.cell};xd(p,zs,pr,Kt),Bt<dt.length-1&&(p.setDrawColor(200),p.setLineWidth(.5),p.line(Rn+Gr,Ce,Rn+Gr,Ce+ve.cell))})}}}Ht+=O.turma}),Ce+=ve.cell});const cn=Ce-dn;cn>0&&(p.setFillColor(240,240,240),p.setDrawColor(150),p.rect(_+O.day,dn,O.period,cn,"FD"),p.text(Nt.name,_+O.day+O.period/2,dn+cn/2,{align:"center",baseline:"middle",angle:90})),ce.slice(Cr+1).some(Nr=>Nr.horarios.length>0)&&(p.setFillColor(200,200,200),p.rect(_,Ce,I-_*2,ve.periodSeparator,"F"),Ce+=ve.periodSeparator)});const Et=Ce-Ct;Et>0&&(p.setFillColor(230,230,230),p.setDrawColor(150),p.rect(_,Ct,O.day,Et,"FD"),p.text(Re.charAt(0).toUpperCase()+Re.slice(1),_+O.day/2,Ct+Et/2,{align:"center",baseline:"middle",angle:90})),et<De.length-1&&(p.setFillColor(150,150,150),p.rect(_,Ce,I-_*2,ve.daySeparator,"F"),Ce+=ve.daySeparator)}),oe++})},re=[{name:"Manh",horarios:nt},{name:"Tarde",horarios:ot}],D=[{name:"Noite",horarios:u==="modular"?Fn:jr}];V(ee,re,"Diurno"),V(de,D,"Noturno"),p.addPage("a3","landscape");let U=_;p.setFontSize(16),p.setFont("helvetica","bold"),p.text("Legenda de Siglas",I/2,U,{align:"center"}),U+=30;const je=_,me=I/3+_,xe=I/3*2+_,Te=I/3-_-10,Pe=8,be=Pe*1.3;p.setFontSize(12),p.setFont("helvetica","bold"),p.text("Disciplinas",je,U),p.text("Professores",me,U),U+=20;const Fe=[...P.entries()].sort((Y,ce)=>Y[0].localeCompare(ce[0])),Be=[...y].sort((Y,ce)=>Y.nome.localeCompare(ce.nome));let St=U,q=U,ae=U;const ke=Math.ceil(Be.length/2),_e=Be.slice(0,ke),ie=Be.slice(ke);p.setFontSize(Pe),p.setFont("helvetica","normal");for(const[Y,ce]of Fe){const Oe=`${ce}: ${Y}`,ye=p.splitTextToSize(Oe,Te);p.text(ye,je,St),St+=ye.length*be}for(const Y of _e){const ce=C.get(Y.id)||"??";p.text(`${ce}: ${Y.nome}`,me,q,{maxWidth:Te}),q+=be}for(const Y of ie){const ce=C.get(Y.id)||"??";p.text(`${ce}: ${Y.nome}`,xe,ae,{maxWidth:Te}),ae+=be}return{doc:p}},Yf=({currentView:i,setCurrentView:u,activeGrid:a,isFocusModeEnabled:f,onFocusModeChange:c,onOpenClearDataModal:g,onOpenLoadExampleModal:m})=>{const{state:S,dispatch:x}=st(),w=()=>{const{draggedItem:H,clipboard:k,selectedSlotId:p,onlineUsers:I,toastMessage:z,saveStatus:_,...T}=S,W=JSON.stringify(T,null,2),O="data:application/json;charset=utf-8,"+encodeURIComponent(W),A="grade_horarios.json",B=document.createElement("a");B.setAttribute("href",O),B.setAttribute("download",A),B.click()},h=()=>{const{grade:H,turmas:k,disciplinas:p,professores:I}=S,z="Turma,Dia,Horario,Disciplina,Professor",_=H.map(B=>{const te=k.find(pe=>pe.id===B.turmaId)?.nome||B.turmaId,ee=p.find(pe=>pe.id===B.disciplinaId)?.nome||B.disciplinaId,de=I.find(pe=>pe.id===B.professorId)?.nome||B.professorId;return[te,B.dia,B.horario,`"${ee}"`,`"${de}"`].join(",")}),T=[z,..._].join(`
`),W=new Blob([`\uFEFF${T}`],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(W),A=document.createElement("a");A.setAttribute("href",O),A.setAttribute("download","grade_horarios.csv"),A.click(),URL.revokeObjectURL(O)},j=()=>{x({type:"SHOW_TOAST",payload:"Gerando arquivo XLSX..."}),setTimeout(()=>{try{const{workbook:H,error:k}=Wf(S);if(k){x({type:"SHOW_TOAST",payload:k});return}H&&H.xlsx.writeBuffer().then(p=>{const I=new Blob([p],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),z=URL.createObjectURL(I),_=document.createElement("a");_.setAttribute("href",z),_.setAttribute("download","grade_horarios.xlsx"),document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(z),x({type:"SHOW_TOAST",payload:"Exportao para XLSX concluda!"})}).catch(p=>{console.error("Error writing XLSX buffer:",p),x({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})})}catch(H){console.error("Error generating XLSX file:",H),x({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})}},50)},y=()=>{i==="grid"&&(x({type:"SHOW_TOAST",payload:"Gerando arquivo PDF..."}),setTimeout(()=>{try{const{doc:H,error:k}=Qf(S,a);if(k||!H){x({type:"SHOW_TOAST",payload:k||"Erro ao gerar PDF."});return}const p=`grade_${a}.pdf`;H.save(p),x({type:"SHOW_TOAST",payload:"Exportao para PDF concluda!"})}catch(H){console.error("Error generating PDF:",H),x({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo PDF."})}},50))},N=H=>{const k=new FileReader;H.target.files&&H.target.files[0]&&(k.readAsText(H.target.files[0],"UTF-8"),k.onload=p=>{if(p.target&&typeof p.target.result=="string")try{const I=JSON.parse(p.target.result);I.version&&I.cursos?(x({type:"SET_STATE",payload:I}),x({type:"SHOW_TOAST",payload:"Arquivo importado com sucesso!"})):x({type:"SHOW_TOAST",payload:"Arquivo JSON invlido."})}catch{x({type:"SHOW_TOAST",payload:"Erro ao processar o arquivo JSON."})}},H.target.value="")},C="px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",P="bg-indigo-600 text-white",R="bg-gray-200 text-gray-700 hover:bg-gray-300";return o.jsx(o.Fragment,{children:o.jsxs("div",{className:"flex items-center justify-between p-2 bg-white",children:[o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsx("h1",{className:"text-xl font-bold text-gray-700",children:"Timetable Scheduler"}),o.jsxs("div",{className:"flex items-center bg-gray-200 rounded-md p-1",children:[o.jsx("button",{onClick:()=>u("dashboard"),className:`${C} ${i==="dashboard"?P:R}`,children:"Painel"}),o.jsx("button",{onClick:()=>u("grid"),className:`${C} ${i==="grid"?P:R}`,children:"Grade"}),o.jsx("button",{onClick:()=>u("management"),className:`${C} ${i==="management"?P:R}`,children:"Gerenciamento"}),o.jsx("button",{onClick:()=>u("professor"),className:`${C} ${i==="professor"?P:R}`,children:"Professor"})]}),i==="grid"&&o.jsxs("div",{className:"flex items-center space-x-2 ml-6",children:[o.jsx("label",{htmlFor:"focus-mode-toggle",className:"text-sm font-medium text-gray-700 select-none cursor-pointer",children:"Modo Foco"}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{id:"focus-mode-toggle",type:"checkbox",className:"sr-only",checked:f,onChange:H=>c(H.target.checked)}),o.jsx("div",{onClick:()=>c(!f),className:`block w-10 h-6 rounded-full transition-colors cursor-pointer ${f?"bg-indigo-600":"bg-gray-200"}`}),o.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${f?"translate-x-4":""}`})]})]})]}),o.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1",children:[o.jsx(Bf,{status:S.saveStatus,lastModifiedBy:S.lastModifiedBy,lastModifiedAt:S.lastModifiedAt}),o.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),o.jsx(Uf,{}),o.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),o.jsx("button",{onClick:m,className:"p-2 rounded hover:bg-gray-200",title:"Carregar dados de demonstrao",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4M4 7v4c0 2.21 3.582 4 8 4s8-1.79 8-4V7"})})}),o.jsx("button",{onClick:g,className:"p-2 rounded hover:bg-gray-200",title:"Limpar todos os dados da aplicao",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),o.jsx("button",{onClick:()=>x({type:"UNDO"}),className:"p-2 rounded hover:bg-gray-200",title:"Desfazer (Ctrl+Z)",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8a5 5 0 015 5v1"})})}),o.jsx("button",{onClick:()=>x({type:"REDO"}),className:"p-2 rounded hover:bg-gray-200",title:"Refazer (Ctrl+Y)",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 15l3-3m0 0l-3-3m3 3H5a5 5 0 01-5-5v-1"})})}),o.jsxs("label",{htmlFor:"import-json",className:"cursor-pointer p-2 rounded hover:bg-gray-200",title:"Restaurar backup (JSON)",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),o.jsx("input",{type:"file",id:"import-json",className:"hidden",accept:".json",onChange:N})]}),o.jsx("button",{onClick:w,className:"p-2 rounded hover:bg-gray-200",title:"Fazer backup dos dados (JSON)",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),o.jsx("button",{onClick:h,className:"p-2 rounded hover:bg-gray-200",title:"Exportar dados brutos para planilha (CSV)",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),o.jsx("button",{onClick:j,className:"p-2 rounded hover:bg-gray-200",title:"Exportar grades formatadas para Excel (XLSX)",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),o.jsx("button",{onClick:y,disabled:i!=="grid",className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar grade atual para PDF",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]})})},Kf=()=>o.jsxs("div",{className:"px-4",children:[o.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Legenda de Alertas:"}),o.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsx("span",{className:"w-4 h-4 rounded-full bg-green-200 border border-gray-300"}),o.jsx("span",{children:"Horrio Vlido (sem conflitos)"})]},"valid-slot"),Object.keys(sn).map(i=>{const u=i,{bg:a,name:f}=sn[u];return o.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[o.jsx("span",{className:`w-4 h-4 rounded-full ${a}`}),o.jsx("span",{children:f})]},i)})]})]});var Jf=jd();const Vr=({isOpen:i,onClose:u,title:a,children:f,size:c="md",contentRef:g})=>{const m=$.useRef(null);if($.useEffect(()=>{m.current=document.getElementById("modal-root")},[]),!i||!m.current)return null;const S={md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"};return Jf.createPortal(o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:u,children:o.jsxs("div",{className:`bg-white rounded-lg shadow-xl w-full ${S[c]} flex flex-col max-h-[90vh]`,onClick:x=>x.stopPropagation(),children:[o.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-6 pb-4 border-b",children:[o.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a}),o.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"overflow-y-auto p-6",ref:g,children:f})]})}),m.current)},Os=({isOpen:i,onClose:u,onConfirm:a,title:f,message:c})=>{const g=()=>{a(),u()};return o.jsx(Vr,{isOpen:i,onClose:u,title:f,children:o.jsxs("div",{className:"space-y-4",children:[o.jsx("p",{className:"text-sm text-gray-700",children:c}),o.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Confirmar Excluso"})]})]})})},Zf=()=>{const{state:i,dispatch:u}=st(),[a,f]=$.useState(!1),[c,g]=$.useState(null),[m,S]=$.useState(""),[x,w]=$.useState({isOpen:!1,id:null}),h=P=>{g(P),S(P?P.nome:""),f(!0)},j=()=>{f(!1),g(null),S("")},y=P=>{P.preventDefault(),m.trim()&&(u(c?{type:"UPDATE_CURSO",payload:{...c,nome:m}}:{type:"ADD_CURSO",payload:{id:`c${Date.now()}`,nome:m}}),j())},N=P=>{w({isOpen:!0,id:P})},C=()=>{x.id&&u({type:"DELETE_CURSO",payload:{id:x.id}}),w({isOpen:!1,id:null})};return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Cursos"}),o.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Adicionar Curso"})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:i.cursos.length>0?i.cursos.map(P=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[o.jsx("span",{className:"font-medium text-gray-800 mb-4",children:P.nome}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx("button",{onClick:()=>h(P),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),o.jsx("button",{onClick:()=>N(P.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},P.id)):o.jsx("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:"Nenhum curso cadastrado."})}),o.jsx(Vr,{isOpen:a,onClose:j,title:c?"Editar Curso":"Adicionar Curso",children:o.jsxs("form",{onSubmit:y,children:[o.jsx("label",{htmlFor:"cursoName",className:"block text-sm font-medium text-gray-700",children:"Nome do Curso"}),o.jsx("input",{type:"text",id:"cursoName",value:m,onChange:P=>S(P.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:j,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Salvar"})]})]})}),o.jsx(Os,{isOpen:x.isOpen,onClose:()=>w({isOpen:!1,id:null}),onConfirm:C,title:"Confirmar Excluso de Curso",message:"Tem certeza que deseja excluir este curso? Todas as turmas, disciplinas e aulas associadas tambm sero removidas permanentemente."})]})},ep=()=>{const{state:i,dispatch:u}=st(),[a,f]=$.useState(!1),[c,g]=$.useState(null),[m,S]=$.useState({nome:"",cursoId:"",periodo:"manha",isModular:!1}),[x,w]=$.useState("all"),[h,j]=$.useState({isOpen:!1,id:null});$.useEffect(()=>{!m.cursoId&&i.cursos.length>0&&S(p=>({...p,cursoId:i.cursos[0].id}))},[i.cursos,m.cursoId]);const y=p=>{g(p),S(p?{nome:p.nome,cursoId:p.cursoId,periodo:p.periodo,isModular:!!p.isModular}:{nome:"",cursoId:i.cursos[0]?.id||"",periodo:"manha",isModular:!1}),f(!0)},N=()=>{f(!1),g(null),S({nome:"",cursoId:"",periodo:"manha",isModular:!1})},C=p=>{p.preventDefault(),!(!m.nome.trim()||!m.cursoId||!m.periodo)&&(u(c?{type:"UPDATE_TURMA",payload:{...c,...m}}:{type:"ADD_TURMA",payload:{id:`t${Date.now()}`,...m}}),N())},P=p=>{j({isOpen:!0,id:p})},R=()=>{h.id&&u({type:"DELETE_TURMA",payload:{id:h.id}}),j({isOpen:!1,id:null})},H=p=>i.cursos.find(I=>I.id===p)?.nome||"N/A",k=i.turmas.filter(p=>x==="all"?!0:p.cursoId===x);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Turmas"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"w-64",children:[o.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Curso"}),o.jsxs("select",{id:"curso-filter",value:x,onChange:p=>w(p.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[o.jsx("option",{value:"all",children:"Todos os Cursos"}),i.cursos.map(p=>o.jsx("option",{value:p.id,children:p.nome},p.id))]})]}),o.jsx("button",{onClick:()=>y(null),className:"self-end px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",disabled:i.cursos.length===0,children:"Adicionar Turma"})]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:k.length>0?k.map(p=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("h4",{className:"font-bold text-gray-800",children:p.nome}),p.isModular&&o.jsx("span",{className:"flex-shrink-0 text-xs bg-purple-100 text-purple-800 font-semibold ml-2 px-2 py-0.5 rounded-full",children:"Modular"})]}),o.jsx("p",{className:"text-sm text-gray-500",children:H(p.cursoId)}),o.jsx("p",{className:"text-sm text-gray-500 capitalize",children:p.periodo})]}),o.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[o.jsx("button",{onClick:()=>y(p),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),o.jsx("button",{onClick:()=>P(p.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},p.id)):o.jsx("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:i.turmas.length===0?"Nenhuma turma cadastrada.":"Nenhuma turma encontrada para o filtro selecionado."})}),o.jsx(Vr,{isOpen:a,onClose:N,title:c?"Editar Turma":"Adicionar Turma",children:o.jsxs("form",{onSubmit:C,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"turmaName",className:"block text-sm font-medium text-gray-700",children:"Nome da Turma"}),o.jsx("input",{type:"text",id:"turmaName",value:m.nome,onChange:p=>S({...m,nome:p.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"cursoId",className:"block text-sm font-medium text-gray-700",children:"Curso"}),o.jsxs("select",{id:"cursoId",value:m.cursoId,onChange:p=>S({...m,cursoId:p.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[o.jsx("option",{value:"",disabled:!0,children:"Selecione um curso"}),i.cursos.map(p=>o.jsx("option",{value:p.id,children:p.nome},p.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"turmaPeriodo",className:"block text-sm font-medium text-gray-700",children:"Perodo"}),o.jsxs("select",{id:"turmaPeriodo",value:m.periodo,onChange:p=>S({...m,periodo:p.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[o.jsx("option",{value:"manha",children:"Manh"}),o.jsx("option",{value:"tarde",children:"Tarde"}),o.jsx("option",{value:"noite",children:"Noite"})]})]}),o.jsx("div",{className:"pt-2",children:o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex items-center h-5",children:o.jsx("input",{id:"isModular",type:"checkbox",checked:m.isModular,onChange:p=>S({...m,isModular:p.target.checked}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),o.jsxs("div",{className:"ml-3 text-sm",children:[o.jsx("label",{htmlFor:"isModular",className:"font-medium text-gray-700",children:"Turma Modular?"}),o.jsx("p",{className:"text-gray-500",children:"Turmas modulares aparecero em uma grade de horrios separada."})]})]})}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Salvar"})]})]})}),o.jsx(Os,{isOpen:h.isOpen,onClose:()=>j({isOpen:!1,id:null}),onConfirm:R,title:"Confirmar Excluso de Turma",message:"Tem certeza que deseja excluir esta turma? Todas as disciplinas e aulas associadas tambm sero removidas permanentemente."})]})},tp=({isOpen:i,onClose:u})=>{const{state:a,dispatch:f}=st(),c=$.useMemo(()=>{const x={};return a.disciplinas.forEach(w=>{w.bnccId||(x[w.nome]||(x[w.nome]={turmas:new Set}),x[w.nome].turmas.add(w.turmaId))}),Object.entries(x).filter(([w,h])=>h.turmas.size>1).map(([w,h])=>({nome:w,count:h.turmas.size})).sort((w,h)=>h.count!==w.count?h.count-w.count:w.nome.localeCompare(h.nome))},[a.disciplinas]),g=x=>{f({type:"CREATE_BNCC",payload:{nome:x}})},m=x=>{f({type:"DELETE_BNCC",payload:{bnccId:x}})},S="flex-shrink-0 w-32 justify-center text-center text-sm px-3 py-1 rounded-md transition-colors";return o.jsx(Vr,{isOpen:i,onClose:u,title:"Gerenciar Grupos BNCC",size:"4xl",children:o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Sugestes de Grupos BNCC"}),o.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Disciplinas com o mesmo nome em mltiplas turmas so candidatas a se tornarem um grupo BNCC."}),c.length>0?o.jsx("ul",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto pr-2",children:c.map(x=>o.jsxs("li",{className:"py-3 flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("span",{className:"font-medium",children:x.nome}),o.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",x.count," turmas)"]})]}),o.jsx("button",{onClick:()=>g(x.nome),className:`${S} bg-green-500 text-white hover:bg-green-600`,children:"Criar Grupo"})]},x.nome))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma sugesto de grupo BNCC encontrada."})]}),o.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Grupos BNCC Atuais"}),o.jsx("p",{className:"text-sm text-gray-500 mb-3",children:'As atribuies de professores para estes grupos so feitas na aba "Atribuies".'}),a.bncc.length>0?o.jsx("ul",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto pr-2",children:a.bncc.map(x=>o.jsxs("li",{className:"py-3 flex justify-between items-center",children:[o.jsx("span",{className:"font-medium",children:x.nome}),o.jsx("button",{onClick:()=>m(x.id),className:`${S} bg-red-500 text-white hover:bg-red-600`,children:"Desfazer Grupo"})]},x.id))}):o.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum grupo BNCC foi criado."})]})]})})},rp=()=>{const{state:i,dispatch:u}=st(),[a,f]=$.useState(!1),[c,g]=$.useState(!1),[m,S]=$.useState(null),[x,w]=$.useState({nome:"",turmaId:"",divisao:!1,numProfessores:1,aulasSemanais:1}),[h,j]=$.useState("all"),[y,N]=$.useState({isOpen:!1,id:null});$.useEffect(()=>{!x.turmaId&&i.turmas.length>0&&w(T=>({...T,turmaId:i.turmas[0].id}))},[i.turmas,x.turmaId]);const C=$.useMemo(()=>i.turmas.find(T=>T.id===x.turmaId)?.isModular??!1,[x.turmaId,i.turmas]),P=T=>{if(S(T),T)w({...T});else{const W=i.turmas.length>0?i.turmas[0].id:"",A=i.turmas.find(B=>B.id===W)?.isModular?1.25:1;w({nome:"",turmaId:W,divisao:!1,numProfessores:1,aulasSemanais:A})}f(!0)},R=()=>{f(!1),S(null)},H=T=>{if(T.preventDefault(),!x.nome.trim()||!x.turmaId)return;const W={...x,numProfessores:x.divisao?x.numProfessores:1};u(m?{type:"UPDATE_DISCIPLINA",payload:{...m,...W}}:{type:"ADD_DISCIPLINA",payload:{id:`d${Date.now()}`,...W}}),R()},k=T=>{N({isOpen:!0,id:T})},p=()=>{y.id&&u({type:"DELETE_DISCIPLINA",payload:{id:y.id}}),N({isOpen:!1,id:null})},I=T=>{w(W=>{if(m)return{...W,turmaId:T};const A=i.turmas.find(B=>B.id===T)?.isModular?1.25:1;return{...W,turmaId:T,aulasSemanais:A}})},z=T=>i.turmas.find(W=>W.id===T)?.nome||"N/A",_=$.useMemo(()=>{if(h==="all")return i.disciplinas;const T=i.turmas.filter(W=>W.cursoId===h).map(W=>W.id);return i.disciplinas.filter(W=>T.includes(W.turmaId))},[i.disciplinas,i.turmas,h]);return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Disciplinas"}),o.jsxs("div",{className:"flex items-center space-x-4",children:[o.jsxs("div",{className:"w-64",children:[o.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Curso"}),o.jsxs("select",{id:"curso-filter",value:h,onChange:T=>j(T.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[o.jsx("option",{value:"all",children:"Todos os Cursos"}),i.cursos.map(T=>o.jsx("option",{value:T.id,children:T.nome},T.id))]})]}),o.jsx("button",{onClick:()=>g(!0),className:"self-end px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:"Gerenciar Grupos BNCC"}),o.jsx("button",{onClick:()=>P(null),className:"self-end px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",disabled:i.turmas.length===0,children:"Adicionar Disciplina"})]})]}),o.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:_.length>0?_.map(T=>o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[o.jsxs("div",{children:[o.jsx("h4",{className:"font-bold text-gray-800",children:T.nome}),o.jsx("p",{className:"text-sm text-gray-500",children:z(T.turmaId)}),o.jsxs("p",{className:"text-sm text-gray-500",children:[T.aulasSemanais," aulas/semana"]}),o.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[T.bnccId&&o.jsx("span",{className:"text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),T.divisao&&o.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",T.numProfessores,")"]})]})]}),o.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[o.jsx("button",{onClick:()=>P(T),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),o.jsx("button",{onClick:()=>k(T.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},T.id)):o.jsx("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:i.disciplinas.length===0?"Nenhuma disciplina cadastrada.":"Nenhuma disciplina encontrada para o filtro selecionado."})}),o.jsx(Vr,{isOpen:a,onClose:R,title:m?"Editar Disciplina":"Adicionar Disciplina",children:o.jsxs("form",{onSubmit:H,className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nome da Disciplina"}),o.jsx("input",{type:"text",value:x.nome,onChange:T=>w({...x,nome:T.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Aulas por Semana"}),o.jsx("input",{type:"number",min:C?"1.25":"1",step:C?"1.25":"1",value:x.aulasSemanais,onChange:T=>w({...x,aulasSemanais:parseFloat(T.target.value)||(C?1.25:1)}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Turma"}),o.jsx("select",{value:x.turmaId,onChange:T=>I(T.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:i.turmas.map(T=>o.jsx("option",{value:T.id,children:T.nome},T.id))})]}),o.jsxs("div",{className:"flex items-start",children:[o.jsx("div",{className:"flex items-center h-5",children:o.jsx("input",{id:"divisao",type:"checkbox",checked:x.divisao,onChange:T=>w({...x,divisao:T.target.checked}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),o.jsx("div",{className:"ml-3 text-sm",children:o.jsx("label",{htmlFor:"divisao",className:"font-medium text-gray-700",children:"Diviso de turma?"})})]}),x.divisao&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nmero de Professores"}),o.jsx("input",{type:"number",min:"2",value:x.numProfessores,onChange:T=>w({...x,numProfessores:parseInt(T.target.value)||2}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:R,className:"px-4 py-2 bg-gray-200 rounded-md",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Salvar"})]})]})}),o.jsx(Os,{isOpen:y.isOpen,onClose:()=>N({isOpen:!1,id:null}),onConfirm:p,title:"Confirmar Excluso de Disciplina",message:"Tem certeza que deseja excluir esta disciplina? Todas as atribuies e aulas associadas tambm sero removidas permanentemente."}),o.jsx(tp,{isOpen:c,onClose:()=>g(!1)})]})},np=({disponibilidade:i,onAvailabilityChange:u})=>{const a=(m,S)=>{const x={...i};x[m]||(x[m]=[]);const w=x[m].includes(S);x[m]=w?x[m].filter(h=>h!==S):[...x[m],S],u(x)},f=(m,S)=>{const x={...i};x[m]||(x[m]=[]);const w=S.every(j=>x[m].includes(j));let h=[...x[m]];w?h=h.filter(j=>!S.includes(j)):S.forEach(j=>{h.includes(j)||h.push(j)}),x[m]=h,u(x)},c=m=>{const S={...i},x=De.every(w=>S[w]?.includes(m));De.forEach(w=>{S[w]||(S[w]=[]);const h=S[w].includes(m);x?h&&(S[w]=S[w].filter(j=>j!==m)):h||S[w].push(m)}),u(S)},g=({label:m,horarios:S})=>o.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50/50",children:[o.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:m}),o.jsxs("div",{className:"grid gap-px",style:{gridTemplateColumns:"auto repeat(6, 1fr)"},children:[o.jsx("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center sticky top-0 bg-gray-50",children:"Horrio"}),De.map(x=>o.jsx("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center capitalize sticky top-0 bg-gray-50",children:o.jsx("button",{onClick:()=>f(x,S),className:"hover:text-indigo-600 w-full",title:`Marcar/desmarcar todos os horrios da ${m.toLowerCase()} para ${x}`,children:x})},x)),o.jsx("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center sticky top-0 bg-gray-50",children:"Aes"}),S.map(x=>o.jsxs(an.Fragment,{children:[o.jsx("div",{className:"text-sm font-mono px-1 py-2 text-center flex items-center justify-center bg-white",children:x}),De.map(w=>{const h=i[w]?.includes(x)??!1;return o.jsx("div",{className:"py-1 px-0.5 flex items-center justify-center bg-white",children:o.jsx("button",{type:"button",onClick:()=>a(w,x),className:`w-6 h-6 rounded-md transition-colors ${h?"bg-emerald-500 hover:bg-emerald-600":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":`Disponibilidade para ${w} s ${x}: ${h?"Disponvel":"Indisponvel"}`})},`${w}-${x}`)}),o.jsx("div",{className:"py-1 px-0.5 flex items-center justify-center bg-white",children:o.jsx("button",{onClick:()=>c(x),className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded-full text-xs font-semibold hover:bg-indigo-200 transition-colors",title:`Marcar/desmarcar ${x} para todos os dias`,children:"Todos"})})]},x))]})]});return o.jsxs("div",{className:"space-y-4",children:[o.jsx(g,{label:"Manh",horarios:nt}),o.jsx(g,{label:"Tarde",horarios:ot}),o.jsx(g,{label:"Noite",horarios:jr})]})},op=()=>{const{state:i,dispatch:u}=st(),[a,f]=$.useState(!1),[c,g]=$.useState(new Set),[m,S]=$.useState([]),[x,w]=$.useState({nome:"",disponibilidade:{}}),[h,j]=$.useState(""),[y,N]=$.useState({isOpen:!1,ids:[]}),[C,P]=$.useState(""),R=$.useRef(null),H=$.useRef(0),k=$.useMemo(()=>[...i.professores].sort((K,oe)=>K.nome.localeCompare(oe.nome)),[i.professores]),p=$.useMemo(()=>C.trim()?k.filter(K=>K.nome.toLowerCase().includes(C.toLowerCase())):k,[k,C]),I=K=>{const oe=new Set(c);oe.has(K)?oe.delete(K):oe.add(K),g(oe)},z=()=>{c.size===p.length?g(new Set):g(new Set(p.map(K=>K.id)))},_=()=>{S([]),w({nome:"",disponibilidade:{}}),j(""),H.current=0,f(!0)},T=()=>{if(c.size===0)return;const K=k.filter(oe=>c.has(oe.id));if(S(K),K.length===1)w({...K[0]});else if(K.length>1){const oe={},V=[...nt,...ot,...jr];De.forEach(re=>{oe[re]=V.filter(Z=>K.every(D=>D.disponibilidade[re]?.includes(Z)))}),w({nome:"",disponibilidade:oe})}j(""),H.current=0,f(!0)},W=()=>{f(!1)},O=K=>{if(K.preventDefault(),m.length>0){if(m.length===1&&!x.nome.trim())return;m.forEach(oe=>{const V={...oe,nome:m.length===1?x.nome:oe.nome,disponibilidade:x.disponibilidade};u({type:"UPDATE_PROFESSOR",payload:V})})}else{if(!x.nome.trim())return;u({type:"ADD_PROFESSOR",payload:{id:`p${Date.now()}`,...x}})}W(),g(new Set)},A=()=>{c.size!==0&&N({isOpen:!0,ids:Array.from(c)})},B=()=>{y.ids.forEach(K=>{u({type:"DELETE_PROFESSOR",payload:{id:K}})}),N({isOpen:!1,ids:[]}),g(new Set)},te=()=>{if(!h)return;const K=i.professores.find(oe=>oe.id===h);if(K){const oe=JSON.parse(JSON.stringify(K.disponibilidade));w(V=>({...V,disponibilidade:oe}))}},ee=K=>{R.current&&(H.current=R.current.scrollTop),w(oe=>({...oe,disponibilidade:K}))};$.useLayoutEffect(()=>{R.current&&(R.current.scrollTop=H.current)},[x.disponibilidade]);const de=p.length>0&&c.size===p.length,pe=m.length===0?"Adicionar Professor":m.length>1?`Editar Disponibilidade de ${m.length} Professores`:"Editar Professor";return o.jsxs("div",{children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Professores"}),o.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2 w-full md:w-auto",children:[o.jsx("input",{type:"text",value:C,onChange:K=>P(K.target.value),placeholder:"Buscar por nome...",className:"block w-full sm:w-48 pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"}),o.jsx("button",{onClick:_,className:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Adicionar"}),o.jsx("button",{onClick:T,disabled:c.size===0,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Editar Selecionados"}),o.jsx("button",{onClick:A,disabled:c.size===0,className:"w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400",children:"Excluir Selecionados"})]})]}),o.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[o.jsx("div",{className:"px-4 sm:px-6 py-3 border-b border-gray-200 bg-gray-50 rounded-t-lg",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:de,onChange:z,"aria-label":"Selecionar todos os professores"}),o.jsx("span",{className:"ml-3 text-sm font-medium text-gray-600",children:c.size>0?`${c.size} selecionado(s)`:`Selecionar Todos (${p.length})`})]})}),o.jsx("div",{className:"divide-y divide-gray-200",children:p.length>0?p.map(K=>o.jsx("div",{className:"px-4 sm:px-6 py-3 flex items-center justify-between hover:bg-gray-50/50 transition-colors",children:o.jsxs("label",{htmlFor:`prof-select-${K.id}`,className:"flex items-center cursor-pointer",children:[o.jsx("input",{id:`prof-select-${K.id}`,type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:c.has(K.id),onChange:()=>I(K.id)}),o.jsx("span",{className:"ml-3 font-medium text-gray-800",children:K.nome})]})},K.id)):o.jsx("div",{className:"px-6 py-4 text-center text-gray-500",children:i.professores.length===0?"Nenhum professor cadastrado.":"Nenhum professor encontrado para o filtro selecionado."})})]}),o.jsx(Vr,{isOpen:a,onClose:W,title:pe,size:"5xl",contentRef:R,children:o.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.length<=1&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Nome do Professor"}),o.jsx("input",{type:"text",value:x.nome,onChange:K=>w({...x,nome:K.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),m.length<=1&&o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium",children:"Copiar Disponibilidade de:"}),o.jsxs("div",{className:"mt-1 flex space-x-2",children:[o.jsxs("select",{value:h,onChange:K=>j(K.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",disabled:i.professores.filter(K=>K.id!==(m[0]?.id||"")).length===0,children:[o.jsx("option",{value:"",children:"Selecione um professor..."}),i.professores.filter(K=>K.id!==(m[0]?.id||"")).sort((K,oe)=>K.nome.localeCompare(oe.nome)).map(K=>o.jsx("option",{value:K.id,children:K.nome},K.id))]}),o.jsx("button",{type:"button",onClick:te,disabled:!h,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed",children:"Copiar"})]})]}),o.jsxs("div",{children:[o.jsx("h4",{className:"text-sm font-medium mb-2",children:"Disponibilidade"}),m.length>1&&o.jsxs("p",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded-md mb-2",children:[o.jsx("strong",{children:"Ateno:"})," Voc est editando mltiplos professores. Um horrio aparecer marcado apenas se TODOS os professores selecionados estiverem disponveis. Qualquer alterao aqui ser aplicada a TODOS."]}),o.jsx(np,{disponibilidade:x.disponibilidade,onAvailabilityChange:ee})]}),o.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:W,className:"px-4 py-2 bg-gray-200 rounded-md",children:"Cancelar"}),o.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Salvar"})]})]})}),o.jsx(Os,{isOpen:y.isOpen,onClose:()=>N({isOpen:!1,ids:[]}),onConfirm:B,title:`Confirmar Excluso de ${y.ids.length} Professor(es)`,message:`Tem certeza que deseja excluir ${y.ids.length>1?`os ${y.ids.length} professores selecionados`:"este professor"}? Eles sero removidos de todas as atribuies e aulas permanentemente.`})]})},yd=({allProfessors:i,selectedProfessorIds:u,onSelectionChange:a,maxSelection:f=1})=>{const[c,g]=$.useState(""),[m,S]=$.useState(!1),x=$.useRef(null),w=$.useMemo(()=>u.map(C=>i.find(P=>P.id===C)).filter(C=>!!C),[u,i]),h=$.useMemo(()=>{const C=c.toLowerCase();return i.filter(P=>P.nome.toLowerCase().includes(C))},[c,i]);$.useEffect(()=>{const C=P=>{x.current&&!x.current.contains(P.target)&&S(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[x]);const j=C=>{u.length<f&&(a([...u,C]),g(""),S(!1))},y=C=>{a(u.filter((P,R)=>R!==C))},N=u.length<f;return o.jsxs("div",{className:"relative",ref:x,children:[o.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md bg-white min-h-[42px]",children:[w.map((C,P)=>o.jsxs("div",{className:"flex items-center bg-indigo-100 text-indigo-800 text-sm font-medium px-2 py-1 rounded-full",children:[o.jsx("span",{children:C.nome}),o.jsx("button",{type:"button",onClick:()=>y(P),className:"ml-2 text-indigo-500 hover:text-indigo-700 focus:outline-none","aria-label":`Remover ${C.nome}`,children:""})]},`${C.id}-${P}`)),N&&o.jsx("input",{type:"text",value:c,onChange:C=>g(C.target.value),onFocus:()=>S(!0),placeholder:"Adicionar professor...",className:"flex-grow p-1 bg-transparent focus:outline-none"})]}),m&&N&&o.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:h.length>0?h.map(C=>o.jsx("li",{onClick:()=>j(C.id),className:"px-4 py-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100",children:C.nome},C.id)):o.jsx("li",{className:"px-4 py-2 text-sm text-gray-500 cursor-default",children:"Nenhum professor encontrado."})})]})},sp=()=>{const{state:i,dispatch:u}=st(),{disciplinas:a,professores:f,atribuicoes:c,turmas:g,cursos:m}=i,[S,x]=$.useState(""),w=[...f].sort((R,H)=>R.nome.localeCompare(H.nome)),h=[...m].sort((R,H)=>R.nome.localeCompare(H.nome)),j=R=>c.find(H=>H.disciplinaId===R)?.professores||[],y=(R,H)=>{H.length===0?u({type:"DELETE_ATRIBUICAO",payload:{disciplinaId:R}}):u({type:"UPDATE_ATRIBUICAO",payload:{disciplinaId:R,professores:H}})},N=$.useMemo(()=>{if(!S.trim())return null;const R=S.toLowerCase();return w.filter(p=>p.nome.toLowerCase().includes(R)).map(p=>{const I=c.filter(z=>z.professores.includes(p.id)).map(z=>a.find(_=>_.id===z.disciplinaId)).filter(z=>!!z);return{professor:p,disciplinas:I.sort((z,_)=>z.nome.localeCompare(_.nome))}}).filter(p=>p.disciplinas.length>0)},[S,w,c,a]),C=()=>o.jsx(o.Fragment,{children:h.length>0?h.map(R=>{const H=g.filter(k=>k.cursoId===R.id).sort((k,p)=>k.nome.localeCompare(p.nome));return H.length===0?null:o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:[o.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-4 pb-2 border-b",children:R.nome}),o.jsx("div",{className:"space-y-6",children:H.map(k=>{const p=a.filter(I=>I.turmaId===k.id).sort((I,z)=>I.nome.localeCompare(z.nome));return p.length===0?null:o.jsxs("div",{children:[o.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[k.nome,k.isModular&&o.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 font-semibold ml-2 px-2 py-0.5 rounded-full",children:"Modular"})]}),o.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(I=>o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[o.jsxs("div",{className:"mb-2",children:[o.jsx("span",{className:"text-sm font-bold text-gray-700",children:I.nome}),I.bnccId&&o.jsx("span",{className:"ml-2 text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),I.divisao&&o.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",I.numProfessores,")"]})]}),o.jsx(yd,{allProfessors:w,selectedProfessorIds:j(I.id),onSelectionChange:z=>y(I.id,z),maxSelection:I.numProfessores})]},I.id))})]},k.id)})})]},R.id)}):o.jsx("div",{className:"text-center text-gray-500 py-8 bg-white rounded-lg shadow",children:"Nenhum curso cadastrado. Por favor, adicione cursos na aba 'Cursos'."})}),P=()=>o.jsx(o.Fragment,{children:N&&N.length>0?N.map(({professor:R,disciplinas:H})=>o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:[o.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-4 pb-2 border-b",children:R.nome}),o.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:H.map(k=>{const p=g.find(z=>z.id===k.turmaId),I=m.find(z=>z.id===p?.cursoId);return o.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[o.jsxs("div",{className:"mb-1",children:[o.jsx("span",{className:"text-sm font-bold text-gray-700",children:k.nome}),k.bnccId&&o.jsx("span",{className:"ml-2 text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),k.divisao&&o.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",k.numProfessores,")"]})]}),o.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[I?.nome," / ",p?.nome]}),o.jsx(yd,{allProfessors:w,selectedProfessorIds:j(k.id),onSelectionChange:z=>y(k.id,z),maxSelection:k.numProfessores})]},k.id)})})]},R.id)):o.jsxs("div",{className:"text-center text-gray-500 py-8 bg-white rounded-lg shadow",children:['Nenhum professor encontrado com o nome "',S,'" que possua atribuies.']})});return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center mb-4",children:[o.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Atribuies"}),o.jsxs("div",{className:"w-64",children:[o.jsx("label",{htmlFor:"professor-search-atribuicao",className:"block text-sm font-medium text-gray-700",children:"Buscar por Professor"}),o.jsx("input",{type:"text",id:"professor-search-atribuicao",value:S,onChange:R=>x(R.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]})]}),o.jsx("div",{className:"space-y-8",children:S.trim()?P():C()})]})},lp=i=>{const u=i.toLowerCase();return u.includes("manh")?"manha":u.includes("tarde")?"tarde":u.includes("noite")?"noite":"manha"},Ms=(i,u)=>{let a=0;for(let c=0;c<i.length;c++){const g=i.charCodeAt(c);a=(a<<5)-a+g,a|=0}const f=i.trim().toLowerCase().replace(/[^a-z0-9]/g,"");return`${u}-${f.substring(0,30)}-${Math.abs(a).toString(36)}`},ip=i=>{const a=new DOMParser().parseFromString(i,"text/html"),f=new Map,c=new Map,g=new Map,m=new Map,S=[],x=["ensino mdio","mtec","novotec","integrado"],w=j=>{const y=j.trim();if(!y)return m.has("Vago")||m.set("Vago",{id:"p-vago",nome:"Vago",disponibilidade:{}}),m.get("Vago");if(!m.has(y)){const N={id:Ms(y,"p"),nome:y,disponibilidade:{}};m.set(y,N)}return m.get(y)};a.querySelectorAll("tr.success").forEach(j=>{j.textContent;const y=Array.from(j.querySelectorAll("strong")),N=Array.from(j.querySelectorAll("b")),C=(A,B)=>{for(const te of B)if(te&&te.previousSibling?.textContent?.includes(A))return te.textContent?.trim()||null;return null},P=C("Curso:",N)||"Curso Desconhecido",R=!x.some(A=>P.toLowerCase().includes(A)),H=P.replace(/\s*\(.*?\)\s*/g," ").trim(),k=C("Turma:",y),p=C("Perodo:",y);if(!k||!p)return;f.has(H)||f.set(H,{id:Ms(H,"c"),nome:H});const I=f.get(H),z=`${I.nome}-${k}`;c.has(z)||c.set(z,{id:Ms(z,"t"),cursoId:I.id,nome:k,periodo:lp(p),isModular:R});const _=c.get(z),T=j.nextElementSibling?.querySelector("table.table-condensed");if(!T)return;const W=Array.from(T.querySelectorAll("tbody > tr:not(.warning)")),O=new Map;W.forEach(A=>{const B=A.querySelectorAll("td");if(B.length<7)return;const te=B[0].querySelector("a");if(!te)return;const pe=(te.textContent||"").trim().replace(/^\(\d+\)_/,"").trim().replace(/\s*\(.*?\)\s*/g," ").trim(),K=parseFloat((B[4].textContent||"0").replace(",",".")),oe=R?K:Math.round(K);O.has(pe)||O.set(pe,{rows:[],aulasSemanais:oe}),O.get(pe).rows.push(A)}),O.forEach((A,B)=>{const{rows:te,aulasSemanais:ee}=A;if(te.length===0)return;const de=te.length>1,pe=[];te.forEach(V=>{const Z=(V.querySelectorAll("td")[6].textContent||"").trim();pe.push(w(Z).id)});const K=`${_.id}-${B}`;if(!g.has(K)){const V={id:Ms(K,"d"),turmaId:_.id,nome:B,aulasSemanais:ee,divisao:de,numProfessores:te.length};g.set(K,V)}const oe=g.get(K);pe.length>0&&(S.find(re=>re.disciplinaId===oe.id)||S.push({disciplinaId:oe.id,professores:pe.filter(re=>re!=="p-vago")}))})});const h=Array.from(m.values());return{ano:new Date().getFullYear(),cursos:Array.from(f.values()),turmas:Array.from(c.values()),disciplinas:Array.from(g.values()),professores:h,atribuicoes:S,grade:[],alertas:[]}},ap=()=>{const{dispatch:i}=st(),[u,a]=$.useState("upload"),[f,c]=$.useState(null),[g,m]=$.useState(null),[S,x]=$.useState({}),[w,h]=$.useState(!1),[j,y]=$.useState(null),N=k=>{const p=k.target.files?.[0];p&&(c(p),y(null))},C=()=>{if(!f){y("Por favor, selecione um arquivo HTML.");return}h(!0),y(null);const k=new FileReader;k.onload=p=>{try{const I=p.target?.result,z=ip(I);if(m(z),z.turmas){const _={};z.turmas.forEach(T=>{_[T.id]=T.isModular}),x(_)}a("validate")}catch(I){y("Ocorreu um erro ao analisar o arquivo. Verifique se o formato est correto."),console.error(I)}finally{h(!1)}},k.onerror=()=>{y("No foi possvel ler o arquivo."),h(!1)},k.readAsText(f,"UTF-8")},P=()=>{if(g){const k=g.turmas?.map(I=>({...I,isModular:S[I.id]??I.isModular}))??[],p={version:"1.0",ano:g.ano??new Date().getFullYear(),cursos:g.cursos??[],turmas:k,disciplinas:g.disciplinas??[],professores:g.professores??[],atribuicoes:g.atribuicoes??[],grade:[],alertas:[],bncc:[],toastMessage:null,draggedItem:null,clipboard:null,selectedSlotId:null,onlineUsers:[],saveStatus:"saved",lastModifiedBy:null,lastModifiedAt:null};i({type:"SET_STATE",payload:p}),a("success")}},R=()=>{c(null),m(null),y(null),h(!1),a("upload")},H=(k,p)=>{x(I=>({...I,[k]:p}))};return o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Importar Dados de HTML (SIG)"}),u==="upload"&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Passo 1: Selecionar Arquivo"}),o.jsx("p",{className:"text-sm text-gray-600",children:'Selecione o arquivo HTML salvo a partir da pgina "Consultar Quadros" do sistema SIG-URH. O sistema ir extrair os cursos, turmas, disciplinas e professores.'}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"html-upload-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo HTML"}),o.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[o.jsx("label",{htmlFor:"html-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Escolher arquivo"}),o.jsx("input",{id:"html-upload",name:"html-upload",type:"file",accept:".html,.htm",onChange:N,className:"sr-only"}),f?o.jsx("span",{className:"text-sm text-gray-600",children:f.name}):o.jsx("span",{className:"text-sm text-gray-500",children:"Nenhum arquivo selecionado"})]})]}),j&&o.jsx("p",{className:"text-sm text-red-600",children:j}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:C,disabled:!f||w,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:w?"Analisando...":"Analisar Arquivo"})})]}),u==="validate"&&g&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Passo 2: Validar Dados"}),o.jsxs("p",{className:"text-sm text-gray-600",children:["Os seguintes dados foram encontrados. ",o.jsx("strong",{children:"Ateno:"})," A importao substituir todos os dados existentes."]}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[o.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold",children:g.cursos?.length||0}),o.jsx("div",{className:"text-sm",children:"Cursos"})]}),o.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold",children:g.turmas?.length||0}),o.jsx("div",{className:"text-sm",children:"Turmas"})]}),o.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold",children:g.disciplinas?.length||0}),o.jsx("div",{className:"text-sm",children:"Disciplinas"})]}),o.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[o.jsx("div",{className:"text-2xl font-bold",children:g.professores?.length||0}),o.jsx("div",{className:"text-sm",children:"Professores"})]})]}),o.jsxs("div",{className:"mt-4 border-t pt-4",children:[o.jsx("h4",{className:"font-semibold",children:"Validar Classificao das Turmas"}),o.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Verifique a lista de turmas importadas. Marque a caixa ao lado de cada turma que deve ser considerada 'Modular'. Turmas no marcadas sero tratadas como 'Regular' (Ensino Mdio, MTec, etc.)."}),o.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border p-3 rounded-md bg-gray-50",children:g.turmas&&g.turmas.length>0?g.turmas.slice().sort((k,p)=>k.nome.localeCompare(p.nome)).map(k=>o.jsxs("div",{className:"flex items-center p-1 hover:bg-gray-100 rounded",children:[o.jsx("input",{type:"checkbox",id:`turma-modular-toggle-${k.id}`,checked:S[k.id]??!1,onChange:p=>H(k.id,p.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),o.jsx("label",{htmlFor:`turma-modular-toggle-${k.id}`,className:"ml-3 block text-sm font-medium text-gray-700 cursor-pointer",children:k.nome})]},k.id)):o.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma turma encontrada no arquivo."})})]}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx("button",{onClick:R,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirmar e Importar"})]})]}),u==="success"&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow text-center space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-green-700",children:"Importao Concluda!"}),o.jsx("p",{children:"Os dados foram importados com sucesso. Voc j pode navegar para as outras abas de gerenciamento para ver os resultados."}),o.jsx("button",{onClick:R,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Importar Novo Arquivo"})]})]})},Ni={"2":"segunda","3":"terca","4":"quarta","5":"quinta","6":"sexta"},jo={MANHA:{horarios:nt,title:"Dias da Semana Manh"},TARDE:{horarios:ot,title:"Dias da Semana Tarde"},NOITE:{horarios:jr,title:"Dias da Semana Noite"}},On=i=>{if(i.value===null||i.value===void 0)return"";if(i.value&&typeof i.value=="object"&&"richText"in i.value){const u=i.value;if(Array.isArray(u.richText))return u.richText.map(a=>a.text).join("")}return i.value.toString()},up=async i=>{console.log("Iniciando anlise da planilha...");const u=new Ls.Workbook;await u.xlsx.load(i);const a=u.worksheets[0];if(!a)throw new Error("A planilha est vazia ou no pde ser lida.");const f=[],c=[];if(a.eachRow((g,m)=>{let S="";g.eachCell(x=>{const w=On(x).trim();w.toLowerCase().startsWith("docente:")&&(S=w.substring(8).trim())}),S&&(console.log(`Encontrado "Docente:": ${S} na linha ${m}`),c.push({name:S,row:m}))}),c.length===0)throw new Error("Nenhum professor encontrado. Verifique se a planilha contm a linha 'Docente:'.");for(const g of c){const m={segunda:[],terca:[],quarta:[],quinta:[],sexta:[]};let S=-1;for(let y=g.row;y<=a.rowCount&&y<g.row+10;y++){const N=a.getRow(y);let C=!1;if(N.eachCell(P=>{On(P).includes(jo.MANHA.title)&&(C=!0)}),C){S=y,console.log(`Cabealho da tabela encontrado para ${g.name} na linha ${S}`);break}}if(S===-1){console.warn(`Tabelas no encontradas para o professor: ${g.name}`);continue}const x=a.getRow(S),w=a.getRow(S+1),h={};x.eachCell((y,N)=>{const C=On(y);C.includes(jo.MANHA.title)&&(h.MANHA=N),C.includes(jo.TARDE.title)&&(h.TARDE=N),C.includes(jo.NOITE.title)&&(h.NOITE=N)});for(const y of Object.keys(h)){const N=h[y],{horarios:C}=jo[y],P={},R=8;for(let I=0;I<R;I++){const z=N+I,_=w.getCell(z),T=On(_).trim();Ni[T]&&(P[Ni[T]]=z)}const H=Object.keys(Ni).length;Object.keys(P).length<H&&console.warn(`Apenas ${Object.keys(P).length} de ${H} dias foram mapeados para ${g.name} [${y}]`),console.log(`Mapeamento de colunas para ${g.name} [${y}]:`,P);const k=N-1,p=6;console.log(`
=== Processando perodo ${y} para ${g.name} ===`),console.log(`Coluna inicial (dias): ${N}, Coluna 'Aulas': ${k}`),console.log(`Linha do cabealho dos dias: ${w.number}`),console.log("Horrios disponveis no perodo:",C);for(let I=0;I<p;I++){const z=a.getRow(w.number+1+I),_=z.getCell(k),W=On(_).trim().match(/^(\d+)/);if(W){const O=parseInt(W[1],10)-1;if(O>=0&&O<C.length){const A=C[O];for(const B in P){const te=P[B],ee=z.getCell(te);On(ee).trim().toLowerCase()==="x"&&(m[B].includes(A)||m[B].push(A))}}}}}const j=Object.values(m).reduce((y,N)=>y+N.length,0);console.log(`Disponibilidades encontradas para ${g.name}: ${j} horrios.`),f.push({name:g.name,availability:m})}return console.log("Anlise finalizada.",f),f},dp=async()=>{const i=new Ls.Workbook,u=i.addWorksheet("Disponibilidade"),a={name:"Calibri",size:11,bold:!0},f={name:"Calibri",size:14,bold:!0},c={vertical:"middle",horizontal:"center"},g={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},m={manha:{start:2,title:"Dias da Semana Manh"},tarde:{start:10,title:"Dias da Semana Tarde"},noite:{start:18,title:"Dias da Semana Noite"}},S=7,x=m.noite.start+S-1;u.mergeCells(3,2,3,x);const w=u.getCell(3,2);w.value="RELATRIO DE DISPONIBILIDADES DOS DOCENTES",w.font=f,w.alignment=c,u.mergeCells(4,2,4,x),u.getCell(4,2).value="Semestre/ano: 1/2025",u.getCell(4,2).font=a;let j=(N=>{u.mergeCells(N,2,N,x);const C=u.getCell(N,2);C.value={richText:[{text:"Docente: ",font:{name:"Calibri",size:12,bold:!0}},{text:"NOME COMPLETO DO DOCENTE EM MAISCULAS",font:{name:"Calibri",size:12,bold:!0}}]};const P=N+2,R=N+3,H=N+4;return Object.values(m).forEach(k=>{u.mergeCells(P,k.start,P,k.start+S-1);const p=u.getCell(P,k.start);p.value=k.title,p.font=a,p.alignment=c,["Aulas","2","3","4","5","6","Sb"].forEach((z,_)=>{const T=u.getCell(R,k.start+_);T.value=z,T.font=a,T.alignment=c,T.border=g});for(let z=0;z<6;z++){const _=H+z,T=u.getCell(_,k.start);T.value=`${z+1}`,T.font=a,T.alignment=c,T.border=g;for(let W=1;W<S;W++){const O=u.getCell(_,k.start+W);O.border=g,O.alignment=c,k.start===m.manha.start&&z<2&&W<3&&(O.value="X")}}}),H+6})(5);u.mergeCells(j+1,2,j+1,x);const y=u.getCell(j+1,2);return y.value="Para adicionar mais professores, copie o bloco acima (linhas 5 a 15) e cole abaixo, depois preencha os dados.",y.font={italic:!0,color:{argb:"FF666666"}},u.getColumn(1).width=2,u.getColumn(9).width=2,u.getColumn(17).width=2,Object.values(m).forEach(N=>{u.getColumn(N.start).width=8;for(let C=1;C<S;C++)u.getColumn(N.start+C).width=5}),i},vd=i=>i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),cp=()=>{const{state:i,dispatch:u}=st(),[a,f]=$.useState("upload"),[c,g]=$.useState(null),[m,S]=$.useState([]),[x,w]=$.useState(!1),[h,j]=$.useState(null),y=p=>{const I=p.target.files?.[0];I&&(g(I),j(null))},N=async()=>{try{const I=await(await dp()).xlsx.writeBuffer(),z=new Blob([I],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),_=URL.createObjectURL(z),T=document.createElement("a");T.href=_,T.download="modelo_disponibilidade.xlsx",document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(_)}catch(p){console.error("Error generating template:",p),j("No foi possvel gerar o modelo de planilha.")}},C=()=>{if(!c){j("Por favor, selecione um arquivo Excel.");return}w(!0),j(null);const p=new FileReader;p.onload=async I=>{try{const z=I.target?.result,_=await up(z);if(_.length===0)throw new Error("Nenhum professor encontrado na planilha. Verifique se o formato est correto ou use o modelo.");const T=i.professores,W=_.map(O=>{const A=T.find(B=>vd(B.nome)===vd(O.name));return{parsed:O,matchId:A?A.id:"not_found"}});S(W),f("validate")}catch(z){j(z.message||"Ocorreu um erro ao analisar a planilha. Verifique se o formato est correto."),console.error(z)}finally{w(!1)}},p.onerror=()=>{j("No foi possvel ler o arquivo."),w(!1)},p.readAsArrayBuffer(c)},P=(p,I)=>{const z=[...m];z[p].matchId=I,S(z)},R=()=>{const p=[];m.forEach(I=>{if(I.matchId!=="not_found"&&I.matchId!=="ignore"){const z=i.professores.find(_=>_.id===I.matchId);z&&p.push({...z,disponibilidade:I.parsed.availability})}}),p.length>0?(u({type:"BATCH_UPDATE_PROFESSORS",payload:{professors:p}}),f("success")):j("Nenhum professor foi selecionado para atualizao. Verifique os pareamentos.")},H=()=>{g(null),S([]),j(null),w(!1),f("upload")},k=$.useMemo(()=>[...i.professores].sort((p,I)=>p.nome.localeCompare(I.nome)),[i.professores]);return o.jsxs("div",{className:"max-w-4xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Importar Disponibilidade de Professores (Excel)"}),a==="upload"&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-6",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Instrues"}),o.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-600 mt-2 space-y-1",children:[o.jsx("li",{children:"Baixe o modelo de planilha para garantir o formato correto."}),o.jsx("li",{children:"Preencha a planilha com os dados de disponibilidade dos professores, marcando 'X' nos horrios disponveis."}),o.jsx("li",{children:"Salve a planilha e selecione o arquivo abaixo."}),o.jsx("li",{children:'Clique em "Analisar Planilha" para continuar.'})]})]}),o.jsx("div",{className:"flex justify-start",children:o.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Baixar Modelo de Planilha"]})}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"excel-upload-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo Excel (.xlsx)"}),o.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[o.jsx("label",{htmlFor:"excel-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Escolher arquivo"}),o.jsx("input",{id:"excel-upload",name:"excel-upload",type:"file",accept:".xlsx",onChange:y,className:"sr-only"}),c?o.jsx("span",{className:"text-sm text-gray-600",children:c.name}):o.jsx("span",{className:"text-sm text-gray-500",children:"Nenhum arquivo selecionado"})]})]}),h&&o.jsx("p",{className:"text-sm text-red-600",children:h}),o.jsx("div",{className:"flex justify-end",children:o.jsx("button",{onClick:C,disabled:!c||x,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:x?"Analisando...":"Analisar Planilha"})})]}),a==="validate"&&m.length>0&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold",children:"Passo 2: Validar Pareamento"}),o.jsx("p",{className:"text-sm text-gray-600",children:"O sistema tentou parear os professores da planilha com os do sistema. Por favor, revise e ajuste os pareamentos. A disponibilidade dos professores selecionados ser **substituda**."}),h&&o.jsx("p",{className:"text-sm text-red-600",children:h}),o.jsx("div",{className:"overflow-x-auto border rounded-lg",children:o.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[o.jsx("thead",{className:"bg-gray-50",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome na Planilha"}),o.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Professor no Sistema"})]})}),o.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((p,I)=>o.jsxs("tr",{className:p.matchId==="not_found"?"bg-yellow-50":p.matchId==="ignore"?"bg-gray-100 opacity-60":"",children:[o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:p.parsed.name}),o.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:o.jsxs("select",{value:p.matchId,onChange:z=>P(I,z.target.value),className:"w-full p-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[p.matchId==="not_found"&&o.jsx("option",{value:"not_found",children:"-- Nenhum professor encontrado --"}),o.jsx("option",{value:"ignore",children:"Ignorar este professor"}),k.map(z=>o.jsx("option",{value:z.id,children:z.nome},z.id))]})})]},I))})]})}),o.jsxs("div",{className:"flex justify-end space-x-2",children:[o.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{onClick:R,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirmar e Atualizar"})]})]}),a==="success"&&o.jsxs("div",{className:"bg-white p-6 rounded-lg shadow text-center space-y-4",children:[o.jsx("h3",{className:"text-lg font-semibold text-green-700",children:"Importao Concluda!"}),o.jsx("p",{children:'A disponibilidade dos professores selecionados foi atualizada com sucesso. Voc pode verificar as mudanas na aba "Professores".'}),o.jsx("button",{onClick:H,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Importar Nova Planilha"})]})]})},fp=()=>{const[i,u]=$.useState("cursos"),a=()=>{switch(i){case"cursos":return o.jsx(Zf,{});case"turmas":return o.jsx(ep,{});case"disciplinas":return o.jsx(rp,{});case"professores":return o.jsx(op,{});case"atribuicoes":return o.jsx(sp,{});case"importar-html":return o.jsx(ap,{});case"importar-disp-excel":return o.jsx(cp,{});default:return null}},f=({tabName:c,label:g,disabled:m})=>o.jsx("button",{onClick:()=>u(c),disabled:m,title:m?"Funo em desenvolvimento":"",className:`px-4 py-2 text-sm font-medium border-b-2 ${i===c?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:hover:border-transparent`,children:g});return o.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[o.jsx("div",{className:"border-b border-gray-200",children:o.jsxs("nav",{className:"-mb-px flex space-x-4 px-4 overflow-x-auto","aria-label":"Tabs",children:[o.jsx(f,{tabName:"cursos",label:"Cursos"}),o.jsx(f,{tabName:"turmas",label:"Turmas"}),o.jsx(f,{tabName:"disciplinas",label:"Disciplinas"}),o.jsx(f,{tabName:"professores",label:"Professores"}),o.jsx(f,{tabName:"atribuicoes",label:"Atribuies"}),o.jsx(f,{tabName:"importar-html",label:"Importar SIG (HTML)"}),o.jsx(f,{tabName:"importar-disp-excel",label:"Importar Disp. (Excel)",disabled:!0})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:a()})]})},pp=({professorId:i})=>{const{state:u}=st(),{professores:a,grade:f,turmas:c,disciplinas:g}=u,m=a.find(y=>y.id===i);if(!m)return o.jsx("div",{className:"p-4 text-red-500",children:"Professor no encontrado."});const S=f.filter(y=>y.professorId===i),x=$.useMemo(()=>S.reduce((y,N)=>{const P=c.find(R=>R.id===N.turmaId)?.isModular?1.25:1;return y+P},0),[S,c]),w={};S.forEach(y=>{w[y.dia]||(w[y.dia]={});const N=c.find(P=>P.id===y.turmaId)?.nome||"N/A",C=g.find(P=>P.id===y.disciplinaId)?.nome||"N/A";w[y.dia][y.horario]={turma:N,disciplina:C}});const h=$.useMemo(()=>De.reduce((y,N)=>{const C=S.filter(P=>P.dia===N).reduce((P,R)=>{const k=c.find(p=>p.id===R.turmaId)?.isModular?1.25:1;return P+k},0);return y[N]=C,y},{}),[S,c]),j=$.useMemo(()=>{const y=[...new Set([...jr,...Fn])].sort();return[...nt,...ot,...y]},[]);return o.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-auto border border-gray-200",children:o.jsxs("div",{className:"grid",style:{gridTemplateColumns:"80px repeat(5, minmax(150px, 1fr))"},children:[o.jsxs("div",{className:"row-span-2 p-2 border-b-2 border-r border-gray-300 bg-gray-100 flex flex-col items-center justify-center text-center",children:[o.jsx("span",{className:"font-bold text-2xl",children:x}),o.jsx("span",{className:"text-xs text-gray-600",children:"Aulas"})]}),o.jsx("div",{className:"col-span-5 p-4 border-b-2 border-gray-300 bg-gray-200 text-center text-xl font-bold text-gray-800 flex items-center justify-center",children:m.nome}),o.jsx("div",{className:"col-start-2 col-span-5 grid grid-cols-5",children:De.map((y,N)=>o.jsx("div",{className:`p-2 border-b-2 bg-gray-100 text-center font-semibold capitalize ${N<De.length-1?"border-r":""} border-gray-300`,children:y.split("").join(" ")},y))}),j.map((y,N)=>{const C=nt[nt.length-1]===y,P=ot[ot.length-1]===y,R=C||P,H=N===j.length-1;return o.jsxs(an.Fragment,{children:[o.jsxs("div",{className:"contents",children:[o.jsx("div",{className:`p-2 border-r border-gray-300 bg-gray-50 text-xs text-center font-medium flex items-center justify-center ${H?"":"border-b"}`,children:y}),De.map((k,p)=>{const I=w[k]?.[y];return o.jsx("div",{className:`p-2 min-h-[50px] ${p<De.length-1?"border-r":""} ${H?"":"border-b"} border-gray-200`,children:I&&o.jsxs("div",{className:"text-xs bg-indigo-100 p-1 rounded",children:[o.jsx("p",{className:"font-bold truncate",children:I.disciplina}),o.jsx("p",{className:"text-gray-600 truncate",children:I.turma})]})},`${k}-${y}`)})]}),R&&!H&&o.jsx("div",{className:"col-span-6 h-2 bg-gray-200 border-b border-gray-300"})]},y)}),o.jsx("div",{className:"p-2 border-r border-t border-gray-300 bg-gray-100 font-bold text-center flex items-center justify-center",children:"Carga Diria"}),De.map((y,N)=>o.jsx("div",{className:`p-2 bg-gray-100 text-center font-bold border-t ${N<De.length-1?"border-r":""} border-gray-200`,children:h[y]||0},`total-${y}`))]})})},mp=()=>{const{state:i,dispatch:u}=st(),{professores:a,grade:f,turmas:c,disciplinas:g}=i,m=$.useMemo(()=>[...a].sort((p,I)=>p.nome.localeCompare(I.nome)),[a]),[S,x]=$.useState(""),[w,h]=$.useState(!1),[j,y]=$.useState({current:0,total:0}),N=$.useMemo(()=>S.trim()?m.filter(p=>p.nome.toLowerCase().includes(S.toLowerCase())):m,[m,S]),[C,P]=$.useState(m[0]?.id||"");$.useEffect(()=>{N.some(I=>I.id===C)||P(N[0]?.id||"")},[S,N,C]),$.useEffect(()=>{!C&&m.length>0&&P(m[0].id)},[m,C]);const R=()=>{const p=a.find(I=>I.id===C);if(!p){u({type:"SHOW_TOAST",payload:"Professor no selecionado."});return}try{const{doc:I,error:z}=gd(p,f,c,g);if(z||!I){u({type:"SHOW_TOAST",payload:z||"Erro ao gerar PDF."});return}const T=`horario_${p.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`;I.save(T)}catch(I){console.error("Error generating PDF:",I),u({type:"SHOW_TOAST",payload:"Erro ao gerar o PDF."})}},H=()=>{if(!C){u({type:"SHOW_TOAST",payload:"Professor no selecionado."});return}u({type:"SHOW_TOAST",payload:"Gerando arquivo XLSX..."}),setTimeout(()=>{try{const{workbook:p,error:I}=Vf(i,C);if(I||!p){u({type:"SHOW_TOAST",payload:I||"Erro desconhecido ao gerar XLSX."});return}p.xlsx.writeBuffer().then(z=>{const _=new Blob([z],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),T=URL.createObjectURL(_),W=a.find(B=>B.id===C),O=W?W.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase():"professor",A=document.createElement("a");A.setAttribute("href",T),A.setAttribute("download",`horario_${O}.xlsx`),document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(T),u({type:"SHOW_TOAST",payload:"Exportao para XLSX concluda!"})}).catch(z=>{console.error("Error writing XLSX buffer:",z),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})})}catch(p){console.error("Error generating XLSX file:",p),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})}},50)},k=async()=>{const p=[...new Set(f.map(_=>_.professorId))],I=m.filter(_=>p.includes(_.id));if(I.length===0){u({type:"SHOW_TOAST",payload:"Nenhum professor com aulas na grade para exportar."});return}const z=new yf;h(!0),y({current:0,total:I.length}),u({type:"SHOW_TOAST",payload:`Iniciando exportao de ${I.length} horrios...`});for(const[_,T]of I.entries()){y({current:_+1,total:I.length});try{const{doc:W,error:O}=gd(T,f,c,g);if(W){const B=`horario_${T.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,te=W.output("blob");z.file(B,te)}}catch(W){console.error(`Error generating PDF for ${T.nome}:`,W)}await new Promise(W=>setTimeout(W,0))}u({type:"SHOW_TOAST",payload:"Gerando arquivo ZIP..."});try{const _=await z.generateAsync({type:"blob"}),T=document.createElement("a");T.href=URL.createObjectURL(_),T.download="horarios_professores.zip",document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(T.href),u({type:"SHOW_TOAST",payload:"Exportao para ZIP concluda!"})}catch(_){console.error("Error generating ZIP file:",_),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo ZIP."})}finally{h(!1)}};return o.jsxs("div",{className:"flex-1 flex flex-col overflow-auto bg-gray-50 p-4",children:[o.jsxs("header",{className:"mb-4",children:[o.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grade por Professor"}),o.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-end sm:justify-between",children:[o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"professor-search",className:"block text-sm font-medium text-gray-700",children:"Buscar Professor"}),o.jsx("input",{type:"text",id:"professor-search",value:S,onChange:p=>x(p.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"professor-select",className:"block text-sm font-medium text-gray-700",children:"Selecione um Professor"}),o.jsx("select",{id:"professor-select",value:C,onChange:p=>P(p.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:N.length>0?N.map(p=>o.jsx("option",{value:p.id,children:p.nome},p.id)):o.jsx("option",{value:"",disabled:!0,children:"Nenhum professor encontrado"})})]})]}),o.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[o.jsxs("button",{onClick:k,disabled:w,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),w?`Gerando ${j.current}/${j.total}...`:"Exportar Todos (ZIP)"]}),o.jsxs("button",{onClick:H,disabled:!C||w,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[o.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),o.jsx("polyline",{points:"14 2 14 8 20 8"}),o.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),o.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),o.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Exportar Selecionado (XLSX)"]}),o.jsxs("button",{onClick:R,disabled:!C||w,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar Selecionado (PDF)"]})]})]})]}),o.jsx("main",{className:"flex-1 overflow-auto",children:C?o.jsx(pp,{professorId:C}):o.jsx("div",{className:"flex items-center justify-center h-full bg-white rounded-lg shadow",children:o.jsx("p",{className:"text-gray-500",children:a.length===0?"Nenhum professor cadastrado.":"Por favor, selecione um professor para visualizar a grade de horrios."})})})]})},un=({tooltipText:i,children:u})=>o.jsxs("div",{className:"relative group flex items-center",children:[u,o.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-2 text-xs text-white bg-gray-800 rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:[i,o.jsx("svg",{className:"absolute text-gray-800 h-2 w-full left-0 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:o.jsx("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})]}),Ps=({title:i,value:u,icon:a,colorClass:f,tooltipText:c})=>o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow flex items-center",children:[o.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${f} mr-4 flex-shrink-0`,children:a}),o.jsxs("div",{children:[o.jsx(un,{tooltipText:c,children:o.jsxs("div",{className:"text-sm font-medium text-gray-500 flex items-center gap-1 cursor-help",children:[i,o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),o.jsx("div",{className:"text-2xl font-bold text-gray-800",children:u})]})]}),hp=({completionPercentage:i,criticalAlerts:u,activeProfessors:a,totalTurmas:f})=>o.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[o.jsx(Ps,{title:"Preenchimento da Grade",value:`${i.toFixed(1)}%`,tooltipText:"Percentual de aulas alocadas na grade em relao ao total de aulas semanais necessrias para todas as disciplinas desta modalidade.",colorClass:"bg-blue-100 text-blue-600",icon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsx(Ps,{title:"Alertas Crticos",value:String(u),tooltipText:"Nmero de conflitos de horrio de professor (mesmo professor em duas turmas ao mesmo tempo). Estes so os alertas mais graves e devem ser resolvidos com prioridade.",colorClass:"bg-red-100 text-red-600",icon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsx(Ps,{title:"Professores Ativos",value:String(a),tooltipText:"Nmero de professores nicos que possuem pelo menos uma aula alocada nesta grade de horrios.",colorClass:"bg-green-100 text-green-600",icon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),o.jsx(Ps,{title:"Total de Turmas",value:String(f),tooltipText:"Nmero total de turmas cadastradas para esta modalidade (Regular ou Modular).",colorClass:"bg-purple-100 text-purple-600",icon:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[o.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),o.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20"})]})})]}),gp=({segments:i})=>{const u=i.reduce((g,m)=>g+m.value,0);if(u===0)return o.jsx("div",{className:"flex items-center justify-center h-full",children:o.jsxs("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 120 120",children:[o.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#e5e7eb",strokeWidth:"20"}),o.jsx("text",{x:"60",y:"60",textAnchor:"middle",dominantBaseline:"central",className:"transform rotate-90",fontSize:"14",fill:"#9ca3af",children:"Sem Alertas"})]})});const a=50,f=2*Math.PI*a;let c=0;return o.jsx("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 120 120",children:i.map((g,m)=>{const S=g.value/u*f,x=o.jsx("circle",{cx:"60",cy:"60",r:a,fill:"none",stroke:g.color,strokeWidth:"20",strokeDasharray:`${S} ${f}`,strokeDashoffset:-c},m);return c+=S,x})})},xp=({data:i})=>{const u=Object.entries(i).map(([g,m])=>({type:g,value:m,color:sn[g].bg.replace("bg-",""),name:sn[g].name})),a={"pink-600":"#db2777","blue-500":"#3b82f6","red-600":"#dc2626","orange-400":"#fb923c","purple-500":"#a855f7","yellow-400":"#facc15"},f=u.map(g=>({value:g.value,color:a[g.color]||"#9ca3af"})),c=u.reduce((g,m)=>g+m.value,0);return o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[o.jsx(un,{tooltipText:"Distribuio dos tipos de alertas encontrados na grade. Alertas so problemas como conflitos de horrio, excesso de aulas, etc.",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Anlise de Alertas",o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),o.jsxs("div",{className:"flex-1 flex flex-col md:flex-row items-center gap-4 mt-4",children:[o.jsxs("div",{className:"relative",children:[o.jsx(gp,{segments:f}),o.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[o.jsx("span",{className:"text-3xl font-bold text-gray-800",children:c}),o.jsx("span",{className:"text-sm text-gray-500",children:"Total"})]})]}),o.jsx("div",{className:"flex-1 space-y-2 text-sm w-full",children:u.sort((g,m)=>m.value-g.value).map(g=>o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${sn[g.type].bg}`}),o.jsx("span",{className:"text-gray-600",children:g.name})]}),o.jsx("span",{className:"font-semibold text-gray-800",children:g.value})]},g.type))})]})]})},yp=({data:i})=>{const u=i.slice(0,10),a=Math.max(8,...u.map(f=>f.aulas));return o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[o.jsx(un,{tooltipText:"Exibe os professores com a maior quantidade de aulas alocadas. As cores indicam a carga: Normal (azul), Alta (amarelo, >6 aulas) ou Sobrecarga (vermelho, >8 aulas).",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Carga Horria dos Professores (Top 10)",o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),o.jsx("div",{className:"flex-1 space-y-3 pr-4 mt-4",children:u.length>0?u.map((f,c)=>{const g=f.aulas/a*100;let m="bg-blue-500";return f.aulas>8?m="bg-red-500":f.aulas>6&&(m="bg-yellow-500"),o.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[o.jsx("div",{className:"w-1/3 truncate text-gray-600",title:f.nome,children:f.nome}),o.jsxs("div",{className:"w-2/3 flex items-center",children:[o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-5",children:o.jsx("div",{className:`h-5 rounded-full ${m} transition-all duration-500 ease-out`,style:{width:`${g}%`}})}),o.jsx("span",{className:"ml-3 font-semibold text-gray-800 w-8 text-right",children:f.aulas})]})]},c)}):o.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Nenhuma aula alocada na grade."})})]})},vp=({data:i})=>o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[o.jsx(un,{tooltipText:"Progresso de alocao de aulas para cada turma. Mostra quantas aulas j foram inseridas na grade em comparao com o total necessrio para a turma.",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Status de Preenchimento por Turma",o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),o.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 mt-4",children:i.length>0?i.map(u=>{const a=u.total>0?u.alocadas/u.total*100:0;return o.jsxs("div",{children:[o.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[o.jsx("span",{className:"font-medium text-gray-700 truncate",title:u.nome,children:u.nome}),o.jsxs("span",{className:"text-gray-500",children:[u.alocadas.toFixed(2)," / ",u.total.toFixed(2)]})]}),o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:o.jsx("div",{className:"bg-green-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${a}%`}})})]},u.id)}):o.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Nenhuma turma para exibir."})})]}),wp=({data:i})=>{const{manha:u,tarde:a,noite:f}=i,g=u+a+f>0?Math.max(u,a,f):1,m=({label:S,value:x,colorClass:w})=>{const h=g>0?x/g*100:0;return o.jsxs("div",{className:"flex flex-col items-center flex-1",children:[o.jsx("div",{className:"w-full h-40 flex items-end justify-center",children:o.jsx("div",{className:`w-10 rounded-t-md ${w} transition-all duration-500 ease-out`,style:{height:`${h}%`},title:`${S}: ${x} aulas`})}),o.jsx("div",{className:"text-xs font-semibold text-gray-600 mt-2",children:S}),o.jsx("div",{className:"text-sm font-bold text-gray-800",children:x})]})};return o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[o.jsx(un,{tooltipText:"Distribuio do nmero de aulas alocadas em cada perodo. Ajuda a visualizar o equilbrio da ocupao da grade entre manh, tarde e noite.",children:o.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Ocupao por Perodo",o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),o.jsxs("div",{className:"flex-1 flex items-end justify-around gap-4 mt-4",children:[o.jsx(m,{label:"Manh",value:u,colorClass:"bg-yellow-400"}),o.jsx(m,{label:"Tarde",value:a,colorClass:"bg-blue-400"}),o.jsx(m,{label:"Noite",value:f,colorClass:"bg-indigo-500"})]})]})},Sp=({unassignedDisciplines:i,unassignedProfessors:u})=>o.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Insights Rpidos"}),o.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto",children:[o.jsxs("div",{children:[o.jsx(un,{tooltipText:"Lista de disciplinas da grade selecionada (Regular ou Modular) que ainda no tm nenhum professor atribudo na tela de Gerenciamento.",children:o.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center cursor-help",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Disciplinas Sem Atribuio (",i.length,")"]})}),i.length>0?o.jsx("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside pl-7 max-h-24 overflow-y-auto",children:i.map(a=>o.jsx("li",{className:"truncate",title:a.nome,children:a.nome},a.id))}):o.jsx("p",{className:"mt-1 text-sm text-gray-500 pl-7",children:"Todas as disciplinas foram atribudas."})]}),o.jsxs("div",{children:[o.jsx(un,{tooltipText:"Lista de professores cadastrados no sistema que no foram atribudos a NENHUMA disciplina, seja na grade Regular ou na Modular. Ajuda a identificar professores pendentes de configurao.",children:o.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center cursor-help",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Professores Sem Aulas (",u.length,")"]})}),u.length>0?o.jsx("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside pl-7 max-h-24 overflow-y-auto",children:u.map(a=>o.jsx("li",{className:"truncate",title:a.nome,children:a.nome},a.id))}):o.jsx("p",{className:"mt-1 text-sm text-gray-500 pl-7",children:"Todos os professores foram atribudos a alguma disciplina."})]})]})]}),jp=()=>{const{state:i}=st(),[u,a]=$.useState("regular"),f=$.useMemo(()=>{const g=u==="modular",m=i.turmas.filter(N=>N.isModular===g),S=new Set(m.map(N=>N.id)),x=i.disciplinas.filter(N=>S.has(N.turmaId)),w=new Set(x.map(N=>N.id)),h=i.atribuicoes.filter(N=>w.has(N.disciplinaId)),j=i.grade.filter(N=>S.has(N.turmaId)),y=i.alertas.filter(N=>N.gradeSlotIds.some(C=>{const P=C.split("_")[0];return S.has(P)}));return{turmas:m,disciplinas:x,atribuicoes:h,grade:j,alertas:y,professores:i.professores}},[u,i]),c=$.useMemo(()=>{const{turmas:g,disciplinas:m,atribuicoes:S,grade:x,alertas:w}=f,h=m.reduce((A,B)=>A+B.aulasSemanais,0),j=new Map;x.forEach(A=>{const B=`${A.turmaId}_${A.dia}_${A.horario}`;if(!j.has(B)){const{finalDisciplinaId:te}=bd(A,i);j.set(B,{disciplinaId:te,turmaId:A.turmaId})}});const y=new Map;j.forEach(A=>{const te=g.find(de=>de.id===A.turmaId)?.isModular?1.25:1,ee=y.get(A.disciplinaId)||0;y.set(A.disciplinaId,ee+te)});let N=0;y.forEach(A=>{N+=A});const C=h>0?N/h*100:0,P=w.reduce((A,B)=>(A[B.tipo]=(A[B.tipo]||0)+1,A),{}),R=P[At.ProfessorConflitoHorario]||0,H=new Set(x.map(A=>A.professorId)),k=new Map;x.forEach(A=>{const B=i.professores.find(de=>de.id===A.professorId);if(!B)return;const ee=g.find(de=>de.id===A.turmaId)?.isModular??!1?1.25:1;k.has(B.id)||k.set(B.id,{nome:B.nome,aulas:0}),k.get(B.id).aulas+=ee});const p=Array.from(k.values()).sort((A,B)=>B.aulas-A.aulas),I=g.map(A=>{const B=m.filter(de=>de.turmaId===A.id),te=B.reduce((de,pe)=>de+pe.aulasSemanais,0);let ee=0;return B.forEach(de=>{ee+=y.get(de.id)||0}),{id:A.id,nome:A.nome,alocadas:ee,total:te}}).sort((A,B)=>(A.alocadas/A.total||0)-(B.alocadas/B.total||0)),z={manha:0,tarde:0,noite:0};j.forEach(A=>{const B=x.find(ee=>ee.turmaId===A.turmaId&&ee.disciplinaId===A.disciplinaId);if(!B)return;const te=B.horario;nt.includes(te)?z.manha++:ot.includes(te)?z.tarde++:z.noite++});const _=new Set(S.map(A=>A.disciplinaId)),T=m.filter(A=>!_.has(A.id)),W=new Set(i.atribuicoes.flatMap(A=>A.professores)),O=i.professores.filter(A=>!W.has(A.id));return{completionPercentage:C,criticalAlertCount:R,activeProfessorCount:H.size,turmaCount:g.length,alertCounts:P,professorLoadData:p,turmaCompletionData:I,periodDistribution:z,unassignedDisciplines:T,unassignedProfessors:O}},[f,i]);return o.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 lg:p-6",children:[o.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[o.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Painel de Controle"}),o.jsx("div",{className:"mt-4 md:mt-0",children:o.jsxs("div",{className:"flex items-center bg-gray-200 rounded-md p-1",children:[o.jsx("button",{onClick:()=>a("regular"),className:`px-4 py-2 text-sm font-medium rounded-md ${u==="regular"?"bg-indigo-600 text-white shadow":"text-gray-700 hover:bg-gray-300"}`,children:"Grade Regular"}),o.jsx("button",{onClick:()=>a("modular"),className:`px-4 py-2 text-sm font-medium rounded-md ${u==="modular"?"bg-indigo-600 text-white shadow":"text-gray-700 hover:bg-gray-300"}`,children:"Grade Modular"})]})})]}),o.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[o.jsx("div",{className:"col-span-12",children:o.jsx(hp,{completionPercentage:c.completionPercentage,criticalAlerts:c.criticalAlertCount,activeProfessors:c.activeProfessorCount,totalTurmas:c.turmaCount})}),o.jsx("div",{className:"col-span-12 lg:col-span-4",children:o.jsx(xp,{data:c.alertCounts})}),o.jsx("div",{className:"col-span-12 lg:col-span-8",children:o.jsx(yp,{data:c.professorLoadData})}),o.jsx("div",{className:"col-span-12 lg:col-span-5",children:o.jsx(vp,{data:c.turmaCompletionData})}),o.jsx("div",{className:"col-span-12 lg:col-span-3",children:o.jsx(wp,{data:c.periodDistribution})}),o.jsx("div",{className:"col-span-12 lg:col-span-4",children:o.jsx(Sp,{unassignedDisciplines:c.unassignedDisciplines,unassignedProfessors:c.unassignedProfessors})})]})]})},Cp=({message:i,onClose:u})=>($.useEffect(()=>{const a=setTimeout(()=>{u()},3e3);return()=>clearTimeout(a)},[u]),o.jsxs("div",{className:"fixed bottom-5 left-1/2 -translate-x-1/2 z-50",children:[o.jsxs("div",{className:"bg-gray-800 text-white font-bold py-2 px-4 rounded-lg shadow-lg flex items-center animate-fade-in-up",children:[o.jsx("span",{className:"mr-3",children:i}),o.jsx("button",{onClick:u,className:"text-gray-300 hover:text-white leading-none text-2xl",children:""})]}),o.jsx("style",{children:`
        @keyframes fade-in-up {
          0% {
            opacity: 0;
            transform: translate(-50%, 10px);
          }
          100% {
            opacity: 1;
            transform: translate(-50%, 0);
          }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]})),Np=({isOpen:i,onClose:u})=>{const{dispatch:a}=st(),[f,c]=$.useState(""),g=f==="DELETE";$.useEffect(()=>{i||c("")},[i]);const m=()=>{if(g)try{a({type:"CLEAR_DATA"})}finally{window.location.reload()}};return o.jsx(Vr,{isOpen:i,onClose:u,title:"Apagar Todos os Dados",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:[o.jsx("strong",{children:"Ateno:"})," Esta ao  irreversvel. Todos os cursos, turmas, disciplinas, professores, atribuies e a grade de horrios sero permanentemente apagados."]}),o.jsxs("p",{className:"text-sm text-gray-700",children:["Para confirmar, por favor, digite ",o.jsx("strong",{children:"DELETE"})," no campo abaixo."]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"confirm-delete",className:"sr-only",children:"Confirmar excluso"}),o.jsx("input",{type:"text",id:"confirm-delete",value:f,onChange:S=>c(S.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"DELETE",autoComplete:"off"})]}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:m,disabled:!g,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed",children:"Apagar Tudo"})]})]})})},bp=({isOpen:i,onClose:u})=>{const{dispatch:a}=st(),f=async()=>{try{const c=await fetch("/mock-data.json");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const g=await c.json();if(g&&g.version&&Array.isArray(g.cursos))a({type:"SET_STATE",payload:g}),a({type:"SHOW_TOAST",payload:"Dados de exemplo carregados com sucesso!"});else throw new Error("Arquivo de exemplo invlido.")}catch(c){console.error("Erro ao carregar dados de exemplo:",c),a({type:"SHOW_TOAST",payload:"Falha ao carregar dados de exemplo."})}finally{u()}};return o.jsx(Vr,{isOpen:i,onClose:u,title:"Carregar Dados de Exemplo",children:o.jsxs("div",{className:"space-y-4",children:[o.jsxs("p",{className:"text-sm text-gray-700",children:[o.jsx("strong",{children:"Ateno:"})," Esta ao ir substituir todos os dados atuais pelos dados de exemplo."]}),o.jsx("p",{className:"text-sm text-gray-700",children:"Qualquer trabalho no salvo ser perdido. Deseja continuar?"}),o.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[o.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),o.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Carregar Exemplo"})]})]})})},kp=()=>{const[i,u]=$.useState("grid"),[a,f]=$.useState("regular"),[c,g]=$.useState(!1),[m,S]=$.useState(!1),[x,w]=$.useState(!1),[h,j]=$.useState(!1),{state:y,dispatch:N}=st(),C=()=>{switch(i){case"dashboard":return o.jsx(jp,{});case"grid":return o.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[o.jsx("div",{className:"flex-shrink-0 px-4 pt-2 border-b border-gray-200 bg-gray-50",children:o.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[o.jsx("button",{onClick:()=>f("regular"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${a==="regular"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Grade Regular"}),o.jsx("button",{onClick:()=>f("modular"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${a==="modular"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Grade Modular"})]})}),o.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[o.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[o.jsx(zf,{isFocusModeEnabled:c,gridType:a}),o.jsx("footer",{className:"bg-white p-2 border-t",children:o.jsx(Kf,{})})]}),o.jsx("aside",{className:`bg-gray-50 border-l border-gray-200 overflow-y-auto flex-shrink-0 transition-all duration-300 ease-in-out ${h?"w-0":"w-64 lg:w-80"}`,children:o.jsx("div",{className:`h-full overflow-hidden ${h?"invisible":"visible"}`,children:o.jsx($f,{gridType:a})})})]})]});case"management":return o.jsx(fp,{});case"professor":return o.jsx(mp,{});default:return null}};return o.jsxs("div",{className:"flex flex-col h-screen font-sans text-gray-800",children:[o.jsx("header",{className:"bg-white shadow-md z-20",children:o.jsx(Yf,{currentView:i,setCurrentView:u,activeGrid:a,isFocusModeEnabled:c,onFocusModeChange:g,onOpenClearDataModal:()=>S(!0),onOpenLoadExampleModal:()=>w(!0)})}),o.jsxs("main",{className:"flex flex-1 overflow-hidden relative",children:[C(),i==="grid"&&o.jsx("button",{onClick:()=>j(!h),className:`absolute top-1/2 -translate-y-1/2 z-30 bg-white hover:bg-gray-100 text-gray-600 border border-gray-300 rounded-full w-8 h-8 flex items-center justify-center shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-300 ease-in-out ${h?"right-0 translate-x-1/2":"right-[16rem] lg:right-[20rem] translate-x-1/2"}`,title:h?"Expandir painel":"Recolher painel",children:h?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}):o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),y.toastMessage&&o.jsx(Cp,{message:y.toastMessage,onClose:()=>N({type:"SHOW_TOAST",payload:null})}),o.jsx(Np,{isOpen:m,onClose:()=>S(!1)}),o.jsx(bp,{isOpen:x,onClose:()=>w(!1)})]})},Ep=()=>o.jsx(Mf,{children:o.jsx(kp,{})}),Tp=({onRetry:i})=>{const[u,a]=$.useState(!1),[f,c]=$.useState(null),m="https://console.firebase.google.com/u/0/project/gerenciadorhorario-c62e9/authentication/providers";$.useEffect(()=>{c(window.location.hostname||"domnio no detectado")},[]);const S=()=>{f&&f!=="domnio no detectado"&&navigator.clipboard.writeText(f).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)})};return o.jsxs(o.Fragment,{children:[o.jsx("h3",{className:"text-xl font-bold text-red-700 mb-4 text-center",children:"Configurao Necessria"}),o.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Para que o login com Google funcione, o domnio que voc est usando para acessar esta aplicao precisa ser autorizado no seu projeto Firebase."}),o.jsxs("div",{className:"bg-red-50 p-3 rounded-md border border-red-200 mb-4",children:[o.jsx("p",{className:"text-sm text-gray-600",children:"Copie este domnio:"}),o.jsxs("div",{className:"flex items-center justify-between mt-1 gap-2",children:[o.jsx("code",{className:"text-red-800 font-mono bg-red-100 px-2 py-1 rounded w-full break-all h-8 flex items-center",children:f===null?"Carregando...":f}),o.jsx("button",{onClick:S,disabled:!f||f==="domnio no detectado",className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-400 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Copiado!":"Copiar"})]})]}),o.jsx("h4",{className:"font-semibold mb-2 text-gray-800",children:"Como Corrigir:"}),o.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-2 mb-4 text-gray-700",children:[o.jsx("li",{children:"Abra o Console do Firebase (link abaixo)."}),o.jsxs("li",{children:["Navegue at a seo ",o.jsx("strong",{className:"font-semibold",children:"Authentication"}),"."]}),o.jsxs("li",{children:["Clique na aba ",o.jsx("strong",{className:"font-semibold",children:"Sign-in method"}),"."]}),o.jsxs("li",{children:["Role para baixo at a seo ",o.jsx("strong",{className:"font-semibold",children:"Authorized domains"}),"."]}),o.jsxs("li",{children:["Clique em ",o.jsx("strong",{className:"font-semibold",children:"Add domain"})," e cole o domnio copiado."]})]}),o.jsxs("div",{className:"space-y-3 mt-6",children:[o.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Abrir Firebase Console"}),o.jsx("button",{onClick:i,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Tentar Novamente"})]})]})},Ip=()=>{const[i,u]=$.useState("loading"),[a,f]=$.useState(null),[c,g]=$.useState(null),m=async()=>{const w=new window.firebase.auth.GoogleAuthProvider;u("loading"),g(null);try{await lr.signInWithPopup(w)}catch(h){console.error("Firebase login error:",h);let j="Falha ao fazer login. Por favor, tente novamente.";if(h.code)switch(h.code){case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":u("unauthenticated");return;case"auth/popup-blocked":j="O popup de login foi bloqueado pelo seu navegador. Por favor, habilite popups para este site e tente novamente.";break;case"auth/operation-not-allowed":j="O login com Google no est habilitado para este aplicativo. Por favor, contate o administrador.";break;case"auth/unauthorized-domain":g("auth/unauthorized-domain"),u("unauthenticated");return}g(j),u("unauthenticated")}};$.useEffect(()=>{const w=lr.onAuthStateChanged(async h=>{if(u("loading"),h&&h.email){f(h);const j=Yt.doc(`allowed_users/${h.email}`);try{(await j.get()).exists?(u("authenticated"),g(null)):u("unauthorized")}catch(y){console.error("Error checking Firestore permissions:",y),y.code==="permission-denied"||y.code==="unauthenticated"?g("Erro de permisso ao verificar usurio. Tente novamente."):g("Erro ao verificar permisses. Tente novamente mais tarde."),u("unauthenticated"),await lr.signOut()}}else f(null),u("unauthenticated"),c!=="auth/unauthorized-domain"&&g(null)});return()=>w()},[c]);const S=async()=>{await lr.signOut(),g(null)};if(i==="authenticated")return o.jsx(Ep,{});const x=()=>{if(c==="auth/unauthorized-domain")return o.jsx(Tp,{onRetry:m});switch(i){case"loading":return o.jsx("p",{className:"text-gray-600 text-center",children:"Verificando..."});case"unauthorized":return o.jsxs(o.Fragment,{children:[o.jsxs("p",{className:"text-center text-red-600 mb-4",children:["Acesso negado. O e-mail ",o.jsx("strong",{children:a?.email})," no tem permisso para acessar este sistema."]}),o.jsx("button",{onClick:S,className:"w-full bg-gray-500 text-white py-2 px-4 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"Sair e tentar com outra conta"})]});case"unauthenticated":default:return o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Acesso ao Sistema"}),o.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Por favor, utilize sua conta Google para continuar."}),c&&o.jsx("p",{className:"text-sm text-red-600 mb-4 text-center",children:c}),o.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[o.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 48 48",children:[o.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),o.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.53-4.18 7.13-10.12 7.13-17.65z"}),o.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),o.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),o.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),"Entrar com Google"]})]})}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:o.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-sm",children:x()})})},kd=document.getElementById("root");if(!kd)throw new Error("Could not find root element to mount to");const Dp=Ef.createRoot(kd);Dp.render(o.jsx(an.StrictMode,{children:o.jsx(Ip,{})}));

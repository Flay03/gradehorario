import"firebase/compat/app";import"firebase/compat/auth";import"firebase/compat/firestore";import Oo from"exceljs";import jd from"jspdf";import wf from"jszip";(function(){const u=document.createElement("link").relList;if(u&&u.supports&&u.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))f(c);new MutationObserver(c=>{for(const p of c)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&f(m)}).observe(document,{childList:!0,subtree:!0});function a(c){const p={};return c.integrity&&(p.integrity=c.integrity),c.referrerPolicy&&(p.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?p.credentials="include":c.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function f(c){if(c.ep)return;c.ep=!0;const p=a(c);fetch(c.href,p)}})();function Cd(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var wi={exports:{}},ws={},Si={exports:{}},De={};var ld;function Sf(){if(ld)return De;ld=1;var i=Symbol.for("react.element"),u=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),m=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),S=Symbol.iterator;function w(T){return T===null||typeof T!="object"?null:(T=S&&T[S]||T["@@iterator"],typeof T=="function"?T:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,P={};function H(T,$,je){this.props=T,this.context=$,this.refs=P,this.updater=je||N}H.prototype.isReactComponent={},H.prototype.setState=function(T,$){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,$,"setState")},H.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function W(){}W.prototype=H.prototype;function I(T,$,je){this.props=T,this.context=$,this.refs=P,this.updater=je||N}var g=I.prototype=new W;g.constructor=I,C(g,H.prototype),g.isPureReactComponent=!0;var D=Array.isArray,z=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function U(T,$,je){var me,xe={},Ie=null,Ae=null;if($!=null)for(me in $.ref!==void 0&&(Ae=$.ref),$.key!==void 0&&(Ie=""+$.key),$)z.call($,me)&&!E.hasOwnProperty(me)&&(xe[me]=$[me]);var ke=arguments.length-2;if(ke===1)xe.children=je;else if(1<ke){for(var ze=Array(ke),We=0;We<ke;We++)ze[We]=arguments[We+2];xe.children=ze}if(T&&T.defaultProps)for(me in ke=T.defaultProps,ke)xe[me]===void 0&&(xe[me]=ke[me]);return{$$typeof:i,type:T,key:Ie,ref:Ae,props:xe,_owner:_.current}}function O(T,$){return{$$typeof:i,type:T.type,key:$,ref:T.ref,props:T.props,_owner:T._owner}}function A(T){return typeof T=="object"&&T!==null&&T.$$typeof===i}function B(T){var $={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(je){return $[je]})}var te=/\/+/g;function ee(T,$){return typeof T=="object"&&T!==null&&T.key!=null?B(""+T.key):$.toString(36)}function de(T,$,je,me,xe){var Ie=typeof T;(Ie==="undefined"||Ie==="boolean")&&(T=null);var Ae=!1;if(T===null)Ae=!0;else switch(Ie){case"string":case"number":Ae=!0;break;case"object":switch(T.$$typeof){case i:case u:Ae=!0}}if(Ae)return Ae=T,xe=xe(Ae),T=me===""?"."+ee(Ae,0):me,D(xe)?(je="",T!=null&&(je=T.replace(te,"$&/")+"/"),de(xe,$,je,"",function(We){return We})):xe!=null&&(A(xe)&&(xe=O(xe,je+(!xe.key||Ae&&Ae.key===xe.key?"":(""+xe.key).replace(te,"$&/")+"/")+T)),$.push(xe)),1;if(Ae=0,me=me===""?".":me+":",D(T))for(var ke=0;ke<T.length;ke++){Ie=T[ke];var ze=me+ee(Ie,ke);Ae+=de(Ie,$,je,ze,xe)}else if(ze=w(T),typeof ze=="function")for(T=ze.call(T),ke=0;!(Ie=T.next()).done;)Ie=Ie.value,ze=me+ee(Ie,ke++),Ae+=de(Ie,$,je,ze,xe);else if(Ie==="object")throw $=String(T),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Ae}function pe(T,$,je){if(T==null)return T;var me=[],xe=0;return de(T,me,"","",function(Ie){return $.call(je,Ie,xe++)}),me}function K(T){if(T._status===-1){var $=T._result;$=$(),$.then(function(je){(T._status===0||T._status===-1)&&(T._status=1,T._result=je)},function(je){(T._status===0||T._status===-1)&&(T._status=2,T._result=je)}),T._status===-1&&(T._status=0,T._result=$)}if(T._status===1)return T._result.default;throw T._result}var se={current:null},V={transition:null},re={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:V,ReactCurrentOwner:_};function J(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:pe,forEach:function(T,$,je){pe(T,function(){$.apply(this,arguments)},je)},count:function(T){var $=0;return pe(T,function(){$++}),$},toArray:function(T){return pe(T,function($){return $})||[]},only:function(T){if(!A(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},De.Component=H,De.Fragment=a,De.Profiler=c,De.PureComponent=I,De.StrictMode=f,De.Suspense=x,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,De.act=J,De.cloneElement=function(T,$,je){if(T==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+T+".");var me=C({},T.props),xe=T.key,Ie=T.ref,Ae=T._owner;if($!=null){if($.ref!==void 0&&(Ie=$.ref,Ae=_.current),$.key!==void 0&&(xe=""+$.key),T.type&&T.type.defaultProps)var ke=T.type.defaultProps;for(ze in $)z.call($,ze)&&!E.hasOwnProperty(ze)&&(me[ze]=$[ze]===void 0&&ke!==void 0?ke[ze]:$[ze])}var ze=arguments.length-2;if(ze===1)me.children=je;else if(1<ze){ke=Array(ze);for(var We=0;We<ze;We++)ke[We]=arguments[We+2];me.children=ke}return{$$typeof:i,type:T.type,key:xe,ref:Ie,props:me,_owner:Ae}},De.createContext=function(T){return T={$$typeof:m,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},T.Provider={$$typeof:p,_context:T},T.Consumer=T},De.createElement=U,De.createFactory=function(T){var $=U.bind(null,T);return $.type=T,$},De.createRef=function(){return{current:null}},De.forwardRef=function(T){return{$$typeof:v,render:T}},De.isValidElement=A,De.lazy=function(T){return{$$typeof:h,_payload:{_status:-1,_result:T},_init:K}},De.memo=function(T,$){return{$$typeof:y,type:T,compare:$===void 0?null:$}},De.startTransition=function(T){var $=V.transition;V.transition={};try{T()}finally{V.transition=$}},De.unstable_act=J,De.useCallback=function(T,$){return se.current.useCallback(T,$)},De.useContext=function(T){return se.current.useContext(T)},De.useDebugValue=function(){},De.useDeferredValue=function(T){return se.current.useDeferredValue(T)},De.useEffect=function(T,$){return se.current.useEffect(T,$)},De.useId=function(){return se.current.useId()},De.useImperativeHandle=function(T,$,je){return se.current.useImperativeHandle(T,$,je)},De.useInsertionEffect=function(T,$){return se.current.useInsertionEffect(T,$)},De.useLayoutEffect=function(T,$){return se.current.useLayoutEffect(T,$)},De.useMemo=function(T,$){return se.current.useMemo(T,$)},De.useReducer=function(T,$,je){return se.current.useReducer(T,$,je)},De.useRef=function(T){return se.current.useRef(T)},De.useState=function(T){return se.current.useState(T)},De.useSyncExternalStore=function(T,$,je){return se.current.useSyncExternalStore(T,$,je)},De.useTransition=function(){return se.current.useTransition()},De.version="18.3.1",De}var id;function Ti(){return id||(id=1,Si.exports=Sf()),Si.exports}var ad;function jf(){if(ad)return ws;ad=1;var i=Ti(),u=Symbol.for("react.element"),a=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,c=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};function m(v,x,y){var h,S={},w=null,N=null;y!==void 0&&(w=""+y),x.key!==void 0&&(w=""+x.key),x.ref!==void 0&&(N=x.ref);for(h in x)f.call(x,h)&&!p.hasOwnProperty(h)&&(S[h]=x[h]);if(v&&v.defaultProps)for(h in x=v.defaultProps,x)S[h]===void 0&&(S[h]=x[h]);return{$$typeof:u,type:v,key:w,ref:N,props:S,_owner:c.current}}return ws.Fragment=a,ws.jsx=m,ws.jsxs=m,ws}var ud;function Cf(){return ud||(ud=1,wi.exports=jf()),wi.exports}var s=Cf(),R=Ti();const un=Cd(R);var _o={},ji={exports:{}},At={},Ci={exports:{}},Ni={};var dd;function Nf(){return dd||(dd=1,(function(i){function u(V,re){var J=V.length;V.push(re);e:for(;0<J;){var T=J-1>>>1,$=V[T];if(0<c($,re))V[T]=re,V[J]=$,J=T;else break e}}function a(V){return V.length===0?null:V[0]}function f(V){if(V.length===0)return null;var re=V[0],J=V.pop();if(J!==re){V[0]=J;e:for(var T=0,$=V.length,je=$>>>1;T<je;){var me=2*(T+1)-1,xe=V[me],Ie=me+1,Ae=V[Ie];if(0>c(xe,J))Ie<$&&0>c(Ae,xe)?(V[T]=Ae,V[Ie]=J,T=Ie):(V[T]=xe,V[me]=J,T=me);else if(Ie<$&&0>c(Ae,J))V[T]=Ae,V[Ie]=J,T=Ie;else break e}}return re}function c(V,re){var J=V.sortIndex-re.sortIndex;return J!==0?J:V.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var p=performance;i.unstable_now=function(){return p.now()}}else{var m=Date,v=m.now();i.unstable_now=function(){return m.now()-v}}var x=[],y=[],h=1,S=null,w=3,N=!1,C=!1,P=!1,H=typeof setTimeout=="function"?setTimeout:null,W=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(V){for(var re=a(y);re!==null;){if(re.callback===null)f(y);else if(re.startTime<=V)f(y),re.sortIndex=re.expirationTime,u(x,re);else break;re=a(y)}}function D(V){if(P=!1,g(V),!C)if(a(x)!==null)C=!0,K(z);else{var re=a(y);re!==null&&se(D,re.startTime-V)}}function z(V,re){C=!1,P&&(P=!1,W(U),U=-1),N=!0;var J=w;try{for(g(re),S=a(x);S!==null&&(!(S.expirationTime>re)||V&&!B());){var T=S.callback;if(typeof T=="function"){S.callback=null,w=S.priorityLevel;var $=T(S.expirationTime<=re);re=i.unstable_now(),typeof $=="function"?S.callback=$:S===a(x)&&f(x),g(re)}else f(x);S=a(x)}if(S!==null)var je=!0;else{var me=a(y);me!==null&&se(D,me.startTime-re),je=!1}return je}finally{S=null,w=J,N=!1}}var _=!1,E=null,U=-1,O=5,A=-1;function B(){return!(i.unstable_now()-A<O)}function te(){if(E!==null){var V=i.unstable_now();A=V;var re=!0;try{re=E(!0,V)}finally{re?ee():(_=!1,E=null)}}else _=!1}var ee;if(typeof I=="function")ee=function(){I(te)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,pe=de.port2;de.port1.onmessage=te,ee=function(){pe.postMessage(null)}}else ee=function(){H(te,0)};function K(V){E=V,_||(_=!0,ee())}function se(V,re){U=H(function(){V(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(V){V.callback=null},i.unstable_continueExecution=function(){C||N||(C=!0,K(z))},i.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<V?Math.floor(1e3/V):5},i.unstable_getCurrentPriorityLevel=function(){return w},i.unstable_getFirstCallbackNode=function(){return a(x)},i.unstable_next=function(V){switch(w){case 1:case 2:case 3:var re=3;break;default:re=w}var J=w;w=re;try{return V()}finally{w=J}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(V,re){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var J=w;w=V;try{return re()}finally{w=J}},i.unstable_scheduleCallback=function(V,re,J){var T=i.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?T+J:T):J=T,V){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=J+$,V={id:h++,callback:re,priorityLevel:V,startTime:J,expirationTime:$,sortIndex:-1},J>T?(V.sortIndex=J,u(y,V),a(x)===null&&V===a(y)&&(P?(W(U),U=-1):P=!0,se(D,J-T))):(V.sortIndex=$,u(x,V),C||N||(C=!0,K(z))),V},i.unstable_shouldYield=B,i.unstable_wrapCallback=function(V){var re=w;return function(){var J=w;w=re;try{return V.apply(this,arguments)}finally{w=J}}}})(Ni)),Ni}var cd;function bf(){return cd||(cd=1,Ci.exports=Nf()),Ci.exports}var fd;function kf(){if(fd)return At;fd=1;var i=Ti(),u=bf();function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=new Set,c={};function p(e,t){m(e,t),m(e+"Capture",t)}function m(e,t){for(c[e]=t,e=0;e<t.length;e++)f.add(t[e])}var v=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),x=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},S={};function w(e){return x.call(S,e)?!0:x.call(h,e)?!1:y.test(e)?S[e]=!0:(h[e]=!0,!1)}function N(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,t,r,n){if(t===null||typeof t>"u"||N(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function P(e,t,r,n,o,l,d){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=d}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){H[e]=new P(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];H[t]=new P(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){H[e]=new P(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){H[e]=new P(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){H[e]=new P(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){H[e]=new P(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){H[e]=new P(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){H[e]=new P(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){H[e]=new P(e,5,!1,e.toLowerCase(),null,!1,!1)});var W=/[\-:]([a-z])/g;function I(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(W,I);H[t]=new P(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(W,I);H[t]=new P(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(W,I);H[t]=new P(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){H[e]=new P(e,1,!1,e.toLowerCase(),null,!1,!1)}),H.xlinkHref=new P("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){H[e]=new P(e,1,!1,e.toLowerCase(),null,!0,!0)});function g(e,t,r,n){var o=H.hasOwnProperty(t)?H[t]:null;(o!==null?o.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C(t,r,o,n)&&(r=null),n||o===null?w(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var D=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,z=Symbol.for("react.element"),_=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),B=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),pe=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),V=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=V&&e[V]||e["@@iterator"],typeof e=="function"?e:null)}var J=Object.assign,T;function $(e){if(T===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);T=t&&t[1]||""}return`
`+T+e}var je=!1;function me(e,t){if(!e||je)return"";je=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(F){var n=F}Reflect.construct(e,[],t)}else{try{t.call()}catch(F){n=F}e.call(t.prototype)}else{try{throw Error()}catch(F){n=F}e()}}catch(F){if(F&&n&&typeof F.stack=="string"){for(var o=F.stack.split(`
`),l=n.stack.split(`
`),d=o.length-1,j=l.length-1;1<=d&&0<=j&&o[d]!==l[j];)j--;for(;1<=d&&0<=j;d--,j--)if(o[d]!==l[j]){if(d!==1||j!==1)do if(d--,j--,0>j||o[d]!==l[j]){var b=`
`+o[d].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=d&&0<=j);break}}}finally{je=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?$(e):""}function xe(e){switch(e.tag){case 5:return $(e.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return e=me(e.type,!1),e;case 11:return e=me(e.type.render,!1),e;case 1:return e=me(e.type,!0),e;default:return""}}function Ie(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case E:return"Fragment";case _:return"Portal";case O:return"Profiler";case U:return"StrictMode";case ee:return"Suspense";case de:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case B:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case te:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case pe:return t=e.displayName||null,t!==null?t:Ie(e.type)||"Memo";case K:t=e._payload,e=e._init;try{return Ie(e(t))}catch{}}return null}function Ae(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ie(t);case 8:return t===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ke(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ze(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function We(e){var t=ze(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(d){n=""+d,l.call(this,d)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(d){n=""+d},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function jt(e){e._valueTracker||(e._valueTracker=We(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ze(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function ae(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ee(e,t){var r=t.checked;return J({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Me(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=ke(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ie(e,t){t=t.checked,t!=null&&g(e,"checked",t,!1)}function Y(e,t){ie(e,t);var r=ke(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Fe(e,t.type,r):t.hasOwnProperty("defaultValue")&&Fe(e,t.type,ke(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ce(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Fe(e,t,r){(t!=="number"||ae(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ye=Array.isArray;function Te(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+ke(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function it(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(a(91));return J({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Je(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(a(92));if(ye(r)){if(1<r.length)throw Error(a(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:ke(r)}}function we(e,t){var r=ke(t.value),n=ke(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Pe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ne(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ve(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ne(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qe,Ve=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qe=qe||document.createElement("div"),qe.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function et(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ht={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ce=["Webkit","ms","Moz","O"];Object.keys(ht).forEach(function(e){Ce.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ht[t]=ht[e]})});function Ct(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ht.hasOwnProperty(e)&&ht[e]?(""+t).trim():t+"px"}function Bt(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Ct(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var Cs=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ot(e,t){if(t){if(Cs[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(a(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(a(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(t.style!=null&&typeof t.style!="object")throw Error(a(62))}}function $e(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=null;function Nt(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Tt=null,bt=null,Nr=null;function cn(e){if(e=os(e)){if(typeof Tt!="function")throw Error(a(280));var t=e.stateNode;t&&(t=Vs(t),Tt(e.stateNode,e.type,t))}}function fn(e){bt?Nr?Nr.push(e):Nr=[e]:bt=e}function br(){if(bt){var e=bt,t=Nr;if(Nr=bt=null,cn(e),t)for(e=0;e<t.length;e++)cn(t[e])}}function Ut(e,t){return e(t)}function Ns(){}var Rn=!1;function dt(e,t,r){if(Rn)return e(t,r);Rn=!0;try{return Ut(e,t,r)}finally{Rn=!1,(bt!==null||Nr!==null)&&(Ns(),br())}}function kr(e,t){var r=e.stateNode;if(r===null)return null;var n=Vs(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(a(231,t,typeof r));return r}var pn=!1;if(v)try{var ct={};Object.defineProperty(ct,"passive",{get:function(){pn=!0}}),window.addEventListener("test",ct,ct),window.removeEventListener("test",ct,ct)}catch{pn=!1}function qr(e,t,r,n,o,l,d,j,b){var F=Array.prototype.slice.call(arguments,3);try{t.apply(r,F)}catch(X){this.onError(X)}}var Jt=!1,mn=null,Wt=!1,Vt=null,zo={onError:function(e){Jt=!0,mn=e}};function Ro(e,t,r,n,o,l,d,j,b){Jt=!1,mn=null,qr.apply(zo,arguments)}function $n(e,t,r,n,o,l,d,j,b){if(Ro.apply(this,arguments),Jt){if(Jt){var F=mn;Jt=!1,mn=null}else throw Error(a(198));Wt||(Wt=!0,Vt=F)}}function mr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ii(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Di(e){if(mr(e)!==e)throw Error(a(188))}function Id(e){var t=e.alternate;if(!t){if(t=mr(e),t===null)throw Error(a(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var l=o.alternate;if(l===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===r)return Di(o),e;if(l===n)return Di(o),t;l=l.sibling}throw Error(a(188))}if(r.return!==n.return)r=o,n=l;else{for(var d=!1,j=o.child;j;){if(j===r){d=!0,r=o,n=l;break}if(j===n){d=!0,n=o,r=l;break}j=j.sibling}if(!d){for(j=l.child;j;){if(j===r){d=!0,r=l,n=o;break}if(j===n){d=!0,n=l,r=o;break}j=j.sibling}if(!d)throw Error(a(189))}}if(r.alternate!==n)throw Error(a(190))}if(r.tag!==3)throw Error(a(188));return r.stateNode.current===r?e:t}function _i(e){return e=Id(e),e!==null?Mi(e):null}function Mi(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Mi(e);if(t!==null)return t;e=e.sibling}return null}var Pi=u.unstable_scheduleCallback,Ai=u.unstable_cancelCallback,Dd=u.unstable_shouldYield,_d=u.unstable_requestPaint,Ke=u.unstable_now,Md=u.unstable_getCurrentPriorityLevel,$o=u.unstable_ImmediatePriority,Li=u.unstable_UserBlockingPriority,bs=u.unstable_NormalPriority,Pd=u.unstable_LowPriority,Oi=u.unstable_IdlePriority,ks=null,ur=null;function Ad(e){if(ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(ks,e,void 0,(e.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:Fd,Ld=Math.log,Od=Math.LN2;function Fd(e){return e>>>=0,e===0?32:31-(Ld(e)/Od|0)|0}var Es=64,Ts=4194304;function Hn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Is(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,o=e.suspendedLanes,l=e.pingedLanes,d=r&268435455;if(d!==0){var j=d&~o;j!==0?n=Hn(j):(l&=d,l!==0&&(n=Hn(l)))}else d=r&~o,d!==0?n=Hn(d):l!==0&&(n=Hn(l));if(n===0)return 0;if(t!==0&&t!==n&&(t&o)===0&&(o=n&-n,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if((n&4)!==0&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-er(t),o=1<<r,n|=e[r],t&=~o;return n}function zd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rd(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var d=31-er(l),j=1<<d,b=o[d];b===-1?((j&r)===0||(j&n)!==0)&&(o[d]=zd(j,t)):b<=t&&(e.expiredLanes|=j),l&=~j}}function Ho(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Fi(){var e=Es;return Es<<=1,(Es&4194240)===0&&(Es=64),e}function Bo(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-er(t),e[t]=r}function $d(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var o=31-er(r),l=1<<o;t[o]=0,n[o]=-1,e[o]=-1,r&=~l}}function Uo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-er(r),o=1<<n;o&t|e[n]&t&&(e[n]|=t),r&=~o}}var Re=0;function zi(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Ri,Wo,$i,Hi,Bi,Vo=!1,Ds=[],Er=null,Tr=null,Ir=null,Un=new Map,Wn=new Map,Dr=[],Hd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ui(e,t){switch(e){case"focusin":case"focusout":Er=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Ir=null;break;case"pointerover":case"pointerout":Un.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(t.pointerId)}}function Vn(e,t,r,n,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:l,targetContainers:[o]},t!==null&&(t=os(t),t!==null&&Wo(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Bd(e,t,r,n,o){switch(t){case"focusin":return Er=Vn(Er,e,t,r,n,o),!0;case"dragenter":return Tr=Vn(Tr,e,t,r,n,o),!0;case"mouseover":return Ir=Vn(Ir,e,t,r,n,o),!0;case"pointerover":var l=o.pointerId;return Un.set(l,Vn(Un.get(l)||null,e,t,r,n,o)),!0;case"gotpointercapture":return l=o.pointerId,Wn.set(l,Vn(Wn.get(l)||null,e,t,r,n,o)),!0}return!1}function Wi(e){var t=Xr(e.target);if(t!==null){var r=mr(t);if(r!==null){if(t=r.tag,t===13){if(t=Ii(r),t!==null){e.blockedOn=t,Bi(e.priority,function(){$i(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _s(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);tt=n,r.target.dispatchEvent(n),tt=null}else return t=os(r),t!==null&&Wo(t),e.blockedOn=r,!1;t.shift()}return!0}function Vi(e,t,r){_s(e)&&r.delete(t)}function Ud(){Vo=!1,Er!==null&&_s(Er)&&(Er=null),Tr!==null&&_s(Tr)&&(Tr=null),Ir!==null&&_s(Ir)&&(Ir=null),Un.forEach(Vi),Wn.forEach(Vi)}function Gn(e,t){e.blockedOn===t&&(e.blockedOn=null,Vo||(Vo=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,Ud)))}function qn(e){function t(o){return Gn(o,e)}if(0<Ds.length){Gn(Ds[0],e);for(var r=1;r<Ds.length;r++){var n=Ds[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Er!==null&&Gn(Er,e),Tr!==null&&Gn(Tr,e),Ir!==null&&Gn(Ir,e),Un.forEach(t),Wn.forEach(t),r=0;r<Dr.length;r++)n=Dr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Dr.length&&(r=Dr[0],r.blockedOn===null);)Wi(r),r.blockedOn===null&&Dr.shift()}var hn=D.ReactCurrentBatchConfig,Ms=!0;function Wd(e,t,r,n){var o=Re,l=hn.transition;hn.transition=null;try{Re=1,Go(e,t,r,n)}finally{Re=o,hn.transition=l}}function Vd(e,t,r,n){var o=Re,l=hn.transition;hn.transition=null;try{Re=4,Go(e,t,r,n)}finally{Re=o,hn.transition=l}}function Go(e,t,r,n){if(Ms){var o=qo(e,t,r,n);if(o===null)dl(e,t,n,Ps,r),Ui(e,n);else if(Bd(o,e,t,r,n))n.stopPropagation();else if(Ui(e,n),t&4&&-1<Hd.indexOf(e)){for(;o!==null;){var l=os(o);if(l!==null&&Ri(l),l=qo(e,t,r,n),l===null&&dl(e,t,n,Ps,r),l===o)break;o=l}o!==null&&n.stopPropagation()}else dl(e,t,n,null,r)}}var Ps=null;function qo(e,t,r,n){if(Ps=null,e=Nt(n),e=Xr(e),e!==null)if(t=mr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ii(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ps=e,null}function Gi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Md()){case $o:return 1;case Li:return 4;case bs:case Pd:return 16;case Oi:return 536870912;default:return 16}default:return 16}}var _r=null,Xo=null,As=null;function qi(){if(As)return As;var e,t=Xo,r=t.length,n,o="value"in _r?_r.value:_r.textContent,l=o.length;for(e=0;e<r&&t[e]===o[e];e++);var d=r-e;for(n=1;n<=d&&t[r-n]===o[l-n];n++);return As=o.slice(e,1<n?1-n:void 0)}function Ls(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Os(){return!0}function Xi(){return!1}function Ft(e){function t(r,n,o,l,d){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(r=e[j],this[j]=r?r(l):l[j]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Os:Xi,this.isPropagationStopped=Xi,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),t}var gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qo=Ft(gn),Xn=J({},gn,{view:0,detail:0}),Gd=Ft(Xn),Yo,Ko,Qn,Fs=J({},Xn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qn&&(Qn&&e.type==="mousemove"?(Yo=e.screenX-Qn.screenX,Ko=e.screenY-Qn.screenY):Ko=Yo=0,Qn=e),Yo)},movementY:function(e){return"movementY"in e?e.movementY:Ko}}),Qi=Ft(Fs),qd=J({},Fs,{dataTransfer:0}),Xd=Ft(qd),Qd=J({},Xn,{relatedTarget:0}),Zo=Ft(Qd),Yd=J({},gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Kd=Ft(Yd),Zd=J({},gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jd=Ft(Zd),ec=J({},gn,{data:0}),Yi=Ft(ec),tc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sc(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nc[e])?!!t[e]:!1}function Jo(){return sc}var oc=J({},Xn,{key:function(e){if(e.key){var t=tc[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ls(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jo,charCode:function(e){return e.type==="keypress"?Ls(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ls(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lc=Ft(oc),ic=J({},Fs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ki=Ft(ic),ac=J({},Xn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jo}),uc=Ft(ac),dc=J({},gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),cc=Ft(dc),fc=J({},Fs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),pc=Ft(fc),mc=[9,13,27,32],el=v&&"CompositionEvent"in window,Yn=null;v&&"documentMode"in document&&(Yn=document.documentMode);var hc=v&&"TextEvent"in window&&!Yn,Zi=v&&(!el||Yn&&8<Yn&&11>=Yn),Ji=" ",ea=!1;function ta(e,t){switch(e){case"keyup":return mc.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ra(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var xn=!1;function gc(e,t){switch(e){case"compositionend":return ra(t);case"keypress":return t.which!==32?null:(ea=!0,Ji);case"textInput":return e=t.data,e===Ji&&ea?null:e;default:return null}}function xc(e,t){if(xn)return e==="compositionend"||!el&&ta(e,t)?(e=qi(),As=Xo=_r=null,xn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zi&&t.locale!=="ko"?null:t.data;default:return null}}var yc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function na(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!yc[e.type]:t==="textarea"}function sa(e,t,r,n){fn(n),t=Bs(t,"onChange"),0<t.length&&(r=new Qo("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Kn=null,Zn=null;function vc(e){ja(e,0)}function zs(e){var t=jn(e);if(q(t))return e}function wc(e,t){if(e==="change")return t}var oa=!1;if(v){var tl;if(v){var rl="oninput"in document;if(!rl){var la=document.createElement("div");la.setAttribute("oninput","return;"),rl=typeof la.oninput=="function"}tl=rl}else tl=!1;oa=tl&&(!document.documentMode||9<document.documentMode)}function ia(){Kn&&(Kn.detachEvent("onpropertychange",aa),Zn=Kn=null)}function aa(e){if(e.propertyName==="value"&&zs(Zn)){var t=[];sa(t,Zn,e,Nt(e)),dt(vc,t)}}function Sc(e,t,r){e==="focusin"?(ia(),Kn=t,Zn=r,Kn.attachEvent("onpropertychange",aa)):e==="focusout"&&ia()}function jc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return zs(Zn)}function Cc(e,t){if(e==="click")return zs(t)}function Nc(e,t){if(e==="input"||e==="change")return zs(t)}function bc(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tr=typeof Object.is=="function"?Object.is:bc;function Jn(e,t){if(tr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(!x.call(t,o)||!tr(e[o],t[o]))return!1}return!0}function ua(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var r=ua(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ua(r)}}function ca(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ca(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fa(){for(var e=window,t=ae();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ae(e.document)}return t}function nl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kc(e){var t=fa(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ca(r.ownerDocument.documentElement,r)){if(n!==null&&nl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=r.textContent.length,l=Math.min(n.start,o);n=n.end===void 0?l:Math.min(n.end,o),!e.extend&&l>n&&(o=n,n=l,l=o),o=da(r,l);var d=da(r,n);o&&d&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==d.node||e.focusOffset!==d.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>n?(e.addRange(t),e.extend(d.node,d.offset)):(t.setEnd(d.node,d.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ec=v&&"documentMode"in document&&11>=document.documentMode,yn=null,sl=null,es=null,ol=!1;function pa(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ol||yn==null||yn!==ae(n)||(n=yn,"selectionStart"in n&&nl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),es&&Jn(es,n)||(es=n,n=Bs(sl,"onSelect"),0<n.length&&(t=new Qo("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=yn)))}function Rs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var vn={animationend:Rs("Animation","AnimationEnd"),animationiteration:Rs("Animation","AnimationIteration"),animationstart:Rs("Animation","AnimationStart"),transitionend:Rs("Transition","TransitionEnd")},ll={},ma={};v&&(ma=document.createElement("div").style,"AnimationEvent"in window||(delete vn.animationend.animation,delete vn.animationiteration.animation,delete vn.animationstart.animation),"TransitionEvent"in window||delete vn.transitionend.transition);function $s(e){if(ll[e])return ll[e];if(!vn[e])return e;var t=vn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in ma)return ll[e]=t[r];return e}var ha=$s("animationend"),ga=$s("animationiteration"),xa=$s("animationstart"),ya=$s("transitionend"),va=new Map,wa="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){va.set(e,t),p(t,[e])}for(var il=0;il<wa.length;il++){var al=wa[il],Tc=al.toLowerCase(),Ic=al[0].toUpperCase()+al.slice(1);Mr(Tc,"on"+Ic)}Mr(ha,"onAnimationEnd"),Mr(ga,"onAnimationIteration"),Mr(xa,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(ya,"onTransitionEnd"),m("onMouseEnter",["mouseout","mouseover"]),m("onMouseLeave",["mouseout","mouseover"]),m("onPointerEnter",["pointerout","pointerover"]),m("onPointerLeave",["pointerout","pointerover"]),p("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),p("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),p("onBeforeInput",["compositionend","keypress","textInput","paste"]),p("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),p("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dc=new Set("cancel close invalid load scroll toggle".split(" ").concat(ts));function Sa(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,$n(n,t,void 0,e),e.currentTarget=null}function ja(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var l=void 0;if(t)for(var d=n.length-1;0<=d;d--){var j=n[d],b=j.instance,F=j.currentTarget;if(j=j.listener,b!==l&&o.isPropagationStopped())break e;Sa(o,j,F),l=b}else for(d=0;d<n.length;d++){if(j=n[d],b=j.instance,F=j.currentTarget,j=j.listener,b!==l&&o.isPropagationStopped())break e;Sa(o,j,F),l=b}}}if(Wt)throw e=Vt,Wt=!1,Vt=null,e}function Be(e,t){var r=t[gl];r===void 0&&(r=t[gl]=new Set);var n=e+"__bubble";r.has(n)||(Ca(t,e,2,!1),r.add(n))}function ul(e,t,r){var n=0;t&&(n|=4),Ca(r,e,n,t)}var Hs="_reactListening"+Math.random().toString(36).slice(2);function rs(e){if(!e[Hs]){e[Hs]=!0,f.forEach(function(r){r!=="selectionchange"&&(Dc.has(r)||ul(r,!1,e),ul(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Hs]||(t[Hs]=!0,ul("selectionchange",!1,t))}}function Ca(e,t,r,n){switch(Gi(t)){case 1:var o=Wd;break;case 4:o=Vd;break;default:o=Go}r=o.bind(null,t,r,e),o=void 0,!pn||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function dl(e,t,r,n,o){var l=n;if((t&1)===0&&(t&2)===0&&n!==null)e:for(;;){if(n===null)return;var d=n.tag;if(d===3||d===4){var j=n.stateNode.containerInfo;if(j===o||j.nodeType===8&&j.parentNode===o)break;if(d===4)for(d=n.return;d!==null;){var b=d.tag;if((b===3||b===4)&&(b=d.stateNode.containerInfo,b===o||b.nodeType===8&&b.parentNode===o))return;d=d.return}for(;j!==null;){if(d=Xr(j),d===null)return;if(b=d.tag,b===5||b===6){n=l=d;continue e}j=j.parentNode}}n=n.return}dt(function(){var F=l,X=Nt(r),Q=[];e:{var G=va.get(e);if(G!==void 0){var ne=Qo,le=e;switch(e){case"keypress":if(Ls(r)===0)break e;case"keydown":case"keyup":ne=lc;break;case"focusin":le="focus",ne=Zo;break;case"focusout":le="blur",ne=Zo;break;case"beforeblur":case"afterblur":ne=Zo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Qi;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Xd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=uc;break;case ha:case ga:case xa:ne=Kd;break;case ya:ne=cc;break;case"scroll":ne=Gd;break;case"wheel":ne=pc;break;case"copy":case"cut":case"paste":ne=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Ki}var ue=(t&4)!==0,Ze=!ue&&e==="scroll",M=ue?G!==null?G+"Capture":null:G;ue=[];for(var k=F,L;k!==null;){L=k;var Z=L.stateNode;if(L.tag===5&&Z!==null&&(L=Z,M!==null&&(Z=kr(k,M),Z!=null&&ue.push(ns(k,Z,L)))),Ze)break;k=k.return}0<ue.length&&(G=new ne(G,le,null,r,X),Q.push({event:G,listeners:ue}))}}if((t&7)===0){e:{if(G=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",G&&r!==tt&&(le=r.relatedTarget||r.fromElement)&&(Xr(le)||le[hr]))break e;if((ne||G)&&(G=X.window===X?X:(G=X.ownerDocument)?G.defaultView||G.parentWindow:window,ne?(le=r.relatedTarget||r.toElement,ne=F,le=le?Xr(le):null,le!==null&&(Ze=mr(le),le!==Ze||le.tag!==5&&le.tag!==6)&&(le=null)):(ne=null,le=F),ne!==le)){if(ue=Qi,Z="onMouseLeave",M="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(ue=Ki,Z="onPointerLeave",M="onPointerEnter",k="pointer"),Ze=ne==null?G:jn(ne),L=le==null?G:jn(le),G=new ue(Z,k+"leave",ne,r,X),G.target=Ze,G.relatedTarget=L,Z=null,Xr(X)===F&&(ue=new ue(M,k+"enter",le,r,X),ue.target=L,ue.relatedTarget=Ze,Z=ue),Ze=Z,ne&&le)t:{for(ue=ne,M=le,k=0,L=ue;L;L=wn(L))k++;for(L=0,Z=M;Z;Z=wn(Z))L++;for(;0<k-L;)ue=wn(ue),k--;for(;0<L-k;)M=wn(M),L--;for(;k--;){if(ue===M||M!==null&&ue===M.alternate)break t;ue=wn(ue),M=wn(M)}ue=null}else ue=null;ne!==null&&Na(Q,G,ne,ue,!1),le!==null&&Ze!==null&&Na(Q,Ze,le,ue,!0)}}e:{if(G=F?jn(F):window,ne=G.nodeName&&G.nodeName.toLowerCase(),ne==="select"||ne==="input"&&G.type==="file")var fe=wc;else if(na(G))if(oa)fe=Nc;else{fe=jc;var he=Sc}else(ne=G.nodeName)&&ne.toLowerCase()==="input"&&(G.type==="checkbox"||G.type==="radio")&&(fe=Cc);if(fe&&(fe=fe(e,F))){sa(Q,fe,r,X);break e}he&&he(e,G,F),e==="focusout"&&(he=G._wrapperState)&&he.controlled&&G.type==="number"&&Fe(G,"number",G.value)}switch(he=F?jn(F):window,e){case"focusin":(na(he)||he.contentEditable==="true")&&(yn=he,sl=F,es=null);break;case"focusout":es=sl=yn=null;break;case"mousedown":ol=!0;break;case"contextmenu":case"mouseup":case"dragend":ol=!1,pa(Q,r,X);break;case"selectionchange":if(Ec)break;case"keydown":case"keyup":pa(Q,r,X)}var ge;if(el)e:{switch(e){case"compositionstart":var Se="onCompositionStart";break e;case"compositionend":Se="onCompositionEnd";break e;case"compositionupdate":Se="onCompositionUpdate";break e}Se=void 0}else xn?ta(e,r)&&(Se="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Se="onCompositionStart");Se&&(Zi&&r.locale!=="ko"&&(xn||Se!=="onCompositionStart"?Se==="onCompositionEnd"&&xn&&(ge=qi()):(_r=X,Xo="value"in _r?_r.value:_r.textContent,xn=!0)),he=Bs(F,Se),0<he.length&&(Se=new Yi(Se,e,null,r,X),Q.push({event:Se,listeners:he}),ge?Se.data=ge:(ge=ra(r),ge!==null&&(Se.data=ge)))),(ge=hc?gc(e,r):xc(e,r))&&(F=Bs(F,"onBeforeInput"),0<F.length&&(X=new Yi("onBeforeInput","beforeinput",null,r,X),Q.push({event:X,listeners:F}),X.data=ge))}ja(Q,t)})}function ns(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Bs(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=kr(e,r),l!=null&&n.unshift(ns(e,l,o)),l=kr(e,t),l!=null&&n.push(ns(e,l,o))),e=e.return}return n}function wn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Na(e,t,r,n,o){for(var l=t._reactName,d=[];r!==null&&r!==n;){var j=r,b=j.alternate,F=j.stateNode;if(b!==null&&b===n)break;j.tag===5&&F!==null&&(j=F,o?(b=kr(r,l),b!=null&&d.unshift(ns(r,b,j))):o||(b=kr(r,l),b!=null&&d.push(ns(r,b,j)))),r=r.return}d.length!==0&&e.push({event:t,listeners:d})}var _c=/\r\n?/g,Mc=/\u0000|\uFFFD/g;function ba(e){return(typeof e=="string"?e:""+e).replace(_c,`
`).replace(Mc,"")}function Us(e,t,r){if(t=ba(t),ba(e)!==t&&r)throw Error(a(425))}function Ws(){}var cl=null,fl=null;function pl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ml=typeof setTimeout=="function"?setTimeout:void 0,Pc=typeof clearTimeout=="function"?clearTimeout:void 0,ka=typeof Promise=="function"?Promise:void 0,Ac=typeof queueMicrotask=="function"?queueMicrotask:typeof ka<"u"?function(e){return ka.resolve(null).then(e).catch(Lc)}:ml;function Lc(e){setTimeout(function(){throw e})}function hl(e,t){var r=t,n=0;do{var o=r.nextSibling;if(e.removeChild(r),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(n===0){e.removeChild(o),qn(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=o}while(r);qn(t)}function Pr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ea(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),dr="__reactFiber$"+Sn,ss="__reactProps$"+Sn,hr="__reactContainer$"+Sn,gl="__reactEvents$"+Sn,Oc="__reactListeners$"+Sn,Fc="__reactHandles$"+Sn;function Xr(e){var t=e[dr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[hr]||r[dr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Ea(e);e!==null;){if(r=e[dr])return r;e=Ea(e)}return t}e=r,r=e.parentNode}return null}function os(e){return e=e[dr]||e[hr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(a(33))}function Vs(e){return e[ss]||null}var xl=[],Cn=-1;function Ar(e){return{current:e}}function Ue(e){0>Cn||(e.current=xl[Cn],xl[Cn]=null,Cn--)}function He(e,t){Cn++,xl[Cn]=e.current,e.current=t}var Lr={},yt=Ar(Lr),It=Ar(!1),Qr=Lr;function Nn(e,t){var r=e.type.contextTypes;if(!r)return Lr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in r)o[l]=t[l];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Dt(e){return e=e.childContextTypes,e!=null}function Gs(){Ue(It),Ue(yt)}function Ta(e,t,r){if(yt.current!==Lr)throw Error(a(168));He(yt,t),He(It,r)}function Ia(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in t))throw Error(a(108,Ae(e)||"Unknown",o));return J({},r,n)}function qs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lr,Qr=yt.current,He(yt,e),He(It,It.current),!0}function Da(e,t,r){var n=e.stateNode;if(!n)throw Error(a(169));r?(e=Ia(e,t,Qr),n.__reactInternalMemoizedMergedChildContext=e,Ue(It),Ue(yt),He(yt,e)):Ue(It),He(It,r)}var gr=null,Xs=!1,yl=!1;function _a(e){gr===null?gr=[e]:gr.push(e)}function zc(e){Xs=!0,_a(e)}function Or(){if(!yl&&gr!==null){yl=!0;var e=0,t=Re;try{var r=gr;for(Re=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gr=null,Xs=!1}catch(o){throw gr!==null&&(gr=gr.slice(e+1)),Pi($o,Or),o}finally{Re=t,yl=!1}}return null}var bn=[],kn=0,Qs=null,Ys=0,Gt=[],qt=0,Yr=null,xr=1,yr="";function Kr(e,t){bn[kn++]=Ys,bn[kn++]=Qs,Qs=e,Ys=t}function Ma(e,t,r){Gt[qt++]=xr,Gt[qt++]=yr,Gt[qt++]=Yr,Yr=e;var n=xr;e=yr;var o=32-er(n)-1;n&=~(1<<o),r+=1;var l=32-er(t)+o;if(30<l){var d=o-o%5;l=(n&(1<<d)-1).toString(32),n>>=d,o-=d,xr=1<<32-er(t)+o|r<<o|n,yr=l+e}else xr=1<<l|r<<o|n,yr=e}function vl(e){e.return!==null&&(Kr(e,1),Ma(e,1,0))}function wl(e){for(;e===Qs;)Qs=bn[--kn],bn[kn]=null,Ys=bn[--kn],bn[kn]=null;for(;e===Yr;)Yr=Gt[--qt],Gt[qt]=null,yr=Gt[--qt],Gt[qt]=null,xr=Gt[--qt],Gt[qt]=null}var zt=null,Rt=null,Ge=!1,rr=null;function Pa(e,t){var r=Kt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Aa(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,zt=e,Rt=Pr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,zt=e,Rt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Yr!==null?{id:xr,overflow:yr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,zt=e,Rt=null,!0):!1;default:return!1}}function Sl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function jl(e){if(Ge){var t=Rt;if(t){var r=t;if(!Aa(e,t)){if(Sl(e))throw Error(a(418));t=Pr(r.nextSibling);var n=zt;t&&Aa(e,t)?Pa(n,r):(e.flags=e.flags&-4097|2,Ge=!1,zt=e)}}else{if(Sl(e))throw Error(a(418));e.flags=e.flags&-4097|2,Ge=!1,zt=e}}}function La(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;zt=e}function Ks(e){if(e!==zt)return!1;if(!Ge)return La(e),Ge=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!pl(e.type,e.memoizedProps)),t&&(t=Rt)){if(Sl(e))throw Oa(),Error(a(418));for(;t;)Pa(e,t),t=Pr(t.nextSibling)}if(La(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Rt=Pr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Rt=null}}else Rt=zt?Pr(e.stateNode.nextSibling):null;return!0}function Oa(){for(var e=Rt;e;)e=Pr(e.nextSibling)}function En(){Rt=zt=null,Ge=!1}function Cl(e){rr===null?rr=[e]:rr.push(e)}var Rc=D.ReactCurrentBatchConfig;function ls(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(a(309));var n=r.stateNode}if(!n)throw Error(a(147,e));var o=n,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(d){var j=o.refs;d===null?delete j[l]:j[l]=d},t._stringRef=l,t)}if(typeof e!="string")throw Error(a(284));if(!r._owner)throw Error(a(290,e))}return e}function Zs(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Fa(e){var t=e._init;return t(e._payload)}function za(e){function t(M,k){if(e){var L=M.deletions;L===null?(M.deletions=[k],M.flags|=16):L.push(k)}}function r(M,k){if(!e)return null;for(;k!==null;)t(M,k),k=k.sibling;return null}function n(M,k){for(M=new Map;k!==null;)k.key!==null?M.set(k.key,k):M.set(k.index,k),k=k.sibling;return M}function o(M,k){return M=Wr(M,k),M.index=0,M.sibling=null,M}function l(M,k,L){return M.index=L,e?(L=M.alternate,L!==null?(L=L.index,L<k?(M.flags|=2,k):L):(M.flags|=2,k)):(M.flags|=1048576,k)}function d(M){return e&&M.alternate===null&&(M.flags|=2),M}function j(M,k,L,Z){return k===null||k.tag!==6?(k=mi(L,M.mode,Z),k.return=M,k):(k=o(k,L),k.return=M,k)}function b(M,k,L,Z){var fe=L.type;return fe===E?X(M,k,L.props.children,Z,L.key):k!==null&&(k.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===K&&Fa(fe)===k.type)?(Z=o(k,L.props),Z.ref=ls(M,k,L),Z.return=M,Z):(Z=Co(L.type,L.key,L.props,null,M.mode,Z),Z.ref=ls(M,k,L),Z.return=M,Z)}function F(M,k,L,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?(k=hi(L,M.mode,Z),k.return=M,k):(k=o(k,L.children||[]),k.return=M,k)}function X(M,k,L,Z,fe){return k===null||k.tag!==7?(k=on(L,M.mode,Z,fe),k.return=M,k):(k=o(k,L),k.return=M,k)}function Q(M,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return k=mi(""+k,M.mode,L),k.return=M,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case z:return L=Co(k.type,k.key,k.props,null,M.mode,L),L.ref=ls(M,null,k),L.return=M,L;case _:return k=hi(k,M.mode,L),k.return=M,k;case K:var Z=k._init;return Q(M,Z(k._payload),L)}if(ye(k)||re(k))return k=on(k,M.mode,L,null),k.return=M,k;Zs(M,k)}return null}function G(M,k,L,Z){var fe=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number")return fe!==null?null:j(M,k,""+L,Z);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case z:return L.key===fe?b(M,k,L,Z):null;case _:return L.key===fe?F(M,k,L,Z):null;case K:return fe=L._init,G(M,k,fe(L._payload),Z)}if(ye(L)||re(L))return fe!==null?null:X(M,k,L,Z,null);Zs(M,L)}return null}function ne(M,k,L,Z,fe){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return M=M.get(L)||null,j(k,M,""+Z,fe);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case z:return M=M.get(Z.key===null?L:Z.key)||null,b(k,M,Z,fe);case _:return M=M.get(Z.key===null?L:Z.key)||null,F(k,M,Z,fe);case K:var he=Z._init;return ne(M,k,L,he(Z._payload),fe)}if(ye(Z)||re(Z))return M=M.get(L)||null,X(k,M,Z,fe,null);Zs(k,Z)}return null}function le(M,k,L,Z){for(var fe=null,he=null,ge=k,Se=k=0,mt=null;ge!==null&&Se<L.length;Se++){ge.index>Se?(mt=ge,ge=null):mt=ge.sibling;var Oe=G(M,ge,L[Se],Z);if(Oe===null){ge===null&&(ge=mt);break}e&&ge&&Oe.alternate===null&&t(M,ge),k=l(Oe,k,Se),he===null?fe=Oe:he.sibling=Oe,he=Oe,ge=mt}if(Se===L.length)return r(M,ge),Ge&&Kr(M,Se),fe;if(ge===null){for(;Se<L.length;Se++)ge=Q(M,L[Se],Z),ge!==null&&(k=l(ge,k,Se),he===null?fe=ge:he.sibling=ge,he=ge);return Ge&&Kr(M,Se),fe}for(ge=n(M,ge);Se<L.length;Se++)mt=ne(ge,M,Se,L[Se],Z),mt!==null&&(e&&mt.alternate!==null&&ge.delete(mt.key===null?Se:mt.key),k=l(mt,k,Se),he===null?fe=mt:he.sibling=mt,he=mt);return e&&ge.forEach(function(Vr){return t(M,Vr)}),Ge&&Kr(M,Se),fe}function ue(M,k,L,Z){var fe=re(L);if(typeof fe!="function")throw Error(a(150));if(L=fe.call(L),L==null)throw Error(a(151));for(var he=fe=null,ge=k,Se=k=0,mt=null,Oe=L.next();ge!==null&&!Oe.done;Se++,Oe=L.next()){ge.index>Se?(mt=ge,ge=null):mt=ge.sibling;var Vr=G(M,ge,Oe.value,Z);if(Vr===null){ge===null&&(ge=mt);break}e&&ge&&Vr.alternate===null&&t(M,ge),k=l(Vr,k,Se),he===null?fe=Vr:he.sibling=Vr,he=Vr,ge=mt}if(Oe.done)return r(M,ge),Ge&&Kr(M,Se),fe;if(ge===null){for(;!Oe.done;Se++,Oe=L.next())Oe=Q(M,Oe.value,Z),Oe!==null&&(k=l(Oe,k,Se),he===null?fe=Oe:he.sibling=Oe,he=Oe);return Ge&&Kr(M,Se),fe}for(ge=n(M,ge);!Oe.done;Se++,Oe=L.next())Oe=ne(ge,M,Se,Oe.value,Z),Oe!==null&&(e&&Oe.alternate!==null&&ge.delete(Oe.key===null?Se:Oe.key),k=l(Oe,k,Se),he===null?fe=Oe:he.sibling=Oe,he=Oe);return e&&ge.forEach(function(vf){return t(M,vf)}),Ge&&Kr(M,Se),fe}function Ze(M,k,L,Z){if(typeof L=="object"&&L!==null&&L.type===E&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case z:e:{for(var fe=L.key,he=k;he!==null;){if(he.key===fe){if(fe=L.type,fe===E){if(he.tag===7){r(M,he.sibling),k=o(he,L.props.children),k.return=M,M=k;break e}}else if(he.elementType===fe||typeof fe=="object"&&fe!==null&&fe.$$typeof===K&&Fa(fe)===he.type){r(M,he.sibling),k=o(he,L.props),k.ref=ls(M,he,L),k.return=M,M=k;break e}r(M,he);break}else t(M,he);he=he.sibling}L.type===E?(k=on(L.props.children,M.mode,Z,L.key),k.return=M,M=k):(Z=Co(L.type,L.key,L.props,null,M.mode,Z),Z.ref=ls(M,k,L),Z.return=M,M=Z)}return d(M);case _:e:{for(he=L.key;k!==null;){if(k.key===he)if(k.tag===4&&k.stateNode.containerInfo===L.containerInfo&&k.stateNode.implementation===L.implementation){r(M,k.sibling),k=o(k,L.children||[]),k.return=M,M=k;break e}else{r(M,k);break}else t(M,k);k=k.sibling}k=hi(L,M.mode,Z),k.return=M,M=k}return d(M);case K:return he=L._init,Ze(M,k,he(L._payload),Z)}if(ye(L))return le(M,k,L,Z);if(re(L))return ue(M,k,L,Z);Zs(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"?(L=""+L,k!==null&&k.tag===6?(r(M,k.sibling),k=o(k,L),k.return=M,M=k):(r(M,k),k=mi(L,M.mode,Z),k.return=M,M=k),d(M)):r(M,k)}return Ze}var Tn=za(!0),Ra=za(!1),Js=Ar(null),eo=null,In=null,Nl=null;function bl(){Nl=In=eo=null}function kl(e){var t=Js.current;Ue(Js),e._currentValue=t}function El(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Dn(e,t){eo=e,Nl=In=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(_t=!0),e.firstContext=null)}function Xt(e){var t=e._currentValue;if(Nl!==e)if(e={context:e,memoizedValue:t,next:null},In===null){if(eo===null)throw Error(a(308));In=e,eo.dependencies={lanes:0,firstContext:e}}else In=In.next=e;return t}var Zr=null;function Tl(e){Zr===null?Zr=[e]:Zr.push(e)}function $a(e,t,r,n){var o=t.interleaved;return o===null?(r.next=r,Tl(t)):(r.next=o.next,o.next=r),t.interleaved=r,vr(e,n)}function vr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Fr=!1;function Il(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ha(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,(Le&2)!==0){var o=n.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),n.pending=t,vr(e,r)}return o=n.interleaved,o===null?(t.next=t,Tl(n)):(t.next=o.next,o.next=t),n.interleaved=t,vr(e,r)}function to(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Uo(e,r)}}function Ba(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,l=null;if(r=r.firstBaseUpdate,r!==null){do{var d={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};l===null?o=l=d:l=l.next=d,r=r.next}while(r!==null);l===null?o=l=t:l=l.next=t}else o=l=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function ro(e,t,r,n){var o=e.updateQueue;Fr=!1;var l=o.firstBaseUpdate,d=o.lastBaseUpdate,j=o.shared.pending;if(j!==null){o.shared.pending=null;var b=j,F=b.next;b.next=null,d===null?l=F:d.next=F,d=b;var X=e.alternate;X!==null&&(X=X.updateQueue,j=X.lastBaseUpdate,j!==d&&(j===null?X.firstBaseUpdate=F:j.next=F,X.lastBaseUpdate=b))}if(l!==null){var Q=o.baseState;d=0,X=F=b=null,j=l;do{var G=j.lane,ne=j.eventTime;if((n&G)===G){X!==null&&(X=X.next={eventTime:ne,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var le=e,ue=j;switch(G=t,ne=r,ue.tag){case 1:if(le=ue.payload,typeof le=="function"){Q=le.call(ne,Q,G);break e}Q=le;break e;case 3:le.flags=le.flags&-65537|128;case 0:if(le=ue.payload,G=typeof le=="function"?le.call(ne,Q,G):le,G==null)break e;Q=J({},Q,G);break e;case 2:Fr=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,G=o.effects,G===null?o.effects=[j]:G.push(j))}else ne={eventTime:ne,lane:G,tag:j.tag,payload:j.payload,callback:j.callback,next:null},X===null?(F=X=ne,b=Q):X=X.next=ne,d|=G;if(j=j.next,j===null){if(j=o.shared.pending,j===null)break;G=j,j=G.next,G.next=null,o.lastBaseUpdate=G,o.shared.pending=null}}while(!0);if(X===null&&(b=Q),o.baseState=b,o.firstBaseUpdate=F,o.lastBaseUpdate=X,t=o.shared.interleaved,t!==null){o=t;do d|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);tn|=d,e.lanes=d,e.memoizedState=Q}}function Ua(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(a(191,o));o.call(n)}}}var is={},cr=Ar(is),as=Ar(is),us=Ar(is);function Jr(e){if(e===is)throw Error(a(174));return e}function Dl(e,t){switch(He(us,t),He(as,e),He(cr,is),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ve(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ve(t,e)}Ue(cr),He(cr,t)}function _n(){Ue(cr),Ue(as),Ue(us)}function Wa(e){Jr(us.current);var t=Jr(cr.current),r=ve(t,e.type);t!==r&&(He(as,e),He(cr,r))}function _l(e){as.current===e&&(Ue(cr),Ue(as))}var Xe=Ar(0);function no(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ml=[];function Pl(){for(var e=0;e<Ml.length;e++)Ml[e]._workInProgressVersionPrimary=null;Ml.length=0}var so=D.ReactCurrentDispatcher,Al=D.ReactCurrentBatchConfig,en=0,Qe=null,at=null,ft=null,oo=!1,ds=!1,cs=0,$c=0;function vt(){throw Error(a(321))}function Ll(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!tr(e[r],t[r]))return!1;return!0}function Ol(e,t,r,n,o,l){if(en=l,Qe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=e===null||e.memoizedState===null?Wc:Vc,e=r(n,o),ds){l=0;do{if(ds=!1,cs=0,25<=l)throw Error(a(301));l+=1,ft=at=null,t.updateQueue=null,so.current=Gc,e=r(n,o)}while(ds)}if(so.current=ao,t=at!==null&&at.next!==null,en=0,ft=at=Qe=null,oo=!1,t)throw Error(a(300));return e}function Fl(){var e=cs!==0;return cs=0,e}function fr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ft===null?Qe.memoizedState=ft=e:ft=ft.next=e,ft}function Qt(){if(at===null){var e=Qe.alternate;e=e!==null?e.memoizedState:null}else e=at.next;var t=ft===null?Qe.memoizedState:ft.next;if(t!==null)ft=t,at=e;else{if(e===null)throw Error(a(310));at=e,e={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},ft===null?Qe.memoizedState=ft=e:ft=ft.next=e}return ft}function fs(e,t){return typeof t=="function"?t(e):t}function zl(e){var t=Qt(),r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var n=at,o=n.baseQueue,l=r.pending;if(l!==null){if(o!==null){var d=o.next;o.next=l.next,l.next=d}n.baseQueue=o=l,r.pending=null}if(o!==null){l=o.next,n=n.baseState;var j=d=null,b=null,F=l;do{var X=F.lane;if((en&X)===X)b!==null&&(b=b.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),n=F.hasEagerState?F.eagerState:e(n,F.action);else{var Q={lane:X,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};b===null?(j=b=Q,d=n):b=b.next=Q,Qe.lanes|=X,tn|=X}F=F.next}while(F!==null&&F!==l);b===null?d=n:b.next=j,tr(n,t.memoizedState)||(_t=!0),t.memoizedState=n,t.baseState=d,t.baseQueue=b,r.lastRenderedState=n}if(e=r.interleaved,e!==null){o=e;do l=o.lane,Qe.lanes|=l,tn|=l,o=o.next;while(o!==e)}else o===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Rl(e){var t=Qt(),r=t.queue;if(r===null)throw Error(a(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,l=t.memoizedState;if(o!==null){r.pending=null;var d=o=o.next;do l=e(l,d.action),d=d.next;while(d!==o);tr(l,t.memoizedState)||(_t=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),r.lastRenderedState=l}return[l,n]}function Va(){}function Ga(e,t){var r=Qe,n=Qt(),o=t(),l=!tr(n.memoizedState,o);if(l&&(n.memoizedState=o,_t=!0),n=n.queue,$l(Qa.bind(null,r,n,e),[e]),n.getSnapshot!==t||l||ft!==null&&ft.memoizedState.tag&1){if(r.flags|=2048,ps(9,Xa.bind(null,r,n,o,t),void 0,null),pt===null)throw Error(a(349));(en&30)!==0||qa(r,t,o)}return o}function qa(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Xa(e,t,r,n){t.value=r,t.getSnapshot=n,Ya(t)&&Ka(e)}function Qa(e,t,r){return r(function(){Ya(t)&&Ka(e)})}function Ya(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!tr(e,r)}catch{return!0}}function Ka(e){var t=vr(e,1);t!==null&&lr(t,e,1,-1)}function Za(e){var t=fr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},t.queue=e,e=e.dispatch=Uc.bind(null,Qe,e),[t.memoizedState,e]}function ps(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Qe.updateQueue,t===null?(t={lastEffect:null,stores:null},Qe.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ja(){return Qt().memoizedState}function lo(e,t,r,n){var o=fr();Qe.flags|=e,o.memoizedState=ps(1|t,r,void 0,n===void 0?null:n)}function io(e,t,r,n){var o=Qt();n=n===void 0?null:n;var l=void 0;if(at!==null){var d=at.memoizedState;if(l=d.destroy,n!==null&&Ll(n,d.deps)){o.memoizedState=ps(t,r,l,n);return}}Qe.flags|=e,o.memoizedState=ps(1|t,r,l,n)}function eu(e,t){return lo(8390656,8,e,t)}function $l(e,t){return io(2048,8,e,t)}function tu(e,t){return io(4,2,e,t)}function ru(e,t){return io(4,4,e,t)}function nu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function su(e,t,r){return r=r!=null?r.concat([e]):null,io(4,4,nu.bind(null,t,e),r)}function Hl(){}function ou(e,t){var r=Qt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ll(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function lu(e,t){var r=Qt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Ll(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function iu(e,t,r){return(en&21)===0?(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=r):(tr(r,t)||(r=Fi(),Qe.lanes|=r,tn|=r,e.baseState=!0),t)}function Hc(e,t){var r=Re;Re=r!==0&&4>r?r:4,e(!0);var n=Al.transition;Al.transition={};try{e(!1),t()}finally{Re=r,Al.transition=n}}function au(){return Qt().memoizedState}function Bc(e,t,r){var n=Br(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},uu(e))du(t,r);else if(r=$a(e,t,r,n),r!==null){var o=Et();lr(r,e,n,o),cu(r,t,n)}}function Uc(e,t,r){var n=Br(e),o={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(uu(e))du(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var d=t.lastRenderedState,j=l(d,r);if(o.hasEagerState=!0,o.eagerState=j,tr(j,d)){var b=t.interleaved;b===null?(o.next=o,Tl(t)):(o.next=b.next,b.next=o),t.interleaved=o;return}}catch{}finally{}r=$a(e,t,o,n),r!==null&&(o=Et(),lr(r,e,n,o),cu(r,t,n))}}function uu(e){var t=e.alternate;return e===Qe||t!==null&&t===Qe}function du(e,t){ds=oo=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function cu(e,t,r){if((r&4194240)!==0){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Uo(e,r)}}var ao={readContext:Xt,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},Wc={readContext:Xt,useCallback:function(e,t){return fr().memoizedState=[e,t===void 0?null:t],e},useContext:Xt,useEffect:eu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,lo(4194308,4,nu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return lo(4,2,e,t)},useMemo:function(e,t){var r=fr();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=fr();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Bc.bind(null,Qe,e),[n.memoizedState,e]},useRef:function(e){var t=fr();return e={current:e},t.memoizedState=e},useState:Za,useDebugValue:Hl,useDeferredValue:function(e){return fr().memoizedState=e},useTransition:function(){var e=Za(!1),t=e[0];return e=Hc.bind(null,e[1]),fr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Qe,o=fr();if(Ge){if(r===void 0)throw Error(a(407));r=r()}else{if(r=t(),pt===null)throw Error(a(349));(en&30)!==0||qa(n,t,r)}o.memoizedState=r;var l={value:r,getSnapshot:t};return o.queue=l,eu(Qa.bind(null,n,l,e),[e]),n.flags|=2048,ps(9,Xa.bind(null,n,l,r,t),void 0,null),r},useId:function(){var e=fr(),t=pt.identifierPrefix;if(Ge){var r=yr,n=xr;r=(n&~(1<<32-er(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=cs++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$c++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vc={readContext:Xt,useCallback:ou,useContext:Xt,useEffect:$l,useImperativeHandle:su,useInsertionEffect:tu,useLayoutEffect:ru,useMemo:lu,useReducer:zl,useRef:Ja,useState:function(){return zl(fs)},useDebugValue:Hl,useDeferredValue:function(e){var t=Qt();return iu(t,at.memoizedState,e)},useTransition:function(){var e=zl(fs)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Va,useSyncExternalStore:Ga,useId:au,unstable_isNewReconciler:!1},Gc={readContext:Xt,useCallback:ou,useContext:Xt,useEffect:$l,useImperativeHandle:su,useInsertionEffect:tu,useLayoutEffect:ru,useMemo:lu,useReducer:Rl,useRef:Ja,useState:function(){return Rl(fs)},useDebugValue:Hl,useDeferredValue:function(e){var t=Qt();return at===null?t.memoizedState=e:iu(t,at.memoizedState,e)},useTransition:function(){var e=Rl(fs)[0],t=Qt().memoizedState;return[e,t]},useMutableSource:Va,useSyncExternalStore:Ga,useId:au,unstable_isNewReconciler:!1};function nr(e,t){if(e&&e.defaultProps){t=J({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Bl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:J({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var uo={isMounted:function(e){return(e=e._reactInternals)?mr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Et(),o=Br(e),l=wr(n,o);l.payload=t,r!=null&&(l.callback=r),t=zr(e,l,o),t!==null&&(lr(t,e,o,n),to(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Et(),o=Br(e),l=wr(n,o);l.tag=1,l.payload=t,r!=null&&(l.callback=r),t=zr(e,l,o),t!==null&&(lr(t,e,o,n),to(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Et(),n=Br(e),o=wr(r,n);o.tag=2,t!=null&&(o.callback=t),t=zr(e,o,n),t!==null&&(lr(t,e,n,r),to(t,e,n))}};function fu(e,t,r,n,o,l,d){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,l,d):t.prototype&&t.prototype.isPureReactComponent?!Jn(r,n)||!Jn(o,l):!0}function pu(e,t,r){var n=!1,o=Lr,l=t.contextType;return typeof l=="object"&&l!==null?l=Xt(l):(o=Dt(t)?Qr:yt.current,n=t.contextTypes,l=(n=n!=null)?Nn(e,o):Lr),t=new t(r,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=uo,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function mu(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&uo.enqueueReplaceState(t,t.state,null)}function Ul(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs={},Il(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Xt(l):(l=Dt(t)?Qr:yt.current,o.context=Nn(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Bl(e,t,l,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&uo.enqueueReplaceState(o,o.state,null),ro(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Mn(e,t){try{var r="",n=t;do r+=xe(n),n=n.return;while(n);var o=r}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function Wl(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Vl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var qc=typeof WeakMap=="function"?WeakMap:Map;function hu(e,t,r){r=wr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){xo||(xo=!0,li=n),Vl(e,t)},r}function gu(e,t,r){r=wr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return n(o)},r.callback=function(){Vl(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(r.callback=function(){Vl(e,t),typeof n!="function"&&($r===null?$r=new Set([this]):$r.add(this));var d=t.stack;this.componentDidCatch(t.value,{componentStack:d!==null?d:""})}),r}function xu(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new qc;var o=new Set;n.set(t,o)}else o=n.get(t),o===void 0&&(o=new Set,n.set(t,o));o.has(r)||(o.add(r),e=af.bind(null,e,t,r),t.then(e,e))}function yu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vu(e,t,r,n,o){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wr(-1,1),t.tag=2,zr(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var Xc=D.ReactCurrentOwner,_t=!1;function kt(e,t,r,n){t.child=e===null?Ra(t,null,r,n):Tn(t,e.child,r,n)}function wu(e,t,r,n,o){r=r.render;var l=t.ref;return Dn(t,o),n=Ol(e,t,r,n,l,o),r=Fl(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Sr(e,t,o)):(Ge&&r&&vl(t),t.flags|=1,kt(e,t,n,o),t.child)}function Su(e,t,r,n,o){if(e===null){var l=r.type;return typeof l=="function"&&!pi(l)&&l.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=l,ju(e,t,l,n,o)):(e=Co(r.type,null,n,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,(e.lanes&o)===0){var d=l.memoizedProps;if(r=r.compare,r=r!==null?r:Jn,r(d,n)&&e.ref===t.ref)return Sr(e,t,o)}return t.flags|=1,e=Wr(l,n),e.ref=t.ref,e.return=t,t.child=e}function ju(e,t,r,n,o){if(e!==null){var l=e.memoizedProps;if(Jn(l,n)&&e.ref===t.ref)if(_t=!1,t.pendingProps=n=l,(e.lanes&o)!==0)(e.flags&131072)!==0&&(_t=!0);else return t.lanes=e.lanes,Sr(e,t,o)}return Gl(e,t,r,n,o)}function Cu(e,t,r){var n=t.pendingProps,o=n.children,l=e!==null?e.memoizedState:null;if(n.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(An,$t),$t|=r;else{if((r&1073741824)===0)return e=l!==null?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,He(An,$t),$t|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=l!==null?l.baseLanes:r,He(An,$t),$t|=n}else l!==null?(n=l.baseLanes|r,t.memoizedState=null):n=r,He(An,$t),$t|=n;return kt(e,t,o,r),t.child}function Nu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Gl(e,t,r,n,o){var l=Dt(r)?Qr:yt.current;return l=Nn(t,l),Dn(t,o),r=Ol(e,t,r,n,l,o),n=Fl(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,Sr(e,t,o)):(Ge&&n&&vl(t),t.flags|=1,kt(e,t,r,o),t.child)}function bu(e,t,r,n,o){if(Dt(r)){var l=!0;qs(t)}else l=!1;if(Dn(t,o),t.stateNode===null)fo(e,t),pu(t,r,n),Ul(t,r,n,o),n=!0;else if(e===null){var d=t.stateNode,j=t.memoizedProps;d.props=j;var b=d.context,F=r.contextType;typeof F=="object"&&F!==null?F=Xt(F):(F=Dt(r)?Qr:yt.current,F=Nn(t,F));var X=r.getDerivedStateFromProps,Q=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function";Q||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(j!==n||b!==F)&&mu(t,d,n,F),Fr=!1;var G=t.memoizedState;d.state=G,ro(t,n,d,o),b=t.memoizedState,j!==n||G!==b||It.current||Fr?(typeof X=="function"&&(Bl(t,r,X,n),b=t.memoizedState),(j=Fr||fu(t,r,j,n,G,b,F))?(Q||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=b),d.props=n,d.state=b,d.context=F,n=j):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{d=t.stateNode,Ha(e,t),j=t.memoizedProps,F=t.type===t.elementType?j:nr(t.type,j),d.props=F,Q=t.pendingProps,G=d.context,b=r.contextType,typeof b=="object"&&b!==null?b=Xt(b):(b=Dt(r)?Qr:yt.current,b=Nn(t,b));var ne=r.getDerivedStateFromProps;(X=typeof ne=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(j!==Q||G!==b)&&mu(t,d,n,b),Fr=!1,G=t.memoizedState,d.state=G,ro(t,n,d,o);var le=t.memoizedState;j!==Q||G!==le||It.current||Fr?(typeof ne=="function"&&(Bl(t,r,ne,n),le=t.memoizedState),(F=Fr||fu(t,r,F,n,G,le,b)||!1)?(X||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(n,le,b),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(n,le,b)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||j===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=le),d.props=n,d.state=le,d.context=b,n=F):(typeof d.componentDidUpdate!="function"||j===e.memoizedProps&&G===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&G===e.memoizedState||(t.flags|=1024),n=!1)}return ql(e,t,r,n,l,o)}function ql(e,t,r,n,o,l){Nu(e,t);var d=(t.flags&128)!==0;if(!n&&!d)return o&&Da(t,r,!1),Sr(e,t,l);n=t.stateNode,Xc.current=t;var j=d&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&d?(t.child=Tn(t,e.child,null,l),t.child=Tn(t,null,j,l)):kt(e,t,j,l),t.memoizedState=n.state,o&&Da(t,r,!0),t.child}function ku(e){var t=e.stateNode;t.pendingContext?Ta(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ta(e,t.context,!1),Dl(e,t.containerInfo)}function Eu(e,t,r,n,o){return En(),Cl(o),t.flags|=256,kt(e,t,r,n),t.child}var Xl={dehydrated:null,treeContext:null,retryLane:0};function Ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function Tu(e,t,r){var n=t.pendingProps,o=Xe.current,l=!1,d=(t.flags&128)!==0,j;if((j=d)||(j=e!==null&&e.memoizedState===null?!1:(o&2)!==0),j?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),He(Xe,o&1),e===null)return jl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(d=n.children,e=n.fallback,l?(n=t.mode,l=t.child,d={mode:"hidden",children:d},(n&1)===0&&l!==null?(l.childLanes=0,l.pendingProps=d):l=No(d,n,0,null),e=on(e,n,r,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Ql(r),t.memoizedState=Xl,e):Yl(t,d));if(o=e.memoizedState,o!==null&&(j=o.dehydrated,j!==null))return Qc(e,t,d,n,j,o,r);if(l){l=n.fallback,d=t.mode,o=e.child,j=o.sibling;var b={mode:"hidden",children:n.children};return(d&1)===0&&t.child!==o?(n=t.child,n.childLanes=0,n.pendingProps=b,t.deletions=null):(n=Wr(o,b),n.subtreeFlags=o.subtreeFlags&14680064),j!==null?l=Wr(j,l):(l=on(l,d,r,null),l.flags|=2),l.return=t,n.return=t,n.sibling=l,t.child=n,n=l,l=t.child,d=e.child.memoizedState,d=d===null?Ql(r):{baseLanes:d.baseLanes|r,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=e.childLanes&~r,t.memoizedState=Xl,n}return l=e.child,e=l.sibling,n=Wr(l,{mode:"visible",children:n.children}),(t.mode&1)===0&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Yl(e,t){return t=No({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function co(e,t,r,n){return n!==null&&Cl(n),Tn(t,e.child,null,r),e=Yl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Qc(e,t,r,n,o,l,d){if(r)return t.flags&256?(t.flags&=-257,n=Wl(Error(a(422))),co(e,t,d,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=n.fallback,o=t.mode,n=No({mode:"visible",children:n.children},o,0,null),l=on(l,o,d,null),l.flags|=2,n.return=t,l.return=t,n.sibling=l,t.child=n,(t.mode&1)!==0&&Tn(t,e.child,null,d),t.child.memoizedState=Ql(d),t.memoizedState=Xl,l);if((t.mode&1)===0)return co(e,t,d,null);if(o.data==="$!"){if(n=o.nextSibling&&o.nextSibling.dataset,n)var j=n.dgst;return n=j,l=Error(a(419)),n=Wl(l,n,void 0),co(e,t,d,n)}if(j=(d&e.childLanes)!==0,_t||j){if(n=pt,n!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=(o&(n.suspendedLanes|d))!==0?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,vr(e,o),lr(n,e,o,-1))}return fi(),n=Wl(Error(a(421))),co(e,t,d,n)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=uf.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Rt=Pr(o.nextSibling),zt=t,Ge=!0,rr=null,e!==null&&(Gt[qt++]=xr,Gt[qt++]=yr,Gt[qt++]=Yr,xr=e.id,yr=e.overflow,Yr=t),t=Yl(t,n.children),t.flags|=4096,t)}function Iu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),El(e.return,t,r)}function Kl(e,t,r,n,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=n,l.tail=r,l.tailMode=o)}function Du(e,t,r){var n=t.pendingProps,o=n.revealOrder,l=n.tail;if(kt(e,t,n.children,r),n=Xe.current,(n&2)!==0)n=n&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Iu(e,r,t);else if(e.tag===19)Iu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(He(Xe,n),(t.mode&1)===0)t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&no(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),Kl(t,!1,o,r,l);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&no(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}Kl(t,!0,r,null,l);break;case"together":Kl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function fo(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Sr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(a(153));if(t.child!==null){for(e=t.child,r=Wr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Wr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Yc(e,t,r){switch(t.tag){case 3:ku(t),En();break;case 5:Wa(t);break;case 1:Dt(t.type)&&qs(t);break;case 4:Dl(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,o=t.memoizedProps.value;He(Js,n._currentValue),n._currentValue=o;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(He(Xe,Xe.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Tu(e,t,r):(He(Xe,Xe.current&1),e=Sr(e,t,r),e!==null?e.sibling:null);He(Xe,Xe.current&1);break;case 19:if(n=(r&t.childLanes)!==0,(e.flags&128)!==0){if(n)return Du(e,t,r);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),He(Xe,Xe.current),n)break;return null;case 22:case 23:return t.lanes=0,Cu(e,t,r)}return Sr(e,t,r)}var _u,Zl,Mu,Pu;_u=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Zl=function(){},Mu=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Jr(cr.current);var l=null;switch(r){case"input":o=Ee(e,o),n=Ee(e,n),l=[];break;case"select":o=J({},o,{value:void 0}),n=J({},n,{value:void 0}),l=[];break;case"textarea":o=it(e,o),n=it(e,n),l=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ws)}Ot(r,n);var d;r=null;for(F in o)if(!n.hasOwnProperty(F)&&o.hasOwnProperty(F)&&o[F]!=null)if(F==="style"){var j=o[F];for(d in j)j.hasOwnProperty(d)&&(r||(r={}),r[d]="")}else F!=="dangerouslySetInnerHTML"&&F!=="children"&&F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(c.hasOwnProperty(F)?l||(l=[]):(l=l||[]).push(F,null));for(F in n){var b=n[F];if(j=o?.[F],n.hasOwnProperty(F)&&b!==j&&(b!=null||j!=null))if(F==="style")if(j){for(d in j)!j.hasOwnProperty(d)||b&&b.hasOwnProperty(d)||(r||(r={}),r[d]="");for(d in b)b.hasOwnProperty(d)&&j[d]!==b[d]&&(r||(r={}),r[d]=b[d])}else r||(l||(l=[]),l.push(F,r)),r=b;else F==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,j=j?j.__html:void 0,b!=null&&j!==b&&(l=l||[]).push(F,b)):F==="children"?typeof b!="string"&&typeof b!="number"||(l=l||[]).push(F,""+b):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&(c.hasOwnProperty(F)?(b!=null&&F==="onScroll"&&Be("scroll",e),l||j===b||(l=[])):(l=l||[]).push(F,b))}r&&(l=l||[]).push("style",r);var F=l;(t.updateQueue=F)&&(t.flags|=4)}},Pu=function(e,t,r,n){r!==n&&(t.flags|=4)};function ms(e,t){if(!Ge)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags&14680064,n|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)r|=o.lanes|o.childLanes,n|=o.subtreeFlags,n|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Kc(e,t,r){var n=t.pendingProps;switch(wl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return Dt(t.type)&&Gs(),wt(t),null;case 3:return n=t.stateNode,_n(),Ue(It),Ue(yt),Pl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,rr!==null&&(ui(rr),rr=null))),Zl(e,t),wt(t),null;case 5:_l(t);var o=Jr(us.current);if(r=t.type,e!==null&&t.stateNode!=null)Mu(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(a(166));return wt(t),null}if(e=Jr(cr.current),Ks(t)){n=t.stateNode,r=t.type;var l=t.memoizedProps;switch(n[dr]=t,n[ss]=l,e=(t.mode&1)!==0,r){case"dialog":Be("cancel",n),Be("close",n);break;case"iframe":case"object":case"embed":Be("load",n);break;case"video":case"audio":for(o=0;o<ts.length;o++)Be(ts[o],n);break;case"source":Be("error",n);break;case"img":case"image":case"link":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"input":Me(n,l),Be("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!l.multiple},Be("invalid",n);break;case"textarea":Je(n,l),Be("invalid",n)}Ot(r,l),o=null;for(var d in l)if(l.hasOwnProperty(d)){var j=l[d];d==="children"?typeof j=="string"?n.textContent!==j&&(l.suppressHydrationWarning!==!0&&Us(n.textContent,j,e),o=["children",j]):typeof j=="number"&&n.textContent!==""+j&&(l.suppressHydrationWarning!==!0&&Us(n.textContent,j,e),o=["children",""+j]):c.hasOwnProperty(d)&&j!=null&&d==="onScroll"&&Be("scroll",n)}switch(r){case"input":jt(n),ce(n,l,!0);break;case"textarea":jt(n),Pe(n);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(n.onclick=Ws)}n=o,t.updateQueue=n,n!==null&&(t.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ne(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=d.createElement(r,{is:n.is}):(e=d.createElement(r),r==="select"&&(d=e,n.multiple?d.multiple=!0:n.size&&(d.size=n.size))):e=d.createElementNS(e,r),e[dr]=t,e[ss]=n,_u(e,t,!1,!1),t.stateNode=e;e:{switch(d=$e(r,n),r){case"dialog":Be("cancel",e),Be("close",e),o=n;break;case"iframe":case"object":case"embed":Be("load",e),o=n;break;case"video":case"audio":for(o=0;o<ts.length;o++)Be(ts[o],e);o=n;break;case"source":Be("error",e),o=n;break;case"img":case"image":case"link":Be("error",e),Be("load",e),o=n;break;case"details":Be("toggle",e),o=n;break;case"input":Me(e,n),o=Ee(e,n),Be("invalid",e);break;case"option":o=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=J({},n,{value:void 0}),Be("invalid",e);break;case"textarea":Je(e,n),o=it(e,n),Be("invalid",e);break;default:o=n}Ot(r,o),j=o;for(l in j)if(j.hasOwnProperty(l)){var b=j[l];l==="style"?Bt(e,b):l==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Ve(e,b)):l==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&et(e,b):typeof b=="number"&&et(e,""+b):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(c.hasOwnProperty(l)?b!=null&&l==="onScroll"&&Be("scroll",e):b!=null&&g(e,l,b,d))}switch(r){case"input":jt(e),ce(e,n,!1);break;case"textarea":jt(e),Pe(e);break;case"option":n.value!=null&&e.setAttribute("value",""+ke(n.value));break;case"select":e.multiple=!!n.multiple,l=n.value,l!=null?Te(e,!!n.multiple,l,!1):n.defaultValue!=null&&Te(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=Ws)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)Pu(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(a(166));if(r=Jr(us.current),Jr(cr.current),Ks(t)){if(n=t.stateNode,r=t.memoizedProps,n[dr]=t,(l=n.nodeValue!==r)&&(e=zt,e!==null))switch(e.tag){case 3:Us(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Us(n.nodeValue,r,(e.mode&1)!==0)}l&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[dr]=t,t.stateNode=n}return wt(t),null;case 13:if(Ue(Xe),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ge&&Rt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Oa(),En(),t.flags|=98560,l=!1;else if(l=Ks(t),n!==null&&n.dehydrated!==null){if(e===null){if(!l)throw Error(a(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(a(317));l[dr]=t}else En(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;wt(t),l=!1}else rr!==null&&(ui(rr),rr=null),l=!0;if(!l)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Xe.current&1)!==0?ut===0&&(ut=3):fi())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return _n(),Zl(e,t),e===null&&rs(t.stateNode.containerInfo),wt(t),null;case 10:return kl(t.type._context),wt(t),null;case 17:return Dt(t.type)&&Gs(),wt(t),null;case 19:if(Ue(Xe),l=t.memoizedState,l===null)return wt(t),null;if(n=(t.flags&128)!==0,d=l.rendering,d===null)if(n)ms(l,!1);else{if(ut!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=no(e),d!==null){for(t.flags|=128,ms(l,!1),n=d.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)l=r,e=n,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,e=d.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return He(Xe,Xe.current&1|2),t.child}e=e.sibling}l.tail!==null&&Ke()>Ln&&(t.flags|=128,n=!0,ms(l,!1),t.lanes=4194304)}else{if(!n)if(e=no(d),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ms(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ge)return wt(t),null}else 2*Ke()-l.renderingStartTime>Ln&&r!==1073741824&&(t.flags|=128,n=!0,ms(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(r=l.last,r!==null?r.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Ke(),t.sibling=null,r=Xe.current,He(Xe,n?r&1|2:r&1),t):(wt(t),null);case 22:case 23:return ci(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&(t.mode&1)!==0?($t&1073741824)!==0&&(wt(t),t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error(a(156,t.tag))}function Zc(e,t){switch(wl(t),t.tag){case 1:return Dt(t.type)&&Gs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _n(),Ue(It),Ue(yt),Pl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return _l(t),null;case 13:if(Ue(Xe),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(a(340));En()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ue(Xe),null;case 4:return _n(),null;case 10:return kl(t.type._context),null;case 22:case 23:return ci(),null;case 24:return null;default:return null}}var po=!1,St=!1,Jc=typeof WeakSet=="function"?WeakSet:Set,oe=null;function Pn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ye(e,t,n)}else r.current=null}function Jl(e,t,r){try{r()}catch(n){Ye(e,t,n)}}var Au=!1;function ef(e,t){if(cl=Ms,e=fa(),nl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var o=n.anchorOffset,l=n.focusNode;n=n.focusOffset;try{r.nodeType,l.nodeType}catch{r=null;break e}var d=0,j=-1,b=-1,F=0,X=0,Q=e,G=null;t:for(;;){for(var ne;Q!==r||o!==0&&Q.nodeType!==3||(j=d+o),Q!==l||n!==0&&Q.nodeType!==3||(b=d+n),Q.nodeType===3&&(d+=Q.nodeValue.length),(ne=Q.firstChild)!==null;)G=Q,Q=ne;for(;;){if(Q===e)break t;if(G===r&&++F===o&&(j=d),G===l&&++X===n&&(b=d),(ne=Q.nextSibling)!==null)break;Q=G,G=Q.parentNode}Q=ne}r=j===-1||b===-1?null:{start:j,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(fl={focusedElem:e,selectionRange:r},Ms=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var le=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(le!==null){var ue=le.memoizedProps,Ze=le.memoizedState,M=t.stateNode,k=M.getSnapshotBeforeUpdate(t.elementType===t.type?ue:nr(t.type,ue),Ze);M.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var L=t.stateNode.containerInfo;L.nodeType===1?L.textContent="":L.nodeType===9&&L.documentElement&&L.removeChild(L.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Z){Ye(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return le=Au,Au=!1,le}function hs(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&Jl(t,r,l)}o=o.next}while(o!==n)}}function mo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ei(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Lu(e){var t=e.alternate;t!==null&&(e.alternate=null,Lu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dr],delete t[ss],delete t[gl],delete t[Oc],delete t[Fc])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ou(e){return e.tag===5||e.tag===3||e.tag===4}function Fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ti(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ws));else if(n!==4&&(e=e.child,e!==null))for(ti(e,t,r),e=e.sibling;e!==null;)ti(e,t,r),e=e.sibling}function ri(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ri(e,t,r),e=e.sibling;e!==null;)ri(e,t,r),e=e.sibling}var gt=null,sr=!1;function Rr(e,t,r){for(r=r.child;r!==null;)zu(e,t,r),r=r.sibling}function zu(e,t,r){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(ks,r)}catch{}switch(r.tag){case 5:St||Pn(r,t);case 6:var n=gt,o=sr;gt=null,Rr(e,t,r),gt=n,sr=o,gt!==null&&(sr?(e=gt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):gt.removeChild(r.stateNode));break;case 18:gt!==null&&(sr?(e=gt,r=r.stateNode,e.nodeType===8?hl(e.parentNode,r):e.nodeType===1&&hl(e,r),qn(e)):hl(gt,r.stateNode));break;case 4:n=gt,o=sr,gt=r.stateNode.containerInfo,sr=!0,Rr(e,t,r),gt=n,sr=o;break;case 0:case 11:case 14:case 15:if(!St&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){o=n=n.next;do{var l=o,d=l.destroy;l=l.tag,d!==void 0&&((l&2)!==0||(l&4)!==0)&&Jl(r,t,d),o=o.next}while(o!==n)}Rr(e,t,r);break;case 1:if(!St&&(Pn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(j){Ye(r,t,j)}Rr(e,t,r);break;case 21:Rr(e,t,r);break;case 22:r.mode&1?(St=(n=St)||r.memoizedState!==null,Rr(e,t,r),St=n):Rr(e,t,r);break;default:Rr(e,t,r)}}function Ru(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Jc),t.forEach(function(n){var o=df.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function or(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var o=r[n];try{var l=e,d=t,j=d;e:for(;j!==null;){switch(j.tag){case 5:gt=j.stateNode,sr=!1;break e;case 3:gt=j.stateNode.containerInfo,sr=!0;break e;case 4:gt=j.stateNode.containerInfo,sr=!0;break e}j=j.return}if(gt===null)throw Error(a(160));zu(l,d,o),gt=null,sr=!1;var b=o.alternate;b!==null&&(b.return=null),o.return=null}catch(F){Ye(o,t,F)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$u(t,e),t=t.sibling}function $u(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(or(t,e),pr(e),n&4){try{hs(3,e,e.return),mo(3,e)}catch(ue){Ye(e,e.return,ue)}try{hs(5,e,e.return)}catch(ue){Ye(e,e.return,ue)}}break;case 1:or(t,e),pr(e),n&512&&r!==null&&Pn(r,r.return);break;case 5:if(or(t,e),pr(e),n&512&&r!==null&&Pn(r,r.return),e.flags&32){var o=e.stateNode;try{et(o,"")}catch(ue){Ye(e,e.return,ue)}}if(n&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,d=r!==null?r.memoizedProps:l,j=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{j==="input"&&l.type==="radio"&&l.name!=null&&ie(o,l),$e(j,d);var F=$e(j,l);for(d=0;d<b.length;d+=2){var X=b[d],Q=b[d+1];X==="style"?Bt(o,Q):X==="dangerouslySetInnerHTML"?Ve(o,Q):X==="children"?et(o,Q):g(o,X,Q,F)}switch(j){case"input":Y(o,l);break;case"textarea":we(o,l);break;case"select":var G=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var ne=l.value;ne!=null?Te(o,!!l.multiple,ne,!1):G!==!!l.multiple&&(l.defaultValue!=null?Te(o,!!l.multiple,l.defaultValue,!0):Te(o,!!l.multiple,l.multiple?[]:"",!1))}o[ss]=l}catch(ue){Ye(e,e.return,ue)}}break;case 6:if(or(t,e),pr(e),n&4){if(e.stateNode===null)throw Error(a(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(ue){Ye(e,e.return,ue)}}break;case 3:if(or(t,e),pr(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{qn(t.containerInfo)}catch(ue){Ye(e,e.return,ue)}break;case 4:or(t,e),pr(e);break;case 13:or(t,e),pr(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(oi=Ke())),n&4&&Ru(e);break;case 22:if(X=r!==null&&r.memoizedState!==null,e.mode&1?(St=(F=St)||X,or(t,e),St=F):or(t,e),pr(e),n&8192){if(F=e.memoizedState!==null,(e.stateNode.isHidden=F)&&!X&&(e.mode&1)!==0)for(oe=e,X=e.child;X!==null;){for(Q=oe=X;oe!==null;){switch(G=oe,ne=G.child,G.tag){case 0:case 11:case 14:case 15:hs(4,G,G.return);break;case 1:Pn(G,G.return);var le=G.stateNode;if(typeof le.componentWillUnmount=="function"){n=G,r=G.return;try{t=n,le.props=t.memoizedProps,le.state=t.memoizedState,le.componentWillUnmount()}catch(ue){Ye(n,r,ue)}}break;case 5:Pn(G,G.return);break;case 22:if(G.memoizedState!==null){Uu(Q);continue}}ne!==null?(ne.return=G,oe=ne):Uu(Q)}X=X.sibling}e:for(X=null,Q=e;;){if(Q.tag===5){if(X===null){X=Q;try{o=Q.stateNode,F?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(j=Q.stateNode,b=Q.memoizedProps.style,d=b!=null&&b.hasOwnProperty("display")?b.display:null,j.style.display=Ct("display",d))}catch(ue){Ye(e,e.return,ue)}}}else if(Q.tag===6){if(X===null)try{Q.stateNode.nodeValue=F?"":Q.memoizedProps}catch(ue){Ye(e,e.return,ue)}}else if((Q.tag!==22&&Q.tag!==23||Q.memoizedState===null||Q===e)&&Q.child!==null){Q.child.return=Q,Q=Q.child;continue}if(Q===e)break e;for(;Q.sibling===null;){if(Q.return===null||Q.return===e)break e;X===Q&&(X=null),Q=Q.return}X===Q&&(X=null),Q.sibling.return=Q.return,Q=Q.sibling}}break;case 19:or(t,e),pr(e),n&4&&Ru(e);break;case 21:break;default:or(t,e),pr(e)}}function pr(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Ou(r)){var n=r;break e}r=r.return}throw Error(a(160))}switch(n.tag){case 5:var o=n.stateNode;n.flags&32&&(et(o,""),n.flags&=-33);var l=Fu(e);ri(e,l,o);break;case 3:case 4:var d=n.stateNode.containerInfo,j=Fu(e);ti(e,j,d);break;default:throw Error(a(161))}}catch(b){Ye(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tf(e,t,r){oe=e,Hu(e)}function Hu(e,t,r){for(var n=(e.mode&1)!==0;oe!==null;){var o=oe,l=o.child;if(o.tag===22&&n){var d=o.memoizedState!==null||po;if(!d){var j=o.alternate,b=j!==null&&j.memoizedState!==null||St;j=po;var F=St;if(po=d,(St=b)&&!F)for(oe=o;oe!==null;)d=oe,b=d.child,d.tag===22&&d.memoizedState!==null?Wu(o):b!==null?(b.return=d,oe=b):Wu(o);for(;l!==null;)oe=l,Hu(l),l=l.sibling;oe=o,po=j,St=F}Bu(e)}else(o.subtreeFlags&8772)!==0&&l!==null?(l.return=o,oe=l):Bu(e)}}function Bu(e){for(;oe!==null;){var t=oe;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:St||mo(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!St)if(r===null)n.componentDidMount();else{var o=t.elementType===t.type?r.memoizedProps:nr(t.type,r.memoizedProps);n.componentDidUpdate(o,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Ua(t,l,n);break;case 3:var d=t.updateQueue;if(d!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Ua(t,d,r)}break;case 5:var j=t.stateNode;if(r===null&&t.flags&4){r=j;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var F=t.alternate;if(F!==null){var X=F.memoizedState;if(X!==null){var Q=X.dehydrated;Q!==null&&qn(Q)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}St||t.flags&512&&ei(t)}catch(G){Ye(t,t.return,G)}}if(t===e){oe=null;break}if(r=t.sibling,r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Uu(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var r=t.sibling;if(r!==null){r.return=t.return,oe=r;break}oe=t.return}}function Wu(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{mo(4,t)}catch(b){Ye(t,r,b)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var o=t.return;try{n.componentDidMount()}catch(b){Ye(t,o,b)}}var l=t.return;try{ei(t)}catch(b){Ye(t,l,b)}break;case 5:var d=t.return;try{ei(t)}catch(b){Ye(t,d,b)}}}catch(b){Ye(t,t.return,b)}if(t===e){oe=null;break}var j=t.sibling;if(j!==null){j.return=t.return,oe=j;break}oe=t.return}}var rf=Math.ceil,ho=D.ReactCurrentDispatcher,ni=D.ReactCurrentOwner,Yt=D.ReactCurrentBatchConfig,Le=0,pt=null,rt=null,xt=0,$t=0,An=Ar(0),ut=0,gs=null,tn=0,go=0,si=0,xs=null,Mt=null,oi=0,Ln=1/0,jr=null,xo=!1,li=null,$r=null,yo=!1,Hr=null,vo=0,ys=0,ii=null,wo=-1,So=0;function Et(){return(Le&6)!==0?Ke():wo!==-1?wo:wo=Ke()}function Br(e){return(e.mode&1)===0?1:(Le&2)!==0&&xt!==0?xt&-xt:Rc.transition!==null?(So===0&&(So=Fi()),So):(e=Re,e!==0||(e=window.event,e=e===void 0?16:Gi(e.type)),e)}function lr(e,t,r,n){if(50<ys)throw ys=0,ii=null,Error(a(185));Bn(e,r,n),((Le&2)===0||e!==pt)&&(e===pt&&((Le&2)===0&&(go|=r),ut===4&&Ur(e,xt)),Pt(e,n),r===1&&Le===0&&(t.mode&1)===0&&(Ln=Ke()+500,Xs&&Or()))}function Pt(e,t){var r=e.callbackNode;Rd(e,t);var n=Is(e,e===pt?xt:0);if(n===0)r!==null&&Ai(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ai(r),t===1)e.tag===0?zc(Gu.bind(null,e)):_a(Gu.bind(null,e)),Ac(function(){(Le&6)===0&&Or()}),r=null;else{switch(zi(n)){case 1:r=$o;break;case 4:r=Li;break;case 16:r=bs;break;case 536870912:r=Oi;break;default:r=bs}r=ed(r,Vu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Vu(e,t){if(wo=-1,So=0,(Le&6)!==0)throw Error(a(327));var r=e.callbackNode;if(On()&&e.callbackNode!==r)return null;var n=Is(e,e===pt?xt:0);if(n===0)return null;if((n&30)!==0||(n&e.expiredLanes)!==0||t)t=jo(e,n);else{t=n;var o=Le;Le|=2;var l=Xu();(pt!==e||xt!==t)&&(jr=null,Ln=Ke()+500,nn(e,t));do try{of();break}catch(j){qu(e,j)}while(!0);bl(),ho.current=l,Le=o,rt!==null?t=0:(pt=null,xt=0,t=ut)}if(t!==0){if(t===2&&(o=Ho(e),o!==0&&(n=o,t=ai(e,o))),t===1)throw r=gs,nn(e,0),Ur(e,n),Pt(e,Ke()),r;if(t===6)Ur(e,n);else{if(o=e.current.alternate,(n&30)===0&&!nf(o)&&(t=jo(e,n),t===2&&(l=Ho(e),l!==0&&(n=l,t=ai(e,l))),t===1))throw r=gs,nn(e,0),Ur(e,n),Pt(e,Ke()),r;switch(e.finishedWork=o,e.finishedLanes=n,t){case 0:case 1:throw Error(a(345));case 2:sn(e,Mt,jr);break;case 3:if(Ur(e,n),(n&130023424)===n&&(t=oi+500-Ke(),10<t)){if(Is(e,0)!==0)break;if(o=e.suspendedLanes,(o&n)!==n){Et(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ml(sn.bind(null,e,Mt,jr),t);break}sn(e,Mt,jr);break;case 4:if(Ur(e,n),(n&4194240)===n)break;for(t=e.eventTimes,o=-1;0<n;){var d=31-er(n);l=1<<d,d=t[d],d>o&&(o=d),n&=~l}if(n=o,n=Ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rf(n/1960))-n,10<n){e.timeoutHandle=ml(sn.bind(null,e,Mt,jr),n);break}sn(e,Mt,jr);break;case 5:sn(e,Mt,jr);break;default:throw Error(a(329))}}}return Pt(e,Ke()),e.callbackNode===r?Vu.bind(null,e):null}function ai(e,t){var r=xs;return e.current.memoizedState.isDehydrated&&(nn(e,t).flags|=256),e=jo(e,t),e!==2&&(t=Mt,Mt=r,t!==null&&ui(t)),e}function ui(e){Mt===null?Mt=e:Mt.push.apply(Mt,e)}function nf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var o=r[n],l=o.getSnapshot;o=o.value;try{if(!tr(l(),o))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ur(e,t){for(t&=~si,t&=~go,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-er(t),n=1<<r;e[r]=-1,t&=~n}}function Gu(e){if((Le&6)!==0)throw Error(a(327));On();var t=Is(e,0);if((t&1)===0)return Pt(e,Ke()),null;var r=jo(e,t);if(e.tag!==0&&r===2){var n=Ho(e);n!==0&&(t=n,r=ai(e,n))}if(r===1)throw r=gs,nn(e,0),Ur(e,t),Pt(e,Ke()),r;if(r===6)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sn(e,Mt,jr),Pt(e,Ke()),null}function di(e,t){var r=Le;Le|=1;try{return e(t)}finally{Le=r,Le===0&&(Ln=Ke()+500,Xs&&Or())}}function rn(e){Hr!==null&&Hr.tag===0&&(Le&6)===0&&On();var t=Le;Le|=1;var r=Yt.transition,n=Re;try{if(Yt.transition=null,Re=1,e)return e()}finally{Re=n,Yt.transition=r,Le=t,(Le&6)===0&&Or()}}function ci(){$t=An.current,Ue(An)}function nn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Pc(r)),rt!==null)for(r=rt.return;r!==null;){var n=r;switch(wl(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gs();break;case 3:_n(),Ue(It),Ue(yt),Pl();break;case 5:_l(n);break;case 4:_n();break;case 13:Ue(Xe);break;case 19:Ue(Xe);break;case 10:kl(n.type._context);break;case 22:case 23:ci()}r=r.return}if(pt=e,rt=e=Wr(e.current,null),xt=$t=t,ut=0,gs=null,si=go=tn=0,Mt=xs=null,Zr!==null){for(t=0;t<Zr.length;t++)if(r=Zr[t],n=r.interleaved,n!==null){r.interleaved=null;var o=n.next,l=r.pending;if(l!==null){var d=l.next;l.next=o,n.next=d}r.pending=n}Zr=null}return e}function qu(e,t){do{var r=rt;try{if(bl(),so.current=ao,oo){for(var n=Qe.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}oo=!1}if(en=0,ft=at=Qe=null,ds=!1,cs=0,ni.current=null,r===null||r.return===null){ut=1,gs=t,rt=null;break}e:{var l=e,d=r.return,j=r,b=t;if(t=xt,j.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var F=b,X=j,Q=X.tag;if((X.mode&1)===0&&(Q===0||Q===11||Q===15)){var G=X.alternate;G?(X.updateQueue=G.updateQueue,X.memoizedState=G.memoizedState,X.lanes=G.lanes):(X.updateQueue=null,X.memoizedState=null)}var ne=yu(d);if(ne!==null){ne.flags&=-257,vu(ne,d,j,l,t),ne.mode&1&&xu(l,F,t),t=ne,b=F;var le=t.updateQueue;if(le===null){var ue=new Set;ue.add(b),t.updateQueue=ue}else le.add(b);break e}else{if((t&1)===0){xu(l,F,t),fi();break e}b=Error(a(426))}}else if(Ge&&j.mode&1){var Ze=yu(d);if(Ze!==null){(Ze.flags&65536)===0&&(Ze.flags|=256),vu(Ze,d,j,l,t),Cl(Mn(b,j));break e}}l=b=Mn(b,j),ut!==4&&(ut=2),xs===null?xs=[l]:xs.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var M=hu(l,b,t);Ba(l,M);break e;case 1:j=b;var k=l.type,L=l.stateNode;if((l.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||L!==null&&typeof L.componentDidCatch=="function"&&($r===null||!$r.has(L)))){l.flags|=65536,t&=-t,l.lanes|=t;var Z=gu(l,j,t);Ba(l,Z);break e}}l=l.return}while(l!==null)}Yu(r)}catch(fe){t=fe,rt===r&&r!==null&&(rt=r=r.return);continue}break}while(!0)}function Xu(){var e=ho.current;return ho.current=ao,e===null?ao:e}function fi(){(ut===0||ut===3||ut===2)&&(ut=4),pt===null||(tn&268435455)===0&&(go&268435455)===0||Ur(pt,xt)}function jo(e,t){var r=Le;Le|=2;var n=Xu();(pt!==e||xt!==t)&&(jr=null,nn(e,t));do try{sf();break}catch(o){qu(e,o)}while(!0);if(bl(),Le=r,ho.current=n,rt!==null)throw Error(a(261));return pt=null,xt=0,ut}function sf(){for(;rt!==null;)Qu(rt)}function of(){for(;rt!==null&&!Dd();)Qu(rt)}function Qu(e){var t=Ju(e.alternate,e,$t);e.memoizedProps=e.pendingProps,t===null?Yu(e):rt=t,ni.current=null}function Yu(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Kc(r,t,$t),r!==null){rt=r;return}}else{if(r=Zc(r,t),r!==null){r.flags&=32767,rt=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ut=6,rt=null;return}}if(t=t.sibling,t!==null){rt=t;return}rt=t=e}while(t!==null);ut===0&&(ut=5)}function sn(e,t,r){var n=Re,o=Yt.transition;try{Yt.transition=null,Re=1,lf(e,t,r,n)}finally{Yt.transition=o,Re=n}return null}function lf(e,t,r,n){do On();while(Hr!==null);if((Le&6)!==0)throw Error(a(327));r=e.finishedWork;var o=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var l=r.lanes|r.childLanes;if($d(e,l),e===pt&&(rt=pt=null,xt=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||yo||(yo=!0,ed(bs,function(){return On(),null})),l=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||l){l=Yt.transition,Yt.transition=null;var d=Re;Re=1;var j=Le;Le|=4,ni.current=null,ef(e,r),$u(r,e),kc(fl),Ms=!!cl,fl=cl=null,e.current=r,tf(r),_d(),Le=j,Re=d,Yt.transition=l}else e.current=r;if(yo&&(yo=!1,Hr=e,vo=o),l=e.pendingLanes,l===0&&($r=null),Ad(r.stateNode),Pt(e,Ke()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)o=t[r],n(o.value,{componentStack:o.stack,digest:o.digest});if(xo)throw xo=!1,e=li,li=null,e;return(vo&1)!==0&&e.tag!==0&&On(),l=e.pendingLanes,(l&1)!==0?e===ii?ys++:(ys=0,ii=e):ys=0,Or(),null}function On(){if(Hr!==null){var e=zi(vo),t=Yt.transition,r=Re;try{if(Yt.transition=null,Re=16>e?16:e,Hr===null)var n=!1;else{if(e=Hr,Hr=null,vo=0,(Le&6)!==0)throw Error(a(331));var o=Le;for(Le|=4,oe=e.current;oe!==null;){var l=oe,d=l.child;if((oe.flags&16)!==0){var j=l.deletions;if(j!==null){for(var b=0;b<j.length;b++){var F=j[b];for(oe=F;oe!==null;){var X=oe;switch(X.tag){case 0:case 11:case 15:hs(8,X,l)}var Q=X.child;if(Q!==null)Q.return=X,oe=Q;else for(;oe!==null;){X=oe;var G=X.sibling,ne=X.return;if(Lu(X),X===F){oe=null;break}if(G!==null){G.return=ne,oe=G;break}oe=ne}}}var le=l.alternate;if(le!==null){var ue=le.child;if(ue!==null){le.child=null;do{var Ze=ue.sibling;ue.sibling=null,ue=Ze}while(ue!==null)}}oe=l}}if((l.subtreeFlags&2064)!==0&&d!==null)d.return=l,oe=d;else e:for(;oe!==null;){if(l=oe,(l.flags&2048)!==0)switch(l.tag){case 0:case 11:case 15:hs(9,l,l.return)}var M=l.sibling;if(M!==null){M.return=l.return,oe=M;break e}oe=l.return}}var k=e.current;for(oe=k;oe!==null;){d=oe;var L=d.child;if((d.subtreeFlags&2064)!==0&&L!==null)L.return=d,oe=L;else e:for(d=k;oe!==null;){if(j=oe,(j.flags&2048)!==0)try{switch(j.tag){case 0:case 11:case 15:mo(9,j)}}catch(fe){Ye(j,j.return,fe)}if(j===d){oe=null;break e}var Z=j.sibling;if(Z!==null){Z.return=j.return,oe=Z;break e}oe=j.return}}if(Le=o,Or(),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(ks,e)}catch{}n=!0}return n}finally{Re=r,Yt.transition=t}}return!1}function Ku(e,t,r){t=Mn(r,t),t=hu(e,t,1),e=zr(e,t,1),t=Et(),e!==null&&(Bn(e,1,t),Pt(e,t))}function Ye(e,t,r){if(e.tag===3)Ku(e,e,r);else for(;t!==null;){if(t.tag===3){Ku(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($r===null||!$r.has(n))){e=Mn(r,e),e=gu(t,e,1),t=zr(t,e,1),e=Et(),t!==null&&(Bn(t,1,e),Pt(t,e));break}}t=t.return}}function af(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Et(),e.pingedLanes|=e.suspendedLanes&r,pt===e&&(xt&r)===r&&(ut===4||ut===3&&(xt&130023424)===xt&&500>Ke()-oi?nn(e,0):si|=r),Pt(e,t)}function Zu(e,t){t===0&&((e.mode&1)===0?t=1:(t=Ts,Ts<<=1,(Ts&130023424)===0&&(Ts=4194304)));var r=Et();e=vr(e,t),e!==null&&(Bn(e,t,r),Pt(e,r))}function uf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Zu(e,r)}function df(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,o=e.memoizedState;o!==null&&(r=o.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(a(314))}n!==null&&n.delete(t),Zu(e,r)}var Ju;Ju=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||It.current)_t=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return _t=!1,Yc(e,t,r);_t=(e.flags&131072)!==0}else _t=!1,Ge&&(t.flags&1048576)!==0&&Ma(t,Ys,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;fo(e,t),e=t.pendingProps;var o=Nn(t,yt.current);Dn(t,r),o=Ol(null,t,n,e,o,r);var l=Fl();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dt(n)?(l=!0,qs(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Il(t),o.updater=uo,t.stateNode=o,o._reactInternals=t,Ul(t,n,e,r),t=ql(null,t,n,!0,l,r)):(t.tag=0,Ge&&l&&vl(t),kt(null,t,o,r),t=t.child),t;case 16:n=t.elementType;e:{switch(fo(e,t),e=t.pendingProps,o=n._init,n=o(n._payload),t.type=n,o=t.tag=ff(n),e=nr(n,e),o){case 0:t=Gl(null,t,n,e,r);break e;case 1:t=bu(null,t,n,e,r);break e;case 11:t=wu(null,t,n,e,r);break e;case 14:t=Su(null,t,n,nr(n.type,e),r);break e}throw Error(a(306,n,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:nr(n,o),Gl(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:nr(n,o),bu(e,t,n,o,r);case 3:e:{if(ku(t),e===null)throw Error(a(387));n=t.pendingProps,l=t.memoizedState,o=l.element,Ha(e,t),ro(t,n,null,r);var d=t.memoizedState;if(n=d.element,l.isDehydrated)if(l={element:n,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Mn(Error(a(423)),t),t=Eu(e,t,n,r,o);break e}else if(n!==o){o=Mn(Error(a(424)),t),t=Eu(e,t,n,r,o);break e}else for(Rt=Pr(t.stateNode.containerInfo.firstChild),zt=t,Ge=!0,rr=null,r=Ra(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(En(),n===o){t=Sr(e,t,r);break e}kt(e,t,n,r)}t=t.child}return t;case 5:return Wa(t),e===null&&jl(t),n=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,d=o.children,pl(n,o)?d=null:l!==null&&pl(n,l)&&(t.flags|=32),Nu(e,t),kt(e,t,d,r),t.child;case 6:return e===null&&jl(t),null;case 13:return Tu(e,t,r);case 4:return Dl(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Tn(t,null,n,r):kt(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:nr(n,o),wu(e,t,n,o,r);case 7:return kt(e,t,t.pendingProps,r),t.child;case 8:return kt(e,t,t.pendingProps.children,r),t.child;case 12:return kt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,o=t.pendingProps,l=t.memoizedProps,d=o.value,He(Js,n._currentValue),n._currentValue=d,l!==null)if(tr(l.value,d)){if(l.children===o.children&&!It.current){t=Sr(e,t,r);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var j=l.dependencies;if(j!==null){d=l.child;for(var b=j.firstContext;b!==null;){if(b.context===n){if(l.tag===1){b=wr(-1,r&-r),b.tag=2;var F=l.updateQueue;if(F!==null){F=F.shared;var X=F.pending;X===null?b.next=b:(b.next=X.next,X.next=b),F.pending=b}}l.lanes|=r,b=l.alternate,b!==null&&(b.lanes|=r),El(l.return,r,t),j.lanes|=r;break}b=b.next}}else if(l.tag===10)d=l.type===t.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(a(341));d.lanes|=r,j=d.alternate,j!==null&&(j.lanes|=r),El(d,r,t),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===t){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}kt(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,n=t.pendingProps.children,Dn(t,r),o=Xt(o),n=n(o),t.flags|=1,kt(e,t,n,r),t.child;case 14:return n=t.type,o=nr(n,t.pendingProps),o=nr(n.type,o),Su(e,t,n,o,r);case 15:return ju(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:nr(n,o),fo(e,t),t.tag=1,Dt(n)?(e=!0,qs(t)):e=!1,Dn(t,r),pu(t,n,o),Ul(t,n,o,r),ql(null,t,n,!0,e,r);case 19:return Du(e,t,r);case 22:return Cu(e,t,r)}throw Error(a(156,t.tag))};function ed(e,t){return Pi(e,t)}function cf(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(e,t,r,n){return new cf(e,t,r,n)}function pi(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ff(e){if(typeof e=="function")return pi(e)?1:0;if(e!=null){if(e=e.$$typeof,e===te)return 11;if(e===pe)return 14}return 2}function Wr(e,t){var r=e.alternate;return r===null?(r=Kt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Co(e,t,r,n,o,l){var d=2;if(n=e,typeof e=="function")pi(e)&&(d=1);else if(typeof e=="string")d=5;else e:switch(e){case E:return on(r.children,o,l,t);case U:d=8,o|=8;break;case O:return e=Kt(12,r,t,o|2),e.elementType=O,e.lanes=l,e;case ee:return e=Kt(13,r,t,o),e.elementType=ee,e.lanes=l,e;case de:return e=Kt(19,r,t,o),e.elementType=de,e.lanes=l,e;case se:return No(r,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case A:d=10;break e;case B:d=9;break e;case te:d=11;break e;case pe:d=14;break e;case K:d=16,n=null;break e}throw Error(a(130,e==null?e:typeof e,""))}return t=Kt(d,r,t,o),t.elementType=e,t.type=n,t.lanes=l,t}function on(e,t,r,n){return e=Kt(7,e,n,t),e.lanes=r,e}function No(e,t,r,n){return e=Kt(22,e,n,t),e.elementType=se,e.lanes=r,e.stateNode={isHidden:!1},e}function mi(e,t,r){return e=Kt(6,e,null,t),e.lanes=r,e}function hi(e,t,r){return t=Kt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function pf(e,t,r,n,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bo(0),this.expirationTimes=Bo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bo(0),this.identifierPrefix=n,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function gi(e,t,r,n,o,l,d,j,b){return e=new pf(e,t,r,j,b),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Kt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Il(l),e}function mf(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function td(e){if(!e)return Lr;e=e._reactInternals;e:{if(mr(e)!==e||e.tag!==1)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(a(171))}if(e.tag===1){var r=e.type;if(Dt(r))return Ia(e,r,t)}return t}function rd(e,t,r,n,o,l,d,j,b){return e=gi(r,n,!0,e,o,l,d,j,b),e.context=td(null),r=e.current,n=Et(),o=Br(r),l=wr(n,o),l.callback=t??null,zr(r,l,o),e.current.lanes=o,Bn(e,o,n),Pt(e,n),e}function bo(e,t,r,n){var o=t.current,l=Et(),d=Br(o);return r=td(r),t.context===null?t.context=r:t.pendingContext=r,t=wr(l,d),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=zr(o,t,d),e!==null&&(lr(e,o,d,l),to(e,o,d)),d}function ko(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function nd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function xi(e,t){nd(e,t),(e=e.alternate)&&nd(e,t)}function hf(){return null}var sd=typeof reportError=="function"?reportError:function(e){console.error(e)};function yi(e){this._internalRoot=e}Eo.prototype.render=yi.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(a(409));bo(e,t,null,null)},Eo.prototype.unmount=yi.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rn(function(){bo(null,e,null,null)}),t[hr]=null}};function Eo(e){this._internalRoot=e}Eo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Hi();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Dr.length&&t!==0&&t<Dr[r].priority;r++);Dr.splice(r,0,e),r===0&&Wi(e)}};function vi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function To(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function od(){}function gf(e,t,r,n,o){if(o){if(typeof n=="function"){var l=n;n=function(){var F=ko(d);l.call(F)}}var d=rd(t,n,e,0,null,!1,!1,"",od);return e._reactRootContainer=d,e[hr]=d.current,rs(e.nodeType===8?e.parentNode:e),rn(),d}for(;o=e.lastChild;)e.removeChild(o);if(typeof n=="function"){var j=n;n=function(){var F=ko(b);j.call(F)}}var b=gi(e,0,!1,null,null,!1,!1,"",od);return e._reactRootContainer=b,e[hr]=b.current,rs(e.nodeType===8?e.parentNode:e),rn(function(){bo(t,b,r,n)}),b}function Io(e,t,r,n,o){var l=r._reactRootContainer;if(l){var d=l;if(typeof o=="function"){var j=o;o=function(){var b=ko(d);j.call(b)}}bo(t,d,e,o)}else d=gf(r,t,e,o,n);return ko(d)}Ri=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Hn(t.pendingLanes);r!==0&&(Uo(t,r|1),Pt(t,Ke()),(Le&6)===0&&(Ln=Ke()+500,Or()))}break;case 13:rn(function(){var n=vr(e,1);if(n!==null){var o=Et();lr(n,e,1,o)}}),xi(e,1)}},Wo=function(e){if(e.tag===13){var t=vr(e,134217728);if(t!==null){var r=Et();lr(t,e,134217728,r)}xi(e,134217728)}},$i=function(e){if(e.tag===13){var t=Br(e),r=vr(e,t);if(r!==null){var n=Et();lr(r,e,t,n)}xi(e,t)}},Hi=function(){return Re},Bi=function(e,t){var r=Re;try{return Re=e,t()}finally{Re=r}},Tt=function(e,t,r){switch(t){case"input":if(Y(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=Vs(n);if(!o)throw Error(a(90));q(n),Y(n,o)}}}break;case"textarea":we(e,r);break;case"select":t=r.value,t!=null&&Te(e,!!r.multiple,t,!1)}},Ut=di,Ns=rn;var xf={usingClientEntryPoint:!1,Events:[os,jn,Vs,fn,br,di]},vs={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},yf={bundleType:vs.bundleType,version:vs.version,rendererPackageName:vs.rendererPackageName,rendererConfig:vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_i(e),e===null?null:e.stateNode},findFiberByHostInstance:vs.findFiberByHostInstance||hf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Do=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Do.isDisabled&&Do.supportsFiber)try{ks=Do.inject(yf),ur=Do}catch{}}return At.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xf,At.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vi(t))throw Error(a(200));return mf(e,t,null,r)},At.createRoot=function(e,t){if(!vi(e))throw Error(a(299));var r=!1,n="",o=sd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=gi(e,1,!1,null,null,r,!1,n,o),e[hr]=t.current,rs(e.nodeType===8?e.parentNode:e),new yi(t)},At.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(a(188)):(e=Object.keys(e).join(","),Error(a(268,e)));return e=_i(t),e=e===null?null:e.stateNode,e},At.flushSync=function(e){return rn(e)},At.hydrate=function(e,t,r){if(!To(t))throw Error(a(200));return Io(null,e,t,!0,r)},At.hydrateRoot=function(e,t,r){if(!vi(e))throw Error(a(405));var n=r!=null&&r.hydratedSources||null,o=!1,l="",d=sd;if(r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onRecoverableError!==void 0&&(d=r.onRecoverableError)),t=rd(t,null,e,1,r??null,o,!1,l,d),e[hr]=t.current,rs(e),n)for(e=0;e<n.length;e++)r=n[e],o=r._getVersion,o=o(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,o]:t.mutableSourceEagerHydrationData.push(r,o);return new Eo(t)},At.render=function(e,t,r){if(!To(t))throw Error(a(200));return Io(null,e,t,!1,r)},At.unmountComponentAtNode=function(e){if(!To(e))throw Error(a(40));return e._reactRootContainer?(rn(function(){Io(null,null,e,!1,function(){e._reactRootContainer=null,e[hr]=null})}),!0):!1},At.unstable_batchedUpdates=di,At.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!To(r))throw Error(a(200));if(e==null||e._reactInternals===void 0)throw Error(a(38));return Io(e,t,r,!1,n)},At.version="18.3.1-next-f1338f8080-20240426",At}var pd;function Nd(){if(pd)return ji.exports;pd=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(u){console.error(u)}}return i(),ji.exports=kf(),ji.exports}var md;function Ef(){if(md)return _o;md=1;var i=Nd();return _o.createRoot=i.createRoot,_o.hydrateRoot=i.hydrateRoot,_o}var Tf=Ef();const If=Cd(Tf);var Lt=(i=>(i.ProfessorConflitoHorario="professor_conflito_horario",i.MaxAulasDia="max_aulas_dia",i.Intersticio="intersticio",i.Indisponivel="indisponivel",i.ConflitoDisponibilidadeDivisao="conflito_disponibilidade_divisao",i.TurmaErrada="turma_errada",i))(Lt||{});const _e=["segunda","terca","quarta","quinta","sexta"],st=["07:10-08:00","08:00-08:50","08:50-09:40","10:00-10:50","10:50-11:40","11:40-12:30"],ot=["13:30-14:20","14:20-15:10","15:10-16:00","16:20-17:10","17:10-18:00","18:00-18:50"],Cr=["18:10-19:00","19:00-19:50","19:50-20:50","21:05-21:55","21:55-23:00"],zn=["18:10-19:00","19:00-19:50","19:50-20:50","21:05-21:55","21:55-23:00"],ln={[Lt.ProfessorConflitoHorario]:{bg:"bg-pink-600",text:"text-white",name:"Conflito de Horrio (Professor)",description:"Alerta Crtico: Professor alocado em mltiplas turmas no mesmo horrio."},[Lt.TurmaErrada]:{bg:"bg-blue-500",text:"text-white",name:"Troca entre Turmas",description:"Disciplina alocada em uma turma diferente da original (e no  uma troca BNCC vlida)."},[Lt.Intersticio]:{bg:"bg-red-600",text:"text-white",name:"Interstcio < 11h",description:"Menos de 11 horas de descanso entre os dias de trabalho."},[Lt.MaxAulasDia]:{bg:"bg-orange-400",text:"text-white",name:"Excesso de Aulas",description:"Professor com mais de 8 aulas no dia."},[Lt.ConflitoDisponibilidadeDivisao]:{bg:"bg-purple-500",text:"text-white",name:"Conflito Diviso",description:"Professores de disciplina dividida com disponibilidades conflitantes no mesmo horrio."},[Lt.Indisponivel]:{bg:"bg-yellow-400",text:"text-gray-800",name:"Fora de Disponibilidade",description:"Aula alocada em horrio indisponvel para o professor."}},ki=i=>{const[u,a]=i.split("-"),[f,c]=u.split(":").map(Number),[p,m]=a.split(":").map(Number);return{start:f*60+c,end:p*60+m}},Lo=i=>{const u=[],{professores:a,grade:f,disciplinas:c,atribuicoes:p,turmas:m}=i,v={};f.forEach(y=>{const h=`${y.professorId}-${y.dia}-${y.horario}`;v[h]||(v[h]=[]),v[h].push(y)});for(const y in v)if(v[y].length>1){const h=v[y],S=a.find(C=>C.id===h[0].professorId),w=h[0].dia,N=h[0].horario;u.push({id:`conflito-horario-${y}`,tipo:Lt.ProfessorConflitoHorario,detalhes:`Alerta Crtico: Professor ${S?.nome||"Desconhecido"} est em ${h.length} lugares ao mesmo tempo na ${w} s ${N}.`,timestamp:Date.now(),gradeSlotIds:h.map(C=>C.id)})}return f.forEach(y=>{const h=i.disciplinas.find(S=>S.id===y.disciplinaId);if(h&&h.turmaId!==y.turmaId){let S=!1;if(h.bnccId){const w=i.disciplinas.find(N=>N.turmaId===y.turmaId&&N.bnccId===h.bnccId);if(w){const N=i.atribuicoes.find(C=>C.disciplinaId===w.id);N&&N.professores.includes(y.professorId)&&(S=!0)}}if(!S){const w=i.turmas.find(C=>C.id===h.turmaId)?.nome||`ID Invlido (${h.turmaId})`,N=i.turmas.find(C=>C.id===y.turmaId)?.nome||`ID Invlido (${y.turmaId})`;u.push({id:`turma-errada-${y.id}`,tipo:Lt.TurmaErrada,detalhes:`Disciplina ${h.nome} da turma ${w} foi alocada na turma ${N}.`,timestamp:Date.now(),gradeSlotIds:[y.id]})}}}),a.forEach(y=>{const h=f.filter(w=>w.professorId===y.id),S={};h.forEach(w=>{const{start:N,end:C}=ki(w.horario);S[w.dia]?(S[w.dia].minStart=Math.min(S[w.dia].minStart,N),S[w.dia].maxEnd=Math.max(S[w.dia].maxEnd,C)):S[w.dia]={minStart:N,maxEnd:C}});for(let w=0;w<_e.length-1;w++){const N=_e[w],C=_e[w+1];if(S[N]&&S[C]){const P=S[N].maxEnd,H=S[C].minStart;if(1440-P+H<660){const I=h.filter(g=>g.dia===N||g.dia===C).map(g=>g.id);u.push({id:`intersticio-${y.id}-${N}-${C}`,tipo:Lt.Intersticio,detalhes:`Professor ${y.nome} tem menos de 11h de descanso entre ${N} e ${C}.`,timestamp:Date.now(),gradeSlotIds:I})}}}}),a.forEach(y=>{const h={};f.filter(S=>S.professorId===y.id).forEach(S=>{h[S.dia]||(h[S.dia]=[]),h[S.dia].push(S)});for(const S in h){const w=h[S].reduce((N,C)=>{const H=m.find(W=>W.id===C.turmaId)?.isModular?1.25:1;return N+H},0);w>8&&u.push({id:`max-aulas-${y.id}-${S}`,tipo:Lt.MaxAulasDia,detalhes:`Professor ${y.nome} tem o equivalente a ${w} aulas na ${S}.`,timestamp:Date.now(),gradeSlotIds:h[S].map(N=>N.id)})}}),f.forEach(y=>{const h=c.find(S=>S.id===y.disciplinaId);if(h&&h.divisao){const S=p.find(w=>w.disciplinaId===h.id);S&&S.professores.length>1&&S.professores.forEach(w=>{const N=a.find(C=>C.id===w);if(N){const C=N.disponibilidade[y.dia];(!C||!C.includes(y.horario))&&u.push({id:`conflito-divisao-${y.id}-${w}`,tipo:Lt.ConflitoDisponibilidadeDivisao,detalhes:`Conflito em disciplina dividida: ${h.nome}. Professor ${N.nome} est indisponvel neste horrio.`,timestamp:Date.now(),gradeSlotIds:[y.id]})}})}}),f.forEach(y=>{const h=a.find(S=>S.id===y.professorId);if(h){const S=h.disponibilidade[y.dia];(!S||!S.includes(y.horario))&&u.push({id:`indisponivel-${y.id}`,tipo:Lt.Indisponivel,detalhes:`Aula de ${c.find(w=>w.id===y.disciplinaId)?.nome} para ${h.nome} est fora de sua disponibilidade.`,timestamp:Date.now(),gradeSlotIds:[y.id]})}}),Array.from(new Map(u.map(y=>[y.id,y])).values())};let ar=null,ir=null;{const i=window.firebase,u={apiKey:"AIzaSyCw5hk7xIGMPJyLNPrc6eIXC59KpDSE9JY",authDomain:"gerenciadorhorario-c62e9.firebaseapp.com",projectId:"gerenciadorhorario-c62e9",storageBucket:"gerenciadorhorario-c62e9.appspot.com",messagingSenderId:"386276022565",appId:"1:386276022565:web:96f71441e3a86f0a67e2cc",measurementId:"G-X8NTQPQCPX"};i.apps.length||i.initializeApp(u),ar=i.auth(),ir=i.firestore()}const bd=R.createContext(void 0),an={version:"1.0",ano:new Date().getFullYear(),cursos:[],turmas:[],disciplinas:[],professores:[],atribuicoes:[],grade:[],alertas:[],bncc:[],toastMessage:null,draggedItem:null,clipboard:null,selectedSlotId:null,onlineUsers:[],saveStatus:"saved",lastModifiedBy:null,lastModifiedAt:null};let Zt=[an],Ht=0;const Mo=i=>{const u=i.split("_"),a=u[0]||"",f=u[1]||"";let c=u.slice(2).join("_");const p=c.match(/(.*)-([01])$/);return p&&(c=p[1]),{turmaId:a,dia:f,horario:c}},Df=i=>{const u={...an,...i};(typeof u.ano!="number"||isNaN(u.ano))&&(u.ano=new Date().getFullYear()),["cursos","turmas","disciplinas","professores","atribuicoes","grade","alertas","bncc","onlineUsers"].forEach(c=>{Array.isArray(u[c])||(u[c]=[])}),Array.isArray(u.turmas)&&(u.turmas=u.turmas.map(c=>c?{...c,isModular:!!c.isModular}:null).filter(Boolean)),Array.isArray(u.professores)&&(u.professores=u.professores.map(c=>c&&(typeof c.disponibilidade!="object"||c.disponibilidade===null||Array.isArray(c.disponibilidade))?{...c,disponibilidade:{}}:c).filter(Boolean)),Array.isArray(u.grade)&&(u.grade=u.grade.filter(c=>!c||typeof c!="object"?!1:["id","turmaId","dia","horario","disciplinaId","professorId"].every(m=>typeof c[m]=="string"&&c[m])));const f=new Set(u.turmas.map(c=>c.id));return u.grade=u.grade.filter(c=>f.has(c.turmaId)?!0:(console.warn(`Removing orphaned grade slot with invalid turmaId: ${c.turmaId}`,c),!1)),u},Ei={current:new Map},be=(i,u)=>{Ei.current.set(i,u)},_f=(i,u)=>{switch(u.type){case"SET_STATE":return i;case"UPDATE_GRADE":{const{id:a,slot:f}=u.payload,c=i.grade.filter(p=>p.id!==a);return f&&c.push(f),be("grade",c),{...i,grade:c}}case"POPULATE_GRADE":return be("grade",u.payload),{...i,grade:u.payload};case"DELETE_SLOT":{const{slotId:a}=u.payload;if(!i.grade.some(p=>p.id===a))return i;const c=i.grade.filter(p=>p.id!==a);return be("grade",c),{...i,grade:c,selectedSlotId:null}}case"SWAP_GRADE_SLOTS":{const{sourceId:a,destinationId:f}=u.payload,c=i.grade.find(h=>h.id===a);if(!c)return i;const p=i.grade.find(h=>h.id===f),m=Mo(a),v=Mo(f),x=i.grade.filter(h=>h.id!==a&&h.id!==f),y={...c,id:f,turmaId:v.turmaId,dia:v.dia,horario:v.horario};if(x.push(y),p){const h={...p,id:a,turmaId:m.turmaId,dia:m.dia,horario:m.horario};x.push(h)}return be("grade",x),{...i,grade:x}}case"ADD_CURSO":{const a=[...i.cursos,u.payload];return be("cursos",a),{...i,cursos:a}}case"UPDATE_CURSO":{const a=i.cursos.map(f=>f.id===u.payload.id?u.payload:f);return be("cursos",a),{...i,cursos:a}}case"DELETE_CURSO":{const a=i.turmas.filter(y=>y.cursoId===u.payload.id).map(y=>y.id),f=i.disciplinas.filter(y=>a.includes(y.turmaId)).map(y=>y.id),c=i.cursos.filter(y=>y.id!==u.payload.id),p=i.turmas.filter(y=>y.cursoId!==u.payload.id),m=i.disciplinas.filter(y=>!a.includes(y.turmaId)),v=i.atribuicoes.filter(y=>!f.includes(y.disciplinaId)),x=i.grade.filter(y=>!a.includes(y.turmaId));return be("cursos",c),be("turmas",p),be("disciplinas",m),be("atribuicoes",v),be("grade",x),{...i,cursos:c,turmas:p,disciplinas:m,atribuicoes:v,grade:x}}case"ADD_TURMA":{const a=[...i.turmas,u.payload];return be("turmas",a),{...i,turmas:a}}case"UPDATE_TURMA":{const a=i.turmas.map(f=>f.id===u.payload.id?u.payload:f);return be("turmas",a),{...i,turmas:a}}case"DELETE_TURMA":{const a=i.disciplinas.filter(v=>v.turmaId===u.payload.id).map(v=>v.id),f=i.turmas.filter(v=>v.id!==u.payload.id),c=i.disciplinas.filter(v=>v.turmaId!==u.payload.id),p=i.atribuicoes.filter(v=>!a.includes(v.disciplinaId)),m=i.grade.filter(v=>v.turmaId!==u.payload.id);return be("turmas",f),be("disciplinas",c),be("atribuicoes",p),be("grade",m),{...i,turmas:f,disciplinas:c,atribuicoes:p,grade:m}}case"ADD_DISCIPLINA":{const a=[...i.disciplinas,u.payload];return be("disciplinas",a),{...i,disciplinas:a}}case"UPDATE_DISCIPLINA":{const a=i.disciplinas.map(f=>f.id===u.payload.id?u.payload:f);return be("disciplinas",a),{...i,disciplinas:a}}case"DELETE_DISCIPLINA":{const a=i.disciplinas.filter(p=>p.id!==u.payload.id),f=i.atribuicoes.filter(p=>p.disciplinaId!==u.payload.id),c=i.grade.filter(p=>p.disciplinaId!==u.payload.id);return be("disciplinas",a),be("atribuicoes",f),be("grade",c),{...i,disciplinas:a,atribuicoes:f,grade:c}}case"ADD_PROFESSOR":{const a=[...i.professores,u.payload];return be("professores",a),{...i,professores:a}}case"UPDATE_PROFESSOR":{const a=i.professores.map(f=>f.id===u.payload.id?u.payload:f);return be("professores",a),{...i,professores:a}}case"BATCH_UPDATE_PROFESSORS":{const a=new Map(u.payload.professors.map(c=>[c.id,c])),f=i.professores.map(c=>a.get(c.id)||c);return be("professores",f),{...i,professores:f}}case"DELETE_PROFESSOR":{const a=i.professores.filter(p=>p.id!==u.payload.id),f=i.atribuicoes.map(p=>({...p,professores:p.professores.filter(m=>m!==u.payload.id)})),c=i.grade.filter(p=>p.professorId!==u.payload.id);return be("professores",a),be("atribuicoes",f),be("grade",c),{...i,professores:a,atribuicoes:f,grade:c}}case"UPDATE_ATRIBUICAO":{let a;return i.atribuicoes.find(c=>c.disciplinaId===u.payload.disciplinaId)?a=i.atribuicoes.map(c=>c.disciplinaId===u.payload.disciplinaId?u.payload:c):a=[...i.atribuicoes,u.payload],be("atribuicoes",a),{...i,atribuicoes:a}}case"DELETE_ATRIBUICAO":{const a=i.atribuicoes.filter(f=>f.disciplinaId!==u.payload.disciplinaId);return be("atribuicoes",a),{...i,atribuicoes:a}}case"UPDATE_ANO":return be("ano",u.payload),{...i,ano:u.payload};case"SET_ALERTS":return{...i,alertas:u.payload};case"COPY_SLOT":{const{sourceSlotId:a}=u.payload,f=i.grade.find(c=>c.id===a);return f?{...i,clipboard:{sourceSlot:f,type:"copy"},draggedItem:null}:i}case"CUT_SLOT":{const{sourceSlotId:a}=u.payload,f=i.grade.find(p=>p.id===a);if(!f)return i;const c=i.grade.filter(p=>p.id!==a);return be("grade",c),{...i,grade:c,clipboard:{sourceSlot:f,type:"cut"},draggedItem:null,selectedSlotId:null}}case"PASTE_SLOT":{const{destinationId:a}=u.payload,{clipboard:f,disciplinas:c}=i;if(!f)return i;const{sourceSlot:p}=f,m=Mo(a),x=!!c.find(C=>C.id===p.disciplinaId)?.divisao,y=x?a:`${m.turmaId}_${m.dia}_${m.horario}`,h={...p,id:y,turmaId:m.turmaId,dia:m.dia,horario:m.horario},S=!x,N=[...i.grade.filter(C=>{const P=Mo(C.id);return P.turmaId===m.turmaId&&P.dia===m.dia&&P.horario===m.horario?S?!1:!(!(C.id.endsWith("-0")||C.id.endsWith("-1"))||C.id===a):!0}),h];return be("grade",N),{...i,grade:N,clipboard:f.type==="cut"?null:i.clipboard}}case"CREATE_BNCC":{const{nome:a}=u.payload,f=`bncc-${Date.now()}`,c={id:f,nome:a},p=i.disciplinas.map(m=>m.nome===a?{...m,bnccId:f}:m);return be("disciplinas",p),be("bncc",[...i.bncc,c]),{...i,disciplinas:p,bncc:[...i.bncc,c]}}case"DELETE_BNCC":{const{bnccId:a}=u.payload,f=i.disciplinas.map(p=>{if(p.bnccId===a){const{bnccId:m,...v}=p;return v}return p}),c=i.bncc.filter(p=>p.id!==a);return be("disciplinas",f),be("bncc",c),{...i,disciplinas:f,bncc:c}}}return i},Mf=(i,u)=>{if(u.type==="SHOW_TOAST")return{...i,toastMessage:u.payload};if(u.type==="DRAG_START")return{...i,draggedItem:u.payload,clipboard:null,selectedSlotId:null};if(u.type==="DRAG_END")return{...i,draggedItem:null};if(u.type==="SELECT_SLOT")return{...i,selectedSlotId:u.payload.slotId};if(u.type==="SET_ONLINE_USERS")return{...i,onlineUsers:u.payload};if(u.type==="SET_SAVE_STATUS")return{...i,saveStatus:u.payload};if(u.type==="CLEAR_DATA"){const{toastMessage:f,draggedItem:c,clipboard:p,selectedSlotId:m,onlineUsers:v,saveStatus:x,...y}=an;Object.keys(y).forEach(S=>{be(S,y[S])});const h={...an,alertas:Lo(an)};return Zt=[h],Ht=0,h}let a;if(u.type==="UNDO"){Ht>0&&Ht--;const{alertas:f,toastMessage:c,draggedItem:p,clipboard:m,selectedSlotId:v,onlineUsers:x,saveStatus:y,...h}=Zt[Ht];return Object.keys(h).forEach(S=>{be(S,h[S])}),Zt[Ht]}if(u.type==="REDO"){Ht<Zt.length-1&&Ht++;const{alertas:f,toastMessage:c,draggedItem:p,clipboard:m,selectedSlotId:v,onlineUsers:x,saveStatus:y,...h}=Zt[Ht];return Object.keys(h).forEach(S=>{be(S,h[S])}),Zt[Ht]}if(u.type==="SET_STATE"){a=Df(u.payload),a.alertas=Lo(a),a.saveStatus="saved";const{alertas:f,toastMessage:c,draggedItem:p,clipboard:m,selectedSlotId:v,onlineUsers:x,saveStatus:y,...h}=a;Object.keys(h).forEach(S=>{be(S,h[S])})}else a=_f(i,u);if(a!==i){const f={...a,toastMessage:i.toastMessage,draggedItem:i.draggedItem,selectedSlotId:i.selectedSlotId,onlineUsers:i.onlineUsers,saveStatus:i.saveStatus,lastModifiedBy:i.lastModifiedBy,lastModifiedAt:i.lastModifiedAt};if(u.type!=="SET_STATE"){if(ar){const p=ar.currentUser;f.lastModifiedBy=p?p.displayName||p.email:"Sistema"}else f.lastModifiedBy="Usurio Local";f.lastModifiedAt=new Date().toISOString(),be("lastModifiedBy",f.lastModifiedBy),be("lastModifiedAt",f.lastModifiedAt)}return u.type==="SET_STATE"||u.type==="POPULATE_GRADE"?(Zt=[f],Ht=0):u.type!=="SET_ALERTS"&&(Zt=Zt.slice(0,Ht+1),Zt.push(f),Ht=Zt.length-1),f}return i},Pf=({children:i})=>{const[u,a]=R.useReducer(Mf,an,v=>{let x=v;const y={...x,alertas:Lo(x)};return Zt=[y],Ht=0,y}),f=R.useRef(!1),c=R.useRef(!1);R.useEffect(()=>{if(!ir)return;const v=ir.collection("timetables").doc("default"),x=v.onSnapshot(y=>{if(c.current=!0,y.exists&&!y.metadata.hasPendingWrites){const h=y.data();if(h){const S=h.lastModifiedAt?new Date(h.lastModifiedAt).getTime():0,w=u.lastModifiedAt?new Date(u.lastModifiedAt).getTime():0;S>w?(console.log("Received newer remote update from Firestore. Applying."),f.current=!0,a({type:"SET_STATE",payload:h})):console.log(`Ignored stale remote update. Remote: ${S}, Local: ${w}`)}}else if(!y.exists){const{toastMessage:h,draggedItem:S,clipboard:w,selectedSlotId:N,onlineUsers:C,saveStatus:P,...H}=an;v.set(H)}},y=>{c.current=!0,console.error("Error listening to Firestore document:",y),y.code==="permission-denied"?a({type:"SHOW_TOAST",payload:"Permisso negada. Verifique as Regras de Segurana do Firestore."}):a({type:"SHOW_TOAST",payload:"Erro de conexo com o banco de dados."})});return()=>x()},[u.lastModifiedAt]),R.useEffect(()=>{if(!ar||!ir)return;let v,x;const y=()=>{v&&clearInterval(v),x&&x()},h=ar.onAuthStateChanged(S=>{if(y(),S){const w=ir.collection("presence").doc(S.uid),N={id:S.uid,name:S.displayName||S.email||"Usurio Annimo",email:S.email||""};w.set({...N,lastSeen:window.firebase.firestore.FieldValue.serverTimestamp()}),v=window.setInterval(()=>{w.update({lastSeen:window.firebase.firestore.FieldValue.serverTimestamp()})},15e3),x=ir.collection("presence").where("lastSeen",">",new Date(Date.now()-3e4)).onSnapshot(C=>{const P=C.docs.map(H=>H.data());a({type:"SET_ONLINE_USERS",payload:P})},C=>{console.error("Error listening to presence collection:",C)})}else a({type:"SET_ONLINE_USERS",payload:[]})});return()=>{h(),y();const S=ar.currentUser;S&&ir.collection("presence").doc(S.uid).delete()}},[]),R.useEffect(()=>{const v=setTimeout(()=>{const x=Ei.current;if(x.size===0||f.current){f.current&&(f.current=!1);return}if(Ei.current=new Map,a({type:"SET_SAVE_STATUS",payload:"saving"}),ir&&c.current){const y=ir.batch(),h=ir.collection("timetables").doc("default"),S={};x.forEach((w,N)=>{S[N]=w}),y.update(h,S),y.commit().then(()=>{a({type:"SET_SAVE_STATUS",payload:"saved"})}).catch(w=>{console.error("Error committing batch to Firestore: ",w),a({type:"SHOW_TOAST",payload:"Falha ao salvar dados."}),a({type:"SET_SAVE_STATUS",payload:"error"})})}},1e3);return()=>clearTimeout(v)},[u]);const p=JSON.stringify({grade:u.grade,professores:u.professores,disciplinas:u.disciplinas,atribuicoes:u.atribuicoes,turmas:u.turmas});R.useEffect(()=>{const v=setTimeout(()=>{const x={...u,...JSON.parse(p)},y=Lo(x);JSON.stringify(y)!==JSON.stringify(u.alertas)&&a({type:"SET_ALERTS",payload:y})},300);return()=>clearTimeout(v)},[p]);const m=R.useCallback(v=>{v.ctrlKey&&v.key==="z"&&(v.preventDefault(),a({type:"UNDO"})),v.ctrlKey&&v.key==="y"&&(v.preventDefault(),a({type:"REDO"}))},[]);return R.useEffect(()=>(window.addEventListener("keydown",m),()=>{window.removeEventListener("keydown",m)}),[m]),s.jsx(bd.Provider,{value:{state:u,dispatch:a},children:i})},lt=()=>{const i=R.useContext(bd);if(!i)throw new Error("useData must be used within a DataProvider");return i},kd=({children:i,content:u,isVisible:a,onVisibilityChange:f})=>u?s.jsxs("div",{className:"relative",onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),children:[i,a&&s.jsx("div",{className:"absolute z-50 bottom-full mb-2 w-64 p-2 text-sm text-white bg-gray-800 rounded-md shadow-lg",children:u})]}):s.jsx(s.Fragment,{children:i}),Af=i=>st.includes(i)?"manha":ot.includes(i)?"tarde":"noite",hd=un.memo(({baseId:i,subSlotIndex:u,slot:a,isOutOfPeriod:f,alerts:c,onOpenContextMenu:p,onSelectSlot:m,isSelected:v,hoveredProfessorId:x,onProfessorHover:y,highlightStatus:h,onDragStart:S,onDragEnd:w,disciplina:N,professor:C,scaledCellFontSize:P})=>{const[H,W]=R.useState(!1),I=`${i}-${u}`,g=ee=>{ee.stopPropagation(),m(I)},D=ee=>{ee.stopPropagation(),p(ee,I)},z=c.find(ee=>ee.gradeSlotIds.includes(I))??(c.length>0&&a?c[0]:null),_=ee=>ee==="valid"?"bg-green-200":ee==="warning"?"bg-yellow-200":"";let E=f?"bg-slate-200":"bg-white";h&&!a&&(E=_(h)),v&&(E="bg-indigo-50"),z&&(E=ln[z.tipo].bg);const U=v?"ring ring-indigo-500 z-10":"",O=x&&a&&a.professorId===x&&!v,A=x&&a&&a.professorId!==x,B=a&&N&&C?s.jsxs("div",{className:"p-1 text-left w-full h-full overflow-hidden",style:{fontSize:`${P}px`},children:[s.jsx("p",{className:"font-bold truncate",children:N.nome}),s.jsx("p",{className:"text-gray-600 truncate",children:C.nome})]}):s.jsx("div",{className:"w-full h-full"}),te=c.length>0?s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-1",children:"Alertas:"}),s.jsx("ul",{className:"list-disc list-inside text-xs",children:c.map(ee=>s.jsx("li",{children:ee.detalhes},ee.id))})]}):null;return s.jsx("div",{title:a&&N&&C?`Disciplina: ${N.nome}
Professor: ${C.nome}`:void 0,draggable:!!a,onDragStart:ee=>a&&S(ee,a.id),onDragEnd:w,onClick:g,onContextMenu:D,onMouseEnter:()=>{a&&y(a.professorId)},className:`relative h-1/2 transition-all duration-150 ${E} ${U} ${a?"cursor-grab active:cursor-grabbing":"cursor-pointer"} ${O?"ring-2 ring-slate-700 z-20":""} ${A?"opacity-40":""}`,children:s.jsx(kd,{content:te,isVisible:H,onVisibilityChange:W,children:B})})}),Lf=({id:i,gridType:u,turma:a,fullSlot:f,slot0:c,slot1:p,isLastInCourse:m,cellAlerts:v,subCellAlerts0:x,subCellAlerts1:y,onOpenContextMenu:h,onSelectSlot:S,selectedSlotId:w,hoveredProfessorId:N,onProfessorHover:C,highlightStatus:P,subSlotHighlightStatus:H,scaledCellMinHeight:W,scaledCellFontSize:I})=>{const{state:g,dispatch:D}=lt(),{disciplinas:z,draggedItem:_,clipboard:E,turmas:U,grade:O}=g,[A,B]=R.useState(!1),[te,ee]=R.useState(!1),de=i.split("_").slice(2).join("_"),pe=Af(de),K=a&&a.periodo!==pe,se="border-b border-gray-300",V=m?"border-r-2 border-r-slate-400":"border-r border-gray-300";if(u==="modular"&&de==="18:10-19:00")return s.jsx("div",{className:`relative ${V} ${se} bg-gray-200`,style:{minHeight:`${W}px`,backgroundImage:"repeating-linear-gradient(45deg, #d1d5db, #d1d5db 10px, #e5e7eb 10px, #e5e7eb 20px)"},title:"Horrio no disponvel para aulas modulares"});const J=()=>{if(!_)return null;const ie=_.type==="SIDEBAR_ITEM"?_.disciplinaId:O.find(Y=>Y.id===_.sourceSlotId)?.disciplinaId;return z.find(Y=>Y.id===ie)||null},T=(ie,Y)=>{ie.stopPropagation(),ee(!1);const ce={type:"GRID_ITEM",sourceSlotId:Y};ie.dataTransfer.setData("application/json",JSON.stringify(ce)),ie.dataTransfer.effectAllowed="move",D({type:"DRAG_START",payload:ce})},$=()=>{D({type:"DRAG_END"})},je=ie=>{if(ie.preventDefault(),!_){ie.dataTransfer.dropEffect="none";return}const Y=J();if(!Y){ie.dataTransfer.dropEffect="none",B(!1);return}let ce=!1;if(Y.divisao){const Fe=c||p;(_.type==="GRID_ITEM"&&Fe||!c||!p)&&(ce=!0)}else(!f&&!c&&!p||_.type==="GRID_ITEM"&&f)&&(ce=!0);ce?(B(!0),ie.dataTransfer.dropEffect="move"):(B(!1),ie.dataTransfer.dropEffect="none")},me=()=>{B(!1)},xe=ie=>{if(ie.preventDefault(),ie.stopPropagation(),B(!1),!!_)try{const Y=J();if(!Y)return;const ce=U.find(Te=>Te.id===Y.turmaId),Fe=a;if(ce&&Fe&&ce.isModular!==Fe.isModular){D({type:"SHOW_TOAST",payload:"No  permitido mover aulas entre a grade regular e a modular."});return}let ye;if(Y.divisao){const Te=ie.currentTarget.getBoundingClientRect(),it=ie.clientY<Te.top+Te.height/2,Je=`${i}-${it?0:1}`,we=`${i}-${it?1:0}`;g.grade.find(Ne=>Ne.id===Je)&&_.sourceSlotId!==Je?ye=g.grade.find(ve=>ve.id===we)?Je:we:ye=Je}else if(f||c||p)if(f&&_.type==="GRID_ITEM")ye=i;else return;else ye=i;if(_.type==="GRID_ITEM"&&_.sourceSlotId===ye)return;if(_.type==="SIDEBAR_ITEM"){const{disciplinaId:Te,professorId:it}=_;if(Te&&it){if(!ye)return;const Je=ye.split("_"),we=Je[1];let Pe=Je.slice(2).join("_");const Ne=Pe.match(/(.*)-([01])$/);Ne&&(Pe=Ne[1]),D({type:"UPDATE_GRADE",payload:{id:ye,slot:{id:ye,turmaId:a.id,dia:we,horario:Pe,disciplinaId:Te,professorId:it}}})}}else if(_.type==="GRID_ITEM"&&_.sourceSlotId){if(!ye)return;D({type:"SWAP_GRADE_SLOTS",payload:{sourceId:_.sourceSlotId,destinationId:ye}})}}catch(Y){console.error("Error handling drop in GridCell:",Y)}finally{D({type:"DRAG_END"})}},Ie=ie=>{ie.stopPropagation();const ce=!!z.find(ye=>ye.id===E?.sourceSlot.disciplinaId)?.divisao;let Fe=i;if(!f&&!c&&!p&&ce){const ye=ie.currentTarget.getBoundingClientRect(),Te=ie.clientY<ye.top+ye.height/2;Fe=`${i}-${Te?0:1}`}S(Fe)},Ae=ie=>{ie.preventDefault(),ie.stopPropagation();const ce=!!z.find(ye=>ye.id===E?.sourceSlot.disciplinaId)?.divisao;let Fe=i;if(!f&&!c&&!p&&ce){const ye=ie.currentTarget.getBoundingClientRect(),Te=ie.clientY<ye.top+ye.height/2;Fe=`${i}-${Te?0:1}`}h(ie,Fe)},ke=w===i,ze=ie=>ie==="valid"?"bg-green-200":ie==="warning"?"bg-yellow-200":"";if(f){const ie=g.disciplinas.find(Ne=>Ne.id===f.disciplinaId),Y=g.professores.find(Ne=>Ne.id===f.professorId),ce=v[0],Fe=ie&&Y?s.jsxs("div",{className:"p-1 text-left w-full h-full",style:{fontSize:`${I}px`},children:[s.jsx("p",{className:"font-bold truncate",children:ie.nome}),s.jsx("p",{className:"text-gray-600 truncate",children:Y.nome})]}):s.jsx("div",{className:"w-full h-full"}),ye=v.length>0?s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-1",children:"Alertas:"}),s.jsx("ul",{className:"list-disc list-inside text-xs",children:v.map(Ne=>s.jsx("li",{children:Ne.detalhes},Ne.id))})]}):null;let Te=K?"bg-slate-200":"bg-white";ke&&(Te="bg-indigo-50"),ce&&(Te=ln[ce.tipo].bg),A&&(Te="bg-blue-300");const it=Ne=>{Ne.stopPropagation(),S(i)},Je=ke?"ring-2 ring-indigo-500 z-10":"",we=N&&f.professorId===N&&!ke,Pe=N&&f.professorId!==N;return s.jsx("div",{title:ie&&Y?`Disciplina: ${ie.nome}
Professor: ${Y.nome}`:void 0,onDragOver:je,onDragLeave:me,onDrop:xe,onClick:it,draggable:!!f,onDragStart:Ne=>T(Ne,f.id),onDragEnd:$,onContextMenu:Ne=>{Ne.stopPropagation(),h(Ne,i)},onMouseEnter:()=>C(f.professorId),className:`relative transition-all duration-150 ${Te} ${Je} ${f?"cursor-grab active:cursor-grabbing":"cursor-pointer"} ${se} ${we?"ring-2 ring-slate-700 z-20":""} ${Pe?"opacity-40":""} ${V}`,style:{minHeight:`${W}px`},children:s.jsx(kd,{content:ye,isVisible:te,onVisibilityChange:ee,children:Fe})})}const We=ke&&!w?.endsWith("-0")&&!w?.endsWith("-1");let jt=A?"bg-blue-300":K?"bg-slate-200":"bg-white";P&&(jt=ze(P)),We&&(jt="bg-indigo-50");const q=We?"ring-2 ring-indigo-500 z-10":"",ae=ie=>ie?{disciplina:g.disciplinas.find(Y=>Y.id===ie.disciplinaId),professor:g.professores.find(Y=>Y.id===ie.professorId)}:{disciplina:null,professor:null},Ee=ae(c),Me=ae(p);return s.jsxs("div",{onDragOver:je,onDragLeave:me,onDrop:xe,onClick:Ie,onContextMenu:Ae,className:`relative flex flex-col ${jt} ${q} ${se} cursor-pointer ${V}`,style:{minHeight:`${W}px`},children:[s.jsx(hd,{baseId:i,subSlotIndex:0,slot:c,isOutOfPeriod:K,alerts:[...v,...x],onOpenContextMenu:h,onSelectSlot:S,isSelected:w===`${i}-0`,hoveredProfessorId:N,onProfessorHover:C,highlightStatus:H[0]||P,onDragStart:T,onDragEnd:$,disciplina:Ee.disciplina,professor:Ee.professor,scaledCellFontSize:I}),s.jsx("div",{className:"border-b border-dashed border-gray-300"}),s.jsx(hd,{baseId:i,subSlotIndex:1,slot:p,isOutOfPeriod:K,alerts:[...v,...y],onOpenContextMenu:h,onSelectSlot:S,isSelected:w===`${i}-1`,hoveredProfessorId:N,onProfessorHover:C,highlightStatus:H[1]||P,onDragStart:T,onDragEnd:$,disciplina:Me.disciplina,professor:Me.professor,scaledCellFontSize:I})]})},Of=un.memo(Lf),Ss=({label:i,checked:u,onChange:a,disabled:f})=>s.jsxs("label",{className:`flex items-center space-x-2 ${f?"cursor-not-allowed text-gray-400":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:u,onChange:c=>a(c.target.checked),disabled:f,className:"rounded text-indigo-600 focus:ring-indigo-500"}),s.jsx("span",{children:i})]}),gd=({title:i,children:u,onSelectAll:a,onDeselectAll:f})=>s.jsxs("div",{className:"p-2 border rounded-md bg-white",children:[s.jsx("h4",{className:"font-bold mb-2",children:i}),s.jsxs("div",{className:"flex space-x-2 mb-2",children:[s.jsx("button",{onClick:a,className:"text-xs text-indigo-600 hover:underline",children:"Todos"}),s.jsx("button",{onClick:f,className:"text-xs text-indigo-600 hover:underline",children:"Nenhum"})]}),s.jsx("div",{className:"space-y-1 max-h-48 overflow-y-auto pr-2",children:u})]}),Ff=({visibility:i,onVisibilityChange:u,cursos:a,turmas:f})=>{const[c,p]=R.useState(!1),m=(S,w)=>{u({...i,periods:{...i.periods,[S]:w}})},v=(S,w)=>{const N={...i.turmas};f.forEach(C=>{C.cursoId===S&&(N[C.id]=w)}),u({...i,cursos:{...i.cursos,[S]:w},turmas:N})},x=(S,w)=>{u({...i,turmas:{...i.turmas,[S]:w}})},y=S=>{const w={...i};S==="periods"?Object.keys(w.periods).forEach(N=>w.periods[N]=!0):S==="cursos"?(Object.keys(w.cursos).forEach(N=>w.cursos[N]=!0),Object.keys(w.turmas).forEach(N=>w.turmas[N]=!0)):S==="turmas"&&Object.keys(w.turmas).forEach(N=>w.turmas[N]=!0),u(w)},h=S=>{const w={...i};S==="periods"?Object.keys(w.periods).forEach(N=>w.periods[N]=!1):S==="cursos"?(Object.keys(w.cursos).forEach(N=>w.cursos[N]=!1),Object.keys(w.turmas).forEach(N=>w.turmas[N]=!1)):S==="turmas"&&Object.keys(w.turmas).forEach(N=>w.turmas[N]=!1),u(w)};return s.jsxs("div",{className:"bg-gray-100 p-2 mb-4 rounded-md shadow-sm border text-sm",children:[s.jsxs("button",{onClick:()=>p(!c),className:"w-full text-left font-semibold text-gray-700 flex justify-between items-center",children:[s.jsx("span",{children:c?"Ocultar Opes de Visualizao":"Exibir Opes de Visualizao"}),s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-5 w-5 transition-transform ${c?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),c&&s.jsx("div",{className:"mt-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(gd,{title:"Perodos",onSelectAll:()=>y("periods"),onDeselectAll:()=>h("periods"),children:[s.jsx(Ss,{label:"Manh",checked:i.periods.manha,onChange:S=>m("manha",S)}),s.jsx(Ss,{label:"Tarde",checked:i.periods.tarde,onChange:S=>m("tarde",S)}),s.jsx(Ss,{label:"Noite",checked:i.periods.noite,onChange:S=>m("noite",S)})]}),s.jsx(gd,{title:"Cursos",onSelectAll:()=>y("cursos"),onDeselectAll:()=>h("cursos"),children:a.map(S=>s.jsx(Ss,{label:S.nome,checked:i.cursos[S.id]??!0,onChange:w=>v(S.id,w)},S.id))}),s.jsxs("div",{className:"p-2 border rounded-md bg-white",children:[s.jsx("h4",{className:"font-bold mb-2",children:"Turmas"}),s.jsxs("div",{className:"flex space-x-2 mb-2",children:[s.jsx("button",{onClick:()=>y("turmas"),className:"text-xs text-indigo-600 hover:underline",children:"Todas"}),s.jsx("button",{onClick:()=>h("turmas"),className:"text-xs text-indigo-600 hover:underline",children:"Nenhuma"})]}),s.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:a.map(S=>s.jsxs("div",{children:[s.jsx("h5",{className:"font-semibold text-gray-600",children:S.nome}),s.jsx("div",{className:"pl-4 space-y-1",children:f.filter(w=>w.cursoId===S.id).map(w=>s.jsx(Ss,{label:w.nome,checked:i.turmas[w.id]??!0,onChange:N=>x(w.id,N),disabled:!(i.cursos[S.id]??!0)},w.id))})]},S.id))})]})]})})]})},zf=({isOpen:i,onClose:u,x:a,y:f,items:c})=>{const p=R.useRef(null);return R.useEffect(()=>{const m=v=>{p.current&&!p.current.contains(v.target)&&u()};return i&&document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[i,u]),i?s.jsx("div",{ref:p,className:"absolute z-50 bg-white rounded-md shadow-lg border border-gray-200 py-1 w-32",style:{top:f,left:a},children:s.jsx("ul",{children:c.map((m,v)=>s.jsx("li",{children:s.jsx("button",{onClick:()=>{m.disabled||(m.onClick(),u())},disabled:m.disabled,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 disabled:text-gray-400 disabled:bg-white disabled:cursor-not-allowed",children:m.label})},v))})}):null},Rf=({isFocusModeEnabled:i,gridType:u})=>{const{state:a,dispatch:f}=lt(),{ano:c,cursos:p,turmas:m,grade:v,clipboard:x,selectedSlotId:y,disciplinas:h,professores:S,draggedItem:w,atribuicoes:N,alertas:C}=a,[P,H]=R.useState(1),[W,I]=R.useState({isOpen:!1,x:0,y:0,slotId:""}),[g,D]=R.useState(null),z=R.useRef(null),[_,E]=R.useState(!1),[U,O]=R.useState(c.toString()),A=R.useMemo(()=>({dayColWidth:50*P,timeColWidth:80*P,turmaColWidth:150*P,headerHeight:44*P,cellMinHeight:60*P,daySeparatorHeight:8*P,periodSeparatorHeight:8*P,fontSizeHeader:12*P,fontSizeTurmaHeader:11*P,fontSizeTime:12*P,fontSizeCell:12*P,fontSizeYear:18*P,fontSizeYearLabel:12*P}),[P]),B=R.useMemo(()=>m.filter(ae=>ae.isModular===(u==="modular")).sort((ae,Ee)=>{const Me=p.find(Y=>Y.id===ae.cursoId)?.nome||"",ie=p.find(Y=>Y.id===Ee.cursoId)?.nome||"";return Me.localeCompare(ie)!==0?Me.localeCompare(ie):ae.nome.localeCompare(Ee.nome)}),[m,u,p]);R.useEffect(()=>{O(c.toString())},[c]);const te=()=>{const q=parseInt(U,10);!isNaN(q)&&q>2e3&&q<2100?f({type:"UPDATE_ANO",payload:q}):(O(c.toString()),f({type:"SHOW_TOAST",payload:"Ano invlido."})),E(!1)},ee=q=>{q.key==="Enter"?q.currentTarget.blur():q.key==="Escape"&&(O(c.toString()),E(!1))},[de,pe]=R.useState({periods:{manha:!0,tarde:!0,noite:!0},cursos:{},turmas:{}});R.useEffect(()=>{pe(q=>{const ae={};p.forEach(Me=>{ae[Me.id]=q.cursos[Me.id]??!0});const Ee={};return B.forEach(Me=>{Ee[Me.id]=q.turmas[Me.id]??!0}),{...q,cursos:ae,turmas:Ee}})},[p,B]);const K=R.useCallback(q=>{if(q.target===document.body&&y)if(q.ctrlKey){if(q.key==="c")q.preventDefault(),f({type:"COPY_SLOT",payload:{sourceSlotId:y}});else if(q.key==="x")q.preventDefault(),f({type:"CUT_SLOT",payload:{sourceSlotId:y}});else if(q.key==="v"){if(q.preventDefault(),x){const ae=m.find(ie=>ie.id===x.sourceSlot.turmaId),Ee=y.split("_")[0],Me=m.find(ie=>ie.id===Ee);if(ae&&Me&&ae.isModular!==Me.isModular){f({type:"SHOW_TOAST",payload:"No  permitido colar aulas entre a grade regular e a modular."});return}}f({type:"PASTE_SLOT",payload:{destinationId:y}})}}else q.key==="Delete"&&(q.preventDefault(),f({type:"DELETE_SLOT",payload:{slotId:y}}))},[y,f,x,m]);R.useEffect(()=>(window.addEventListener("keydown",K),()=>{window.removeEventListener("keydown",K)}),[K]),R.useEffect(()=>{const q=z.current;if(!q)return;const ae=Ee=>{Ee.ctrlKey&&(Ee.preventDefault(),H(Me=>Math.max(.5,Math.min(2,Me-Ee.deltaY*.001))))};return q.addEventListener("wheel",ae,{passive:!1}),()=>{q.removeEventListener("wheel",ae)}},[]);const se=q=>{if(!w)return;const ae=z.current;if(!ae)return;const Ee=ae.getBoundingClientRect(),Me=q.clientY-Ee.top,ie=60,Y=10;Me<ie?ae.scrollTop-=Y:Me>Ee.height-ie&&(ae.scrollTop+=Y)},V=()=>{I({...W,isOpen:!1})},re=(q,ae)=>{q.preventDefault(),q.stopPropagation(),f({type:"SELECT_SLOT",payload:{slotId:ae}}),I({isOpen:!0,x:q.pageX,y:q.pageY,slotId:ae})},J=()=>{const{slotId:q}=W;if(!q)return[];const ae=v.some(ce=>ce.id===q);return[{label:"Copiar",onClick:()=>f({type:"COPY_SLOT",payload:{sourceSlotId:q}}),disabled:!ae},{label:"Recortar",onClick:()=>f({type:"CUT_SLOT",payload:{sourceSlotId:q}}),disabled:!ae},{label:"Colar",onClick:()=>f({type:"PASTE_SLOT",payload:{destinationId:q}}),disabled:!!!x}]},T=q=>{f({type:"SELECT_SLOT",payload:{slotId:q}})},$=R.useMemo(()=>u==="modular"?zn:Cr,[u]),me=R.useMemo(()=>[...st,...ot,...$],[$]).filter(q=>!!(st.includes(q)&&de.periods.manha||ot.includes(q)&&de.periods.tarde||$.includes(q)&&de.periods.noite)),xe=B.filter(q=>de.turmas[q.id]),Ae=R.useMemo(()=>[...p].sort((q,ae)=>q.nome.localeCompare(ae.nome)),[p]).map(q=>({...q,turmas:B.filter(ae=>ae.cursoId===q.id)})).filter(q=>de.cursos[q.id]),ke=R.useMemo(()=>{const q=new Set;return xe.forEach((ae,Ee)=>{const Me=xe[Ee+1];(!Me||Me.cursoId!==ae.cursoId)&&q.add(ae.id)}),q},[xe]),ze=R.useMemo(()=>{const q=new Map;return v.forEach(ae=>{const Ee=`${ae.turmaId}_${ae.dia}_${ae.horario}`;q.has(Ee)||q.set(Ee,[]),q.get(Ee).push(ae)}),q},[v]),We=R.useMemo(()=>{const q=new Map;return C.forEach(ae=>{ae.gradeSlotIds.forEach(Ee=>{q.has(Ee)||q.set(Ee,[]),q.get(Ee).push(ae)})}),q},[C]),jt=R.useMemo(()=>{let q=null;if(w?.type==="SIDEBAR_ITEM"&&w.disciplinaId&&w.professorId)q={professorId:w.professorId,disciplinaId:w.disciplinaId,slotIdToIgnore:null};else{const we=y||(w?.type==="GRID_ITEM"?w.sourceSlotId:null);if(we){const Pe=v.find(Ne=>Ne.id===we);Pe&&(q={professorId:Pe.professorId,disciplinaId:Pe.disciplinaId,slotIdToIgnore:we})}}if(!q)return{};const{professorId:ae,disciplinaId:Ee,slotIdToIgnore:Me}=q,ie=S.find(we=>we.id===ae);if(!ie)return{};const Y=h.find(we=>we.id===Ee);if(!Y)return{};const ce=new Map;v.forEach(we=>{const Pe=`${we.turmaId}_${we.dia}_${we.horario}`;ce.has(Pe)||ce.set(Pe,[]),ce.get(Pe).push(we)});const Fe=[];if(Y.bnccId){const we=new Set;h.forEach(Pe=>{if(Pe.bnccId===Y.bnccId){const Ne=N.find(ve=>ve.disciplinaId===Pe.id);Ne&&Ne.professores.includes(ae)&&we.add(Pe.turmaId)}}),Fe.push(...xe.filter(Pe=>we.has(Pe.id)))}else{const we=xe.find(Pe=>Pe.id===Y.turmaId);we&&Fe.push(we)}const ye={},Te={},it={};v.forEach(we=>{if(we.professorId!==ae||Me&&we.id===Me)return;ye[we.dia]||(ye[we.dia]=new Set),ye[we.dia].add(we.horario);const Ne=m.find(et=>et.id===we.turmaId)?.isModular?1.25:1;Te[we.dia]=(Te[we.dia]||0)+Ne;const{start:ve,end:qe}=ki(we.horario),Ve=it[we.dia];Ve?(Ve.minStart=Math.min(Ve.minStart,ve),Ve.maxEnd=Math.max(Ve.maxEnd,qe)):it[we.dia]={minStart:ve,maxEnd:qe}});const Je={};return Fe.forEach(we=>{_e.forEach(Pe=>{me.forEach(Ne=>{const ve=`${we.id}_${Pe}_${Ne}`,Ve=(ce.get(ve)||[]).filter(ht=>!Me||ht.id!==Me),et=[];Y.divisao?(Ve.some(ht=>ht.id===`${ve}-0`)||et.push(`${ve}-0`),Ve.some(ht=>ht.id===`${ve}-1`)||et.push(`${ve}-1`)):Ve.length===0&&et.push(ve),et.forEach(ht=>{let Ce=!1,Ct=!1;ie.disponibilidade[Pe]?.includes(Ne)||(Ct=!0),!Ce&&ye[Pe]?.has(Ne)&&(Ce=!0);const Cs=m.find(Ot=>Ot.id===we.id)?.isModular?1.25:1;if(!Ce&&(Te[Pe]||0)+Cs>8&&(Ce=!0),!Ce){const{start:Ot,end:$e}=ki(Ne),tt=_e.indexOf(Pe)-1;if(tt>=0){const Nt=_e[tt],Tt=it[Nt];Tt&&1440-Tt.maxEnd+Ot<660&&(Ce=!0)}if(!Ce){const Nt=_e.indexOf(Pe)+1;if(Nt<_e.length){const Tt=_e[Nt],bt=it[Tt];bt&&1440-$e+bt.minStart<660&&(Ce=!0)}}}Ce||(Je[ht]=Ct?"warning":"valid")})})})}),Je},[y,w,v,h,m,S,xe,me,N]);return s.jsxs("div",{ref:z,className:"flex-1 overflow-auto bg-gray-200 p-4",onClick:()=>{V(),T(null)},onDragOver:se,children:[s.jsx(Ff,{visibility:de,onVisibilityChange:pe,cursos:p,turmas:B}),s.jsx("div",{style:{display:"inline-block"},onMouseLeave:()=>D(null),children:s.jsxs("div",{className:"relative grid",style:{gridTemplateColumns:`${A.dayColWidth}px ${A.timeColWidth}px repeat(${xe.length}, ${A.turmaColWidth}px)`},children:[s.jsx("div",{className:"sticky top-0 left-0 z-40 bg-slate-200 border-b-2 border-r border-slate-300 flex items-center justify-center p-1",style:{gridColumn:"1 / span 2",gridRow:"1 / span 2"},children:_?s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("label",{htmlFor:"year-input",className:"text-xs text-slate-600 mb-1",children:"Ano"}),s.jsx("input",{id:"year-input",type:"number",value:U,onChange:q=>O(q.target.value),onBlur:te,onKeyDown:ee,className:"w-20 text-center bg-white rounded border-2 border-indigo-500 shadow-inner",autoFocus:!0,onFocus:q=>q.target.select()})]}):s.jsxs("div",{onClick:()=>E(!0),className:"p-2 cursor-pointer text-center text-slate-700 hover:bg-slate-300 rounded-md",children:[s.jsx("div",{className:"font-bold",style:{fontSize:`${A.fontSizeYear}px`},children:c}),s.jsx("div",{className:"text-xs font-semibold uppercase tracking-wider",style:{fontSize:`${A.fontSizeYearLabel}px`},children:"Ano"})]})}),Ae.map(q=>{const ae=q.turmas.filter(ie=>de.turmas[ie.id]);if(ae.length===0)return null;const Ee=ae[0],Me=xe.findIndex(ie=>ie.id===Ee.id)+3;return s.jsx("div",{className:"sticky top-0 z-30 bg-slate-200 text-slate-800 flex items-center justify-center font-bold p-2 uppercase tracking-wider border-b-2 border-slate-300",style:{gridColumn:`${Me} / span ${ae.length}`,height:`${A.headerHeight}px`,fontSize:`${A.fontSizeHeader}px`},children:s.jsx("span",{className:"truncate",title:q.nome,children:q.nome})},q.id)}),xe.map((q,ae)=>s.jsx("div",{className:`sticky z-20 bg-slate-100 text-slate-600 flex items-center justify-center font-semibold p-2 border-b border-slate-300 ${ke.has(q.id)?"border-r-2 border-r-slate-400":"border-r border-slate-300"}`,style:{gridColumn:ae+3,top:`${A.headerHeight}px`,height:`${A.headerHeight}px`,fontSize:`${A.fontSizeTurmaHeader}px`},children:q.nome},q.id)),_e.map((q,ae)=>{if(me.length===0)return null;const Ee=ae===_e.length-1,Me=me.filter((ce,Fe)=>{if(Fe===me.length-1)return!1;const ye=st[st.length-1]===ce,Te=ot[ot.length-1]===ce;return ye||Te}),ie=me.length+Me.length,Y=me.flatMap((ce,Fe)=>{const ye=st[st.length-1]===ce,Te=ot[ot.length-1]===ce,it=ye||Te,Je=Fe===me.length-1,ve=[...[s.jsx("div",{className:"sticky z-20 bg-slate-50 p-1 text-center border-r border-slate-300 flex items-center justify-center border-b border-slate-300",style:{left:`${A.dayColWidth}px`,fontSize:`${A.fontSizeTime}px`},children:ce},`${q}_${ce}_time`),...xe.map(qe=>{const Ve=`${qe.id}_${q}_${ce}`,et=ze.get(Ve)||[],ht=et.find(Bt=>!(Bt.id.endsWith("-0")||Bt.id.endsWith("-1"))),Ce=et.find(Bt=>Bt.id.endsWith("-0")),Ct=et.find(Bt=>Bt.id.endsWith("-1"));return s.jsx(Of,{id:Ve,gridType:u,turma:qe,fullSlot:ht,slot0:Ce,slot1:Ct,isLastInCourse:ke.has(qe.id),onOpenContextMenu:re,onSelectSlot:T,selectedSlotId:y||null,hoveredProfessorId:i?g:null,onProfessorHover:i?D:()=>{},highlightStatus:jt[Ve]||null,cellAlerts:We.get(Ve)||[],subCellAlerts0:We.get(`${Ve}-0`)||[],subCellAlerts1:We.get(`${Ve}-1`)||[],subSlotHighlightStatus:{0:jt[`${Ve}-0`]||null,1:jt[`${Ve}-1`]||null},scaledCellMinHeight:A.cellMinHeight,scaledCellFontSize:A.fontSizeCell},Ve)})]];if(it&&!Je){const qe=s.jsx("div",{style:{gridColumn:`2 / span ${1+xe.length}`,height:`${A.periodSeparatorHeight}px`}},`${q}_${ce}_separator`);ve.push(qe)}return ve});return s.jsxs(un.Fragment,{children:[s.jsx("div",{className:"sticky left-0 z-30 bg-slate-200 py-2 text-center font-semibold border-r-2 border-slate-300 flex items-center justify-center capitalize [writing-mode:vertical-rl] rotate-180",style:{gridRow:`span ${ie}`,fontSize:`${A.fontSizeHeader}px`},children:q}),s.jsx("div",{style:{display:"contents"},children:Y}),!Ee&&s.jsxs(un.Fragment,{children:[s.jsx("div",{className:"sticky left-0 z-30 bg-slate-300 border-b-2 border-r-2 border-slate-300",style:{gridColumn:"1",height:`${A.daySeparatorHeight}px`}}),s.jsx("div",{className:"bg-slate-300 border-b-2 border-slate-300",style:{gridColumn:`2 / span ${1+xe.length}`,height:`${A.daySeparatorHeight}px`}})]})]},q)})]})}),s.jsx(zf,{isOpen:W.isOpen,onClose:V,x:W.x,y:W.y,items:J()})]})},$f=({id:i,label:u,subLabel:a,isLocked:f=!1,isBeingDragged:c=!1})=>{const{dispatch:p}=lt(),m=h=>{if(f){h.preventDefault();return}const[S,w]=i.split("|"),N={type:"SIDEBAR_ITEM",disciplinaId:S,professorId:w};h.dataTransfer.setData("application/json",JSON.stringify(N)),h.dataTransfer.effectAllowed="move",p({type:"DRAG_START",payload:N})},v=()=>{p({type:"DRAG_END"})},x="p-2 rounded-md shadow-sm transition-all duration-150";let y="";return c?y="opacity-40 border-dashed border-indigo-400 bg-white":f?y="opacity-50 cursor-not-allowed bg-gray-100 border border-gray-200":y="cursor-grab active:cursor-grabbing hover:bg-indigo-50 bg-white border border-gray-200",s.jsxs("div",{draggable:!f,onDragStart:m,onDragEnd:v,className:`${x} ${y}`,children:[s.jsx("div",{className:"font-semibold text-sm text-gray-800",children:u}),s.jsx("p",{className:"text-xs text-gray-500",children:a})]})},Ed=(i,u)=>{const{disciplinas:a}=u,f=a.find(m=>m.id===i.disciplinaId);if(!f)return{finalDisciplinaId:i.disciplinaId,isSwap:!1};if(!(f.turmaId!==i.turmaId))return{finalDisciplinaId:i.disciplinaId,isSwap:!1};if(!!f.bnccId){const m=a.find(v=>v.turmaId===i.turmaId&&v.bnccId===f.bnccId);if(m)return{finalDisciplinaId:m.id,isSwap:!0}}return{finalDisciplinaId:i.disciplinaId,isSwap:!0}},Hf=({gridType:i})=>{const{state:u,dispatch:a}=lt(),{atribuicoes:f,disciplinas:c,professores:p,turmas:m,draggedItem:v}=u,[x,y]=R.useState("all"),[h,S]=R.useState(""),[w,N]=R.useState(!1),C=E=>{y(E.target.value)},P=E=>m.find(U=>U.id===E)?.nome||"N/A",H=R.useMemo(()=>{const E={};return u.grade.forEach(U=>{const{finalDisciplinaId:O}=Ed(U,u),A=U.professorId,te=u.turmas.find(ee=>ee.id===U.turmaId)?.isModular?1.25:1;E[O]||(E[O]={}),E[O][A]=(E[O][A]||0)+te}),E},[u]),W=R.useMemo(()=>m.filter(E=>E.isModular===(i==="modular")),[m,i]),g=R.useMemo(()=>f.flatMap(E=>{const U=c.find(A=>A.id===E.disciplinaId);if(!U)return[];const O=m.find(A=>A.id===U.turmaId);return!O||O.isModular!==(i==="modular")?[]:E.professores.map((A,B)=>({disciplina:U,professor:p.find(te=>te.id===A),turmaId:U.turmaId,assignmentIndex:B}))}).filter(E=>E.professor),[f,c,m,p,i]).filter(E=>!(x!=="all"&&E.turmaId!==x||h.trim()!==""&&!E.professor?.nome.toLowerCase().includes(h.toLowerCase()))),D=E=>{E.preventDefault(),v?.type==="GRID_ITEM"?(N(!0),E.dataTransfer.dropEffect="move"):E.dataTransfer.dropEffect="none"},z=()=>{N(!1)},_=E=>{E.preventDefault(),N(!1),v?.type==="GRID_ITEM"&&v.sourceSlotId&&a({type:"UPDATE_GRADE",payload:{id:v.sourceSlotId,slot:null}}),a({type:"DRAG_END"})};return s.jsxs("div",{className:`p-4 h-full flex flex-col transition-colors duration-200 ${w?"bg-blue-200 border-2 border-dashed border-blue-500":"bg-gray-50"}`,onDragOver:D,onDragLeave:z,onDrop:_,children:[s.jsx("h2",{className:"text-lg font-bold mb-4",children:"Atribuies"}),s.jsxs("div",{className:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"search-professor",className:"block text-sm font-medium text-gray-700",children:"Buscar Professor"}),s.jsx("input",{type:"text",id:"search-professor",value:h,onChange:E=>S(E.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"turma-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Turma"}),s.jsxs("select",{id:"turma-filter",value:x,onChange:C,className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"all",children:"Ver Todas"}),W.map(E=>s.jsx("option",{value:E.id,children:E.nome},E.id))]})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:g.map(E=>{const{disciplina:U,professor:O,assignmentIndex:A}=E;if(!U||!O)return null;const B=H[U.id]&&H[U.id][O.id]||0,te=U.aulasSemanais,ee=B>=te,de=`${U.id}|${O.id}`,pe=`${U.id}|${O.id}|${A}`,K=v?.type==="SIDEBAR_ITEM"&&v.disciplinaId===U.id&&v.professorId===O.id,se=s.jsxs("span",{children:[U.nome,U.bnccId&&s.jsx("span",{className:"text-xs bg-pink-100 text-pink-800 font-semibold ml-2 px-2 py-0.5 rounded-full align-middle",children:"BNCC"}),U.divisao&&s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 font-semibold ml-2 px-2 py-0.5 rounded-full align-middle",children:["Diviso (",U.numProfessores,")"]}),` (${B}/${te}) - ${O.nome}`]}),V=`Turma: ${P(U.turmaId)}`;return s.jsx($f,{id:de,label:se,subLabel:V,isLocked:ee,isBeingDragged:K},pe)})})]})},Bf=i=>{let u=0;for(let w=0;w<i.length;w++)u=i.charCodeAt(w)+((u<<5)-u);const a=u%360,f=70,c=50,p=(1-Math.abs(2*(c/100)-1))*(f/100),m=p*(1-Math.abs(a/60%2-1)),v=c/100-p/2;let x=0,y=0,h=0;0<=a&&a<60?(x=p,y=m,h=0):60<=a&&a<120?(x=m,y=p,h=0):120<=a&&a<180?(x=0,y=p,h=m):180<=a&&a<240?(x=0,y=m,h=p):240<=a&&a<300?(x=m,y=0,h=p):300<=a&&a<360&&(x=p,y=0,h=m),x=Math.round((x+v)*255),y=Math.round((y+v)*255),h=Math.round((h+v)*255);const S=w=>("0"+w.toString(16)).slice(-2);return`#${S(x)}${S(y)}${S(h)}`},Uf=()=>{const{state:i}=lt(),{onlineUsers:u}=i;if(u.length===0)return null;const a=ar.currentUser,f=[...u].sort((c,p)=>c.id===a?.uid?1:p.id===a?.uid?-1:c.name.localeCompare(p.name));return s.jsx("div",{className:"flex items-center -space-x-2 pr-2",children:f.map(c=>s.jsxs("div",{className:"group relative",children:[s.jsx("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-white font-bold text-sm ring-2 ring-white",style:{backgroundColor:Bf(c.id)},children:c.id===a?.uid?"VC":c.name.charAt(0).toUpperCase()}),s.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-max bg-gray-800 text-white text-xs rounded py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap",children:[c.id===a?.uid?`${c.name} (Voc)`:c.name,s.jsx("svg",{className:"absolute text-gray-800 h-2 w-full left-0 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:s.jsx("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})]},c.id))})},Wf=({status:i,lastModifiedBy:u,lastModifiedAt:a})=>{const c=(()=>{switch(i){case"saving":return{icon:s.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),text:"Salvando...",textColor:"text-gray-500"};case"saved":return{icon:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4"})]}),text:"Salvo",textColor:"text-green-600"};case"error":return{icon:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 13V9.5m0 6.5v.01"})]}),text:"Erro ao salvar",textColor:"text-red-600"};default:return null}})();if(!c)return null;const p=i==="saved"&&u&&a?`(por ${u} s ${new Date(a).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"})})`:null;return s.jsxs("div",{className:"flex items-center space-x-2",children:[c.icon,s.jsx("span",{className:`text-sm font-medium ${c.textColor}`,children:c.text}),p&&s.jsx("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:p})]})},nt={title:{font:{name:"Calibri",size:18,bold:!0,color:{argb:"FFFFFFFF"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}},alignment:{horizontal:"center",vertical:"middle"}},curso:{font:{name:"Calibri",size:12,bold:!0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFAEC6CF"}},alignment:{horizontal:"center",vertical:"middle"},border:{top:{style:"medium"},bottom:{style:"medium"},left:{style:"medium"},right:{style:"medium"}}},turma:{font:{name:"Calibri",size:11,bold:!0},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FF8EA9DB"}},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{bottom:{style:"medium",color:{argb:"FF2F5496"}}}},day:{font:{name:"Calibri",size:12,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle",textRotation:90},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},periodo:{font:{name:"Calibri",size:11,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle",textRotation:90},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},time:{font:{name:"Calibri",size:10,bold:!0,color:{argb:"FF404040"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFE7E6E6"}},alignment:{horizontal:"center",vertical:"middle"},border:{right:{style:"medium",color:{argb:"FF2F5496"}}}},cell_white:{font:{name:"Calibri",size:9},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFFFFFFF"}}},cell_gray:{font:{name:"Calibri",size:9},alignment:{horizontal:"center",vertical:"middle",wrapText:!0},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}},fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFF2F2F2"}}},disabledCell:{fill:{type:"pattern",pattern:"solid",fgColor:{argb:"FFD9D9D9"}},border:{top:{style:"thin"},bottom:{style:"thin"},left:{style:"thin"},right:{style:"thin"}}}},xd=(i,u,a,f)=>{const{ano:c,cursos:p,turmas:m,grade:v,disciplinas:x,professores:y}=u,h=m.filter(_=>_.isModular===(a==="modular")).sort((_,E)=>{const U=p.find(A=>A.id===_.cursoId)?.nome||"",O=p.find(A=>A.id===E.cursoId)?.nome||"";return U.localeCompare(O)!==0?U.localeCompare(O):_.nome.localeCompare(E.nome)});if(h.length===0)return;const S=p.map(_=>({..._,turmas:h.filter(E=>E.cursoId===_.id)})).filter(_=>_.turmas.length>0),w=new Map;v.forEach(_=>{const E=`${_.turmaId}_${_.dia}_${_.horario}`;w.has(E)||w.set(E,[]),w.get(E).push(_)});const N=i.addWorksheet(f),C=N.addRow([`Grade de Horrios ${c}`]);C.height=24,N.mergeCells(1,1,1,3+h.length),N.getCell("A1").style=nt.title;const P=[null,null,null];S.forEach(_=>{P.push(_.nome);for(let E=1;E<_.turmas.length;E++)P.push(null)});const H=N.addRow(P);H.height=20;let W=4;S.forEach(_=>{if(_.turmas.length>0){_.turmas.length>1&&N.mergeCells(2,W,2,W+_.turmas.length-1);for(let E=0;E<_.turmas.length;E++)N.getCell(2,W+E).style=nt.curso;W+=_.turmas.length}});const I=N.addRow(["Dia","Perodo","Horrio",...h.map(_=>_.nome)]);I.height=35,I.getCell(1).style={...nt.day,alignment:{...nt.day.alignment,textRotation:0}},I.getCell(2).style={...nt.periodo,alignment:{...nt.periodo.alignment,textRotation:0}},I.getCell(3).style=nt.time;for(let _=4;_<=I.cellCount;_++)I.getCell(_).style=nt.turma;const D=[{name:"Manh",horarios:st},{name:"Tarde",horarios:ot},{name:"Noite",horarios:a==="modular"?zn:Cr}];let z=!1;_e.forEach((_,E)=>{const U=N.rowCount+1;if(D.forEach((O,A)=>{if(O.horarios.length===0)return;const B=N.rowCount+1;if(O.horarios.forEach(ee=>{const de=h.map(K=>{if(a==="modular"&&ee==="18:10-19:00")return null;const se=`${K.id}_${_}_${ee}`,V=w.get(se);return V?V.map(re=>{const J=x.find($=>$.id===re.disciplinaId),T=y.find($=>$.id===re.professorId);return`${J?.nome||"?"}
${T?.nome||"?"}`}).join(`

`):""}),pe=N.addRow([null,null,ee,...de]);pe.height=50,pe.getCell(3).style=nt.time;for(let K=4;K<=pe.cellCount;K++)pe.getCell(K).style=pe.getCell(K).value===null?nt.disabledCell:z?nt.cell_gray:nt.cell_white;z=!z}),O.horarios.length>0){const ee=N.getCell(B,2);ee.value=O.name,ee.style=nt.periodo,O.horarios.length>1&&N.mergeCells(B,2,N.rowCount,2)}if(D.slice(A+1).some(ee=>ee.horarios.length>0)){const ee=N.addRow([]);ee.height=3;for(let de=3;de<=3+h.length;de++){const pe=ee.getCell(de);pe.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}}}}),N.rowCount>=U){const O=N.getCell(U,1);O.value=_.charAt(0).toUpperCase()+_.slice(1),O.style=nt.day,N.rowCount>U&&N.mergeCells(U,1,N.rowCount,1)}if(E<_e.length-1){const O=N.addRow([]);O.height=5;for(let A=1;A<=3+h.length;A++)O.getCell(A).fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF2F5496"}}}}),N.columns=[{width:8},{width:10},{width:15},...Array(h.length).fill({width:25})],N.views=[{state:"frozen",xSplit:3,ySplit:3}]},Vf=i=>{const u=new Oo.Workbook;return u.creator="Timetable Scheduler",u.created=new Date,xd(u,i,"regular","Grade Regular"),xd(u,i,"modular","Grade Modular"),u.worksheets.length===0?{workbook:null,error:"No h dados para exportar."}:{workbook:u}},Gf=(i,u)=>{const{professores:a,grade:f,turmas:c,disciplinas:p}=i,m=a.find(I=>I.id===u);if(!m)return{workbook:null,error:"Professor no encontrado."};const v=new Oo.Workbook;v.creator="Timetable Scheduler",v.created=new Date;const x=v.addWorksheet(m.nome.substring(0,31)),y=f.filter(I=>I.professorId===u),h=y.reduce((I,g)=>{const D=c.find(z=>z.id===g.turmaId);return I+(D?.isModular?1.25:1)},0),S={};y.forEach(I=>{S[I.dia]||(S[I.dia]={}),S[I.dia][I.horario]={turma:c.find(g=>g.id===I.turmaId)?.nome||"?",disciplina:p.find(g=>g.id===I.disciplinaId)?.nome||"?"}}),x.mergeCells("A1:F1");const w=x.getCell("A1");w.value=m.nome,w.style=nt.title,x.mergeCells("A2:F2");const N=x.getCell("A2");N.value=`Total de Aulas Semanais: ${h}`,N.style={font:{bold:!0},alignment:{horizontal:"center"}},x.addRow(["Horrio",..._e.map(I=>I.charAt(0).toUpperCase()+I.slice(1))]).eachCell(I=>{I.style=nt.turma,I.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}});const P=[...new Set([...st,...ot,...Cr,...zn])].sort();P.forEach((I,g)=>{const D=[I];_e.forEach(O=>{const A=S[O]?.[I];D.push(A?`${A.disciplina}
${A.turma}`:"")});const z=x.addRow(D);z.getCell(1).style=nt.time;for(let O=2;O<=6;O++)z.getCell(O).style=nt.cell_white;z.height=30;const _=st[st.length-1]===I,E=ot[ot.length-1]===I,U=g===P.length-1;if((_||E)&&!U){const O=x.addRow([]);O.height=3;for(let A=1;A<=1+_e.length;A++){const B=O.getCell(A);B.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFC5D4EA"}}}}});const H=_e.map(I=>y.filter(g=>g.dia===I).reduce((g,D)=>g+(c.find(z=>z.id===D.turmaId)?.isModular?1.25:1),0));return x.addRow(["Carga Diria",...H]).eachCell(I=>{I.style={...nt.turma,font:{...nt.turma.font,bold:!0}}}),x.columns=[{width:15},{width:25},{width:25},{width:25},{width:25},{width:25}],{workbook:v}},yd=(i,u,a,f)=>{const c=u.filter(O=>O.professorId===i.id),p=c.reduce((O,A)=>{const B=a.find(te=>te.id===A.turmaId);return O+(B?.isModular?1.25:1)},0),m=_e.reduce((O,A)=>(O[A]=c.filter(B=>B.dia===A).reduce((B,te)=>{const ee=a.find(de=>de.id===te.turmaId);return B+(ee?.isModular?1.25:1)},0),O),{}),v={};c.forEach(O=>{v[O.dia]||(v[O.dia]={});const A=a.find(te=>te.id===O.turmaId)?.nome||"N/A",B=f.find(te=>te.id===O.disciplinaId)?.nome||"N/A";v[O.dia][O.horario]={turma:A,disciplina:B}});const x=[...new Set([...Cr,...zn])].sort(),y=[{label:"Manh",horarios:st},{label:"Tarde",horarios:ot},{label:"Noite",horarios:x}],h=new jd({orientation:"landscape",unit:"pt",format:"a4"}),S=h.internal.pageSize.getWidth(),w=h.internal.pageSize.getHeight(),N=30;let C={titleFontSize:16,subtitleFontSize:10,headerFontSize:9,periodFontSize:8,cellFontSize:8,footerFontSize:9,titleSpacing:18,subtitleSpacing:25,headerRowH:20,regularRowH:32,periodSeparatorH:5,periodHeaderH:15,footerSpacing:5},P=N;P+=C.titleSpacing,P+=C.subtitleSpacing,P+=C.headerRowH,y.forEach(O=>{O.horarios.length>0&&(P+=C.periodSeparatorH,P+=C.periodHeaderH,P+=O.horarios.length*C.regularRowH)}),P+=C.footerSpacing,P+=C.headerRowH,P+=N;const H=w;let W=1;P>H&&(W=H/P);const I=N*Math.min(W,1),g=S-I*2;for(const O in C)C[O]*=W;let D=I;h.setFont("helvetica","bold"),h.setFontSize(C.titleFontSize),h.text(i.nome,S/2,D,{align:"center"}),D+=C.titleSpacing,h.setFont("helvetica","normal"),h.setFontSize(C.subtitleFontSize),h.text(`Total de Aulas Semanais: ${p}`,S/2,D,{align:"center"}),D+=C.subtitleSpacing;const z=65*Math.min(W,1),_=(g-z)/_e.length;h.setFillColor(230,230,230),h.rect(I,D,g,C.headerRowH,"F"),h.setFont("helvetica","bold"),h.setFontSize(C.headerFontSize),h.setDrawColor(180,180,180),h.rect(I,D,g,C.headerRowH);const E=D+C.headerRowH/2+C.headerFontSize*.35;h.text("Horrio",I+z/2,E,{align:"center"}),_e.forEach((O,A)=>{const B=I+z+A*_+_/2;h.text(O.charAt(0).toUpperCase()+O.slice(1),B,E,{align:"center"});const te=I+z+A*_;h.line(te,D,te,D+C.headerRowH)}),D+=C.headerRowH,y.forEach(O=>{O.horarios.length>0&&(D+=C.periodSeparatorH,h.setFillColor(240,240,240),h.rect(I,D,g,C.periodHeaderH,"F"),h.setFont("helvetica","bold"),h.setFontSize(C.periodFontSize),h.text(O.label,I+5,D+C.periodHeaderH/2,{baseline:"middle"}),D+=C.periodHeaderH,O.horarios.forEach(A=>{const B=D;h.setDrawColor(220,220,220),h.rect(I,B,g,C.regularRowH),h.setFont("helvetica","normal"),h.setFontSize(C.cellFontSize),h.text(A,I+z/2,B+C.regularRowH/2,{align:"center",baseline:"middle"}),h.line(I+z,B,I+z,B+C.regularRowH),_e.forEach((te,ee)=>{const de=v[te]?.[A],pe=I+z+ee*_;if(de){h.setFillColor(232,242,255),h.rect(pe,B,_,C.regularRowH,"F");const K=B+C.regularRowH/2-C.cellFontSize*.2,se=K+C.cellFontSize*1.1,V=_-6;let re=de.disciplina;if(h.setFont("helvetica","bold"),h.setFontSize(C.cellFontSize),h.getTextWidth(re)>V){for(;re.length>0&&h.getTextWidth(re+"...")>V;)re=re.slice(0,-1);re+="..."}h.text(re,pe+_/2,K,{align:"center"});let J=de.turma;if(h.setFont("helvetica","normal"),h.getTextWidth(J)>V){for(;J.length>0&&h.getTextWidth(J+"...")>V;)J=J.slice(0,-1);J+="..."}h.text(J,pe+_/2,se,{align:"center"})}h.line(pe,B,pe,B+C.regularRowH)}),D+=C.regularRowH}))}),D+=C.footerSpacing,h.setFillColor(230,230,230),h.rect(I,D,g,C.headerRowH,"F"),h.setFont("helvetica","bold"),h.setFontSize(C.footerFontSize),h.setDrawColor(180,180,180),h.rect(I,D,g,C.headerRowH);const U=D+C.headerRowH/2+C.footerFontSize*.35;return h.text("Carga Diria",I+z/2,U,{align:"center"}),_e.forEach((O,A)=>{const B=I+z+A*_+_/2;h.text(String(m[O]||0),B,U,{align:"center"});const te=I+z+A*_;h.line(te,D,te,D+C.headerRowH)}),{doc:h}},qf=i=>{const u=new Map,a=new Map,f=new Map,c=[...i].sort((m,v)=>m.nome.localeCompare(v.nome));for(const m of c){const v=new Set(["de","da","do","dos","das"]),x=m.nome.trim().split(" ").filter(h=>!v.has(h.toLowerCase()));let y="??";if(x.length>0){const h=x[0].charAt(0).toUpperCase(),S=x.length>1?x[x.length-1].charAt(0).toUpperCase():"";y=`${h}${S}`}a.set(y,(a.get(y)||0)+1),f.set(m.nome,y)}const p=new Map;for(const m of c){const v=f.get(m.nome),x=a.get(v);let y=v;if(x>1){const S=(p.get(v)||0)+1;S>1&&(y=`${v}${S}`),p.set(v,S)}u.set(m.id,y)}return u},Xf=i=>{const u=new Map,a=new Set;for(const f of i){if(a.has(f.nome))continue;const p=f.nome.trim().split(" ").filter(v=>v.length>0);let m="???";p.length>1?m=p.map(v=>v.charAt(0)).join("").toUpperCase():p.length===1&&p[0].length>0&&(m=p[0].substring(0,3).toUpperCase()),m.length>5&&(m=m.substring(0,5)),u.set(f.nome,m),a.add(f.nome)}return u},vd=(i,u,a,f)=>{const m=a.w-12,v=a.h-a.h*.1;if(m<=0||v<4)return;let x=Math.min(f,v),y=u;for(;x>4&&(i.setFontSize(x),!(i.getTextWidth(y)<m));)x-=.25;if(i.setFontSize(4),i.getTextWidth(u)>m){let S=u;for(;S.length>0&&i.getTextWidth(S+"...")>m;)S=S.slice(0,-1);y=S+"..."}const h=Math.max(x,4);i.setFontSize(h),i.setFont("helvetica","bold"),i.text(y,a.x+a.w/2,a.y+a.h/2,{align:"center",baseline:"middle",maxWidth:m})},Qf=(i,u,a,f,c,p,m,v,x,y,h)=>{const S=i.internal.pageSize.getWidth(),w=i.internal.pageSize.getHeight()-m;i.setFontSize(v*.6),i.setFont("helvetica","bold"),i.setTextColor(0,0,0);const N=a>1?`(Pgina ${u+1} de ${a})`:"";if(i.text(`Grade de Horrios ${p} - ${c} ${N}`,S/2,m,{align:"center"}),i.setFontSize(v*.4),i.setFont("helvetica","italic"),i.setTextColor(100,100,100),f.length>0){const C=f[0].nome,P=f[f.length-1].nome,H=`Exibindo turmas: ${C} a ${P}`;i.text(H,S/2,m+v*.5,{align:"center"})}if(i.setFontSize(x*.4),i.setFont("helvetica","normal"),i.setTextColor(150,150,150),i.text(`Gerado em: ${new Date().toLocaleString("pt-BR")}`,m,w+x*.6),a>1&&i.text("Instrues: Para montar, imprima todas as pginas e alinhe as guias pontilhadas laterais.",S/2,w+x*.6,{align:"center"}),a>1){if(i.setLineDashPattern([2,2],0),i.setDrawColor(180,180,180),i.setLineWidth(.5),u<a-1){const C=S-m;i.line(C,y,C,h),i.setFontSize(x*.45),i.setTextColor(150,150,150),i.text(`Continua na Pg. ${u+2} ->`,C-5,y+10,{align:"right",angle:90})}if(u>0){const C=m;i.line(C,y,C,h),i.setFontSize(x*.45),i.setTextColor(150,150,150),i.text(`<- Vem da Pg. ${u}`,C+5,h-10,{align:"left",angle:90})}i.setLineDashPattern([],0),i.setTextColor(0,0,0)}},Yf=(i,u)=>{const{ano:a,cursos:f,turmas:c,grade:p,disciplinas:m,professores:v}=i,x=c.filter(Y=>Y.isModular===(u==="modular")).sort((Y,ce)=>{const Fe=f.find(Te=>Te.id===Y.cursoId)?.nome||"",ye=f.find(Te=>Te.id===ce.cursoId)?.nome||"";return Fe.localeCompare(ye)!==0?Fe.localeCompare(ye):Y.nome.localeCompare(ce.nome)});if(x.length===0)return{doc:null,error:`Nenhuma turma para a grade ${u==="regular"?"Regular":"Modular"}.`};const y=new Set,h=new Set,S=new Set(x.map(Y=>Y.id));p.forEach(Y=>{S.has(Y.turmaId)&&(y.add(Y.professorId),h.add(Y.disciplinaId))});const w=i.professores.filter(Y=>y.has(Y.id)),N=i.disciplinas.filter(Y=>h.has(Y.id)),C=qf(w),P=Xf(N),H=x.filter(Y=>Y.periodo!=="noite"),W=x.filter(Y=>Y.periodo==="noite"),I=new Map;p.forEach(Y=>{const ce=`${Y.turmaId}_${Y.dia}_${Y.horario}`;I.has(ce)||I.set(ce,[]),I.get(ce).push(Y)});const g=new jd({orientation:"landscape",unit:"pt",format:"a3"}),D=g.internal.pageSize.getWidth(),z=g.internal.pageSize.getHeight(),_=30,E={title:14,header:11,cell:9,dividedCell:8},U={titleHeader:25,titleSubheader:15,footer:20,curso:18,turma:45,cell:35,periodSeparator:3,daySeparator:5},O={day:40,period:40,time:60,turma:90},A=O.day+O.period+O.time,B=D-_*2-A,te=Math.max(1,Math.floor(B/O.turma)),ee=[];for(let Y=0;Y<H.length;Y+=te)ee.push(H.slice(Y,Y+te));const de=[];for(let Y=0;Y<W.length;Y+=te)de.push(W.slice(Y,Y+te));const pe=ee.length+de.length;if(pe===0)return{doc:null,error:`Nenhuma aula encontrada para a grade ${u==="regular"?"Regular":"Modular"}.`};const K=pe+1;let se=0;const V=(Y,ce,Fe)=>{Y.length!==0&&Y.forEach(ye=>{se>0&&g.addPage();let Te=0;_e.forEach(($e,tt)=>{ce.forEach((Nt,Tt)=>{Nt.horarios.length!==0&&(Te+=Nt.horarios.length*U.cell,ce.slice(Tt+1).some(bt=>bt.horarios.length>0)&&(Te+=U.periodSeparator))}),tt<_e.length-1&&(Te+=U.daySeparator)});const Je=U.curso+U.turma+Te,we=U.titleHeader+U.titleSubheader+U.footer+20,Pe=z-_*2-we;let Ne=Math.min(1,Pe/Je);Ne<1&&(Ne=Ne*.95);const ve={...U};for(const $e in ve)ve[$e]*=Ne;const qe={...E};for(const $e in qe)qe[$e]*=Ne;const Ve=`${u==="regular"?"Grade Regular":"Grade Modular"} - ${Fe}`,et=_+ve.titleHeader+ve.titleSubheader,ht=et+Je*Ne;Qf(g,se,K,ye,Ve,a,_,ve.titleHeader,ve.footer,et,ht);let Ce=et;g.setFont("helvetica","bold"),g.setDrawColor(150);let Ct=_+A;const Bt=new Set(ye.map($e=>$e.id));f.map($e=>({...$e,turmas:c.filter(tt=>tt.cursoId===$e.id&&Bt.has(tt.id))})).filter($e=>$e.turmas.length>0).forEach($e=>{const tt=$e.turmas.length*O.turma;g.setFillColor(220,220,220),g.rect(Ct,Ce,tt,ve.curso,"FD"),g.setFontSize(qe.header*1.2),g.setFont("helvetica","bold"),g.text($e.nome,Ct+tt/2,Ce+ve.curso/2,{align:"center",baseline:"middle",maxWidth:tt-4}),Ct+=tt}),Ct=_+A,ye.forEach($e=>{g.setFillColor(235,235,235),g.setTextColor(0,0,0),g.rect(Ct,Ce+ve.curso,O.turma,ve.turma,"FD"),g.setFontSize(qe.header*1.1),g.setFont("helvetica","bold");const tt=g.splitTextToSize($e.nome,O.turma-4);g.text(tt,Ct+O.turma/2,Ce+ve.curso+ve.turma/2,{align:"center",baseline:"middle"}),Ct+=O.turma});const Ot=ve.curso+ve.turma;g.setFillColor(220,220,220),g.rect(_,Ce,A,Ot,"FD"),g.setFontSize(qe.header*1.15),g.setFont("helvetica","bold"),g.text("Dia",_+O.day/2,Ce+Ot/2,{align:"center",baseline:"middle"}),g.text("Perodo",_+O.day+O.period/2,Ce+Ot/2,{align:"center",baseline:"middle"}),g.text("Horrio",_+O.day+O.period+O.time/2,Ce+Ot/2,{align:"center",baseline:"middle"}),Ce+=Ot,_e.forEach(($e,tt)=>{const Nt=Ce;ce.forEach((bt,Nr)=>{if(bt.horarios.length===0)return;const cn=Ce;bt.horarios.forEach(br=>{g.setFontSize(qe.header),g.setFont("helvetica","bold"),g.setFillColor(245,245,245),g.setDrawColor(200),g.rect(_+O.day+O.period,Ce,O.time,ve.cell,"FD"),g.text(br,_+O.day+O.period+O.time/2,Ce+ve.cell/2,{align:"center",baseline:"middle"});let Ut=_+A;ye.forEach(Ns=>{const Rn=u==="modular"&&br==="18:10-19:00";if(g.setDrawColor(200),Rn){g.setFillColor(220,220,220),g.rect(Ut,Ce,O.turma,ve.cell,"FD");const dt=4*Ne;g.line(Ut+dt,Ce+dt,Ut+O.turma-dt,Ce+ve.cell-dt),g.line(Ut+O.turma-dt,Ce+dt,Ut+dt,Ce+ve.cell-dt)}else{const dt=I.get(`${Ns.id}_${$e}_${br}`);if(g.setFillColor(255,255,255),g.rect(Ut,Ce,O.turma,ve.cell,"FD"),dt&&dt.length>0){const kr=m.find(ct=>ct.id===dt[0].disciplinaId),pn=kr&&P.get(kr.nome)||"???";if(dt.length===1){const ct=C.get(dt[0].professorId)||"??";vd(g,`${pn} - ${ct}`,{x:Ut,y:Ce,w:O.turma,h:ve.cell},qe.cell)}else{const ct=dt.sort((Wt,Vt)=>Wt.id.localeCompare(Vt.id)),qr=O.turma/ct.length;let Jt=qe.dividedCell;ct.length===2?Jt*=.7:ct.length===3?Jt*=.55:ct.length>=4&&(Jt*=.45),console.log(`Divises: ${ct.length}, Largura sub-clula: ${qr.toFixed(2)}, Fonte inicial: ${Jt.toFixed(2)}`);const mn=ct.length>2?(Wt,Vt)=>`${Wt}${Vt}`:(Wt,Vt)=>`${Wt} - ${Vt}`;ct.forEach((Wt,Vt)=>{const zo=C.get(Wt.professorId)||"??",Ro=mn(pn,zo),$n=Ut+Vt*qr,mr={x:$n,y:Ce,w:qr,h:ve.cell};vd(g,Ro,mr,Jt),Vt<ct.length-1&&(g.setDrawColor(200),g.setLineWidth(.5),g.line($n+qr,Ce,$n+qr,Ce+ve.cell))})}}}Ut+=O.turma}),Ce+=ve.cell});const fn=Ce-cn;fn>0&&(g.setFillColor(240,240,240),g.setDrawColor(150),g.rect(_+O.day,cn,O.period,fn,"FD"),g.text(bt.name,_+O.day+O.period/2,cn+fn/2,{align:"center",baseline:"middle",angle:90})),ce.slice(Nr+1).some(br=>br.horarios.length>0)&&(g.setFillColor(200,200,200),g.rect(_,Ce,D-_*2,ve.periodSeparator,"F"),Ce+=ve.periodSeparator)});const Tt=Ce-Nt;Tt>0&&(g.setFillColor(230,230,230),g.setDrawColor(150),g.rect(_,Nt,O.day,Tt,"FD"),g.text($e.charAt(0).toUpperCase()+$e.slice(1),_+O.day/2,Nt+Tt/2,{align:"center",baseline:"middle",angle:90})),tt<_e.length-1&&(g.setFillColor(150,150,150),g.rect(_,Ce,D-_*2,ve.daySeparator,"F"),Ce+=ve.daySeparator)}),se++})},re=[{name:"Manh",horarios:st},{name:"Tarde",horarios:ot}],T=[{name:"Noite",horarios:u==="modular"?zn:Cr}];V(ee,re,"Diurno"),V(de,T,"Noturno"),g.addPage("a3","landscape");let $=_;g.setFontSize(16),g.setFont("helvetica","bold"),g.text("Legenda de Siglas",D/2,$,{align:"center"}),$+=30;const je=_,me=D/3+_,xe=D/3*2+_,Ie=D/3-_-10,Ae=8,ke=Ae*1.3;g.setFontSize(12),g.setFont("helvetica","bold"),g.text("Disciplinas",je,$),g.text("Professores",me,$),$+=20;const ze=[...P.entries()].sort((Y,ce)=>Y[0].localeCompare(ce[0])),We=[...w].sort((Y,ce)=>Y.nome.localeCompare(ce.nome));let jt=$,q=$,ae=$;const Ee=Math.ceil(We.length/2),Me=We.slice(0,Ee),ie=We.slice(Ee);g.setFontSize(Ae),g.setFont("helvetica","normal");for(const[Y,ce]of ze){const Fe=`${ce}: ${Y}`,ye=g.splitTextToSize(Fe,Ie);g.text(ye,je,jt),jt+=ye.length*ke}for(const Y of Me){const ce=C.get(Y.id)||"??";g.text(`${ce}: ${Y.nome}`,me,q,{maxWidth:Ie}),q+=ke}for(const Y of ie){const ce=C.get(Y.id)||"??";g.text(`${ce}: ${Y.nome}`,xe,ae,{maxWidth:Ie}),ae+=ke}return{doc:g}},Kf=({currentView:i,setCurrentView:u,activeGrid:a,isFocusModeEnabled:f,onFocusModeChange:c,onOpenClearDataModal:p,onOpenLoadExampleModal:m})=>{const{state:v,dispatch:x}=lt(),y=()=>{const{draggedItem:W,clipboard:I,selectedSlotId:g,onlineUsers:D,toastMessage:z,saveStatus:_,...E}=v,U=JSON.stringify(E,null,2),O="data:application/json;charset=utf-8,"+encodeURIComponent(U),A="grade_horarios.json",B=document.createElement("a");B.setAttribute("href",O),B.setAttribute("download",A),B.click()},h=()=>{const{grade:W,turmas:I,disciplinas:g,professores:D}=v,z="Turma,Dia,Horario,Disciplina,Professor",_=W.map(B=>{const te=I.find(pe=>pe.id===B.turmaId)?.nome||B.turmaId,ee=g.find(pe=>pe.id===B.disciplinaId)?.nome||B.disciplinaId,de=D.find(pe=>pe.id===B.professorId)?.nome||B.professorId;return[te,B.dia,B.horario,`"${ee}"`,`"${de}"`].join(",")}),E=[z,..._].join(`
`),U=new Blob([`\uFEFF${E}`],{type:"text/csv;charset=utf-8;"}),O=URL.createObjectURL(U),A=document.createElement("a");A.setAttribute("href",O),A.setAttribute("download","grade_horarios.csv"),A.click(),URL.revokeObjectURL(O)},S=()=>{x({type:"SHOW_TOAST",payload:"Gerando arquivo XLSX..."}),setTimeout(()=>{try{const{workbook:W,error:I}=Vf(v);if(I){x({type:"SHOW_TOAST",payload:I});return}W&&W.xlsx.writeBuffer().then(g=>{const D=new Blob([g],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),z=URL.createObjectURL(D),_=document.createElement("a");_.setAttribute("href",z),_.setAttribute("download","grade_horarios.xlsx"),document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(z),x({type:"SHOW_TOAST",payload:"Exportao para XLSX concluda!"})}).catch(g=>{console.error("Error writing XLSX buffer:",g),x({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})})}catch(W){console.error("Error generating XLSX file:",W),x({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})}},50)},w=()=>{i==="grid"&&(x({type:"SHOW_TOAST",payload:"Gerando arquivo PDF..."}),setTimeout(()=>{try{const{doc:W,error:I}=Yf(v,a);if(I||!W){x({type:"SHOW_TOAST",payload:I||"Erro ao gerar PDF."});return}const g=`grade_${a}.pdf`;W.save(g),x({type:"SHOW_TOAST",payload:"Exportao para PDF concluda!"})}catch(W){console.error("Error generating PDF:",W),x({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo PDF."})}},50))},N=W=>{const I=new FileReader;W.target.files&&W.target.files[0]&&(I.readAsText(W.target.files[0],"UTF-8"),I.onload=g=>{if(g.target&&typeof g.target.result=="string")try{const D=JSON.parse(g.target.result);D.version&&D.cursos?(x({type:"SET_STATE",payload:D}),x({type:"SHOW_TOAST",payload:"Arquivo importado com sucesso!"})):x({type:"SHOW_TOAST",payload:"Arquivo JSON invlido."})}catch{x({type:"SHOW_TOAST",payload:"Erro ao processar o arquivo JSON."})}},W.target.value="")},C="px-4 py-2 text-sm font-medium rounded-md focus:outline-none focus:ring-2 focus:ring-inset focus:ring-indigo-500",P="bg-indigo-600 text-white",H="bg-gray-200 text-gray-700 hover:bg-gray-300";return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"flex items-center justify-between p-2 bg-white",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h1",{className:"text-xl font-bold text-gray-700",children:"Timetable Scheduler"}),s.jsxs("div",{className:"flex items-center bg-gray-200 rounded-md p-1",children:[s.jsx("button",{onClick:()=>u("dashboard"),className:`${C} ${i==="dashboard"?P:H}`,children:"Painel"}),s.jsx("button",{onClick:()=>u("grid"),className:`${C} ${i==="grid"?P:H}`,children:"Grade"}),s.jsx("button",{onClick:()=>u("management"),className:`${C} ${i==="management"?P:H}`,children:"Gerenciamento"}),s.jsx("button",{onClick:()=>u("professor"),className:`${C} ${i==="professor"?P:H}`,children:"Professor"})]}),i==="grid"&&s.jsxs("div",{className:"flex items-center space-x-2 ml-6",children:[s.jsx("label",{htmlFor:"focus-mode-toggle",className:"text-sm font-medium text-gray-700 select-none cursor-pointer",children:"Modo Foco"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{id:"focus-mode-toggle",type:"checkbox",className:"sr-only",checked:f,onChange:W=>c(W.target.checked)}),s.jsx("div",{onClick:()=>c(!f),className:`block w-10 h-6 rounded-full transition-colors cursor-pointer ${f?"bg-indigo-600":"bg-gray-200"}`}),s.jsx("div",{className:`dot absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform ${f?"translate-x-4":""}`})]})]})]}),s.jsxs("div",{className:"flex items-center flex-wrap gap-x-2 gap-y-1",children:[s.jsx(Wf,{status:v.saveStatus,lastModifiedBy:v.lastModifiedBy,lastModifiedAt:v.lastModifiedAt}),s.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),s.jsx(Uf,{}),s.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),s.jsx("button",{onClick:m,className:"p-2 rounded hover:bg-gray-200",title:"Carregar dados de demonstrao",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4M4 7v4c0 2.21 3.582 4 8 4s8-1.79 8-4V7"})})}),s.jsx("button",{onClick:p,className:"p-2 rounded hover:bg-gray-200",title:"Limpar todos os dados da aplicao",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("button",{onClick:()=>x({type:"UNDO"}),className:"p-2 rounded hover:bg-gray-200",title:"Desfazer (Ctrl+Z)",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M11 15l-3-3m0 0l3-3m-3 3h8a5 5 0 015 5v1"})})}),s.jsx("button",{onClick:()=>x({type:"REDO"}),className:"p-2 rounded hover:bg-gray-200",title:"Refazer (Ctrl+Y)",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 15l3-3m0 0l-3-3m3 3H5a5 5 0 01-5-5v-1"})})}),s.jsxs("label",{htmlFor:"import-json",className:"cursor-pointer p-2 rounded hover:bg-gray-200",title:"Restaurar backup (JSON)",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),s.jsx("input",{type:"file",id:"import-json",className:"hidden",accept:".json",onChange:N})]}),s.jsx("button",{onClick:y,className:"p-2 rounded hover:bg-gray-200",title:"Fazer backup dos dados (JSON)",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),s.jsx("button",{onClick:h,className:"p-2 rounded hover:bg-gray-200",title:"Exportar dados brutos para planilha (CSV)",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),s.jsx("button",{onClick:S,className:"p-2 rounded hover:bg-gray-200",title:"Exportar grades formatadas para Excel (XLSX)",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10h18M3 14h18m-9-4v8m-7 0h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s.jsx("button",{onClick:w,disabled:i!=="grid",className:"p-2 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Exportar grade atual para PDF",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-700 pointer-events-none",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})]})})},Zf=()=>s.jsxs("div",{className:"px-4",children:[s.jsx("h3",{className:"text-sm font-semibold mb-2",children:"Legenda de Alertas:"}),s.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-2",children:[s.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[s.jsx("span",{className:"w-4 h-4 rounded-full bg-green-200 border border-gray-300"}),s.jsx("span",{children:"Horrio Vlido (sem conflitos)"})]},"valid-slot"),Object.keys(ln).map(i=>{const u=i,{bg:a,name:f}=ln[u];return s.jsxs("div",{className:"flex items-center space-x-2 text-xs",children:[s.jsx("span",{className:`w-4 h-4 rounded-full ${a}`}),s.jsx("span",{children:f})]},i)})]})]});var Jf=Nd();const Gr=({isOpen:i,onClose:u,title:a,children:f,size:c="md",contentRef:p})=>{const m=R.useRef(null);if(R.useEffect(()=>{m.current=document.getElementById("modal-root")},[]),!i||!m.current)return null;const v={md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl"};return Jf.createPortal(s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",onClick:u,children:s.jsxs("div",{className:`bg-white rounded-lg shadow-xl w-full ${v[c]} flex flex-col max-h-[90vh]`,onClick:x=>x.stopPropagation(),children:[s.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-6 pb-4 border-b",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a}),s.jsx("button",{onClick:u,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"overflow-y-auto p-6",ref:p,children:f})]})}),m.current)},Fo=({isOpen:i,onClose:u,onConfirm:a,title:f,message:c})=>{const p=()=>{a(),u()};return s.jsx(Gr,{isOpen:i,onClose:u,title:f,children:s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-gray-700",children:c}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Confirmar Excluso"})]})]})})},ep=()=>{const{state:i,dispatch:u}=lt(),[a,f]=R.useState(!1),[c,p]=R.useState(null),[m,v]=R.useState(""),[x,y]=R.useState({isOpen:!1,id:null}),h=P=>{p(P),v(P?P.nome:""),f(!0)},S=()=>{f(!1),p(null),v("")},w=P=>{P.preventDefault(),m.trim()&&(u(c?{type:"UPDATE_CURSO",payload:{...c,nome:m}}:{type:"ADD_CURSO",payload:{id:`c${Date.now()}`,nome:m}}),S())},N=P=>{y({isOpen:!0,id:P})},C=()=>{x.id&&u({type:"DELETE_CURSO",payload:{id:x.id}}),y({isOpen:!1,id:null})};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Cursos"}),s.jsx("button",{onClick:()=>h(null),className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Adicionar Curso"})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:i.cursos.length>0?i.cursos.map(P=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[s.jsx("span",{className:"font-medium text-gray-800 mb-4",children:P.nome}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:()=>h(P),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),s.jsx("button",{onClick:()=>N(P.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},P.id)):s.jsx("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:"Nenhum curso cadastrado."})}),s.jsx(Gr,{isOpen:a,onClose:S,title:c?"Editar Curso":"Adicionar Curso",children:s.jsxs("form",{onSubmit:w,children:[s.jsx("label",{htmlFor:"cursoName",className:"block text-sm font-medium text-gray-700",children:"Nome do Curso"}),s.jsx("input",{type:"text",id:"cursoName",value:m,onChange:P=>v(P.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Salvar"})]})]})}),s.jsx(Fo,{isOpen:x.isOpen,onClose:()=>y({isOpen:!1,id:null}),onConfirm:C,title:"Confirmar Excluso de Curso",message:"Tem certeza que deseja excluir este curso? Todas as turmas, disciplinas e aulas associadas tambm sero removidas permanentemente."})]})},tp=()=>{const{state:i,dispatch:u}=lt(),[a,f]=R.useState(!1),[c,p]=R.useState(null),[m,v]=R.useState({nome:"",cursoId:"",periodo:"manha",isModular:!1}),[x,y]=R.useState("all"),[h,S]=R.useState({isOpen:!1,id:null});R.useEffect(()=>{!m.cursoId&&i.cursos.length>0&&v(g=>({...g,cursoId:i.cursos[0].id}))},[i.cursos,m.cursoId]);const w=g=>{p(g),v(g?{nome:g.nome,cursoId:g.cursoId,periodo:g.periodo,isModular:!!g.isModular}:{nome:"",cursoId:i.cursos[0]?.id||"",periodo:"manha",isModular:!1}),f(!0)},N=()=>{f(!1),p(null),v({nome:"",cursoId:"",periodo:"manha",isModular:!1})},C=g=>{g.preventDefault(),!(!m.nome.trim()||!m.cursoId||!m.periodo)&&(u(c?{type:"UPDATE_TURMA",payload:{...c,...m}}:{type:"ADD_TURMA",payload:{id:`t${Date.now()}`,...m}}),N())},P=g=>{S({isOpen:!0,id:g})},H=()=>{h.id&&u({type:"DELETE_TURMA",payload:{id:h.id}}),S({isOpen:!1,id:null})},W=g=>i.cursos.find(D=>D.id===g)?.nome||"N/A",I=i.turmas.filter(g=>x==="all"?!0:g.cursoId===x);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Turmas"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"w-64",children:[s.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Curso"}),s.jsxs("select",{id:"curso-filter",value:x,onChange:g=>y(g.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"all",children:"Todos os Cursos"}),i.cursos.map(g=>s.jsx("option",{value:g.id,children:g.nome},g.id))]})]}),s.jsx("button",{onClick:()=>w(null),className:"self-end px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",disabled:i.cursos.length===0,children:"Adicionar Turma"})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:I.length>0?I.map(g=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsx("h4",{className:"font-bold text-gray-800",children:g.nome}),g.isModular&&s.jsx("span",{className:"flex-shrink-0 text-xs bg-purple-100 text-purple-800 font-semibold ml-2 px-2 py-0.5 rounded-full",children:"Modular"})]}),s.jsx("p",{className:"text-sm text-gray-500",children:W(g.cursoId)}),s.jsx("p",{className:"text-sm text-gray-500 capitalize",children:g.periodo})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx("button",{onClick:()=>w(g),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),s.jsx("button",{onClick:()=>P(g.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},g.id)):s.jsx("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:i.turmas.length===0?"Nenhuma turma cadastrada.":"Nenhuma turma encontrada para o filtro selecionado."})}),s.jsx(Gr,{isOpen:a,onClose:N,title:c?"Editar Turma":"Adicionar Turma",children:s.jsxs("form",{onSubmit:C,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"turmaName",className:"block text-sm font-medium text-gray-700",children:"Nome da Turma"}),s.jsx("input",{type:"text",id:"turmaName",value:m.nome,onChange:g=>v({...m,nome:g.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"cursoId",className:"block text-sm font-medium text-gray-700",children:"Curso"}),s.jsxs("select",{id:"cursoId",value:m.cursoId,onChange:g=>v({...m,cursoId:g.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[s.jsx("option",{value:"",disabled:!0,children:"Selecione um curso"}),i.cursos.map(g=>s.jsx("option",{value:g.id,children:g.nome},g.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"turmaPeriodo",className:"block text-sm font-medium text-gray-700",children:"Perodo"}),s.jsxs("select",{id:"turmaPeriodo",value:m.periodo,onChange:g=>v({...m,periodo:g.target.value}),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",required:!0,children:[s.jsx("option",{value:"manha",children:"Manh"}),s.jsx("option",{value:"tarde",children:"Tarde"}),s.jsx("option",{value:"noite",children:"Noite"})]})]}),s.jsx("div",{className:"pt-2",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:"isModular",type:"checkbox",checked:m.isModular,onChange:g=>v({...m,isModular:g.target.checked}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),s.jsxs("div",{className:"ml-3 text-sm",children:[s.jsx("label",{htmlFor:"isModular",className:"font-medium text-gray-700",children:"Turma Modular?"}),s.jsx("p",{className:"text-gray-500",children:"Turmas modulares aparecero em uma grade de horrios separada."})]})]})}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:N,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Salvar"})]})]})}),s.jsx(Fo,{isOpen:h.isOpen,onClose:()=>S({isOpen:!1,id:null}),onConfirm:H,title:"Confirmar Excluso de Turma",message:"Tem certeza que deseja excluir esta turma? Todas as disciplinas e aulas associadas tambm sero removidas permanentemente."})]})},rp=({isOpen:i,onClose:u})=>{const{state:a,dispatch:f}=lt(),c=R.useMemo(()=>{const x={};return a.disciplinas.forEach(y=>{y.bnccId||(x[y.nome]||(x[y.nome]={turmas:new Set}),x[y.nome].turmas.add(y.turmaId))}),Object.entries(x).filter(([y,h])=>h.turmas.size>1).map(([y,h])=>({nome:y,count:h.turmas.size})).sort((y,h)=>h.count!==y.count?h.count-y.count:y.nome.localeCompare(h.nome))},[a.disciplinas]),p=x=>{f({type:"CREATE_BNCC",payload:{nome:x}})},m=x=>{f({type:"DELETE_BNCC",payload:{bnccId:x}})},v="flex-shrink-0 w-32 justify-center text-center text-sm px-3 py-1 rounded-md transition-colors";return s.jsx(Gr,{isOpen:i,onClose:u,title:"Gerenciar Grupos BNCC",size:"4xl",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Sugestes de Grupos BNCC"}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:"Disciplinas com o mesmo nome em mltiplas turmas so candidatas a se tornarem um grupo BNCC."}),c.length>0?s.jsx("ul",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto pr-2",children:c.map(x=>s.jsxs("li",{className:"py-3 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:x.nome}),s.jsxs("span",{className:"text-sm text-gray-500 ml-2",children:["(",x.count," turmas)"]})]}),s.jsx("button",{onClick:()=>p(x.nome),className:`${v} bg-green-500 text-white hover:bg-green-600`,children:"Criar Grupo"})]},x.nome))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma sugesto de grupo BNCC encontrada."})]}),s.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Grupos BNCC Atuais"}),s.jsx("p",{className:"text-sm text-gray-500 mb-3",children:'As atribuies de professores para estes grupos so feitas na aba "Atribuies".'}),a.bncc.length>0?s.jsx("ul",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto pr-2",children:a.bncc.map(x=>s.jsxs("li",{className:"py-3 flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:x.nome}),s.jsx("button",{onClick:()=>m(x.id),className:`${v} bg-red-500 text-white hover:bg-red-600`,children:"Desfazer Grupo"})]},x.id))}):s.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum grupo BNCC foi criado."})]})]})})},np=()=>{const{state:i,dispatch:u}=lt(),[a,f]=R.useState(!1),[c,p]=R.useState(!1),[m,v]=R.useState(null),[x,y]=R.useState({nome:"",turmaId:"",divisao:!1,numProfessores:1,aulasSemanais:1}),[h,S]=R.useState("all"),[w,N]=R.useState({isOpen:!1,id:null});R.useEffect(()=>{!x.turmaId&&i.turmas.length>0&&y(E=>({...E,turmaId:i.turmas[0].id}))},[i.turmas,x.turmaId]);const C=R.useMemo(()=>i.turmas.find(E=>E.id===x.turmaId)?.isModular??!1,[x.turmaId,i.turmas]),P=E=>{if(v(E),E)y({...E});else{const U=i.turmas.length>0?i.turmas[0].id:"",A=i.turmas.find(B=>B.id===U)?.isModular?1.25:1;y({nome:"",turmaId:U,divisao:!1,numProfessores:1,aulasSemanais:A})}f(!0)},H=()=>{f(!1),v(null)},W=E=>{if(E.preventDefault(),!x.nome.trim()||!x.turmaId)return;const U={...x,numProfessores:x.divisao?x.numProfessores:1};u(m?{type:"UPDATE_DISCIPLINA",payload:{...m,...U}}:{type:"ADD_DISCIPLINA",payload:{id:`d${Date.now()}`,...U}}),H()},I=E=>{N({isOpen:!0,id:E})},g=()=>{w.id&&u({type:"DELETE_DISCIPLINA",payload:{id:w.id}}),N({isOpen:!1,id:null})},D=E=>{y(U=>{if(m)return{...U,turmaId:E};const A=i.turmas.find(B=>B.id===E)?.isModular?1.25:1;return{...U,turmaId:E,aulasSemanais:A}})},z=E=>i.turmas.find(U=>U.id===E)?.nome||"N/A",_=R.useMemo(()=>{if(h==="all")return i.disciplinas;const E=i.turmas.filter(U=>U.cursoId===h).map(U=>U.id);return i.disciplinas.filter(U=>E.includes(U.turmaId))},[i.disciplinas,i.turmas,h]);return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Disciplinas"}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"w-64",children:[s.jsx("label",{htmlFor:"curso-filter",className:"block text-sm font-medium text-gray-700",children:"Filtrar por Curso"}),s.jsxs("select",{id:"curso-filter",value:h,onChange:E=>S(E.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:[s.jsx("option",{value:"all",children:"Todos os Cursos"}),i.cursos.map(E=>s.jsx("option",{value:E.id,children:E.nome},E.id))]})]}),s.jsx("button",{onClick:()=>p(!0),className:"self-end px-4 py-2 bg-cyan-600 text-white rounded-md hover:bg-cyan-700",children:"Gerenciar Grupos BNCC"}),s.jsx("button",{onClick:()=>P(null),className:"self-end px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",disabled:i.turmas.length===0,children:"Adicionar Disciplina"})]})]}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:_.length>0?_.map(E=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm p-4 flex flex-col justify-between hover:shadow-md transition-shadow",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-gray-800",children:E.nome}),s.jsx("p",{className:"text-sm text-gray-500",children:z(E.turmaId)}),s.jsxs("p",{className:"text-sm text-gray-500",children:[E.aulasSemanais," aulas/semana"]}),s.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[E.bnccId&&s.jsx("span",{className:"text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),E.divisao&&s.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",E.numProfessores,")"]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[s.jsx("button",{onClick:()=>P(E),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100 transition-colors",title:"Editar",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L14.732 3.732z"})})}),s.jsx("button",{onClick:()=>I(E.id),className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100 transition-colors",title:"Excluir",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},E.id)):s.jsx("div",{className:"col-span-full bg-white border border-gray-200 rounded-lg shadow-sm p-6 text-center text-gray-500",children:i.disciplinas.length===0?"Nenhuma disciplina cadastrada.":"Nenhuma disciplina encontrada para o filtro selecionado."})}),s.jsx(Gr,{isOpen:a,onClose:H,title:m?"Editar Disciplina":"Adicionar Disciplina",children:s.jsxs("form",{onSubmit:W,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Nome da Disciplina"}),s.jsx("input",{type:"text",value:x.nome,onChange:E=>y({...x,nome:E.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Aulas por Semana"}),s.jsx("input",{type:"number",min:C?"1.25":"1",step:C?"1.25":"1",value:x.aulasSemanais,onChange:E=>y({...x,aulasSemanais:parseFloat(E.target.value)||(C?1.25:1)}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Turma"}),s.jsx("select",{value:x.turmaId,onChange:E=>D(E.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0,children:i.turmas.map(E=>s.jsx("option",{value:E.id,children:E.nome},E.id))})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex items-center h-5",children:s.jsx("input",{id:"divisao",type:"checkbox",checked:x.divisao,onChange:E=>y({...x,divisao:E.target.checked}),className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded"})}),s.jsx("div",{className:"ml-3 text-sm",children:s.jsx("label",{htmlFor:"divisao",className:"font-medium text-gray-700",children:"Diviso de turma?"})})]}),x.divisao&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Nmero de Professores"}),s.jsx("input",{type:"number",min:"2",value:x.numProfessores,onChange:E=>y({...x,numProfessores:parseInt(E.target.value)||2}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"})]}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:H,className:"px-4 py-2 bg-gray-200 rounded-md",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Salvar"})]})]})}),s.jsx(Fo,{isOpen:w.isOpen,onClose:()=>N({isOpen:!1,id:null}),onConfirm:g,title:"Confirmar Excluso de Disciplina",message:"Tem certeza que deseja excluir esta disciplina? Todas as atribuies e aulas associadas tambm sero removidas permanentemente."}),s.jsx(rp,{isOpen:c,onClose:()=>p(!1)})]})},sp=({disponibilidade:i,onAvailabilityChange:u})=>{const a=(m,v)=>{const x={...i};x[m]||(x[m]=[]);const y=x[m].includes(v);x[m]=y?x[m].filter(h=>h!==v):[...x[m],v],u(x)},f=(m,v)=>{const x={...i};x[m]||(x[m]=[]);const y=v.every(S=>x[m].includes(S));let h=[...x[m]];y?h=h.filter(S=>!v.includes(S)):v.forEach(S=>{h.includes(S)||h.push(S)}),x[m]=h,u(x)},c=m=>{const v={...i},x=_e.every(y=>v[y]?.includes(m));_e.forEach(y=>{v[y]||(v[y]=[]);const h=v[y].includes(m);x?h&&(v[y]=v[y].filter(S=>S!==m)):h||v[y].push(m)}),u(v)},p=({label:m,horarios:v})=>s.jsxs("div",{className:"p-4 border rounded-lg bg-gray-50/50",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:m}),s.jsxs("div",{className:"grid gap-px",style:{gridTemplateColumns:"auto repeat(6, 1fr)"},children:[s.jsx("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center sticky top-0 bg-gray-50",children:"Horrio"}),_e.map(x=>s.jsx("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center capitalize sticky top-0 bg-gray-50",children:s.jsx("button",{onClick:()=>f(x,v),className:"hover:text-indigo-600 w-full",title:`Marcar/desmarcar todos os horrios da ${m.toLowerCase()} para ${x}`,children:x})},x)),s.jsx("div",{className:"font-semibold text-sm text-gray-500 px-1 py-2 text-center sticky top-0 bg-gray-50",children:"Aes"}),v.map(x=>s.jsxs(un.Fragment,{children:[s.jsx("div",{className:"text-sm font-mono px-1 py-2 text-center flex items-center justify-center bg-white",children:x}),_e.map(y=>{const h=i[y]?.includes(x)??!1;return s.jsx("div",{className:"py-1 px-0.5 flex items-center justify-center bg-white",children:s.jsx("button",{type:"button",onClick:()=>a(y,x),className:`w-6 h-6 rounded-md transition-colors ${h?"bg-emerald-500 hover:bg-emerald-600":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":`Disponibilidade para ${y} s ${x}: ${h?"Disponvel":"Indisponvel"}`})},`${y}-${x}`)}),s.jsx("div",{className:"py-1 px-0.5 flex items-center justify-center bg-white",children:s.jsx("button",{onClick:()=>c(x),className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded-full text-xs font-semibold hover:bg-indigo-200 transition-colors",title:`Marcar/desmarcar ${x} para todos os dias`,children:"Todos"})})]},x))]})]});return s.jsxs("div",{className:"space-y-4",children:[s.jsx(p,{label:"Manh",horarios:st}),s.jsx(p,{label:"Tarde",horarios:ot}),s.jsx(p,{label:"Noite",horarios:Cr})]})},op=()=>{const{state:i,dispatch:u}=lt(),[a,f]=R.useState(!1),[c,p]=R.useState(new Set),[m,v]=R.useState([]),[x,y]=R.useState({nome:"",disponibilidade:{}}),[h,S]=R.useState(""),[w,N]=R.useState({isOpen:!1,ids:[]}),[C,P]=R.useState(""),H=R.useRef(null),W=R.useRef(0),I=R.useMemo(()=>[...i.professores].sort((K,se)=>K.nome.localeCompare(se.nome)),[i.professores]),g=R.useMemo(()=>C.trim()?I.filter(K=>K.nome.toLowerCase().includes(C.toLowerCase())):I,[I,C]),D=K=>{const se=new Set(c);se.has(K)?se.delete(K):se.add(K),p(se)},z=()=>{c.size===g.length?p(new Set):p(new Set(g.map(K=>K.id)))},_=()=>{v([]),y({nome:"",disponibilidade:{}}),S(""),W.current=0,f(!0)},E=()=>{if(c.size===0)return;const K=I.filter(se=>c.has(se.id));if(v(K),K.length===1)y({...K[0]});else if(K.length>1){const se={},V=[...st,...ot,...Cr];_e.forEach(re=>{se[re]=V.filter(J=>K.every(T=>T.disponibilidade[re]?.includes(J)))}),y({nome:"",disponibilidade:se})}S(""),W.current=0,f(!0)},U=()=>{f(!1)},O=K=>{if(K.preventDefault(),m.length>0){if(m.length===1&&!x.nome.trim())return;m.forEach(se=>{const V={...se,nome:m.length===1?x.nome:se.nome,disponibilidade:x.disponibilidade};u({type:"UPDATE_PROFESSOR",payload:V})})}else{if(!x.nome.trim())return;u({type:"ADD_PROFESSOR",payload:{id:`p${Date.now()}`,...x}})}U(),p(new Set)},A=()=>{c.size!==0&&N({isOpen:!0,ids:Array.from(c)})},B=()=>{w.ids.forEach(K=>{u({type:"DELETE_PROFESSOR",payload:{id:K}})}),N({isOpen:!1,ids:[]}),p(new Set)},te=()=>{if(!h)return;const K=i.professores.find(se=>se.id===h);if(K){const se=JSON.parse(JSON.stringify(K.disponibilidade));y(V=>({...V,disponibilidade:se}))}},ee=K=>{H.current&&(W.current=H.current.scrollTop),y(se=>({...se,disponibilidade:K}))};R.useLayoutEffect(()=>{H.current&&(H.current.scrollTop=W.current)},[x.disponibilidade]);const de=g.length>0&&c.size===g.length,pe=m.length===0?"Adicionar Professor":m.length>1?`Editar Disponibilidade de ${m.length} Professores`:"Editar Professor";return s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-4 gap-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Professores"}),s.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-2 w-full md:w-auto",children:[s.jsx("input",{type:"text",value:C,onChange:K=>P(K.target.value),placeholder:"Buscar por nome...",className:"block w-full sm:w-48 pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"}),s.jsx("button",{onClick:_,className:"w-full sm:w-auto px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Adicionar"}),s.jsx("button",{onClick:E,disabled:c.size===0,className:"w-full sm:w-auto px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400",children:"Editar Selecionados"}),s.jsx("button",{onClick:A,disabled:c.size===0,className:"w-full sm:w-auto px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-gray-400",children:"Excluir Selecionados"})]})]}),s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm",children:[s.jsx("div",{className:"px-4 sm:px-6 py-3 border-b border-gray-200 bg-gray-50 rounded-t-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:de,onChange:z,"aria-label":"Selecionar todos os professores"}),s.jsx("span",{className:"ml-3 text-sm font-medium text-gray-600",children:c.size>0?`${c.size} selecionado(s)`:`Selecionar Todos (${g.length})`})]})}),s.jsx("div",{className:"divide-y divide-gray-200",children:g.length>0?g.map(K=>s.jsx("div",{className:"px-4 sm:px-6 py-3 flex items-center justify-between hover:bg-gray-50/50 transition-colors",children:s.jsxs("label",{htmlFor:`prof-select-${K.id}`,className:"flex items-center cursor-pointer",children:[s.jsx("input",{id:`prof-select-${K.id}`,type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:c.has(K.id),onChange:()=>D(K.id)}),s.jsx("span",{className:"ml-3 font-medium text-gray-800",children:K.nome})]})},K.id)):s.jsx("div",{className:"px-6 py-4 text-center text-gray-500",children:i.professores.length===0?"Nenhum professor cadastrado.":"Nenhum professor encontrado para o filtro selecionado."})})]}),s.jsx(Gr,{isOpen:a,onClose:U,title:pe,size:"5xl",contentRef:H,children:s.jsxs("form",{onSubmit:O,className:"space-y-6",children:[m.length<=1&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Nome do Professor"}),s.jsx("input",{type:"text",value:x.nome,onChange:K=>y({...x,nome:K.target.value}),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",required:!0})]}),m.length<=1&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium",children:"Copiar Disponibilidade de:"}),s.jsxs("div",{className:"mt-1 flex space-x-2",children:[s.jsxs("select",{value:h,onChange:K=>S(K.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",disabled:i.professores.filter(K=>K.id!==(m[0]?.id||"")).length===0,children:[s.jsx("option",{value:"",children:"Selecione um professor..."}),i.professores.filter(K=>K.id!==(m[0]?.id||"")).sort((K,se)=>K.nome.localeCompare(se.nome)).map(K=>s.jsx("option",{value:K.id,children:K.nome},K.id))]}),s.jsx("button",{type:"button",onClick:te,disabled:!h,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 disabled:bg-gray-100 disabled:text-gray-400 disabled:cursor-not-allowed",children:"Copiar"})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium mb-2",children:"Disponibilidade"}),m.length>1&&s.jsxs("p",{className:"text-xs text-orange-600 bg-orange-50 p-2 rounded-md mb-2",children:[s.jsx("strong",{children:"Ateno:"})," Voc est editando mltiplos professores. Um horrio aparecer marcado apenas se TODOS os professores selecionados estiverem disponveis. Qualquer alterao aqui ser aplicada a TODOS."]}),s.jsx(sp,{disponibilidade:x.disponibilidade,onAvailabilityChange:ee})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 bg-gray-200 rounded-md",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md",children:"Salvar"})]})]})}),s.jsx(Fo,{isOpen:w.isOpen,onClose:()=>N({isOpen:!1,ids:[]}),onConfirm:B,title:`Confirmar Excluso de ${w.ids.length} Professor(es)`,message:`Tem certeza que deseja excluir ${w.ids.length>1?`os ${w.ids.length} professores selecionados`:"este professor"}? Eles sero removidos de todas as atribuies e aulas permanentemente.`})]})},wd=({allProfessors:i,selectedProfessorIds:u,onSelectionChange:a,maxSelection:f=1})=>{const[c,p]=R.useState(""),[m,v]=R.useState(!1),x=R.useRef(null),y=R.useMemo(()=>u.map(C=>i.find(P=>P.id===C)).filter(C=>!!C),[u,i]),h=R.useMemo(()=>{const C=c.toLowerCase();return i.filter(P=>P.nome.toLowerCase().includes(C))},[c,i]);R.useEffect(()=>{const C=P=>{x.current&&!x.current.contains(P.target)&&v(!1)};return document.addEventListener("mousedown",C),()=>{document.removeEventListener("mousedown",C)}},[x]);const S=C=>{u.length<f&&(a([...u,C]),p(""),v(!1))},w=C=>{a(u.filter((P,H)=>H!==C))},N=u.length<f;return s.jsxs("div",{className:"relative",ref:x,children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 border border-gray-300 rounded-md bg-white min-h-[42px]",children:[y.map((C,P)=>s.jsxs("div",{className:"flex items-center bg-indigo-100 text-indigo-800 text-sm font-medium px-2 py-1 rounded-full",children:[s.jsx("span",{children:C.nome}),s.jsx("button",{type:"button",onClick:()=>w(P),className:"ml-2 text-indigo-500 hover:text-indigo-700 focus:outline-none","aria-label":`Remover ${C.nome}`,children:""})]},`${C.id}-${P}`)),N&&s.jsx("input",{type:"text",value:c,onChange:C=>p(C.target.value),onFocus:()=>v(!0),placeholder:"Adicionar professor...",className:"flex-grow p-1 bg-transparent focus:outline-none"})]}),m&&N&&s.jsx("ul",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:h.length>0?h.map(C=>s.jsx("li",{onClick:()=>S(C.id),className:"px-4 py-2 text-sm text-gray-700 cursor-pointer hover:bg-gray-100",children:C.nome},C.id)):s.jsx("li",{className:"px-4 py-2 text-sm text-gray-500 cursor-default",children:"Nenhum professor encontrado."})})]})},lp=()=>{const{state:i,dispatch:u}=lt(),{disciplinas:a,professores:f,atribuicoes:c,turmas:p,cursos:m}=i,[v,x]=R.useState(""),y=[...f].sort((H,W)=>H.nome.localeCompare(W.nome)),h=[...m].sort((H,W)=>H.nome.localeCompare(W.nome)),S=H=>c.find(W=>W.disciplinaId===H)?.professores||[],w=(H,W)=>{W.length===0?u({type:"DELETE_ATRIBUICAO",payload:{disciplinaId:H}}):u({type:"UPDATE_ATRIBUICAO",payload:{disciplinaId:H,professores:W}})},N=R.useMemo(()=>{if(!v.trim())return null;const H=v.toLowerCase();return y.filter(g=>g.nome.toLowerCase().includes(H)).map(g=>{const D=c.filter(z=>z.professores.includes(g.id)).map(z=>a.find(_=>_.id===z.disciplinaId)).filter(z=>!!z);return{professor:g,disciplinas:D.sort((z,_)=>z.nome.localeCompare(_.nome))}}).filter(g=>g.disciplinas.length>0)},[v,y,c,a]),C=()=>s.jsx(s.Fragment,{children:h.length>0?h.map(H=>{const W=p.filter(I=>I.cursoId===H.id).sort((I,g)=>I.nome.localeCompare(g.nome));return W.length===0?null:s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-4 pb-2 border-b",children:H.nome}),s.jsx("div",{className:"space-y-6",children:W.map(I=>{const g=a.filter(D=>D.turmaId===I.id).sort((D,z)=>D.nome.localeCompare(z.nome));return g.length===0?null:s.jsxs("div",{children:[s.jsxs("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[I.nome,I.isModular&&s.jsx("span",{className:"text-xs bg-purple-100 text-purple-800 font-semibold ml-2 px-2 py-0.5 rounded-full",children:"Modular"})]}),s.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(D=>s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-bold text-gray-700",children:D.nome}),D.bnccId&&s.jsx("span",{className:"ml-2 text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),D.divisao&&s.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",D.numProfessores,")"]})]}),s.jsx(wd,{allProfessors:y,selectedProfessorIds:S(D.id),onSelectionChange:z=>w(D.id,z),maxSelection:D.numProfessores})]},D.id))})]},I.id)})})]},H.id)}):s.jsx("div",{className:"text-center text-gray-500 py-8 bg-white rounded-lg shadow",children:"Nenhum curso cadastrado. Por favor, adicione cursos na aba 'Cursos'."})}),P=()=>s.jsx(s.Fragment,{children:N&&N.length>0?N.map(({professor:H,disciplinas:W})=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md border border-gray-200",children:[s.jsx("h3",{className:"text-xl font-bold text-indigo-700 mb-4 pb-2 border-b",children:H.nome}),s.jsx("div",{className:"mt-2 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(I=>{const g=p.find(z=>z.id===I.turmaId),D=m.find(z=>z.id===g?.cursoId);return s.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[s.jsxs("div",{className:"mb-1",children:[s.jsx("span",{className:"text-sm font-bold text-gray-700",children:I.nome}),I.bnccId&&s.jsx("span",{className:"ml-2 text-xs bg-pink-100 text-pink-800 font-semibold px-2 py-0.5 rounded-full",children:"BNCC"}),I.divisao&&s.jsxs("span",{className:"ml-2 text-xs bg-blue-100 text-blue-800 font-semibold px-2 py-0.5 rounded-full",children:["Diviso (",I.numProfessores,")"]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mb-2",children:[D?.nome," / ",g?.nome]}),s.jsx(wd,{allProfessors:y,selectedProfessorIds:S(I.id),onSelectionChange:z=>w(I.id,z),maxSelection:I.numProfessores})]},I.id)})})]},H.id)):s.jsxs("div",{className:"text-center text-gray-500 py-8 bg-white rounded-lg shadow",children:['Nenhum professor encontrado com o nome "',v,'" que possua atribuies.']})});return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Gerenciar Atribuies"}),s.jsxs("div",{className:"w-64",children:[s.jsx("label",{htmlFor:"professor-search-atribuicao",className:"block text-sm font-medium text-gray-700",children:"Buscar por Professor"}),s.jsx("input",{type:"text",id:"professor-search-atribuicao",value:v,onChange:H=>x(H.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-3 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]})]}),s.jsx("div",{className:"space-y-8",children:v.trim()?P():C()})]})},ip=i=>{const u=i.toLowerCase();return u.includes("manh")?"manha":u.includes("tarde")?"tarde":u.includes("noite")?"noite":"manha"},Po=(i,u)=>{let a=0;for(let c=0;c<i.length;c++){const p=i.charCodeAt(c);a=(a<<5)-a+p,a|=0}const f=i.trim().toLowerCase().replace(/[^a-z0-9]/g,"");return`${u}-${f.substring(0,30)}-${Math.abs(a).toString(36)}`},ap=i=>{const a=new DOMParser().parseFromString(i,"text/html"),f=new Map,c=new Map,p=new Map,m=new Map,v=[],x=["ensino mdio","mtec","novotec","integrado"],y=S=>{const w=S.trim();if(!w)return m.has("Vago")||m.set("Vago",{id:"p-vago",nome:"Vago",disponibilidade:{}}),m.get("Vago");if(!m.has(w)){const N={id:Po(w,"p"),nome:w,disponibilidade:{}};m.set(w,N)}return m.get(w)};a.querySelectorAll("tr.success").forEach(S=>{S.textContent;const w=Array.from(S.querySelectorAll("strong")),N=Array.from(S.querySelectorAll("b")),C=(A,B)=>{for(const te of B)if(te&&te.previousSibling?.textContent?.includes(A))return te.textContent?.trim()||null;return null},P=C("Curso:",N)||"Curso Desconhecido",H=!x.some(A=>P.toLowerCase().includes(A)),W=P.replace(/\s*\(.*?\)\s*/g," ").trim(),I=C("Turma:",w),g=C("Perodo:",w);if(!I||!g)return;f.has(W)||f.set(W,{id:Po(W,"c"),nome:W});const D=f.get(W),z=`${D.nome}-${I}`;c.has(z)||c.set(z,{id:Po(z,"t"),cursoId:D.id,nome:I,periodo:ip(g),isModular:H});const _=c.get(z),E=S.nextElementSibling?.querySelector("table.table-condensed");if(!E)return;const U=Array.from(E.querySelectorAll("tbody > tr:not(.warning)")),O=new Map;U.forEach(A=>{const B=A.querySelectorAll("td");if(B.length<7)return;const te=B[0].querySelector("a");if(!te)return;const pe=(te.textContent||"").trim().replace(/^\(\d+\)_/,"").trim().replace(/\s*\(.*?\)\s*/g," ").trim(),K=parseFloat((B[4].textContent||"0").replace(",",".")),se=H?K:Math.round(K);O.has(pe)||O.set(pe,{rows:[],aulasSemanais:se}),O.get(pe).rows.push(A)}),O.forEach((A,B)=>{const{rows:te,aulasSemanais:ee}=A;if(te.length===0)return;const de=te.length>1,pe=[];te.forEach(V=>{const J=(V.querySelectorAll("td")[6].textContent||"").trim();pe.push(y(J).id)});const K=`${_.id}-${B}`;if(!p.has(K)){const V={id:Po(K,"d"),turmaId:_.id,nome:B,aulasSemanais:ee,divisao:de,numProfessores:te.length};p.set(K,V)}const se=p.get(K);pe.length>0&&(v.find(re=>re.disciplinaId===se.id)||v.push({disciplinaId:se.id,professores:pe.filter(re=>re!=="p-vago")}))})});const h=Array.from(m.values());return{ano:new Date().getFullYear(),cursos:Array.from(f.values()),turmas:Array.from(c.values()),disciplinas:Array.from(p.values()),professores:h,atribuicoes:v,grade:[],alertas:[]}},up=()=>{const{dispatch:i}=lt(),[u,a]=R.useState("upload"),[f,c]=R.useState(null),[p,m]=R.useState(null),[v,x]=R.useState({}),[y,h]=R.useState(!1),[S,w]=R.useState(null),N=I=>{const g=I.target.files?.[0];g&&(c(g),w(null))},C=()=>{if(!f){w("Por favor, selecione um arquivo HTML.");return}h(!0),w(null);const I=new FileReader;I.onload=g=>{try{const D=g.target?.result,z=ap(D);if(m(z),z.turmas){const _={};z.turmas.forEach(E=>{_[E.id]=E.isModular}),x(_)}a("validate")}catch(D){w("Ocorreu um erro ao analisar o arquivo. Verifique se o formato est correto."),console.error(D)}finally{h(!1)}},I.onerror=()=>{w("No foi possvel ler o arquivo."),h(!1)},I.readAsText(f,"UTF-8")},P=()=>{if(p){const I=p.turmas?.map(D=>({...D,isModular:v[D.id]??D.isModular}))??[],g={version:"1.0",ano:p.ano??new Date().getFullYear(),cursos:p.cursos??[],turmas:I,disciplinas:p.disciplinas??[],professores:p.professores??[],atribuicoes:p.atribuicoes??[],grade:[],alertas:[],bncc:[],toastMessage:null,draggedItem:null,clipboard:null,selectedSlotId:null,onlineUsers:[],saveStatus:"saved",lastModifiedBy:null,lastModifiedAt:null};i({type:"SET_STATE",payload:g}),a("success")}},H=()=>{c(null),m(null),w(null),h(!1),a("upload")},W=(I,g)=>{x(D=>({...D,[I]:g}))};return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Importar Dados de HTML (SIG)"}),u==="upload"&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Passo 1: Selecionar Arquivo"}),s.jsx("p",{className:"text-sm text-gray-600",children:'Selecione o arquivo HTML salvo a partir da pgina "Consultar Quadros" do sistema SIG-URH. O sistema ir extrair os cursos, turmas, disciplinas e professores.'}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"html-upload-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo HTML"}),s.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[s.jsx("label",{htmlFor:"html-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Escolher arquivo"}),s.jsx("input",{id:"html-upload",name:"html-upload",type:"file",accept:".html,.htm",onChange:N,className:"sr-only"}),f?s.jsx("span",{className:"text-sm text-gray-600",children:f.name}):s.jsx("span",{className:"text-sm text-gray-500",children:"Nenhum arquivo selecionado"})]})]}),S&&s.jsx("p",{className:"text-sm text-red-600",children:S}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:C,disabled:!f||y,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:y?"Analisando...":"Analisar Arquivo"})})]}),u==="validate"&&p&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Passo 2: Validar Dados"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Os seguintes dados foram encontrados. ",s.jsx("strong",{children:"Ateno:"})," A importao substituir todos os dados existentes."]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[s.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:p.cursos?.length||0}),s.jsx("div",{className:"text-sm",children:"Cursos"})]}),s.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:p.turmas?.length||0}),s.jsx("div",{className:"text-sm",children:"Turmas"})]}),s.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:p.disciplinas?.length||0}),s.jsx("div",{className:"text-sm",children:"Disciplinas"})]}),s.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg",children:[s.jsx("div",{className:"text-2xl font-bold",children:p.professores?.length||0}),s.jsx("div",{className:"text-sm",children:"Professores"})]})]}),s.jsxs("div",{className:"mt-4 border-t pt-4",children:[s.jsx("h4",{className:"font-semibold",children:"Validar Classificao das Turmas"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Verifique a lista de turmas importadas. Marque a caixa ao lado de cada turma que deve ser considerada 'Modular'. Turmas no marcadas sero tratadas como 'Regular' (Ensino Mdio, MTec, etc.)."}),s.jsx("div",{className:"max-h-64 overflow-y-auto space-y-1 border p-3 rounded-md bg-gray-50",children:p.turmas&&p.turmas.length>0?p.turmas.slice().sort((I,g)=>I.nome.localeCompare(g.nome)).map(I=>s.jsxs("div",{className:"flex items-center p-1 hover:bg-gray-100 rounded",children:[s.jsx("input",{type:"checkbox",id:`turma-modular-toggle-${I.id}`,checked:v[I.id]??!1,onChange:g=>W(I.id,g.target.checked),className:"h-4 w-4 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),s.jsx("label",{htmlFor:`turma-modular-toggle-${I.id}`,className:"ml-3 block text-sm font-medium text-gray-700 cursor-pointer",children:I.nome})]},I.id)):s.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma turma encontrada no arquivo."})})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:H,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{onClick:P,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirmar e Importar"})]})]}),u==="success"&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow text-center space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-700",children:"Importao Concluda!"}),s.jsx("p",{children:"Os dados foram importados com sucesso. Voc j pode navegar para as outras abas de gerenciamento para ver os resultados."}),s.jsx("button",{onClick:H,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Importar Novo Arquivo"})]})]})},bi={"2":"segunda","3":"terca","4":"quarta","5":"quinta","6":"sexta"},js={MANHA:{horarios:st,title:"Dias da Semana Manh"},TARDE:{horarios:ot,title:"Dias da Semana Tarde"},NOITE:{horarios:Cr,title:"Dias da Semana Noite"}},Fn=i=>{if(i.value===null||i.value===void 0)return"";if(i.value&&typeof i.value=="object"&&"richText"in i.value){const u=i.value;if(Array.isArray(u.richText))return u.richText.map(a=>a.text).join("")}return i.value.toString()},dp=async i=>{console.log("Iniciando anlise da planilha...");const u=new Oo.Workbook;await u.xlsx.load(i);const a=u.worksheets[0];if(!a)throw new Error("A planilha est vazia ou no pde ser lida.");const f=[],c=[];if(a.eachRow((p,m)=>{let v="";p.eachCell(x=>{const y=Fn(x).trim();y.toLowerCase().startsWith("docente:")&&(v=y.substring(8).trim())}),v&&(console.log(`Encontrado "Docente:": ${v} na linha ${m}`),c.push({name:v,row:m}))}),c.length===0)throw new Error("Nenhum professor encontrado. Verifique se a planilha contm a linha 'Docente:'.");for(const p of c){const m={segunda:[],terca:[],quarta:[],quinta:[],sexta:[]};let v=-1;for(let w=p.row;w<=a.rowCount&&w<p.row+10;w++){const N=a.getRow(w);let C=!1;if(N.eachCell(P=>{Fn(P).includes(js.MANHA.title)&&(C=!0)}),C){v=w,console.log(`Cabealho da tabela encontrado para ${p.name} na linha ${v}`);break}}if(v===-1){console.warn(`Tabelas no encontradas para o professor: ${p.name}`);continue}const x=a.getRow(v),y=a.getRow(v+1),h={};x.eachCell((w,N)=>{const C=Fn(w);C.includes(js.MANHA.title)&&(h.MANHA=N),C.includes(js.TARDE.title)&&(h.TARDE=N),C.includes(js.NOITE.title)&&(h.NOITE=N)});for(const w of Object.keys(h)){const N=h[w],{horarios:C}=js[w],P={},H=8;for(let D=0;D<H;D++){const z=N+D,_=y.getCell(z),E=Fn(_).trim();bi[E]&&(P[bi[E]]=z)}const W=Object.keys(bi).length;Object.keys(P).length<W&&console.warn(`Apenas ${Object.keys(P).length} de ${W} dias foram mapeados para ${p.name} [${w}]`),console.log(`Mapeamento de colunas para ${p.name} [${w}]:`,P);const I=N-1,g=6;console.log(`
=== Processando perodo ${w} para ${p.name} ===`),console.log(`Coluna inicial (dias): ${N}, Coluna 'Aulas': ${I}`),console.log(`Linha do cabealho dos dias: ${y.number}`),console.log("Horrios disponveis no perodo:",C);for(let D=0;D<g;D++){const z=a.getRow(y.number+1+D),_=z.getCell(I),U=Fn(_).trim().match(/^(\d+)/);if(U){const O=parseInt(U[1],10)-1;if(O>=0&&O<C.length){const A=C[O];for(const B in P){const te=P[B],ee=z.getCell(te);Fn(ee).trim().toLowerCase()==="x"&&(m[B].includes(A)||m[B].push(A))}}}}}const S=Object.values(m).reduce((w,N)=>w+N.length,0);console.log(`Disponibilidades encontradas para ${p.name}: ${S} horrios.`),f.push({name:p.name,availability:m})}return console.log("Anlise finalizada.",f),f},cp=async()=>{const i=new Oo.Workbook,u=i.addWorksheet("Disponibilidade"),a={name:"Calibri",size:11,bold:!0},f={name:"Calibri",size:14,bold:!0},c={vertical:"middle",horizontal:"center"},p={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},m={manha:{start:2,title:"Dias da Semana Manh"},tarde:{start:10,title:"Dias da Semana Tarde"},noite:{start:18,title:"Dias da Semana Noite"}},v=7,x=m.noite.start+v-1;u.mergeCells(3,2,3,x);const y=u.getCell(3,2);y.value="RELATRIO DE DISPONIBILIDADES DOS DOCENTES",y.font=f,y.alignment=c,u.mergeCells(4,2,4,x),u.getCell(4,2).value="Semestre/ano: 1/2025",u.getCell(4,2).font=a;let S=(N=>{u.mergeCells(N,2,N,x);const C=u.getCell(N,2);C.value={richText:[{text:"Docente: ",font:{name:"Calibri",size:12,bold:!0}},{text:"NOME COMPLETO DO DOCENTE EM MAISCULAS",font:{name:"Calibri",size:12,bold:!0}}]};const P=N+2,H=N+3,W=N+4;return Object.values(m).forEach(I=>{u.mergeCells(P,I.start,P,I.start+v-1);const g=u.getCell(P,I.start);g.value=I.title,g.font=a,g.alignment=c,["Aulas","2","3","4","5","6","Sb"].forEach((z,_)=>{const E=u.getCell(H,I.start+_);E.value=z,E.font=a,E.alignment=c,E.border=p});for(let z=0;z<6;z++){const _=W+z,E=u.getCell(_,I.start);E.value=`${z+1}`,E.font=a,E.alignment=c,E.border=p;for(let U=1;U<v;U++){const O=u.getCell(_,I.start+U);O.border=p,O.alignment=c,I.start===m.manha.start&&z<2&&U<3&&(O.value="X")}}}),W+6})(5);u.mergeCells(S+1,2,S+1,x);const w=u.getCell(S+1,2);return w.value="Para adicionar mais professores, copie o bloco acima (linhas 5 a 15) e cole abaixo, depois preencha os dados.",w.font={italic:!0,color:{argb:"FF666666"}},u.getColumn(1).width=2,u.getColumn(9).width=2,u.getColumn(17).width=2,Object.values(m).forEach(N=>{u.getColumn(N.start).width=8;for(let C=1;C<v;C++)u.getColumn(N.start+C).width=5}),i},Sd=i=>i.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\s+/g," ").trim(),fp=()=>{const{state:i,dispatch:u}=lt(),[a,f]=R.useState("upload"),[c,p]=R.useState(null),[m,v]=R.useState([]),[x,y]=R.useState(!1),[h,S]=R.useState(null),w=g=>{const D=g.target.files?.[0];D&&(p(D),S(null))},N=async()=>{try{const D=await(await cp()).xlsx.writeBuffer(),z=new Blob([D],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),_=URL.createObjectURL(z),E=document.createElement("a");E.href=_,E.download="modelo_disponibilidade.xlsx",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(_)}catch(g){console.error("Error generating template:",g),S("No foi possvel gerar o modelo de planilha.")}},C=()=>{if(!c){S("Por favor, selecione um arquivo Excel.");return}y(!0),S(null);const g=new FileReader;g.onload=async D=>{try{const z=D.target?.result,_=await dp(z);if(_.length===0)throw new Error("Nenhum professor encontrado na planilha. Verifique se o formato est correto ou use o modelo.");const E=i.professores,U=_.map(O=>{const A=E.find(B=>Sd(B.nome)===Sd(O.name));return{parsed:O,matchId:A?A.id:"not_found"}});v(U),f("validate")}catch(z){S(z.message||"Ocorreu um erro ao analisar a planilha. Verifique se o formato est correto."),console.error(z)}finally{y(!1)}},g.onerror=()=>{S("No foi possvel ler o arquivo."),y(!1)},g.readAsArrayBuffer(c)},P=(g,D)=>{const z=[...m];z[g].matchId=D,v(z)},H=()=>{const g=[];m.forEach(D=>{if(D.matchId!=="not_found"&&D.matchId!=="ignore"){const z=i.professores.find(_=>_.id===D.matchId);z&&g.push({...z,disponibilidade:D.parsed.availability})}}),g.length>0?(u({type:"BATCH_UPDATE_PROFESSORS",payload:{professors:g}}),f("success")):S("Nenhum professor foi selecionado para atualizao. Verifique os pareamentos.")},W=()=>{p(null),v([]),S(null),y(!1),f("upload")},I=R.useMemo(()=>[...i.professores].sort((g,D)=>g.nome.localeCompare(D.nome)),[i.professores]);return s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Importar Disponibilidade de Professores (Excel)"}),a==="upload"&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Instrues"}),s.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-600 mt-2 space-y-1",children:[s.jsx("li",{children:"Baixe o modelo de planilha para garantir o formato correto."}),s.jsx("li",{children:"Preencha a planilha com os dados de disponibilidade dos professores, marcando 'X' nos horrios disponveis."}),s.jsx("li",{children:"Salve a planilha e selecione o arquivo abaixo."}),s.jsx("li",{children:'Clique em "Analisar Planilha" para continuar.'})]})]}),s.jsx("div",{className:"flex justify-start",children:s.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Baixar Modelo de Planilha"]})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"excel-upload-label",className:"block text-sm font-medium text-gray-700 mb-1",children:"Arquivo Excel (.xlsx)"}),s.jsxs("div",{className:"mt-1 flex items-center space-x-3",children:[s.jsx("label",{htmlFor:"excel-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Escolher arquivo"}),s.jsx("input",{id:"excel-upload",name:"excel-upload",type:"file",accept:".xlsx",onChange:w,className:"sr-only"}),c?s.jsx("span",{className:"text-sm text-gray-600",children:c.name}):s.jsx("span",{className:"text-sm text-gray-500",children:"Nenhum arquivo selecionado"})]})]}),h&&s.jsx("p",{className:"text-sm text-red-600",children:h}),s.jsx("div",{className:"flex justify-end",children:s.jsx("button",{onClick:C,disabled:!c||x,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-gray-400",children:x?"Analisando...":"Analisar Planilha"})})]}),a==="validate"&&m.length>0&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"Passo 2: Validar Pareamento"}),s.jsx("p",{className:"text-sm text-gray-600",children:"O sistema tentou parear os professores da planilha com os do sistema. Por favor, revise e ajuste os pareamentos. A disponibilidade dos professores selecionados ser **substituda**."}),h&&s.jsx("p",{className:"text-sm text-red-600",children:h}),s.jsx("div",{className:"overflow-x-auto border rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome na Planilha"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Professor no Sistema"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m.map((g,D)=>s.jsxs("tr",{className:g.matchId==="not_found"?"bg-yellow-50":g.matchId==="ignore"?"bg-gray-100 opacity-60":"",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g.parsed.name}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsxs("select",{value:g.matchId,onChange:z=>P(D,z.target.value),className:"w-full p-2 border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",children:[g.matchId==="not_found"&&s.jsx("option",{value:"not_found",children:"-- Nenhum professor encontrado --"}),s.jsx("option",{value:"ignore",children:"Ignorar este professor"}),I.map(z=>s.jsx("option",{value:z.id,children:z.nome},z.id))]})})]},D))})]})}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx("button",{onClick:W,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{onClick:H,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:"Confirmar e Atualizar"})]})]}),a==="success"&&s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow text-center space-y-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-green-700",children:"Importao Concluda!"}),s.jsx("p",{children:'A disponibilidade dos professores selecionados foi atualizada com sucesso. Voc pode verificar as mudanas na aba "Professores".'}),s.jsx("button",{onClick:W,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Importar Nova Planilha"})]})]})},pp=()=>{const[i,u]=R.useState("cursos"),a=()=>{switch(i){case"cursos":return s.jsx(ep,{});case"turmas":return s.jsx(tp,{});case"disciplinas":return s.jsx(np,{});case"professores":return s.jsx(op,{});case"atribuicoes":return s.jsx(lp,{});case"importar-html":return s.jsx(up,{});case"importar-disp-excel":return s.jsx(fp,{});default:return null}},f=({tabName:c,label:p,disabled:m})=>s.jsx("button",{onClick:()=>u(c),disabled:m,title:m?"Funo em desenvolvimento":"",className:`px-4 py-2 text-sm font-medium border-b-2 ${i===c?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"} disabled:opacity-50 disabled:cursor-not-allowed disabled:text-gray-400 disabled:hover:border-transparent`,children:p});return s.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden bg-white",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"-mb-px flex space-x-4 px-4 overflow-x-auto","aria-label":"Tabs",children:[s.jsx(f,{tabName:"cursos",label:"Cursos"}),s.jsx(f,{tabName:"turmas",label:"Turmas"}),s.jsx(f,{tabName:"disciplinas",label:"Disciplinas"}),s.jsx(f,{tabName:"professores",label:"Professores"}),s.jsx(f,{tabName:"atribuicoes",label:"Atribuies"}),s.jsx(f,{tabName:"importar-html",label:"Importar SIG (HTML)"}),s.jsx(f,{tabName:"importar-disp-excel",label:"Importar Disp. (Excel)",disabled:!0})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:a()})]})},mp=({professorId:i})=>{const{state:u}=lt(),{professores:a,grade:f,turmas:c,disciplinas:p}=u,m=a.find(w=>w.id===i);if(!m)return s.jsx("div",{className:"p-4 text-red-500",children:"Professor no encontrado."});const v=f.filter(w=>w.professorId===i),x=R.useMemo(()=>v.reduce((w,N)=>{const P=c.find(H=>H.id===N.turmaId)?.isModular?1.25:1;return w+P},0),[v,c]),y={};v.forEach(w=>{y[w.dia]||(y[w.dia]={});const N=c.find(P=>P.id===w.turmaId)?.nome||"N/A",C=p.find(P=>P.id===w.disciplinaId)?.nome||"N/A";y[w.dia][w.horario]={turma:N,disciplina:C}});const h=R.useMemo(()=>_e.reduce((w,N)=>{const C=v.filter(P=>P.dia===N).reduce((P,H)=>{const I=c.find(g=>g.id===H.turmaId)?.isModular?1.25:1;return P+I},0);return w[N]=C,w},{}),[v,c]),S=R.useMemo(()=>{const w=[...new Set([...Cr,...zn])].sort();return[...st,...ot,...w]},[]);return s.jsx("div",{className:"bg-white shadow-lg rounded-lg overflow-auto border border-gray-200",children:s.jsxs("div",{className:"grid",style:{gridTemplateColumns:"80px repeat(5, minmax(150px, 1fr))"},children:[s.jsxs("div",{className:"row-span-2 p-2 border-b-2 border-r border-gray-300 bg-gray-100 flex flex-col items-center justify-center text-center",children:[s.jsx("span",{className:"font-bold text-2xl",children:x}),s.jsx("span",{className:"text-xs text-gray-600",children:"Aulas"})]}),s.jsx("div",{className:"col-span-5 p-4 border-b-2 border-gray-300 bg-gray-200 text-center text-xl font-bold text-gray-800 flex items-center justify-center",children:m.nome}),s.jsx("div",{className:"col-start-2 col-span-5 grid grid-cols-5",children:_e.map((w,N)=>s.jsx("div",{className:`p-2 border-b-2 bg-gray-100 text-center font-semibold capitalize ${N<_e.length-1?"border-r":""} border-gray-300`,children:w.split("").join(" ")},w))}),S.map((w,N)=>{const C=st[st.length-1]===w,P=ot[ot.length-1]===w,H=C||P,W=N===S.length-1;return s.jsxs(un.Fragment,{children:[s.jsxs("div",{className:"contents",children:[s.jsx("div",{className:`p-2 border-r border-gray-300 bg-gray-50 text-xs text-center font-medium flex items-center justify-center ${W?"":"border-b"}`,children:w}),_e.map((I,g)=>{const D=y[I]?.[w];return s.jsx("div",{className:`p-2 min-h-[50px] ${g<_e.length-1?"border-r":""} ${W?"":"border-b"} border-gray-200`,children:D&&s.jsxs("div",{className:"text-xs bg-indigo-100 p-1 rounded",children:[s.jsx("p",{className:"font-bold truncate",children:D.disciplina}),s.jsx("p",{className:"text-gray-600 truncate",children:D.turma})]})},`${I}-${w}`)})]}),H&&!W&&s.jsx("div",{className:"col-span-6 h-2 bg-gray-200 border-b border-gray-300"})]},w)}),s.jsx("div",{className:"p-2 border-r border-t border-gray-300 bg-gray-100 font-bold text-center flex items-center justify-center",children:"Carga Diria"}),_e.map((w,N)=>s.jsx("div",{className:`p-2 bg-gray-100 text-center font-bold border-t ${N<_e.length-1?"border-r":""} border-gray-200`,children:h[w]||0},`total-${w}`))]})})},hp=()=>{const{state:i,dispatch:u}=lt(),{professores:a,grade:f,turmas:c,disciplinas:p}=i,m=R.useMemo(()=>[...a].sort((g,D)=>g.nome.localeCompare(D.nome)),[a]),[v,x]=R.useState(""),[y,h]=R.useState(!1),[S,w]=R.useState({current:0,total:0}),N=R.useMemo(()=>v.trim()?m.filter(g=>g.nome.toLowerCase().includes(v.toLowerCase())):m,[m,v]),[C,P]=R.useState(m[0]?.id||"");R.useEffect(()=>{N.some(D=>D.id===C)||P(N[0]?.id||"")},[v,N,C]),R.useEffect(()=>{!C&&m.length>0&&P(m[0].id)},[m,C]);const H=()=>{const g=a.find(D=>D.id===C);if(!g){u({type:"SHOW_TOAST",payload:"Professor no selecionado."});return}try{const{doc:D,error:z}=yd(g,f,c,p);if(z||!D){u({type:"SHOW_TOAST",payload:z||"Erro ao gerar PDF."});return}const E=`horario_${g.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`;D.save(E)}catch(D){console.error("Error generating PDF:",D),u({type:"SHOW_TOAST",payload:"Erro ao gerar o PDF."})}},W=()=>{if(!C){u({type:"SHOW_TOAST",payload:"Professor no selecionado."});return}u({type:"SHOW_TOAST",payload:"Gerando arquivo XLSX..."}),setTimeout(()=>{try{const{workbook:g,error:D}=Gf(i,C);if(D||!g){u({type:"SHOW_TOAST",payload:D||"Erro desconhecido ao gerar XLSX."});return}g.xlsx.writeBuffer().then(z=>{const _=new Blob([z],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),E=URL.createObjectURL(_),U=a.find(B=>B.id===C),O=U?U.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase():"professor",A=document.createElement("a");A.setAttribute("href",E),A.setAttribute("download",`horario_${O}.xlsx`),document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(E),u({type:"SHOW_TOAST",payload:"Exportao para XLSX concluda!"})}).catch(z=>{console.error("Error writing XLSX buffer:",z),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})})}catch(g){console.error("Error generating XLSX file:",g),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo XLSX."})}},50)},I=async()=>{const g=[...new Set(f.map(_=>_.professorId))],D=m.filter(_=>g.includes(_.id));if(D.length===0){u({type:"SHOW_TOAST",payload:"Nenhum professor com aulas na grade para exportar."});return}const z=new wf;h(!0),w({current:0,total:D.length}),u({type:"SHOW_TOAST",payload:`Iniciando exportao de ${D.length} horrios...`});for(const[_,E]of D.entries()){w({current:_+1,total:D.length});try{const{doc:U,error:O}=yd(E,f,c,p);if(U){const B=`horario_${E.nome.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`,te=U.output("blob");z.file(B,te)}}catch(U){console.error(`Error generating PDF for ${E.nome}:`,U)}await new Promise(U=>setTimeout(U,0))}u({type:"SHOW_TOAST",payload:"Gerando arquivo ZIP..."});try{const _=await z.generateAsync({type:"blob"}),E=document.createElement("a");E.href=URL.createObjectURL(_),E.download="horarios_professores.zip",document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(E.href),u({type:"SHOW_TOAST",payload:"Exportao para ZIP concluda!"})}catch(_){console.error("Error generating ZIP file:",_),u({type:"SHOW_TOAST",payload:"Erro ao gerar o arquivo ZIP."})}finally{h(!1)}};return s.jsxs("div",{className:"flex-1 flex flex-col overflow-auto bg-gray-50 p-4",children:[s.jsxs("header",{className:"mb-4",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Grade por Professor"}),s.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row sm:items-end sm:justify-between",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"professor-search",className:"block text-sm font-medium text-gray-700",children:"Buscar Professor"}),s.jsx("input",{type:"text",id:"professor-search",value:v,onChange:g=>x(g.target.value),placeholder:"Digite o nome...",className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"professor-select",className:"block text-sm font-medium text-gray-700",children:"Selecione um Professor"}),s.jsx("select",{id:"professor-select",value:C,onChange:g=>P(g.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md",children:N.length>0?N.map(g=>s.jsx("option",{value:g.id,children:g.nome},g.id)):s.jsx("option",{value:"",disabled:!0,children:"Nenhum professor encontrado"})})]})]}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[s.jsxs("button",{onClick:I,disabled:y,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),y?`Gerando ${S.current}/${S.total}...`:"Exportar Todos (ZIP)"]}),s.jsxs("button",{onClick:W,disabled:!C||y,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[s.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),s.jsx("polyline",{points:"14 2 14 8 20 8"}),s.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),s.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),s.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"Exportar Selecionado (XLSX)"]}),s.jsxs("button",{onClick:H,disabled:!C||y,className:"w-full sm:w-auto inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Exportar Selecionado (PDF)"]})]})]})]}),s.jsx("main",{className:"flex-1 overflow-auto",children:C?s.jsx(mp,{professorId:C}):s.jsx("div",{className:"flex items-center justify-center h-full bg-white rounded-lg shadow",children:s.jsx("p",{className:"text-gray-500",children:a.length===0?"Nenhum professor cadastrado.":"Por favor, selecione um professor para visualizar a grade de horrios."})})})]})},dn=({tooltipText:i,children:u})=>s.jsxs("div",{className:"relative group flex items-center",children:[u,s.jsxs("div",{className:"absolute bottom-full left-1/2 -translate-x-1/2 mb-2 w-64 p-2 text-xs text-white bg-gray-800 rounded-md shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10",children:[i,s.jsx("svg",{className:"absolute text-gray-800 h-2 w-full left-0 top-full",x:"0px",y:"0px",viewBox:"0 0 255 255",children:s.jsx("polygon",{className:"fill-current",points:"0,0 127.5,127.5 255,0"})})]})]}),Ao=({title:i,value:u,icon:a,colorClass:f,tooltipText:c})=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow flex items-center",children:[s.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${f} mr-4 flex-shrink-0`,children:a}),s.jsxs("div",{children:[s.jsx(dn,{tooltipText:c,children:s.jsxs("div",{className:"text-sm font-medium text-gray-500 flex items-center gap-1 cursor-help",children:[i,s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s.jsx("div",{className:"text-2xl font-bold text-gray-800",children:u})]})]}),gp=({completionPercentage:i,criticalAlerts:u,activeProfessors:a,totalTurmas:f})=>s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Ao,{title:"Preenchimento da Grade",value:`${i.toFixed(1)}%`,tooltipText:"Percentual de aulas alocadas na grade em relao ao total de aulas semanais necessrias para todas as disciplinas desta modalidade.",colorClass:"bg-blue-100 text-blue-600",icon:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx(Ao,{title:"Alertas Crticos",value:String(u),tooltipText:"Nmero de conflitos de horrio de professor (mesmo professor em duas turmas ao mesmo tempo). Estes so os alertas mais graves e devem ser resolvidos com prioridade.",colorClass:"bg-red-100 text-red-600",icon:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx(Ao,{title:"Professores Ativos",value:String(a),tooltipText:"Nmero de professores nicos que possuem pelo menos uma aula alocada nesta grade de horrios.",colorClass:"bg-green-100 text-green-600",icon:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),s.jsx(Ao,{title:"Total de Turmas",value:String(f),tooltipText:"Nmero total de turmas cadastradas para esta modalidade (Regular ou Modular).",colorClass:"bg-purple-100 text-purple-600",icon:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[s.jsx("path",{d:"M12 14l9-5-9-5-9 5 9 5z"}),s.jsx("path",{d:"M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222 4 2.222V20"})]})})]}),xp=({segments:i})=>{const u=i.reduce((p,m)=>p+m.value,0);if(u===0)return s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 120 120",children:[s.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#e5e7eb",strokeWidth:"20"}),s.jsx("text",{x:"60",y:"60",textAnchor:"middle",dominantBaseline:"central",className:"transform rotate-90",fontSize:"14",fill:"#9ca3af",children:"Sem Alertas"})]})});const a=50,f=2*Math.PI*a;let c=0;return s.jsx("svg",{className:"w-48 h-48 transform -rotate-90",viewBox:"0 0 120 120",children:i.map((p,m)=>{const v=p.value/u*f,x=s.jsx("circle",{cx:"60",cy:"60",r:a,fill:"none",stroke:p.color,strokeWidth:"20",strokeDasharray:`${v} ${f}`,strokeDashoffset:-c},m);return c+=v,x})})},yp=({data:i})=>{const u=Object.entries(i).map(([p,m])=>({type:p,value:m,color:ln[p].bg.replace("bg-",""),name:ln[p].name})),a={"pink-600":"#db2777","blue-500":"#3b82f6","red-600":"#dc2626","orange-400":"#fb923c","purple-500":"#a855f7","yellow-400":"#facc15"},f=u.map(p=>({value:p.value,color:a[p.color]||"#9ca3af"})),c=u.reduce((p,m)=>p+m.value,0);return s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s.jsx(dn,{tooltipText:"Distribuio dos tipos de alertas encontrados na grade. Alertas so problemas como conflitos de horrio, excesso de aulas, etc.",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Anlise de Alertas",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s.jsxs("div",{className:"flex-1 flex flex-col md:flex-row items-center gap-4 mt-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(xp,{segments:f}),s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[s.jsx("span",{className:"text-3xl font-bold text-gray-800",children:c}),s.jsx("span",{className:"text-sm text-gray-500",children:"Total"})]})]}),s.jsx("div",{className:"flex-1 space-y-2 text-sm w-full",children:u.sort((p,m)=>m.value-p.value).map(p=>s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:`w-3 h-3 rounded-full mr-2 ${ln[p.type].bg}`}),s.jsx("span",{className:"text-gray-600",children:p.name})]}),s.jsx("span",{className:"font-semibold text-gray-800",children:p.value})]},p.type))})]})]})},vp=({data:i})=>{const u=i.slice(0,10),a=Math.max(8,...u.map(f=>f.aulas));return s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s.jsx(dn,{tooltipText:"Exibe os professores com a maior quantidade de aulas alocadas. As cores indicam a carga: Normal (azul), Alta (amarelo, >6 aulas) ou Sobrecarga (vermelho, >8 aulas).",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Carga Horria dos Professores (Top 10)",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s.jsx("div",{className:"flex-1 space-y-3 pr-4 mt-4",children:u.length>0?u.map((f,c)=>{const p=f.aulas/a*100;let m="bg-blue-500";return f.aulas>8?m="bg-red-500":f.aulas>6&&(m="bg-yellow-500"),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsx("div",{className:"w-1/3 truncate text-gray-600",title:f.nome,children:f.nome}),s.jsxs("div",{className:"w-2/3 flex items-center",children:[s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-5",children:s.jsx("div",{className:`h-5 rounded-full ${m} transition-all duration-500 ease-out`,style:{width:`${p}%`}})}),s.jsx("span",{className:"ml-3 font-semibold text-gray-800 w-8 text-right",children:f.aulas})]})]},c)}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Nenhuma aula alocada na grade."})})]})},wp=({data:i})=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s.jsx(dn,{tooltipText:"Progresso de alocao de aulas para cada turma. Mostra quantas aulas j foram inseridas na grade em comparao com o total necessrio para a turma.",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Status de Preenchimento por Turma",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s.jsx("div",{className:"flex-1 overflow-y-auto pr-2 space-y-3 mt-4",children:i.length>0?i.map(u=>{const a=u.total>0?u.alocadas/u.total*100:0;return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[s.jsx("span",{className:"font-medium text-gray-700 truncate",title:u.nome,children:u.nome}),s.jsxs("span",{className:"text-gray-500",children:[u.alocadas.toFixed(2)," / ",u.total.toFixed(2)]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:s.jsx("div",{className:"bg-green-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${a}%`}})})]},u.id)}):s.jsx("div",{className:"flex items-center justify-center h-full text-gray-500",children:"Nenhuma turma para exibir."})})]}),Sp=({data:i})=>{const{manha:u,tarde:a,noite:f}=i,p=u+a+f>0?Math.max(u,a,f):1,m=({label:v,value:x,colorClass:y})=>{const h=p>0?x/p*100:0;return s.jsxs("div",{className:"flex flex-col items-center flex-1",children:[s.jsx("div",{className:"w-full h-40 flex items-end justify-center",children:s.jsx("div",{className:`w-10 rounded-t-md ${y} transition-all duration-500 ease-out`,style:{height:`${h}%`},title:`${v}: ${x} aulas`})}),s.jsx("div",{className:"text-xs font-semibold text-gray-600 mt-2",children:v}),s.jsx("div",{className:"text-sm font-bold text-gray-800",children:x})]})};return s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s.jsx(dn,{tooltipText:"Distribuio do nmero de aulas alocadas em cada perodo. Ajuda a visualizar o equilbrio da ocupao da grade entre manh, tarde e noite.",children:s.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-1 cursor-help",children:["Ocupao por Perodo",s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),s.jsxs("div",{className:"flex-1 flex items-end justify-around gap-4 mt-4",children:[s.jsx(m,{label:"Manh",value:u,colorClass:"bg-yellow-400"}),s.jsx(m,{label:"Tarde",value:a,colorClass:"bg-blue-400"}),s.jsx(m,{label:"Noite",value:f,colorClass:"bg-indigo-500"})]})]})},jp=({unassignedDisciplines:i,unassignedProfessors:u})=>s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow h-full flex flex-col",children:[s.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Insights Rpidos"}),s.jsxs("div",{className:"flex-1 space-y-4 overflow-y-auto",children:[s.jsxs("div",{children:[s.jsx(dn,{tooltipText:"Lista de disciplinas da grade selecionada (Regular ou Modular) que ainda no tm nenhum professor atribudo na tela de Gerenciamento.",children:s.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center cursor-help",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-orange-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Disciplinas Sem Atribuio (",i.length,")"]})}),i.length>0?s.jsx("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside pl-7 max-h-24 overflow-y-auto",children:i.map(a=>s.jsx("li",{className:"truncate",title:a.nome,children:a.nome},a.id))}):s.jsx("p",{className:"mt-1 text-sm text-gray-500 pl-7",children:"Todas as disciplinas foram atribudas."})]}),s.jsxs("div",{children:[s.jsx(dn,{tooltipText:"Lista de professores cadastrados no sistema que no foram atribudos a NENHUMA disciplina, seja na grade Regular ou na Modular. Ajuda a identificar professores pendentes de configurao.",children:s.jsxs("h4",{className:"font-semibold text-gray-700 flex items-center cursor-help",children:[s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Professores Sem Aulas (",u.length,")"]})}),u.length>0?s.jsx("ul",{className:"mt-2 text-sm text-gray-600 list-disc list-inside pl-7 max-h-24 overflow-y-auto",children:u.map(a=>s.jsx("li",{className:"truncate",title:a.nome,children:a.nome},a.id))}):s.jsx("p",{className:"mt-1 text-sm text-gray-500 pl-7",children:"Todos os professores foram atribudos a alguma disciplina."})]})]})]}),Cp=()=>{const{state:i}=lt(),[u,a]=R.useState("regular"),f=R.useMemo(()=>{const p=u==="modular",m=i.turmas.filter(N=>N.isModular===p),v=new Set(m.map(N=>N.id)),x=i.disciplinas.filter(N=>v.has(N.turmaId)),y=new Set(x.map(N=>N.id)),h=i.atribuicoes.filter(N=>y.has(N.disciplinaId)),S=i.grade.filter(N=>v.has(N.turmaId)),w=i.alertas.filter(N=>N.gradeSlotIds.some(C=>{const P=C.split("_")[0];return v.has(P)}));return{turmas:m,disciplinas:x,atribuicoes:h,grade:S,alertas:w,professores:i.professores}},[u,i]),c=R.useMemo(()=>{const{turmas:p,disciplinas:m,atribuicoes:v,grade:x,alertas:y}=f,h=m.reduce((A,B)=>A+B.aulasSemanais,0),S=new Map;x.forEach(A=>{const B=`${A.turmaId}_${A.dia}_${A.horario}`;if(!S.has(B)){const{finalDisciplinaId:te}=Ed(A,i);S.set(B,{disciplinaId:te,turmaId:A.turmaId})}});const w=new Map;S.forEach(A=>{const te=p.find(de=>de.id===A.turmaId)?.isModular?1.25:1,ee=w.get(A.disciplinaId)||0;w.set(A.disciplinaId,ee+te)});let N=0;w.forEach(A=>{N+=A});const C=h>0?N/h*100:0,P=y.reduce((A,B)=>(A[B.tipo]=(A[B.tipo]||0)+1,A),{}),H=P[Lt.ProfessorConflitoHorario]||0,W=new Set(x.map(A=>A.professorId)),I=new Map;x.forEach(A=>{const B=i.professores.find(de=>de.id===A.professorId);if(!B)return;const ee=p.find(de=>de.id===A.turmaId)?.isModular??!1?1.25:1;I.has(B.id)||I.set(B.id,{nome:B.nome,aulas:0}),I.get(B.id).aulas+=ee});const g=Array.from(I.values()).sort((A,B)=>B.aulas-A.aulas),D=p.map(A=>{const B=m.filter(de=>de.turmaId===A.id),te=B.reduce((de,pe)=>de+pe.aulasSemanais,0);let ee=0;return B.forEach(de=>{ee+=w.get(de.id)||0}),{id:A.id,nome:A.nome,alocadas:ee,total:te}}).sort((A,B)=>(A.alocadas/A.total||0)-(B.alocadas/B.total||0)),z={manha:0,tarde:0,noite:0};S.forEach(A=>{const B=x.find(ee=>ee.turmaId===A.turmaId&&ee.disciplinaId===A.disciplinaId);if(!B)return;const te=B.horario;st.includes(te)?z.manha++:ot.includes(te)?z.tarde++:z.noite++});const _=new Set(v.map(A=>A.disciplinaId)),E=m.filter(A=>!_.has(A.id)),U=new Set(i.atribuicoes.flatMap(A=>A.professores)),O=i.professores.filter(A=>!U.has(A.id));return{completionPercentage:C,criticalAlertCount:H,activeProfessorCount:W.size,turmaCount:p.length,alertCounts:P,professorLoadData:g,turmaCompletionData:D,periodDistribution:z,unassignedDisciplines:E,unassignedProfessors:O}},[f,i]);return s.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-100 p-4 lg:p-6",children:[s.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Painel de Controle"}),s.jsx("div",{className:"mt-4 md:mt-0",children:s.jsxs("div",{className:"flex items-center bg-gray-200 rounded-md p-1",children:[s.jsx("button",{onClick:()=>a("regular"),className:`px-4 py-2 text-sm font-medium rounded-md ${u==="regular"?"bg-indigo-600 text-white shadow":"text-gray-700 hover:bg-gray-300"}`,children:"Grade Regular"}),s.jsx("button",{onClick:()=>a("modular"),className:`px-4 py-2 text-sm font-medium rounded-md ${u==="modular"?"bg-indigo-600 text-white shadow":"text-gray-700 hover:bg-gray-300"}`,children:"Grade Modular"})]})})]}),s.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[s.jsx("div",{className:"col-span-12",children:s.jsx(gp,{completionPercentage:c.completionPercentage,criticalAlerts:c.criticalAlertCount,activeProfessors:c.activeProfessorCount,totalTurmas:c.turmaCount})}),s.jsx("div",{className:"col-span-12 lg:col-span-4",children:s.jsx(yp,{data:c.alertCounts})}),s.jsx("div",{className:"col-span-12 lg:col-span-8",children:s.jsx(vp,{data:c.professorLoadData})}),s.jsx("div",{className:"col-span-12 lg:col-span-5",children:s.jsx(wp,{data:c.turmaCompletionData})}),s.jsx("div",{className:"col-span-12 lg:col-span-3",children:s.jsx(Sp,{data:c.periodDistribution})}),s.jsx("div",{className:"col-span-12 lg:col-span-4",children:s.jsx(jp,{unassignedDisciplines:c.unassignedDisciplines,unassignedProfessors:c.unassignedProfessors})})]})]})},Np=({message:i,onClose:u})=>(R.useEffect(()=>{const a=setTimeout(()=>{u()},3e3);return()=>clearTimeout(a)},[u]),s.jsxs("div",{className:"fixed bottom-5 left-1/2 -translate-x-1/2 z-50",children:[s.jsxs("div",{className:"bg-gray-800 text-white font-bold py-2 px-4 rounded-lg shadow-lg flex items-center animate-fade-in-up",children:[s.jsx("span",{className:"mr-3",children:i}),s.jsx("button",{onClick:u,className:"text-gray-300 hover:text-white leading-none text-2xl",children:""})]}),s.jsx("style",{children:`
        @keyframes fade-in-up {
          0% {
            opacity: 0;
            transform: translate(-50%, 10px);
          }
          100% {
            opacity: 1;
            transform: translate(-50%, 0);
          }
        }
        .animate-fade-in-up {
          animation: fade-in-up 0.3s ease-out forwards;
        }
      `})]})),bp=({isOpen:i,onClose:u})=>{const{dispatch:a}=lt(),[f,c]=R.useState(""),p=f==="DELETE";R.useEffect(()=>{i||c("")},[i]);const m=()=>{if(p)try{a({type:"CLEAR_DATA"})}finally{window.location.reload()}};return s.jsx(Gr,{isOpen:i,onClose:u,title:"Apagar Todos os Dados",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Ateno:"})," Esta ao  irreversvel. Todos os cursos, turmas, disciplinas, professores, atribuies e a grade de horrios sero permanentemente apagados."]}),s.jsxs("p",{className:"text-sm text-gray-700",children:["Para confirmar, por favor, digite ",s.jsx("strong",{children:"DELETE"})," no campo abaixo."]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirm-delete",className:"sr-only",children:"Confirmar excluso"}),s.jsx("input",{type:"text",id:"confirm-delete",value:f,onChange:v=>c(v.target.value),className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"DELETE",autoComplete:"off"})]}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:m,disabled:!p,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:bg-red-300 disabled:cursor-not-allowed",children:"Apagar Tudo"})]})]})})},kp=({isOpen:i,onClose:u})=>{const{dispatch:a}=lt(),f=async()=>{try{const c=await fetch("/mock-data.json");if(!c.ok)throw new Error(`HTTP error! status: ${c.status}`);const p=await c.json();if(p&&p.version&&Array.isArray(p.cursos))a({type:"SET_STATE",payload:p}),a({type:"SHOW_TOAST",payload:"Dados de exemplo carregados com sucesso!"});else throw new Error("Arquivo de exemplo invlido.")}catch(c){console.error("Erro ao carregar dados de exemplo:",c),a({type:"SHOW_TOAST",payload:"Falha ao carregar dados de exemplo."})}finally{u()}};return s.jsx(Gr,{isOpen:i,onClose:u,title:"Carregar Dados de Exemplo",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-sm text-gray-700",children:[s.jsx("strong",{children:"Ateno:"})," Esta ao ir substituir todos os dados atuais pelos dados de exemplo."]}),s.jsx("p",{className:"text-sm text-gray-700",children:"Qualquer trabalho no salvo ser perdido. Deseja continuar?"}),s.jsxs("div",{className:"mt-4 flex justify-end space-x-2",children:[s.jsx("button",{type:"button",onClick:u,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Carregar Exemplo"})]})]})})},Ep=()=>{const[i,u]=R.useState("grid"),[a,f]=R.useState("regular"),[c,p]=R.useState(!1),[m,v]=R.useState(!1),[x,y]=R.useState(!1),[h,S]=R.useState(!1),{state:w,dispatch:N}=lt(),C=()=>{switch(i){case"dashboard":return s.jsx(Cp,{});case"grid":return s.jsxs("div",{className:"flex flex-col flex-1 overflow-hidden",children:[s.jsx("div",{className:"flex-shrink-0 px-4 pt-2 border-b border-gray-200 bg-gray-50",children:s.jsxs("nav",{className:"flex space-x-2","aria-label":"Tabs",children:[s.jsx("button",{onClick:()=>f("regular"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${a==="regular"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Grade Regular"}),s.jsx("button",{onClick:()=>f("modular"),className:`px-3 py-2 font-medium text-sm rounded-t-md ${a==="modular"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:"Grade Modular"})]})}),s.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[s.jsxs("div",{className:"flex-1 flex flex-col overflow-auto",children:[s.jsx(Rf,{isFocusModeEnabled:c,gridType:a}),s.jsx("footer",{className:"bg-white p-2 border-t",children:s.jsx(Zf,{})})]}),s.jsx("aside",{className:`bg-gray-50 border-l border-gray-200 overflow-y-auto flex-shrink-0 transition-all duration-300 ease-in-out ${h?"w-0":"w-64 lg:w-80"}`,children:s.jsx("div",{className:`h-full overflow-hidden ${h?"invisible":"visible"}`,children:s.jsx(Hf,{gridType:a})})})]})]});case"management":return s.jsx(pp,{});case"professor":return s.jsx(hp,{});default:return null}};return s.jsxs("div",{className:"flex flex-col h-screen font-sans text-gray-800",children:[s.jsx("header",{className:"bg-white shadow-md z-20",children:s.jsx(Kf,{currentView:i,setCurrentView:u,activeGrid:a,isFocusModeEnabled:c,onFocusModeChange:p,onOpenClearDataModal:()=>v(!0),onOpenLoadExampleModal:()=>y(!0)})}),s.jsxs("main",{className:"flex flex-1 overflow-hidden relative",children:[C(),i==="grid"&&s.jsx("button",{onClick:()=>S(!h),className:`absolute top-1/2 -translate-y-1/2 z-30 bg-white hover:bg-gray-100 text-gray-600 border border-gray-300 rounded-full w-8 h-8 flex items-center justify-center shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-300 ease-in-out ${h?"right-0 translate-x-1/2":"right-[16rem] lg:right-[20rem] translate-x-1/2"}`,title:h?"Expandir painel":"Recolher painel",children:h?s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})}):s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})})]}),w.toastMessage&&s.jsx(Np,{message:w.toastMessage,onClose:()=>N({type:"SHOW_TOAST",payload:null})}),s.jsx(bp,{isOpen:m,onClose:()=>v(!1)}),s.jsx(kp,{isOpen:x,onClose:()=>y(!1)})]})},Tp=()=>s.jsx(Pf,{children:s.jsx(Ep,{})}),Ip=({onRetry:i})=>{const[u,a]=R.useState(!1),[f,c]=R.useState(null),m="https://console.firebase.google.com/u/0/project/gerenciadorhorario-c62e9/authentication/providers";R.useEffect(()=>{c(window.location.hostname||"domnio no detectado")},[]);const v=()=>{f&&f!=="domnio no detectado"&&navigator.clipboard.writeText(f).then(()=>{a(!0),setTimeout(()=>a(!1),2e3)})};return s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-xl font-bold text-red-700 mb-4 text-center",children:"Configurao Necessria"}),s.jsx("p",{className:"text-sm text-gray-700 mb-4",children:"Para que o login com Google funcione, o domnio que voc est usando para acessar esta aplicao precisa ser autorizado no seu projeto Firebase."}),s.jsxs("div",{className:"bg-red-50 p-3 rounded-md border border-red-200 mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Copie este domnio:"}),s.jsxs("div",{className:"flex items-center justify-between mt-1 gap-2",children:[s.jsx("code",{className:"text-red-800 font-mono bg-red-100 px-2 py-1 rounded w-full break-all h-8 flex items-center",children:f===null?"Carregando...":f}),s.jsx("button",{onClick:v,disabled:!f||f==="domnio no detectado",className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-red-400 flex-shrink-0 disabled:opacity-50 disabled:cursor-not-allowed",children:u?"Copiado!":"Copiar"})]})]}),s.jsx("h4",{className:"font-semibold mb-2 text-gray-800",children:"Como Corrigir:"}),s.jsxs("ol",{className:"list-decimal list-inside text-sm space-y-2 mb-4 text-gray-700",children:[s.jsx("li",{children:"Abra o Console do Firebase (link abaixo)."}),s.jsxs("li",{children:["Navegue at a seo ",s.jsx("strong",{className:"font-semibold",children:"Authentication"}),"."]}),s.jsxs("li",{children:["Clique na aba ",s.jsx("strong",{className:"font-semibold",children:"Sign-in method"}),"."]}),s.jsxs("li",{children:["Role para baixo at a seo ",s.jsx("strong",{className:"font-semibold",children:"Authorized domains"}),"."]}),s.jsxs("li",{children:["Clique em ",s.jsx("strong",{className:"font-semibold",children:"Add domain"})," e cole o domnio copiado."]})]}),s.jsxs("div",{className:"space-y-3 mt-6",children:[s.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Abrir Firebase Console"}),s.jsx("button",{onClick:i,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Tentar Novamente"})]})]})},Dp=()=>{const[i,u]=R.useState("loading"),[a,f]=R.useState(null),[c,p]=R.useState(null),m=async()=>{const y=new window.firebase.auth.GoogleAuthProvider;u("loading"),p(null);try{await ar.signInWithPopup(y)}catch(h){console.error("Firebase login error:",h);let S="Falha ao fazer login. Por favor, tente novamente.";if(h.code)switch(h.code){case"auth/popup-closed-by-user":case"auth/cancelled-popup-request":u("unauthenticated");return;case"auth/popup-blocked":S="O popup de login foi bloqueado pelo seu navegador. Por favor, habilite popups para este site e tente novamente.";break;case"auth/operation-not-allowed":S="O login com Google no est habilitado para este aplicativo. Por favor, contate o administrador.";break;case"auth/unauthorized-domain":p("auth/unauthorized-domain"),u("unauthenticated");return}p(S),u("unauthenticated")}};R.useEffect(()=>{const y=ar.onAuthStateChanged(async h=>{if(u("loading"),h&&h.email){f(h);const S=ir.doc(`allowed_users/${h.email}`);try{(await S.get()).exists?(u("authenticated"),p(null)):u("unauthorized")}catch(w){console.error("Error checking Firestore permissions:",w),w.code==="permission-denied"||w.code==="unauthenticated"?p("Erro de permisso ao verificar usurio. Tente novamente."):p("Erro ao verificar permisses. Tente novamente mais tarde."),u("unauthenticated"),await ar.signOut()}}else f(null),u("unauthenticated"),c!=="auth/unauthorized-domain"&&p(null)});return()=>y()},[c]);const v=async()=>{await ar.signOut(),p(null)};if(i==="authenticated")return s.jsx(Tp,{});const x=()=>{if(c==="auth/unauthorized-domain")return s.jsx(Ip,{onRetry:m});switch(i){case"loading":return s.jsx("p",{className:"text-gray-600 text-center",children:"Verificando..."});case"unauthorized":return s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-center text-red-600 mb-4",children:["Acesso negado. O e-mail ",s.jsx("strong",{children:a?.email})," no tem permisso para acessar este sistema."]}),s.jsx("button",{onClick:v,className:"w-full bg-gray-500 text-white py-2 px-4 rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400",children:"Sair e tentar com outra conta"})]});case"unauthenticated":default:return s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-6",children:"Acesso ao Sistema"}),s.jsx("p",{className:"text-center text-gray-600 mb-6",children:"Por favor, utilize sua conta Google para continuar."}),c&&s.jsx("p",{className:"text-sm text-red-600 mb-4 text-center",children:c}),s.jsxs("button",{onClick:m,className:"w-full flex items-center justify-center bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[s.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 48 48",children:[s.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),s.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.53-4.18 7.13-10.12 7.13-17.65z"}),s.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),s.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"}),s.jsx("path",{fill:"none",d:"M0 0h48v48H0z"})]}),"Entrar com Google"]})]})}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsx("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-sm",children:x()})})},Td=document.getElementById("root");if(!Td)throw new Error("Could not find root element to mount to");const _p=If.createRoot(Td);_p.render(s.jsx(un.StrictMode,{children:s.jsx(Dp,{})}));
